(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[]]);!function(e){function n(n){for(var r,o,s=n[0],l=n[1],c=n[2],u=0,h=[];u<s.length;u++)o=s[u],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&h.push(i[o][0]),i[o]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);for(d&&d(n);h.length;)h.shift()();return a.push.apply(a,c||[]),t()}function t(){for(var e,n=0;n<a.length;n++){for(var t=a[n],r=!0,s=1;s<t.length;s++){var l=t[s];0!==i[l]&&(r=!1)}r&&(a.splice(n--,1),e=o(o.s=t[0]))}return e}var r={},i={1:0},a=[];function o(n){if(r[n])return r[n].exports;var t=r[n]={i:n,l:!1,exports:{}};return e[n].call(t.exports,t,t.exports,o),t.l=!0,t.exports}o.e=function(e){var n=[],t=i[e];if(0!==t)if(t)n.push(t[2]);else{var r=new Promise((function(n,r){t=i[e]=[n,r]}));n.push(t[2]=r);var a,s=document.createElement("script");s.charset="utf-8",s.timeout=120,o.nc&&s.setAttribute("nonce",o.nc),s.src=function(e){return o.p+"assets/js/"+({}[e]||e)+"."+{2:"f9c18778",3:"1aa8173f",4:"53170c6b",5:"11cf5e2d",6:"7f9b813c",7:"a1c08f95",8:"3e033ae5",9:"aa55e2b8",10:"98c2e16c",11:"f274c773",12:"8ff6e722",13:"6fdee710",14:"798d3ca4",15:"e9aa8d0c",16:"f5728593",17:"5f46a514",18:"2bc72be3",19:"074719a8",20:"1adacd3f",21:"a555c86b",22:"3b6a833a",23:"9488cd73",24:"94433776",25:"4ca25297",26:"cf6c380d",27:"ae83e9f3",28:"7082b173",29:"ed1e540c",30:"c1432ade",31:"741aab39",32:"fc8f7480",33:"976437cf",34:"0c10929c",35:"edb5df3a",36:"74f48504",37:"feeb9ee4",38:"d9bec507",39:"31078091",40:"2554457e",41:"4339d6c6",42:"a7868bbd",43:"58caa08c",44:"f861107c",45:"4fc6eb6f",46:"2c4c381f",47:"01e5485c",48:"74c45da6",49:"44a9dcf4",50:"a0d3e5ee",51:"81462aa7",52:"e6d8d09b",53:"6c793198",54:"19314ea9",55:"2215402e",56:"ca16527e",57:"dd87040a",58:"0e98077f",59:"bdaa646d",60:"5d938afb",61:"4b8bbb43",62:"1c197855",63:"d4c1311c",64:"c99e4d08",65:"0648bbd5",66:"3a1f981c",67:"dff59d33",68:"03f1e681"}[e]+".js"}(e);var l=new Error;a=function(n){s.onerror=s.onload=null,clearTimeout(c);var t=i[e];if(0!==t){if(t){var r=n&&("load"===n.type?"missing":n.type),a=n&&n.target&&n.target.src;l.message="Loading chunk "+e+" failed.\n("+r+": "+a+")",l.name="ChunkLoadError",l.type=r,l.request=a,t[1](l)}i[e]=void 0}};var c=setTimeout((function(){a({type:"timeout",target:s})}),12e4);s.onerror=s.onload=a,document.head.appendChild(s)}return Promise.all(n)},o.m=e,o.c=r,o.d=function(e,n,t){o.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,n){if(1&n&&(e=o(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(o.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)o.d(t,r,function(n){return e[n]}.bind(null,r));return t},o.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(n,"a",n),n},o.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},o.p="/ngx_waf-docs/",o.oe=function(e){throw console.error(e),e};var s=window.webpackJsonp=window.webpackJsonp||[],l=s.push.bind(s);s.push=n,s=s.slice();for(var c=0;c<s.length;c++)n(s[c]);var d=l;a.push([208,0]),t()}([function(e,n){var t=function(e){return e&&e.Math==Math&&e};e.exports=t("object"==typeof globalThis&&globalThis)||t("object"==typeof window&&window)||t("object"==typeof self&&self)||t("object"==typeof global&&global)||function(){return this}()||Function("return this")()},function(e,n,t){var r=t(0),i=t(32).f,a=t(26),o=t(16),s=t(89),l=t(133),c=t(122);e.exports=function(e,n){var t,d,u,h,f,p=e.target,m=e.global,g=e.stat;if(t=m?r:g?r[p]||s(p,{}):(r[p]||{}).prototype)for(d in n){if(h=n[d],u=e.noTargetGet?(f=i(t,d))&&f.value:t[d],!c(m?d:p+(g?".":"#")+d,e.forced)&&void 0!==u){if(typeof h==typeof u)continue;l(h,u)}(e.sham||u&&u.sham)&&a(h,"sham",!0),o(t,d,h,e)}}},function(e,n){var t=Function.prototype,r=t.bind,i=t.call,a=r&&r.bind(i,i);e.exports=r?function(e){return e&&a(e)}:function(e){return e&&function(){return i.apply(e,arguments)}}},function(e,n){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,n,t){var r=t(0),i=t(59),a=t(11),o=t(60),s=t(90),l=t(127),c=i("wks"),d=r.Symbol,u=d&&d.for,h=l?d:d&&d.withoutSetter||o;e.exports=function(e){if(!a(c,e)||!s&&"string"!=typeof c[e]){var n="Symbol."+e;s&&a(d,e)?c[e]=d[e]:c[e]=l&&u?u(n):h(n)}return c[e]}},function(e,n){e.exports=function(e){return"function"==typeof e}},function(e,n,t){var r=t(5);e.exports=function(e){return"object"==typeof e?null!==e:r(e)}},function(e,n,t){var r=t(98),i=t(16),a=t(225);r||i(Object.prototype,"toString",a,{unsafe:!0})},function(e,n,t){var r=t(0),i=t(6),a=r.String,o=r.TypeError;e.exports=function(e){if(i(e))return e;throw o(a(e)+" is not an object")}},function(e,n,t){var r=t(3);e.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},function(e,n){var t=Function.prototype.call;e.exports=t.bind?t.bind(t):function(){return t.apply(t,arguments)}},function(e,n,t){var r=t(2),i=t(13),a=r({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,n){return a(i(e),n)}},function(e,n,t){var r=t(0),i=t(9),a=t(129),o=t(128),s=t(8),l=t(63),c=r.TypeError,d=Object.defineProperty,u=Object.getOwnPropertyDescriptor;n.f=i?o?function(e,n,t){if(s(e),n=l(n),s(t),"function"==typeof e&&"prototype"===n&&"value"in t&&"writable"in t&&!t.writable){var r=u(e,n);r&&r.writable&&(e[n]=t.value,t={configurable:"configurable"in t?t.configurable:r.configurable,enumerable:"enumerable"in t?t.enumerable:r.enumerable,writable:!1})}return d(e,n,t)}:d:function(e,n,t){if(s(e),n=l(n),s(t),a)try{return d(e,n,t)}catch(e){}if("get"in t||"set"in t)throw c("Accessors not supported");return"value"in t&&(e[n]=t.value),e}},function(e,n,t){var r=t(0),i=t(30),a=r.Object;e.exports=function(e){return a(i(e))}},function(e,n,t){var r=t(0),i=t(5),a=function(e){return i(e)?e:void 0};e.exports=function(e,n){return arguments.length<2?a(r[e]):r[e]&&r[e][n]}},function(e,n,t){var r=t(44),i=t(30);e.exports=function(e){return r(i(e))}},function(e,n,t){var r=t(0),i=t(5),a=t(11),o=t(26),s=t(89),l=t(67),c=t(31),d=t(84).CONFIGURABLE,u=c.get,h=c.enforce,f=String(String).split("String");(e.exports=function(e,n,t,l){var c,u=!!l&&!!l.unsafe,p=!!l&&!!l.enumerable,m=!!l&&!!l.noTargetGet,g=l&&void 0!==l.name?l.name:n;i(t)&&("Symbol("===String(g).slice(0,7)&&(g="["+String(g).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!a(t,"name")||d&&t.name!==g)&&o(t,"name",g),(c=h(t)).source||(c.source=f.join("string"==typeof g?g:""))),e!==r?(u?!m&&e[n]&&(p=!0):delete e[n],p?e[n]=t:o(e,n,t)):p?e[n]=t:s(n,t)})(Function.prototype,"toString",(function(){return i(this)&&u(this).source||l(this)}))},function(e,n,t){"use strict";var r=t(146).charAt,i=t(20),a=t(31),o=t(132),s=a.set,l=a.getterFor("String Iterator");o(String,"String",(function(e){s(this,{type:"String Iterator",string:i(e),index:0})}),(function(){var e,n=l(this),t=n.string,i=n.index;return i>=t.length?{value:void 0,done:!0}:(e=r(t,i),n.index+=e.length,{value:e,done:!1})}))},function(e,n){var t=Array.isArray;e.exports=t},function(e,n,t){var r=t(160),i="object"==typeof self&&self&&self.Object===Object&&self,a=r||i||Function("return this")();e.exports=a},function(e,n,t){var r=t(0),i=t(57),a=r.String;e.exports=function(e){if("Symbol"===i(e))throw TypeError("Cannot convert a Symbol value to a string");return a(e)}},function(e,n,t){var r=t(83);e.exports=function(e){return r(e.length)}},function(e,n,t){var r=t(2),i=r({}.toString),a=r("".slice);e.exports=function(e){return a(i(e),8,-1)}},function(e,n,t){var r=t(0),i=t(147),a=t(148),o=t(120),s=t(26),l=t(4),c=l("iterator"),d=l("toStringTag"),u=o.values,h=function(e,n){if(e){if(e[c]!==u)try{s(e,c,u)}catch(n){e[c]=u}if(e[d]||s(e,d,n),i[n])for(var t in o)if(e[t]!==o[t])try{s(e,t,o[t])}catch(n){e[t]=o[t]}}};for(var f in i)h(r[f]&&r[f].prototype,f);h(a,"DOMTokenList")},function(e,n){e.exports=!1},function(e,n,t){var r,i=t(8),a=t(121),o=t(94),s=t(46),l=t(131),c=t(62),d=t(66),u=d("IE_PROTO"),h=function(){},f=function(e){return"<script>"+e+"<\/script>"},p=function(e){e.write(f("")),e.close();var n=e.parentWindow.Object;return e=null,n},m=function(){try{r=new ActiveXObject("htmlfile")}catch(e){}var e,n;m="undefined"!=typeof document?document.domain&&r?p(r):((n=c("iframe")).style.display="none",l.appendChild(n),n.src=String("javascript:"),(e=n.contentWindow.document).open(),e.write(f("document.F=Object")),e.close(),e.F):p(r);for(var t=o.length;t--;)delete m.prototype[o[t]];return m()};s[u]=!0,e.exports=Object.create||function(e,n){var t;return null!==e?(h.prototype=i(e),t=new h,h.prototype=null,t[u]=e):t=m(),void 0===n?t:a.f(t,n)}},function(e,n,t){var r=t(9),i=t(12),a=t(40);e.exports=r?function(e,n,t){return i.f(e,n,a(1,t))}:function(e,n,t){return e[n]=t,e}},function(e,n,t){var r=t(0),i=t(5),a=t(64),o=r.TypeError;e.exports=function(e){if(i(e))return e;throw o(a(e)+" is not a function")}},function(e,n,t){var r=t(257),i=t(260);e.exports=function(e,n){var t=i(e,n);return r(t)?t:void 0}},function(e,n,t){"use strict";var r=t(1),i=t(87);r({target:"RegExp",proto:!0,forced:/./.exec!==i},{exec:i})},function(e,n,t){var r=t(0).TypeError;e.exports=function(e){if(null==e)throw r("Can't call method on "+e);return e}},function(e,n,t){var r,i,a,o=t(211),s=t(0),l=t(2),c=t(6),d=t(26),u=t(11),h=t(88),f=t(66),p=t(46),m=s.TypeError,g=s.WeakMap;if(o||h.state){var v=h.state||(h.state=new g),y=l(v.get),w=l(v.has),b=l(v.set);r=function(e,n){if(w(v,e))throw new m("Object already initialized");return n.facade=e,b(v,e,n),n},i=function(e){return y(v,e)||{}},a=function(e){return w(v,e)}}else{var _=f("state");p[_]=!0,r=function(e,n){if(u(e,_))throw new m("Object already initialized");return n.facade=e,d(e,_,n),n},i=function(e){return u(e,_)?e[_]:{}},a=function(e){return u(e,_)}}e.exports={set:r,get:i,has:a,enforce:function(e){return a(e)?i(e):r(e,{})},getterFor:function(e){return function(n){var t;if(!c(n)||(t=i(n)).type!==e)throw m("Incompatible receiver, "+e+" required");return t}}}},function(e,n,t){var r=t(9),i=t(10),a=t(95),o=t(40),s=t(15),l=t(63),c=t(11),d=t(129),u=Object.getOwnPropertyDescriptor;n.f=r?u:function(e,n){if(e=s(e),n=l(n),d)try{return u(e,n)}catch(e){}if(c(e,n))return o(!i(a.f,e,n),e[n])}},function(e,n){e.exports=function(e){return null!=e&&"object"==typeof e}},function(e,n,t){"use strict";var r=t(1),i=t(38).filter;r({target:"Array",proto:!0,forced:!t(72)("filter")},{filter:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},function(e,n,t){var r=t(2);e.exports=r({}.isPrototypeOf)},function(e,n,t){var r=t(2),i=t(27),a=r(r.bind);e.exports=function(e,n){return i(e),void 0===n?e:a?a(e,n):function(){return e.apply(n,arguments)}}},function(e,n){var t=Function.prototype,r=t.apply,i=t.bind,a=t.call;e.exports="object"==typeof Reflect&&Reflect.apply||(i?a.bind(r):function(){return a.apply(r,arguments)})},function(e,n,t){var r=t(36),i=t(2),a=t(44),o=t(13),s=t(21),l=t(125),c=i([].push),d=function(e){var n=1==e,t=2==e,i=3==e,d=4==e,u=6==e,h=7==e,f=5==e||u;return function(p,m,g,v){for(var y,w,b=o(p),_=a(b),x=r(m,g),T=s(_),k=0,C=v||l,I=n?C(p,T):t||h?C(p,0):void 0;T>k;k++)if((f||k in _)&&(w=x(y=_[k],k,b),e))if(n)I[k]=w;else if(w)switch(e){case 3:return!0;case 5:return y;case 6:return k;case 2:c(I,y)}else switch(e){case 4:return!1;case 7:c(I,y)}return u?-1:i||d?d:I}};e.exports={forEach:d(0),map:d(1),filter:d(2),some:d(3),every:d(4),find:d(5),findIndex:d(6),filterReject:d(7)}},function(e,n,t){"use strict";var r=t(3);e.exports=function(e,n){var t=[][e];return!!t&&r((function(){t.call(null,n||function(){throw 1},1)}))}},function(e,n){e.exports=function(e,n){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:n}}},function(e,n,t){var r=t(12).f,i=t(11),a=t(4)("toStringTag");e.exports=function(e,n,t){e&&!t&&(e=e.prototype),e&&!i(e,a)&&r(e,a,{configurable:!0,value:n})}},function(e,n,t){var r=t(22);e.exports=Array.isArray||function(e){return"Array"==r(e)}},function(e,n,t){var r=t(49),i=t(242),a=t(243),o=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":o&&o in Object(e)?i(e):a(e)}},function(e,n,t){var r=t(0),i=t(2),a=t(3),o=t(22),s=r.Object,l=i("".split);e.exports=a((function(){return!s("z").propertyIsEnumerable(0)}))?function(e){return"String"==o(e)?l(e,""):s(e)}:s},function(e,n,t){var r,i,a=t(0),o=t(61),s=a.process,l=a.Deno,c=s&&s.versions||l&&l.version,d=c&&c.v8;d&&(i=(r=d.split("."))[0]>0&&r[0]<4?1:+(r[0]+r[1])),!i&&o&&(!(r=o.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=o.match(/Chrome\/(\d+)/))&&(i=+r[1]),e.exports=i},function(e,n){e.exports={}},function(e,n){e.exports={}},function(e,n,t){"use strict";var r=t(63),i=t(12),a=t(40);e.exports=function(e,n,t){var o=r(n);o in e?i.f(e,o,a(0,t)):e[o]=t}},function(e,n,t){var r=t(19).Symbol;e.exports=r},function(e,n,t){"use strict";t.d(n,"a",(function(){return a}));t(118);var r=t(51);t(58),t(73),t(7),t(99),t(17),t(23),t(157);var i=t(79);function a(e){return function(e){if(Array.isArray(e))return Object(r.a)(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Object(i.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},function(e,n,t){"use strict";function r(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}t.d(n,"a",(function(){return r}))},function(e,n,t){"use strict";function r(e,n,t,r,i,a,o,s){var l,c="function"==typeof e?e.options:e;if(n&&(c.render=n,c.staticRenderFns=t,c._compiled=!0),r&&(c.functional=!0),a&&(c._scopeId="data-v-"+a),o?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),i&&i.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(o)},c._ssrRegister=l):i&&(l=s?function(){i.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:i),l)if(c.functional){c._injectStyles=l;var d=c.render;c.render=function(e,n){return l.call(n),d(e,n)}}else{var u=c.beforeCreate;c.beforeCreate=u?[].concat(u,l):[l]}return{exports:e,options:c}}t.d(n,"a",(function(){return r}))},function(e,n,t){var r=t(27);e.exports=function(e,n){var t=e[n];return null==t?void 0:r(t)}},function(e,n){var t=Math.ceil,r=Math.floor;e.exports=function(e){var n=+e;return n!=n||0===n?0:(n>0?r:t)(n)}},function(e,n,t){"use strict";var r=t(1),i=t(0),a=t(42),o=t(68),s=t(6),l=t(93),c=t(21),d=t(15),u=t(48),h=t(4),f=t(72),p=t(69),m=f("slice"),g=h("species"),v=i.Array,y=Math.max;r({target:"Array",proto:!0,forced:!m},{slice:function(e,n){var t,r,i,h=d(this),f=c(h),m=l(e,f),w=l(void 0===n?f:n,f);if(a(h)&&(t=h.constructor,(o(t)&&(t===v||a(t.prototype))||s(t)&&null===(t=t[g]))&&(t=void 0),t===v||void 0===t))return p(h,m,w);for(r=new(void 0===t?v:t)(y(w-m,0)),i=0;m<w;m++,i++)m in h&&u(r,i,h[m]);return r.length=i,r}})},function(e,n,t){var r=t(130),i=t(94).concat("length","prototype");n.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},function(e,n,t){var r=t(0),i=t(98),a=t(5),o=t(22),s=t(4)("toStringTag"),l=r.Object,c="Arguments"==o(function(){return arguments}());e.exports=i?o:function(e){var n,t,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(t=function(e,n){try{return e[n]}catch(e){}}(n=l(e),s))?t:c?o(n):"Object"==(r=o(n))&&a(n.callee)?"Arguments":r}},function(e,n,t){"use strict";var r=t(1),i=t(0),a=t(14),o=t(37),s=t(10),l=t(2),c=t(24),d=t(9),u=t(90),h=t(3),f=t(11),p=t(42),m=t(5),g=t(6),v=t(35),y=t(91),w=t(8),b=t(13),_=t(15),x=t(63),T=t(20),k=t(40),C=t(25),I=t(65),z=t(56),A=t(154),S=t(96),P=t(32),E=t(12),O=t(121),U=t(95),j=t(69),L=t(16),R=t(59),$=t(66),M=t(46),N=t(60),F=t(4),D=t(155),H=t(156),q=t(41),B=t(31),G=t(38).forEach,V=$("hidden"),W=F("toPrimitive"),Y=B.set,K=B.getterFor("Symbol"),J=Object.prototype,X=i.Symbol,Q=X&&X.prototype,Z=i.TypeError,ee=i.QObject,ne=a("JSON","stringify"),te=P.f,re=E.f,ie=A.f,ae=U.f,oe=l([].push),se=R("symbols"),le=R("op-symbols"),ce=R("string-to-symbol-registry"),de=R("symbol-to-string-registry"),ue=R("wks"),he=!ee||!ee.prototype||!ee.prototype.findChild,fe=d&&h((function(){return 7!=C(re({},"a",{get:function(){return re(this,"a",{value:7}).a}})).a}))?function(e,n,t){var r=te(J,n);r&&delete J[n],re(e,n,t),r&&e!==J&&re(J,n,r)}:re,pe=function(e,n){var t=se[e]=C(Q);return Y(t,{type:"Symbol",tag:e,description:n}),d||(t.description=n),t},me=function(e,n,t){e===J&&me(le,n,t),w(e);var r=x(n);return w(t),f(se,r)?(t.enumerable?(f(e,V)&&e[V][r]&&(e[V][r]=!1),t=C(t,{enumerable:k(0,!1)})):(f(e,V)||re(e,V,k(1,{})),e[V][r]=!0),fe(e,r,t)):re(e,r,t)},ge=function(e,n){w(e);var t=_(n),r=I(t).concat(be(t));return G(r,(function(n){d&&!s(ve,t,n)||me(e,n,t[n])})),e},ve=function(e){var n=x(e),t=s(ae,this,n);return!(this===J&&f(se,n)&&!f(le,n))&&(!(t||!f(this,n)||!f(se,n)||f(this,V)&&this[V][n])||t)},ye=function(e,n){var t=_(e),r=x(n);if(t!==J||!f(se,r)||f(le,r)){var i=te(t,r);return!i||!f(se,r)||f(t,V)&&t[V][r]||(i.enumerable=!0),i}},we=function(e){var n=ie(_(e)),t=[];return G(n,(function(e){f(se,e)||f(M,e)||oe(t,e)})),t},be=function(e){var n=e===J,t=ie(n?le:_(e)),r=[];return G(t,(function(e){!f(se,e)||n&&!f(J,e)||oe(r,se[e])})),r};(u||(L(Q=(X=function(){if(v(Q,this))throw Z("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?T(arguments[0]):void 0,n=N(e),t=function(e){this===J&&s(t,le,e),f(this,V)&&f(this[V],n)&&(this[V][n]=!1),fe(this,n,k(1,e))};return d&&he&&fe(J,n,{configurable:!0,set:t}),pe(n,e)}).prototype,"toString",(function(){return K(this).tag})),L(X,"withoutSetter",(function(e){return pe(N(e),e)})),U.f=ve,E.f=me,O.f=ge,P.f=ye,z.f=A.f=we,S.f=be,D.f=function(e){return pe(F(e),e)},d&&(re(Q,"description",{configurable:!0,get:function(){return K(this).description}}),c||L(J,"propertyIsEnumerable",ve,{unsafe:!0}))),r({global:!0,wrap:!0,forced:!u,sham:!u},{Symbol:X}),G(I(ue),(function(e){H(e)})),r({target:"Symbol",stat:!0,forced:!u},{for:function(e){var n=T(e);if(f(ce,n))return ce[n];var t=X(n);return ce[n]=t,de[t]=n,t},keyFor:function(e){if(!y(e))throw Z(e+" is not a symbol");if(f(de,e))return de[e]},useSetter:function(){he=!0},useSimple:function(){he=!1}}),r({target:"Object",stat:!0,forced:!u,sham:!d},{create:function(e,n){return void 0===n?C(e):ge(C(e),n)},defineProperty:me,defineProperties:ge,getOwnPropertyDescriptor:ye}),r({target:"Object",stat:!0,forced:!u},{getOwnPropertyNames:we,getOwnPropertySymbols:be}),r({target:"Object",stat:!0,forced:h((function(){S.f(1)}))},{getOwnPropertySymbols:function(e){return S.f(b(e))}}),ne)&&r({target:"JSON",stat:!0,forced:!u||h((function(){var e=X();return"[null]"!=ne([e])||"{}"!=ne({a:e})||"{}"!=ne(Object(e))}))},{stringify:function(e,n,t){var r=j(arguments),i=n;if((g(n)||void 0!==e)&&!y(e))return p(n)||(n=function(e,n){if(m(i)&&(n=s(i,this,e,n)),!y(n))return n}),r[1]=n,o(ne,null,r)}});if(!Q[W]){var _e=Q.valueOf;L(Q,W,(function(e){return s(_e,this)}))}q(X,"Symbol"),M[V]=!0},function(e,n,t){var r=t(24),i=t(88);(e.exports=function(e,n){return i[e]||(i[e]=void 0!==n?n:{})})("versions",[]).push({version:"3.20.2",mode:r?"pure":"global",copyright:"Â© 2022 Denis Pushkarev (zloirock.ru)"})},function(e,n,t){var r=t(2),i=0,a=Math.random(),o=r(1..toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+o(++i+a,36)}},function(e,n,t){var r=t(14);e.exports=r("navigator","userAgent")||""},function(e,n,t){var r=t(0),i=t(6),a=r.document,o=i(a)&&i(a.createElement);e.exports=function(e){return o?a.createElement(e):{}}},function(e,n,t){var r=t(209),i=t(91);e.exports=function(e){var n=r(e,"string");return i(n)?n:n+""}},function(e,n,t){var r=t(0).String;e.exports=function(e){try{return r(e)}catch(e){return"Object"}}},function(e,n,t){var r=t(130),i=t(94);e.exports=Object.keys||function(e){return r(e,i)}},function(e,n,t){var r=t(59),i=t(60),a=r("keys");e.exports=function(e){return a[e]||(a[e]=i(e))}},function(e,n,t){var r=t(2),i=t(5),a=t(88),o=r(Function.toString);i(a.inspectSource)||(a.inspectSource=function(e){return o(e)}),e.exports=a.inspectSource},function(e,n,t){var r=t(2),i=t(3),a=t(5),o=t(57),s=t(14),l=t(67),c=function(){},d=[],u=s("Reflect","construct"),h=/^\s*(?:class|function)\b/,f=r(h.exec),p=!h.exec(c),m=function(e){if(!a(e))return!1;try{return u(c,d,e),!0}catch(e){return!1}},g=function(e){if(!a(e))return!1;switch(o(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return p||!!f(h,l(e))}catch(e){return!0}};g.sham=!0,e.exports=!u||i((function(){var e;return m(m.call)||!m(Object)||!m((function(){e=!0}))||e}))?g:m},function(e,n,t){var r=t(2);e.exports=r([].slice)},function(e,n,t){var r=t(22),i=t(0);e.exports="process"==r(i.process)},function(e,n,t){"use strict";t.d(n,"a",(function(){return i}));t(7);function r(e,n,t,r,i,a,o){try{var s=e[a](o),l=s.value}catch(e){return void t(e)}s.done?n(l):Promise.resolve(l).then(r,i)}function i(e){return function(){var n=this,t=arguments;return new Promise((function(i,a){var o=e.apply(n,t);function s(e){r(o,i,a,s,l,"next",e)}function l(e){r(o,i,a,s,l,"throw",e)}s(void 0)}))}}},function(e,n,t){var r=t(3),i=t(4),a=t(45),o=i("species");e.exports=function(e){return a>=51||!r((function(){var n=[];return(n.constructor={})[o]=function(){return{foo:1}},1!==n[e](Boolean).foo}))}},function(e,n,t){"use strict";var r=t(1),i=t(9),a=t(0),o=t(2),s=t(11),l=t(5),c=t(35),d=t(20),u=t(12).f,h=t(133),f=a.Symbol,p=f&&f.prototype;if(i&&l(f)&&(!("description"in p)||void 0!==f().description)){var m={},g=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:d(arguments[0]),n=c(p,this)?new f(e):void 0===e?f():f(e);return""===e&&(m[n]=!0),n};h(g,f),g.prototype=p,p.constructor=g;var v="Symbol(test)"==String(f("test")),y=o(p.toString),w=o(p.valueOf),b=/^Symbol\((.*)\)[^)]+$/,_=o("".replace),x=o("".slice);u(p,"description",{configurable:!0,get:function(){var e=w(this),n=y(e);if(s(m,e))return"";var t=v?x(n,7,-1):_(n,b,"$1");return""===t?void 0:t}}),r({global:!0,forced:!0},{Symbol:g})}},function(e,n,t){var r=t(247),i=t(248),a=t(249),o=t(250),s=t(251);function l(e){var n=-1,t=null==e?0:e.length;for(this.clear();++n<t;){var r=e[n];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=a,l.prototype.has=o,l.prototype.set=s,e.exports=l},function(e,n,t){var r=t(162);e.exports=function(e,n){for(var t=e.length;t--;)if(r(e[t][0],n))return t;return-1}},function(e,n,t){var r=t(28)(Object,"create");e.exports=r},function(e,n,t){var r=t(269);e.exports=function(e,n){var t=e.__data__;return r(n)?t["string"==typeof n?"string":"hash"]:t.map}},function(e,n,t){var r=t(108);e.exports=function(e){if("string"==typeof e||r(e))return e;var n=e+"";return"0"==n&&1/e==-1/0?"-0":n}},function(e,n,t){"use strict";t.d(n,"a",(function(){return i}));t(55),t(7),t(100),t(157),t(17),t(29),t(111);var r=t(51);function i(e,n){if(e){if("string"==typeof e)return Object(r.a)(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Object(r.a)(e,n):void 0}}},function(e,n,t){var r,i;
/* NProgress, (c) 2013, 2014 Rico Sta. Cruz - http://ricostacruz.com/nprogress
 * @license MIT */void 0===(i="function"==typeof(r=function(){var e,n,t={version:"0.2.0"},r=t.settings={minimum:.08,easing:"ease",positionUsing:"",speed:200,trickle:!0,trickleRate:.02,trickleSpeed:800,showSpinner:!0,barSelector:'[role="bar"]',spinnerSelector:'[role="spinner"]',parent:"body",template:'<div class="bar" role="bar"><div class="peg"></div></div><div class="spinner" role="spinner"><div class="spinner-icon"></div></div>'};function i(e,n,t){return e<n?n:e>t?t:e}function a(e){return 100*(-1+e)}t.configure=function(e){var n,t;for(n in e)void 0!==(t=e[n])&&e.hasOwnProperty(n)&&(r[n]=t);return this},t.status=null,t.set=function(e){var n=t.isStarted();e=i(e,r.minimum,1),t.status=1===e?null:e;var l=t.render(!n),c=l.querySelector(r.barSelector),d=r.speed,u=r.easing;return l.offsetWidth,o((function(n){""===r.positionUsing&&(r.positionUsing=t.getPositioningCSS()),s(c,function(e,n,t){var i;return(i="translate3d"===r.positionUsing?{transform:"translate3d("+a(e)+"%,0,0)"}:"translate"===r.positionUsing?{transform:"translate("+a(e)+"%,0)"}:{"margin-left":a(e)+"%"}).transition="all "+n+"ms "+t,i}(e,d,u)),1===e?(s(l,{transition:"none",opacity:1}),l.offsetWidth,setTimeout((function(){s(l,{transition:"all "+d+"ms linear",opacity:0}),setTimeout((function(){t.remove(),n()}),d)}),d)):setTimeout(n,d)})),this},t.isStarted=function(){return"number"==typeof t.status},t.start=function(){t.status||t.set(0);var e=function(){setTimeout((function(){t.status&&(t.trickle(),e())}),r.trickleSpeed)};return r.trickle&&e(),this},t.done=function(e){return e||t.status?t.inc(.3+.5*Math.random()).set(1):this},t.inc=function(e){var n=t.status;return n?("number"!=typeof e&&(e=(1-n)*i(Math.random()*n,.1,.95)),n=i(n+e,0,.994),t.set(n)):t.start()},t.trickle=function(){return t.inc(Math.random()*r.trickleRate)},e=0,n=0,t.promise=function(r){return r&&"resolved"!==r.state()?(0===n&&t.start(),e++,n++,r.always((function(){0==--n?(e=0,t.done()):t.set((e-n)/e)})),this):this},t.render=function(e){if(t.isRendered())return document.getElementById("nprogress");c(document.documentElement,"nprogress-busy");var n=document.createElement("div");n.id="nprogress",n.innerHTML=r.template;var i,o=n.querySelector(r.barSelector),l=e?"-100":a(t.status||0),d=document.querySelector(r.parent);return s(o,{transition:"all 0 linear",transform:"translate3d("+l+"%,0,0)"}),r.showSpinner||(i=n.querySelector(r.spinnerSelector))&&h(i),d!=document.body&&c(d,"nprogress-custom-parent"),d.appendChild(n),n},t.remove=function(){d(document.documentElement,"nprogress-busy"),d(document.querySelector(r.parent),"nprogress-custom-parent");var e=document.getElementById("nprogress");e&&h(e)},t.isRendered=function(){return!!document.getElementById("nprogress")},t.getPositioningCSS=function(){var e=document.body.style,n="WebkitTransform"in e?"Webkit":"MozTransform"in e?"Moz":"msTransform"in e?"ms":"OTransform"in e?"O":"";return n+"Perspective"in e?"translate3d":n+"Transform"in e?"translate":"margin"};var o=function(){var e=[];function n(){var t=e.shift();t&&t(n)}return function(t){e.push(t),1==e.length&&n()}}(),s=function(){var e=["Webkit","O","Moz","ms"],n={};function t(t){return t=t.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,(function(e,n){return n.toUpperCase()})),n[t]||(n[t]=function(n){var t=document.body.style;if(n in t)return n;for(var r,i=e.length,a=n.charAt(0).toUpperCase()+n.slice(1);i--;)if((r=e[i]+a)in t)return r;return n}(t))}function r(e,n,r){n=t(n),e.style[n]=r}return function(e,n){var t,i,a=arguments;if(2==a.length)for(t in n)void 0!==(i=n[t])&&n.hasOwnProperty(t)&&r(e,t,i);else r(e,a[1],a[2])}}();function l(e,n){return("string"==typeof e?e:u(e)).indexOf(" "+n+" ")>=0}function c(e,n){var t=u(e),r=t+n;l(t,n)||(e.className=r.substring(1))}function d(e,n){var t,r=u(e);l(e,n)&&(t=r.replace(" "+n+" "," "),e.className=t.substring(1,t.length-1))}function u(e){return(" "+(e.className||"")+" ").replace(/\s+/gi," ")}function h(e){e&&e.parentNode&&e.parentNode.removeChild(e)}return t})?r.call(n,t,n,e):r)||(e.exports=i)},function(e,n,t){"use strict";var r=t(1),i=t(38).map;r({target:"Array",proto:!0,forced:!t(72)("map")},{map:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},function(e,n,t){"use strict";var r=t(37),i=t(10),a=t(2),o=t(189),s=t(3),l=t(8),c=t(5),d=t(54),u=t(83),h=t(20),f=t(30),p=t(196),m=t(53),g=t(237),v=t(190),y=t(4)("replace"),w=Math.max,b=Math.min,_=a([].concat),x=a([].push),T=a("".indexOf),k=a("".slice),C="$0"==="a".replace(/./,"$0"),I=!!/./[y]&&""===/./[y]("a","$0");o("replace",(function(e,n,t){var a=I?"$":"$0";return[function(e,t){var r=f(this),a=null==e?void 0:m(e,y);return a?i(a,e,r,t):i(n,h(r),e,t)},function(e,i){var o=l(this),s=h(e);if("string"==typeof i&&-1===T(i,a)&&-1===T(i,"$<")){var f=t(n,o,s,i);if(f.done)return f.value}var m=c(i);m||(i=h(i));var y=o.global;if(y){var C=o.unicode;o.lastIndex=0}for(var I=[];;){var z=v(o,s);if(null===z)break;if(x(I,z),!y)break;""===h(z[0])&&(o.lastIndex=p(s,u(o.lastIndex),C))}for(var A,S="",P=0,E=0;E<I.length;E++){for(var O=h((z=I[E])[0]),U=w(b(d(z.index),s.length),0),j=[],L=1;L<z.length;L++)x(j,void 0===(A=z[L])?A:String(A));var R=z.groups;if(m){var $=_([O],j,U,s);void 0!==R&&x($,R);var M=h(r(i,void 0,$))}else M=g(O,s,U,j,R,i);U>=P&&(S+=k(s,P,U)+M,P=U+O.length)}return S+k(s,P)}]}),!!s((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}))||!C||I)},function(e,n,t){var r=t(54),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},function(e,n,t){var r=t(9),i=t(11),a=Function.prototype,o=r&&Object.getOwnPropertyDescriptor,s=i(a,"name"),l=s&&"something"===function(){}.name,c=s&&(!r||r&&o(a,"name").configurable);e.exports={EXISTS:s,PROPER:l,CONFIGURABLE:c}},function(e,n,t){var r=t(2),i=t(8),a=t(212);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,n=!1,t={};try{(e=r(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(t,[]),n=t instanceof Array}catch(e){}return function(t,r){return i(t),a(r),n?e(t,r):t.__proto__=r,t}}():void 0)},function(e,n,t){var r=t(57),i=t(53),a=t(47),o=t(4)("iterator");e.exports=function(e){if(null!=e)return i(e,o)||i(e,"@@iterator")||a[r(e)]}},function(e,n,t){"use strict";var r,i,a=t(10),o=t(2),s=t(20),l=t(194),c=t(188),d=t(59),u=t(25),h=t(31).get,f=t(195),p=t(204),m=d("native-string-replace",String.prototype.replace),g=RegExp.prototype.exec,v=g,y=o("".charAt),w=o("".indexOf),b=o("".replace),_=o("".slice),x=(i=/b*/g,a(g,r=/a/,"a"),a(g,i,"a"),0!==r.lastIndex||0!==i.lastIndex),T=c.BROKEN_CARET,k=void 0!==/()??/.exec("")[1];(x||k||T||f||p)&&(v=function(e){var n,t,r,i,o,c,d,f=this,p=h(f),C=s(e),I=p.raw;if(I)return I.lastIndex=f.lastIndex,n=a(v,I,C),f.lastIndex=I.lastIndex,n;var z=p.groups,A=T&&f.sticky,S=a(l,f),P=f.source,E=0,O=C;if(A&&(S=b(S,"y",""),-1===w(S,"g")&&(S+="g"),O=_(C,f.lastIndex),f.lastIndex>0&&(!f.multiline||f.multiline&&"\n"!==y(C,f.lastIndex-1))&&(P="(?: "+P+")",O=" "+O,E++),t=new RegExp("^(?:"+P+")",S)),k&&(t=new RegExp("^"+P+"$(?!\\s)",S)),x&&(r=f.lastIndex),i=a(g,A?t:f,O),A?i?(i.input=_(i.input,E),i[0]=_(i[0],E),i.index=f.lastIndex,f.lastIndex+=i[0].length):f.lastIndex=0:x&&i&&(f.lastIndex=f.global?i.index+i[0].length:r),k&&i&&i.length>1&&a(m,i[0],t,(function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(i[o]=void 0)})),i&&z)for(i.groups=c=u(null),o=0;o<z.length;o++)c[(d=z[o])[0]]=i[d[1]];return i}),e.exports=v},function(e,n,t){var r=t(0),i=t(89),a=r["__core-js_shared__"]||i("__core-js_shared__",{});e.exports=a},function(e,n,t){var r=t(0),i=Object.defineProperty;e.exports=function(e,n){try{i(r,e,{value:n,configurable:!0,writable:!0})}catch(t){r[e]=n}return n}},function(e,n,t){var r=t(45),i=t(3);e.exports=!!Object.getOwnPropertySymbols&&!i((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&r&&r<41}))},function(e,n,t){var r=t(0),i=t(14),a=t(5),o=t(35),s=t(127),l=r.Object;e.exports=s?function(e){return"symbol"==typeof e}:function(e){var n=i("Symbol");return a(n)&&o(n.prototype,l(e))}},function(e,n,t){var r=t(15),i=t(93),a=t(21),o=function(e){return function(n,t,o){var s,l=r(n),c=a(l),d=i(o,c);if(e&&t!=t){for(;c>d;)if((s=l[d++])!=s)return!0}else for(;c>d;d++)if((e||d in l)&&l[d]===t)return e||d||0;return!e&&-1}};e.exports={includes:o(!0),indexOf:o(!1)}},function(e,n,t){var r=t(54),i=Math.max,a=Math.min;e.exports=function(e,n){var t=r(e);return t<0?i(t+n,0):a(t,n)}},function(e,n){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(e,n,t){"use strict";var r={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,a=i&&!r.call({1:2},1);n.f=a?function(e){var n=i(this,e);return!!n&&n.enumerable}:r},function(e,n){n.f=Object.getOwnPropertySymbols},function(e,n,t){var r=t(0),i=t(11),a=t(5),o=t(13),s=t(66),l=t(136),c=s("IE_PROTO"),d=r.Object,u=d.prototype;e.exports=l?d.getPrototypeOf:function(e){var n=o(e);if(i(n,c))return n[c];var t=n.constructor;return a(t)&&n instanceof t?t.prototype:n instanceof d?u:null}},function(e,n,t){var r={};r[t(4)("toStringTag")]="z",e.exports="[object z]"===String(r)},function(e,n,t){t(156)("iterator")},function(e,n,t){var r=t(9),i=t(84).EXISTS,a=t(2),o=t(12).f,s=Function.prototype,l=a(s.toString),c=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,d=a(c.exec);r&&!i&&o(s,"name",{configurable:!0,get:function(){try{return d(c,l(this))[1]}catch(e){return""}}})},function(e,n,t){var r=t(241),i=t(33),a=Object.prototype,o=a.hasOwnProperty,s=a.propertyIsEnumerable,l=r(function(){return arguments}())?r:function(e){return i(e)&&o.call(e,"callee")&&!s.call(e,"callee")};e.exports=l},function(e,n,t){var r=t(28)(t(19),"Map");e.exports=r},function(e,n){e.exports=function(e){var n=typeof e;return null!=e&&("object"==n||"function"==n)}},function(e,n,t){var r=t(261),i=t(268),a=t(270),o=t(271),s=t(272);function l(e){var n=-1,t=null==e?0:e.length;for(this.clear();++n<t;){var r=e[n];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=a,l.prototype.has=o,l.prototype.set=s,e.exports=l},function(e,n){e.exports=function(e){var n=-1,t=Array(e.size);return e.forEach((function(e){t[++n]=e})),t}},function(e,n){e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},function(e,n,t){var r=t(18),i=t(108),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,o=/^\w*$/;e.exports=function(e,n){if(r(e))return!1;var t=typeof e;return!("number"!=t&&"symbol"!=t&&"boolean"!=t&&null!=e&&!i(e))||(o.test(e)||!a.test(e)||null!=n&&e in Object(n))}},function(e,n,t){var r=t(43),i=t(33);e.exports=function(e){return"symbol"==typeof e||i(e)&&"[object Symbol]"==r(e)}},function(e,n){e.exports=function(e){return e}},function(e,n,t){"use strict";t.d(n,"a",(function(){return i}));t(118);t(58),t(73),t(7),t(99),t(17),t(23);var r=t(79);function i(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,a=[],o=!0,s=!1;try{for(t=t.call(e);!(o=(r=t.next()).done)&&(a.push(r.value),!n||a.length!==n);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==t.return||t.return()}finally{if(s)throw i}}return a}}(e,n)||Object(r.a)(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},function(e,n,t){"use strict";t(29);var r,i,a=t(1),o=t(0),s=t(10),l=t(2),c=t(5),d=t(6),u=(r=!1,(i=/[ac]/).exec=function(){return r=!0,/./.exec.apply(this,arguments)},!0===i.test("abc")&&r),h=o.Error,f=l(/./.test);a({target:"RegExp",proto:!0,forced:!u},{test:function(e){var n=this.exec;if(!c(n))return f(this,e);var t=s(n,this,e);if(null!==t&&!d(t))throw new h("RegExp exec method returned something other than an Object or null");return!!t}})},function(e,n,t){"use strict";var r=t(1),i=t(38).some;r({target:"Array",proto:!0,forced:!t(39)("some")},{some:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},function(e,n,t){var r=t(1),i=t(13),a=t(65);r({target:"Object",stat:!0,forced:t(3)((function(){a(1)}))},{keys:function(e){return a(i(e))}})},function(e,n,t){"use strict";var r=t(1),i=t(152);r({target:"Array",proto:!0,forced:[].forEach!=i},{forEach:i})},function(e,n,t){var r=t(0),i=t(147),a=t(148),o=t(152),s=t(26),l=function(e){if(e&&e.forEach!==o)try{s(e,"forEach",o)}catch(n){e.forEach=o}};for(var c in i)i[c]&&l(r[c]&&r[c].prototype);l(a)},function(e,n,t){var r=t(4),i=t(25),a=t(12),o=r("unscopables"),s=Array.prototype;null==s[o]&&a.f(s,o,{configurable:!0,value:i(null)}),e.exports=function(e){s[o][e]=!0}},function(e,n,t){var r=function(e){"use strict";var n=Object.prototype,t=n.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function s(e,n,t){return Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}),e[n]}try{s({},"")}catch(e){s=function(e,n,t){return e[n]=t}}function l(e,n,t,r){var i=n&&n.prototype instanceof u?n:u,a=Object.create(i.prototype),o=new T(r||[]);return a._invoke=function(e,n,t){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return C()}for(t.method=i,t.arg=a;;){var o=t.delegate;if(o){var s=b(o,t);if(s){if(s===d)continue;return s}}if("next"===t.method)t.sent=t._sent=t.arg;else if("throw"===t.method){if("suspendedStart"===r)throw r="completed",t.arg;t.dispatchException(t.arg)}else"return"===t.method&&t.abrupt("return",t.arg);r="executing";var l=c(e,n,t);if("normal"===l.type){if(r=t.done?"completed":"suspendedYield",l.arg===d)continue;return{value:l.arg,done:t.done}}"throw"===l.type&&(r="completed",t.method="throw",t.arg=l.arg)}}}(e,t,o),a}function c(e,n,t){try{return{type:"normal",arg:e.call(n,t)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var d={};function u(){}function h(){}function f(){}var p={};s(p,i,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(k([])));g&&g!==n&&t.call(g,i)&&(p=g);var v=f.prototype=u.prototype=Object.create(p);function y(e){["next","throw","return"].forEach((function(n){s(e,n,(function(e){return this._invoke(n,e)}))}))}function w(e,n){var r;this._invoke=function(i,a){function o(){return new n((function(r,o){!function r(i,a,o,s){var l=c(e[i],e,a);if("throw"!==l.type){var d=l.arg,u=d.value;return u&&"object"==typeof u&&t.call(u,"__await")?n.resolve(u.__await).then((function(e){r("next",e,o,s)}),(function(e){r("throw",e,o,s)})):n.resolve(u).then((function(e){d.value=e,o(d)}),(function(e){return r("throw",e,o,s)}))}s(l.arg)}(i,a,r,o)}))}return r=r?r.then(o,o):o()}}function b(e,n){var t=e.iterator[n.method];if(void 0===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=void 0,b(e,n),"throw"===n.method))return d;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var r=c(t,e.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,d;var i=r.arg;return i?i.done?(n[e.resultName]=i.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=void 0),n.delegate=null,d):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,d)}function _(e){var n={tryLoc:e[0]};1 in e&&(n.catchLoc=e[1]),2 in e&&(n.finallyLoc=e[2],n.afterLoc=e[3]),this.tryEntries.push(n)}function x(e){var n=e.completion||{};n.type="normal",delete n.arg,e.completion=n}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function k(e){if(e){var n=e[i];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function n(){for(;++r<e.length;)if(t.call(e,r))return n.value=e[r],n.done=!1,n;return n.value=void 0,n.done=!0,n};return a.next=a}}return{next:C}}function C(){return{value:void 0,done:!0}}return h.prototype=f,s(v,"constructor",f),s(f,"constructor",h),h.displayName=s(f,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var n="function"==typeof e&&e.constructor;return!!n&&(n===h||"GeneratorFunction"===(n.displayName||n.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,s(e,o,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},y(w.prototype),s(w.prototype,a,(function(){return this})),e.AsyncIterator=w,e.async=function(n,t,r,i,a){void 0===a&&(a=Promise);var o=new w(l(n,t,r,i),a);return e.isGeneratorFunction(t)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},y(v),s(v,o,"Generator"),s(v,i,(function(){return this})),s(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var n=[];for(var t in e)n.push(t);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=k,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var n in this)"t"===n.charAt(0)&&t.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function r(t,r){return o.type="throw",o.arg=e,n.next=t,r&&(n.method="next",n.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=t.call(a,"catchLoc"),l=t.call(a,"finallyLoc");if(s&&l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,n){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&t.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=n&&n<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=n,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(o)},complete:function(e,n){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&n&&(this.next=n),d},finish:function(e){for(var n=this.tryEntries.length-1;n>=0;--n){var t=this.tryEntries[n];if(t.finallyLoc===e)return this.complete(t.completion,t.afterLoc),x(t),d}},catch:function(e){for(var n=this.tryEntries.length-1;n>=0;--n){var t=this.tryEntries[n];if(t.tryLoc===e){var r=t.completion;if("throw"===r.type){var i=r.arg;x(t)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,t){return this.delegate={iterator:k(e),resultName:n,nextLoc:t},"next"===this.method&&(this.arg=void 0),d}},e}(e.exports);try{regeneratorRuntime=r}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}},function(e,n,t){t(1)({target:"Array",stat:!0},{isArray:t(42)})},function(e,n,t){var r=t(1),i=t(9),a=t(12).f;r({target:"Object",stat:!0,forced:Object.defineProperty!==a,sham:!i},{defineProperty:a})},function(e,n,t){"use strict";var r=t(15),i=t(116),a=t(47),o=t(31),s=t(12).f,l=t(132),c=t(24),d=t(9),u=o.set,h=o.getterFor("Array Iterator");e.exports=l(Array,"Array",(function(e,n){u(this,{type:"Array Iterator",target:r(e),index:0,kind:n})}),(function(){var e=h(this),n=e.target,t=e.kind,r=e.index++;return!n||r>=n.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==t?{value:r,done:!1}:"values"==t?{value:n[r],done:!1}:{value:[r,n[r]],done:!1}}),"values");var f=a.Arguments=a.Array;if(i("keys"),i("values"),i("entries"),!c&&d&&"values"!==f.name)try{s(f,"name",{value:"values"})}catch(e){}},function(e,n,t){var r=t(9),i=t(128),a=t(12),o=t(8),s=t(15),l=t(65);n.f=r&&!i?Object.defineProperties:function(e,n){o(e);for(var t,r=s(n),i=l(n),c=i.length,d=0;c>d;)a.f(e,t=i[d++],r[t]);return e}},function(e,n,t){var r=t(3),i=t(5),a=/#|\.prototype\./,o=function(e,n){var t=l[s(e)];return t==d||t!=c&&(i(n)?r(n):!!n)},s=o.normalize=function(e){return String(e).replace(a,".").toLowerCase()},l=o.data={},c=o.NATIVE="N",d=o.POLYFILL="P";e.exports=o},function(e,n,t){var r=t(0),i=t(10),a=t(27),o=t(8),s=t(64),l=t(86),c=r.TypeError;e.exports=function(e,n){var t=arguments.length<2?l(e):n;if(a(t))return o(i(t,e));throw c(s(e)+" is not iterable")}},function(e,n,t){var r=t(8),i=t(141),a=t(4)("species");e.exports=function(e,n){var t,o=r(e).constructor;return void 0===o||null==(t=r(o)[a])?n:i(t)}},function(e,n,t){var r=t(226);e.exports=function(e,n){return new(r(e))(0===n?0:n)}},function(e,n){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,n,t){var r=t(90);e.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},function(e,n,t){var r=t(9),i=t(3);e.exports=r&&i((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},function(e,n,t){var r=t(9),i=t(3),a=t(62);e.exports=!r&&!i((function(){return 7!=Object.defineProperty(a("div"),"a",{get:function(){return 7}}).a}))},function(e,n,t){var r=t(2),i=t(11),a=t(15),o=t(92).indexOf,s=t(46),l=r([].push);e.exports=function(e,n){var t,r=a(e),c=0,d=[];for(t in r)!i(s,t)&&i(r,t)&&l(d,t);for(;n.length>c;)i(r,t=n[c++])&&(~o(d,t)||l(d,t));return d}},function(e,n,t){var r=t(14);e.exports=r("document","documentElement")},function(e,n,t){"use strict";var r=t(1),i=t(10),a=t(24),o=t(84),s=t(5),l=t(199),c=t(97),d=t(85),u=t(41),h=t(26),f=t(16),p=t(4),m=t(47),g=t(135),v=o.PROPER,y=o.CONFIGURABLE,w=g.IteratorPrototype,b=g.BUGGY_SAFARI_ITERATORS,_=p("iterator"),x=function(){return this};e.exports=function(e,n,t,o,p,g,T){l(t,n,o);var k,C,I,z=function(e){if(e===p&&O)return O;if(!b&&e in P)return P[e];switch(e){case"keys":case"values":case"entries":return function(){return new t(this,e)}}return function(){return new t(this)}},A=n+" Iterator",S=!1,P=e.prototype,E=P[_]||P["@@iterator"]||p&&P[p],O=!b&&E||z(p),U="Array"==n&&P.entries||E;if(U&&(k=c(U.call(new e)))!==Object.prototype&&k.next&&(a||c(k)===w||(d?d(k,w):s(k[_])||f(k,_,x)),u(k,A,!0,!0),a&&(m[A]=x)),v&&"values"==p&&E&&"values"!==E.name&&(!a&&y?h(P,"name","values"):(S=!0,O=function(){return i(E,this)})),p)if(C={values:z("values"),keys:g?O:z("keys"),entries:z("entries")},T)for(I in C)(b||S||!(I in P))&&f(P,I,C[I]);else r({target:n,proto:!0,forced:b||S},C);return a&&!T||P[_]===O||f(P,_,O,{name:p}),m[n]=O,C}},function(e,n,t){var r=t(11),i=t(134),a=t(32),o=t(12);e.exports=function(e,n,t){for(var s=i(n),l=o.f,c=a.f,d=0;d<s.length;d++){var u=s[d];r(e,u)||t&&r(t,u)||l(e,u,c(n,u))}}},function(e,n,t){var r=t(14),i=t(2),a=t(56),o=t(96),s=t(8),l=i([].concat);e.exports=r("Reflect","ownKeys")||function(e){var n=a.f(s(e)),t=o.f;return t?l(n,t(e)):n}},function(e,n,t){"use strict";var r,i,a,o=t(3),s=t(5),l=t(25),c=t(97),d=t(16),u=t(4),h=t(24),f=u("iterator"),p=!1;[].keys&&("next"in(a=[].keys())?(i=c(c(a)))!==Object.prototype&&(r=i):p=!0),null==r||o((function(){var e={};return r[f].call(e)!==e}))?r={}:h&&(r=l(r)),s(r[f])||d(r,f,(function(){return this})),e.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:p}},function(e,n,t){var r=t(3);e.exports=!r((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},function(e,n,t){var r=t(0);e.exports=r.Promise},function(e,n,t){var r=t(4),i=t(47),a=r("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(i.Array===e||o[a]===e)}},function(e,n,t){var r=t(10),i=t(8),a=t(53);e.exports=function(e,n,t){var o,s;i(e);try{if(!(o=a(e,"return"))){if("throw"===n)throw t;return t}o=r(o,e)}catch(e){s=!0,o=e}if("throw"===n)throw t;if(s)throw o;return i(o),t}},function(e,n,t){var r=t(4)("iterator"),i=!1;try{var a=0,o={next:function(){return{done:!!a++}},return:function(){i=!0}};o[r]=function(){return this},Array.from(o,(function(){throw 2}))}catch(e){}e.exports=function(e,n){if(!n&&!i)return!1;var t=!1;try{var a={};a[r]=function(){return{next:function(){return{done:t=!0}}}},e(a)}catch(e){}return t}},function(e,n,t){var r=t(0),i=t(68),a=t(64),o=r.TypeError;e.exports=function(e){if(i(e))return e;throw o(a(e)+" is not a constructor")}},function(e,n,t){var r,i,a,o,s=t(0),l=t(37),c=t(36),d=t(5),u=t(11),h=t(3),f=t(131),p=t(69),m=t(62),g=t(143),v=t(70),y=s.setImmediate,w=s.clearImmediate,b=s.process,_=s.Dispatch,x=s.Function,T=s.MessageChannel,k=s.String,C=0,I={};try{r=s.location}catch(e){}var z=function(e){if(u(I,e)){var n=I[e];delete I[e],n()}},A=function(e){return function(){z(e)}},S=function(e){z(e.data)},P=function(e){s.postMessage(k(e),r.protocol+"//"+r.host)};y&&w||(y=function(e){var n=p(arguments,1);return I[++C]=function(){l(d(e)?e:x(e),void 0,n)},i(C),C},w=function(e){delete I[e]},v?i=function(e){b.nextTick(A(e))}:_&&_.now?i=function(e){_.now(A(e))}:T&&!g?(o=(a=new T).port2,a.port1.onmessage=S,i=c(o.postMessage,o)):s.addEventListener&&d(s.postMessage)&&!s.importScripts&&r&&"file:"!==r.protocol&&!h(P)?(i=P,s.addEventListener("message",S,!1)):i="onreadystatechange"in m("script")?function(e){f.appendChild(m("script")).onreadystatechange=function(){f.removeChild(this),z(e)}}:function(e){setTimeout(A(e),0)}),e.exports={set:y,clear:w}},function(e,n,t){var r=t(61);e.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(r)},function(e,n,t){var r=t(8),i=t(6),a=t(145);e.exports=function(e,n){if(r(e),i(n)&&n.constructor===e)return n;var t=a.f(e);return(0,t.resolve)(n),t.promise}},function(e,n,t){"use strict";var r=t(27),i=function(e){var n,t;this.promise=new e((function(e,r){if(void 0!==n||void 0!==t)throw TypeError("Bad Promise constructor");n=e,t=r})),this.resolve=r(n),this.reject=r(t)};e.exports.f=function(e){return new i(e)}},function(e,n,t){var r=t(2),i=t(54),a=t(20),o=t(30),s=r("".charAt),l=r("".charCodeAt),c=r("".slice),d=function(e){return function(n,t){var r,d,u=a(o(n)),h=i(t),f=u.length;return h<0||h>=f?e?"":void 0:(r=l(u,h))<55296||r>56319||h+1===f||(d=l(u,h+1))<56320||d>57343?e?s(u,h):r:e?c(u,h,h+2):d-56320+(r-55296<<10)+65536}};e.exports={codeAt:d(!1),charAt:d(!0)}},function(e,n){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(e,n,t){var r=t(62)("span").classList,i=r&&r.constructor&&r.constructor.prototype;e.exports=i===Object.prototype?void 0:i},function(e,n,t){var r=t(1),i=t(3),a=t(13),o=t(97),s=t(136);r({target:"Object",stat:!0,forced:i((function(){o(1)})),sham:!s},{getPrototypeOf:function(e){return o(a(e))}})},function(e,n,t){var r=t(0),i=t(192),a=r.TypeError;e.exports=function(e){if(i(e))throw a("The method doesn't accept regular expressions");return e}},function(e,n,t){var r=t(4)("match");e.exports=function(e){var n=/./;try{"/./"[e](n)}catch(t){try{return n[r]=!1,"/./"[e](n)}catch(e){}}return!1}},function(e,n,t){"use strict";var r=t(38).forEach,i=t(39)("forEach");e.exports=i?[].forEach:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}},function(e,n,t){var r=t(3);e.exports=!r((function(){return Object.isExtensible(Object.preventExtensions({}))}))},function(e,n,t){var r=t(22),i=t(15),a=t(56).f,o=t(193),s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return s&&"Window"==r(e)?function(e){try{return a(e)}catch(e){return o(s)}}(e):a(i(e))}},function(e,n,t){var r=t(4);n.f=r},function(e,n,t){var r=t(234),i=t(11),a=t(155),o=t(12).f;e.exports=function(e){var n=r.Symbol||(r.Symbol={});i(n,e)||o(n,e,{value:a.f(e)})}},function(e,n,t){var r=t(1),i=t(235);r({target:"Array",stat:!0,forced:!t(140)((function(e){Array.from(e)}))},{from:i})},function(e,n,t){t(1)({target:"Object",stat:!0,sham:!t(9)},{create:t(25)})},function(e,n){e.exports=function(e,n){for(var t=-1,r=n.length,i=e.length;++t<r;)e[i+t]=n[t];return e}},function(e,n){var t="object"==typeof global&&global&&global.Object===Object&&global;e.exports=t},function(e,n,t){var r=t(74),i=t(252),a=t(253),o=t(254),s=t(255),l=t(256);function c(e){var n=this.__data__=new r(e);this.size=n.size}c.prototype.clear=i,c.prototype.delete=a,c.prototype.get=o,c.prototype.has=s,c.prototype.set=l,e.exports=c},function(e,n){e.exports=function(e,n){return e===n||e!=e&&n!=n}},function(e,n,t){var r=t(43),i=t(103);e.exports=function(e){if(!i(e))return!1;var n=r(e);return"[object Function]"==n||"[object GeneratorFunction]"==n||"[object AsyncFunction]"==n||"[object Proxy]"==n}},function(e,n){var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},function(e,n,t){var r=t(273),i=t(33);e.exports=function e(n,t,a,o,s){return n===t||(null==n||null==t||!i(n)&&!i(t)?n!=n&&t!=t:r(n,t,a,o,e,s))}},function(e,n,t){var r=t(167),i=t(276),a=t(168);e.exports=function(e,n,t,o,s,l){var c=1&t,d=e.length,u=n.length;if(d!=u&&!(c&&u>d))return!1;var h=l.get(e),f=l.get(n);if(h&&f)return h==n&&f==e;var p=-1,m=!0,g=2&t?new r:void 0;for(l.set(e,n),l.set(n,e);++p<d;){var v=e[p],y=n[p];if(o)var w=c?o(y,v,p,n,e,l):o(v,y,p,e,n,l);if(void 0!==w){if(w)continue;m=!1;break}if(g){if(!i(n,(function(e,n){if(!a(g,n)&&(v===e||s(v,e,t,o,l)))return g.push(n)}))){m=!1;break}}else if(v!==y&&!s(v,y,t,o,l)){m=!1;break}}return l.delete(e),l.delete(n),m}},function(e,n,t){var r=t(104),i=t(274),a=t(275);function o(e){var n=-1,t=null==e?0:e.length;for(this.__data__=new r;++n<t;)this.add(e[n])}o.prototype.add=o.prototype.push=i,o.prototype.has=a,e.exports=o},function(e,n){e.exports=function(e,n){return e.has(n)}},function(e,n,t){var r=t(286),i=t(292),a=t(173);e.exports=function(e){return a(e)?r(e):i(e)}},function(e,n,t){(function(e){var r=t(19),i=t(288),a=n&&!n.nodeType&&n,o=a&&"object"==typeof e&&e&&!e.nodeType&&e,s=o&&o.exports===a?r.Buffer:void 0,l=(s?s.isBuffer:void 0)||i;e.exports=l}).call(this,t(126)(e))},function(e,n){var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,n){var r=typeof e;return!!(n=null==n?9007199254740991:n)&&("number"==r||"symbol"!=r&&t.test(e))&&e>-1&&e%1==0&&e<n}},function(e,n,t){var r=t(289),i=t(290),a=t(291),o=a&&a.isTypedArray,s=o?i(o):r;e.exports=s},function(e,n,t){var r=t(163),i=t(106);e.exports=function(e){return null!=e&&i(e.length)&&!r(e)}},function(e,n,t){var r=t(28)(t(19),"Set");e.exports=r},function(e,n,t){var r=t(103);e.exports=function(e){return e==e&&!r(e)}},function(e,n){e.exports=function(e,n){return function(t){return null!=t&&(t[e]===n&&(void 0!==n||e in Object(t)))}}},function(e,n,t){var r=t(178),i=t(78);e.exports=function(e,n){for(var t=0,a=(n=r(n,e)).length;null!=e&&t<a;)e=e[i(n[t++])];return t&&t==a?e:void 0}},function(e,n,t){var r=t(18),i=t(107),a=t(303),o=t(306);e.exports=function(e,n){return r(e)?e:i(e,n)?[e]:a(o(e))}},function(e,n,t){t(1)({target:"Object",stat:!0},{setPrototypeOf:t(85)})},function(e,n,t){var r=t(1),i=t(14),a=t(37),o=t(336),s=t(141),l=t(8),c=t(6),d=t(25),u=t(3),h=i("Reflect","construct"),f=Object.prototype,p=[].push,m=u((function(){function e(){}return!(h((function(){}),[],e)instanceof e)})),g=!u((function(){h((function(){}))})),v=m||g;r({target:"Reflect",stat:!0,forced:v,sham:v},{construct:function(e,n){s(e),l(n);var t=arguments.length<3?e:s(arguments[2]);if(g&&!m)return h(e,n,t);if(e==t){switch(n.length){case 0:return new e;case 1:return new e(n[0]);case 2:return new e(n[0],n[1]);case 3:return new e(n[0],n[1],n[2]);case 4:return new e(n[0],n[1],n[2],n[3])}var r=[null];return a(p,r,n),new(a(o,e,r))}var i=t.prototype,u=d(c(i)?i:f),v=a(e,u,n);return c(v)?v:u}})},function(e,n,t){var r=t(1),i=t(0),a=t(41);r({global:!0},{Reflect:{}}),a(i.Reflect,"Reflect",!0)},function(e,n,t){},function(e,n,t){},function(e,n,t){var r=t(239),i=t(244),a=t(315),o=t(323),s=t(332),l=t(207),c=a((function(e){var n=l(e);return s(n)&&(n=void 0),o(r(e,1,s,!0),i(n,2))}));e.exports=c},function(e,n,t){"use strict";
/*!
 * escape-html
 * Copyright(c) 2012-2013 TJ Holowaychuk
 * Copyright(c) 2015 Andreas Lubbe
 * Copyright(c) 2015 Tiancheng "Timothy" Gu
 * MIT Licensed
 */var r=/["'&<>]/;e.exports=function(e){var n,t=""+e,i=r.exec(t);if(!i)return t;var a="",o=0,s=0;for(o=i.index;o<t.length;o++){switch(t.charCodeAt(o)){case 34:n="&quot;";break;case 38:n="&amp;";break;case 39:n="&#39;";break;case 60:n="&lt;";break;case 62:n="&gt;";break;default:continue}s!==o&&(a+=t.substring(s,o)),s=o+1,a+=n}return s!==o?a+t.substring(s,o):a}},function(e,n){var t=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,a=/^0o[0-7]+$/i,o=parseInt,s="object"==typeof global&&global&&global.Object===Object&&global,l="object"==typeof self&&self&&self.Object===Object&&self,c=s||l||Function("return this")(),d=Object.prototype.toString,u=Math.max,h=Math.min,f=function(){return c.Date.now()};function p(e){var n=typeof e;return!!e&&("object"==n||"function"==n)}function m(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==d.call(e)}(e))return NaN;if(p(e)){var n="function"==typeof e.valueOf?e.valueOf():e;e=p(n)?n+"":n}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(t,"");var s=i.test(e);return s||a.test(e)?o(e.slice(2),s?2:8):r.test(e)?NaN:+e}e.exports=function(e,n,t){var r,i,a,o,s,l,c=0,d=!1,g=!1,v=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function y(n){var t=r,a=i;return r=i=void 0,c=n,o=e.apply(a,t)}function w(e){return c=e,s=setTimeout(_,n),d?y(e):o}function b(e){var t=e-l;return void 0===l||t>=n||t<0||g&&e-c>=a}function _(){var e=f();if(b(e))return x(e);s=setTimeout(_,function(e){var t=n-(e-l);return g?h(t,a-(e-c)):t}(e))}function x(e){return s=void 0,v&&r?y(e):(r=i=void 0,o)}function T(){var e=f(),t=b(e);if(r=arguments,i=this,l=e,t){if(void 0===s)return w(l);if(g)return s=setTimeout(_,n),y(l)}return void 0===s&&(s=setTimeout(_,n)),o}return n=m(n)||0,p(t)&&(d=!!t.leading,a=(g="maxWait"in t)?u(m(t.maxWait)||0,n):a,v="trailing"in t?!!t.trailing:v),T.cancel=function(){void 0!==s&&clearTimeout(s),c=0,r=l=i=s=void 0},T.flush=function(){return void 0===s?o:x(f())},T}},function(e,n,t){!function(){"use strict";e.exports={polyfill:function(){var e=window,n=document;if(!("scrollBehavior"in n.documentElement.style)||!0===e.__forceSmoothScrollPolyfill__){var t,r=e.HTMLElement||e.Element,i={scroll:e.scroll||e.scrollTo,scrollBy:e.scrollBy,elementScroll:r.prototype.scroll||s,scrollIntoView:r.prototype.scrollIntoView},a=e.performance&&e.performance.now?e.performance.now.bind(e.performance):Date.now,o=(t=e.navigator.userAgent,new RegExp(["MSIE ","Trident/","Edge/"].join("|")).test(t)?1:0);e.scroll=e.scrollTo=function(){void 0!==arguments[0]&&(!0!==l(arguments[0])?p.call(e,n.body,void 0!==arguments[0].left?~~arguments[0].left:e.scrollX||e.pageXOffset,void 0!==arguments[0].top?~~arguments[0].top:e.scrollY||e.pageYOffset):i.scroll.call(e,void 0!==arguments[0].left?arguments[0].left:"object"!=typeof arguments[0]?arguments[0]:e.scrollX||e.pageXOffset,void 0!==arguments[0].top?arguments[0].top:void 0!==arguments[1]?arguments[1]:e.scrollY||e.pageYOffset))},e.scrollBy=function(){void 0!==arguments[0]&&(l(arguments[0])?i.scrollBy.call(e,void 0!==arguments[0].left?arguments[0].left:"object"!=typeof arguments[0]?arguments[0]:0,void 0!==arguments[0].top?arguments[0].top:void 0!==arguments[1]?arguments[1]:0):p.call(e,n.body,~~arguments[0].left+(e.scrollX||e.pageXOffset),~~arguments[0].top+(e.scrollY||e.pageYOffset)))},r.prototype.scroll=r.prototype.scrollTo=function(){if(void 0!==arguments[0])if(!0!==l(arguments[0])){var e=arguments[0].left,n=arguments[0].top;p.call(this,this,void 0===e?this.scrollLeft:~~e,void 0===n?this.scrollTop:~~n)}else{if("number"==typeof arguments[0]&&void 0===arguments[1])throw new SyntaxError("Value could not be converted");i.elementScroll.call(this,void 0!==arguments[0].left?~~arguments[0].left:"object"!=typeof arguments[0]?~~arguments[0]:this.scrollLeft,void 0!==arguments[0].top?~~arguments[0].top:void 0!==arguments[1]?~~arguments[1]:this.scrollTop)}},r.prototype.scrollBy=function(){void 0!==arguments[0]&&(!0!==l(arguments[0])?this.scroll({left:~~arguments[0].left+this.scrollLeft,top:~~arguments[0].top+this.scrollTop,behavior:arguments[0].behavior}):i.elementScroll.call(this,void 0!==arguments[0].left?~~arguments[0].left+this.scrollLeft:~~arguments[0]+this.scrollLeft,void 0!==arguments[0].top?~~arguments[0].top+this.scrollTop:~~arguments[1]+this.scrollTop))},r.prototype.scrollIntoView=function(){if(!0!==l(arguments[0])){var t=h(this),r=t.getBoundingClientRect(),a=this.getBoundingClientRect();t!==n.body?(p.call(this,t,t.scrollLeft+a.left-r.left,t.scrollTop+a.top-r.top),"fixed"!==e.getComputedStyle(t).position&&e.scrollBy({left:r.left,top:r.top,behavior:"smooth"})):e.scrollBy({left:a.left,top:a.top,behavior:"smooth"})}else i.scrollIntoView.call(this,void 0===arguments[0]||arguments[0])}}function s(e,n){this.scrollLeft=e,this.scrollTop=n}function l(e){if(null===e||"object"!=typeof e||void 0===e.behavior||"auto"===e.behavior||"instant"===e.behavior)return!0;if("object"==typeof e&&"smooth"===e.behavior)return!1;throw new TypeError("behavior member of ScrollOptions "+e.behavior+" is not a valid value for enumeration ScrollBehavior.")}function c(e,n){return"Y"===n?e.clientHeight+o<e.scrollHeight:"X"===n?e.clientWidth+o<e.scrollWidth:void 0}function d(n,t){var r=e.getComputedStyle(n,null)["overflow"+t];return"auto"===r||"scroll"===r}function u(e){var n=c(e,"Y")&&d(e,"Y"),t=c(e,"X")&&d(e,"X");return n||t}function h(e){for(;e!==n.body&&!1===u(e);)e=e.parentNode||e.host;return e}function f(n){var t,r,i,o,s=(a()-n.startTime)/468;o=s=s>1?1:s,t=.5*(1-Math.cos(Math.PI*o)),r=n.startX+(n.x-n.startX)*t,i=n.startY+(n.y-n.startY)*t,n.method.call(n.scrollable,r,i),r===n.x&&i===n.y||e.requestAnimationFrame(f.bind(e,n))}function p(t,r,o){var l,c,d,u,h=a();t===n.body?(l=e,c=e.scrollX||e.pageXOffset,d=e.scrollY||e.pageYOffset,u=i.scroll):(l=t,c=t.scrollLeft,d=t.scrollTop,u=s),f({scrollable:l,method:u,startTime:h,startX:c,startY:d,x:r,y:o})}}}}()},function(e,n,t){var r=t(3),i=t(0).RegExp,a=r((function(){var e=i("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),o=a||r((function(){return!i("a","y").sticky})),s=a||r((function(){var e=i("^r","gy");return e.lastIndex=2,null!=e.exec("str")}));e.exports={BROKEN_CARET:s,MISSED_STICKY:o,UNSUPPORTED_Y:a}},function(e,n,t){"use strict";t(29);var r=t(2),i=t(16),a=t(87),o=t(3),s=t(4),l=t(26),c=s("species"),d=RegExp.prototype;e.exports=function(e,n,t,u){var h=s(e),f=!o((function(){var n={};return n[h]=function(){return 7},7!=""[e](n)})),p=f&&!o((function(){var n=!1,t=/a/;return"split"===e&&((t={}).constructor={},t.constructor[c]=function(){return t},t.flags="",t[h]=/./[h]),t.exec=function(){return n=!0,null},t[h](""),!n}));if(!f||!p||t){var m=r(/./[h]),g=n(h,""[e],(function(e,n,t,i,o){var s=r(e),l=n.exec;return l===a||l===d.exec?f&&!o?{done:!0,value:m(n,t,i)}:{done:!0,value:s(t,n,i)}:{done:!1}}));i(String.prototype,e,g[0]),i(d,h,g[1])}u&&l(d[h],"sham",!0)}},function(e,n,t){var r=t(0),i=t(10),a=t(8),o=t(5),s=t(22),l=t(87),c=r.TypeError;e.exports=function(e,n){var t=e.exec;if(o(t)){var r=i(t,e,n);return null!==r&&a(r),r}if("RegExp"===s(e))return i(l,e,n);throw c("RegExp#exec called on incompatible receiver")}},function(e,n,t){"use strict";var r=t(1),i=t(2),a=t(92).indexOf,o=t(39),s=i([].indexOf),l=!!s&&1/s([1],1,-0)<0,c=o("indexOf");r({target:"Array",proto:!0,forced:l||!c},{indexOf:function(e){var n=arguments.length>1?arguments[1]:void 0;return l?s(this,e,n)||0:a(this,e,n)}})},function(e,n,t){var r=t(6),i=t(22),a=t(4)("match");e.exports=function(e){var n;return r(e)&&(void 0!==(n=e[a])?!!n:"RegExp"==i(e))}},function(e,n,t){var r=t(0),i=t(93),a=t(21),o=t(48),s=r.Array,l=Math.max;e.exports=function(e,n,t){for(var r=a(e),c=i(n,r),d=i(void 0===t?r:t,r),u=s(l(d-c,0)),h=0;c<d;c++,h++)o(u,h,e[c]);return u.length=h,u}},function(e,n,t){"use strict";var r=t(8);e.exports=function(){var e=r(this),n="";return e.global&&(n+="g"),e.ignoreCase&&(n+="i"),e.multiline&&(n+="m"),e.dotAll&&(n+="s"),e.unicode&&(n+="u"),e.sticky&&(n+="y"),n}},function(e,n,t){var r=t(3),i=t(0).RegExp;e.exports=r((function(){var e=i(".","s");return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)}))},function(e,n,t){"use strict";var r=t(146).charAt;e.exports=function(e,n,t){return n+(t?r(e,n).length:1)}},function(e,n,t){"use strict";var r=t(1),i=t(2),a=t(44),o=t(15),s=t(39),l=i([].join),c=a!=Object,d=s("join",",");r({target:"Array",proto:!0,forced:c||!d},{join:function(e){return l(o(this),void 0===e?",":e)}})},function(e,n,t){"use strict";var r=t(1),i=t(0),a=t(3),o=t(42),s=t(6),l=t(13),c=t(21),d=t(48),u=t(125),h=t(72),f=t(4),p=t(45),m=f("isConcatSpreadable"),g=i.TypeError,v=p>=51||!a((function(){var e=[];return e[m]=!1,e.concat()[0]!==e})),y=h("concat"),w=function(e){if(!s(e))return!1;var n=e[m];return void 0!==n?!!n:o(e)};r({target:"Array",proto:!0,forced:!v||!y},{concat:function(e){var n,t,r,i,a,o=l(this),s=u(o,0),h=0;for(n=-1,r=arguments.length;n<r;n++)if(w(a=-1===n?o:arguments[n])){if(h+(i=c(a))>9007199254740991)throw g("Maximum allowed index exceeded");for(t=0;t<i;t++,h++)t in a&&d(s,h,a[t])}else{if(h>=9007199254740991)throw g("Maximum allowed index exceeded");d(s,h++,a)}return s.length=h,s}})},function(e,n,t){"use strict";var r=t(135).IteratorPrototype,i=t(25),a=t(40),o=t(41),s=t(47),l=function(){return this};e.exports=function(e,n,t,c){var d=n+" Iterator";return e.prototype=i(r,{next:a(+!c,t)}),o(e,d,!1,!0),s[d]=l,e}},function(e,n,t){var r=t(16);e.exports=function(e,n,t){for(var i in n)r(e,i,n[i],t);return e}},function(e,n,t){"use strict";var r=t(14),i=t(12),a=t(4),o=t(9),s=a("species");e.exports=function(e){var n=r(e),t=i.f;o&&n&&!n[s]&&t(n,s,{configurable:!0,get:function(){return this}})}},function(e,n,t){var r=t(0),i=t(35),a=r.TypeError;e.exports=function(e,n){if(i(n,e))return e;throw a("Incorrect invocation")}},function(e,n,t){var r=t(1),i=t(9),a=t(134),o=t(15),s=t(32),l=t(48);r({target:"Object",stat:!0,sham:!i},{getOwnPropertyDescriptors:function(e){for(var n,t,r=o(e),i=s.f,c=a(r),d={},u=0;c.length>u;)void 0!==(t=i(r,n=c[u++]))&&l(d,n,t);return d}})},function(e,n,t){var r=t(3),i=t(0).RegExp;e.exports=r((function(){var e=i("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")}))},function(e,n,t){"use strict";var r=t(1),i=t(92).includes,a=t(116);r({target:"Array",proto:!0},{includes:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),a("includes")},function(e,n,t){"use strict";var r=t(1),i=t(2),a=t(150),o=t(30),s=t(20),l=t(151),c=i("".indexOf);r({target:"String",proto:!0,forced:!l("includes")},{includes:function(e){return!!~c(s(o(this)),s(a(e)),arguments.length>1?arguments[1]:void 0)}})},function(e,n){e.exports=function(e){var n=null==e?0:e.length;return n?e[n-1]:void 0}},function(e,n,t){e.exports=t(339)},function(e,n,t){var r=t(0),i=t(10),a=t(6),o=t(91),s=t(53),l=t(210),c=t(4),d=r.TypeError,u=c("toPrimitive");e.exports=function(e,n){if(!a(e)||o(e))return e;var t,r=s(e,u);if(r){if(void 0===n&&(n="default"),t=i(r,e,n),!a(t)||o(t))return t;throw d("Can't convert object to primitive value")}return void 0===n&&(n="number"),l(e,n)}},function(e,n,t){var r=t(0),i=t(10),a=t(5),o=t(6),s=r.TypeError;e.exports=function(e,n){var t,r;if("string"===n&&a(t=e.toString)&&!o(r=i(t,e)))return r;if(a(t=e.valueOf)&&!o(r=i(t,e)))return r;if("string"!==n&&a(t=e.toString)&&!o(r=i(t,e)))return r;throw s("Can't convert object to primitive value")}},function(e,n,t){var r=t(0),i=t(5),a=t(67),o=r.WeakMap;e.exports=i(o)&&/native code/.test(a(o))},function(e,n,t){var r=t(0),i=t(5),a=r.String,o=r.TypeError;e.exports=function(e){if("object"==typeof e||i(e))return e;throw o("Can't set "+a(e)+" as a prototype")}},function(e,n,t){"use strict";var r,i,a,o,s=t(1),l=t(24),c=t(0),d=t(14),u=t(10),h=t(137),f=t(16),p=t(200),m=t(85),g=t(41),v=t(201),y=t(27),w=t(5),b=t(6),_=t(202),x=t(67),T=t(214),k=t(140),C=t(124),I=t(142).set,z=t(215),A=t(144),S=t(218),P=t(145),E=t(219),O=t(220),U=t(31),j=t(122),L=t(4),R=t(221),$=t(70),M=t(45),N=L("species"),F="Promise",D=U.getterFor(F),H=U.set,q=U.getterFor(F),B=h&&h.prototype,G=h,V=B,W=c.TypeError,Y=c.document,K=c.process,J=P.f,X=J,Q=!!(Y&&Y.createEvent&&c.dispatchEvent),Z=w(c.PromiseRejectionEvent),ee=!1,ne=j(F,(function(){var e=x(G),n=e!==String(G);if(!n&&66===M)return!0;if(l&&!V.finally)return!0;if(M>=51&&/native code/.test(e))return!1;var t=new G((function(e){e(1)})),r=function(e){e((function(){}),(function(){}))};return(t.constructor={})[N]=r,!(ee=t.then((function(){}))instanceof r)||!n&&R&&!Z})),te=ne||!k((function(e){G.all(e).catch((function(){}))})),re=function(e){var n;return!(!b(e)||!w(n=e.then))&&n},ie=function(e,n){var t,r,i,a=n.value,o=1==n.state,s=o?e.ok:e.fail,l=e.resolve,c=e.reject,d=e.domain;try{s?(o||(2===n.rejection&&ce(n),n.rejection=1),!0===s?t=a:(d&&d.enter(),t=s(a),d&&(d.exit(),i=!0)),t===e.promise?c(W("Promise-chain cycle")):(r=re(t))?u(r,t,l,c):l(t)):c(a)}catch(e){d&&!i&&d.exit(),c(e)}},ae=function(e,n){e.notified||(e.notified=!0,z((function(){for(var t,r=e.reactions;t=r.get();)ie(t,e);e.notified=!1,n&&!e.rejection&&se(e)})))},oe=function(e,n,t){var r,i;Q?((r=Y.createEvent("Event")).promise=n,r.reason=t,r.initEvent(e,!1,!0),c.dispatchEvent(r)):r={promise:n,reason:t},!Z&&(i=c["on"+e])?i(r):"unhandledrejection"===e&&S("Unhandled promise rejection",t)},se=function(e){u(I,c,(function(){var n,t=e.facade,r=e.value;if(le(e)&&(n=E((function(){$?K.emit("unhandledRejection",r,t):oe("unhandledrejection",t,r)})),e.rejection=$||le(e)?2:1,n.error))throw n.value}))},le=function(e){return 1!==e.rejection&&!e.parent},ce=function(e){u(I,c,(function(){var n=e.facade;$?K.emit("rejectionHandled",n):oe("rejectionhandled",n,e.value)}))},de=function(e,n,t){return function(r){e(n,r,t)}},ue=function(e,n,t){e.done||(e.done=!0,t&&(e=t),e.value=n,e.state=2,ae(e,!0))},he=function(e,n,t){if(!e.done){e.done=!0,t&&(e=t);try{if(e.facade===n)throw W("Promise can't be resolved itself");var r=re(n);r?z((function(){var t={done:!1};try{u(r,n,de(he,t,e),de(ue,t,e))}catch(n){ue(t,n,e)}})):(e.value=n,e.state=1,ae(e,!1))}catch(n){ue({done:!1},n,e)}}};if(ne&&(V=(G=function(e){_(this,V),y(e),u(r,this);var n=D(this);try{e(de(he,n),de(ue,n))}catch(e){ue(n,e)}}).prototype,(r=function(e){H(this,{type:F,done:!1,notified:!1,parent:!1,reactions:new O,rejection:!1,state:0,value:void 0})}).prototype=p(V,{then:function(e,n){var t=q(this),r=J(C(this,G));return t.parent=!0,r.ok=!w(e)||e,r.fail=w(n)&&n,r.domain=$?K.domain:void 0,0==t.state?t.reactions.add(r):z((function(){ie(r,t)})),r.promise},catch:function(e){return this.then(void 0,e)}}),i=function(){var e=new r,n=D(e);this.promise=e,this.resolve=de(he,n),this.reject=de(ue,n)},P.f=J=function(e){return e===G||e===a?new i(e):X(e)},!l&&w(h)&&B!==Object.prototype)){o=B.then,ee||(f(B,"then",(function(e,n){var t=this;return new G((function(e,n){u(o,t,e,n)})).then(e,n)}),{unsafe:!0}),f(B,"catch",V.catch,{unsafe:!0}));try{delete B.constructor}catch(e){}m&&m(B,V)}s({global:!0,wrap:!0,forced:ne},{Promise:G}),g(G,F,!1,!0),v(F),a=d(F),s({target:F,stat:!0,forced:ne},{reject:function(e){var n=J(this);return u(n.reject,void 0,e),n.promise}}),s({target:F,stat:!0,forced:l||ne},{resolve:function(e){return A(l&&this===a?G:this,e)}}),s({target:F,stat:!0,forced:te},{all:function(e){var n=this,t=J(n),r=t.resolve,i=t.reject,a=E((function(){var t=y(n.resolve),a=[],o=0,s=1;T(e,(function(e){var l=o++,c=!1;s++,u(t,n,e).then((function(e){c||(c=!0,a[l]=e,--s||r(a))}),i)})),--s||r(a)}));return a.error&&i(a.value),t.promise},race:function(e){var n=this,t=J(n),r=t.reject,i=E((function(){var i=y(n.resolve);T(e,(function(e){u(i,n,e).then(t.resolve,r)}))}));return i.error&&r(i.value),t.promise}})},function(e,n,t){var r=t(0),i=t(36),a=t(10),o=t(8),s=t(64),l=t(138),c=t(21),d=t(35),u=t(123),h=t(86),f=t(139),p=r.TypeError,m=function(e,n){this.stopped=e,this.result=n},g=m.prototype;e.exports=function(e,n,t){var r,v,y,w,b,_,x,T=t&&t.that,k=!(!t||!t.AS_ENTRIES),C=!(!t||!t.IS_ITERATOR),I=!(!t||!t.INTERRUPTED),z=i(n,T),A=function(e){return r&&f(r,"normal",e),new m(!0,e)},S=function(e){return k?(o(e),I?z(e[0],e[1],A):z(e[0],e[1])):I?z(e,A):z(e)};if(C)r=e;else{if(!(v=h(e)))throw p(s(e)+" is not iterable");if(l(v)){for(y=0,w=c(e);w>y;y++)if((b=S(e[y]))&&d(g,b))return b;return new m(!1)}r=u(e,v)}for(_=r.next;!(x=a(_,r)).done;){try{b=S(x.value)}catch(e){f(r,"throw",e)}if("object"==typeof b&&b&&d(g,b))return b}return new m(!1)}},function(e,n,t){var r,i,a,o,s,l,c,d,u=t(0),h=t(36),f=t(32).f,p=t(142).set,m=t(143),g=t(216),v=t(217),y=t(70),w=u.MutationObserver||u.WebKitMutationObserver,b=u.document,_=u.process,x=u.Promise,T=f(u,"queueMicrotask"),k=T&&T.value;k||(r=function(){var e,n;for(y&&(e=_.domain)&&e.exit();i;){n=i.fn,i=i.next;try{n()}catch(e){throw i?o():a=void 0,e}}a=void 0,e&&e.enter()},m||y||v||!w||!b?!g&&x&&x.resolve?((c=x.resolve(void 0)).constructor=x,d=h(c.then,c),o=function(){d(r)}):y?o=function(){_.nextTick(r)}:(p=h(p,u),o=function(){p(r)}):(s=!0,l=b.createTextNode(""),new w(r).observe(l,{characterData:!0}),o=function(){l.data=s=!s})),e.exports=k||function(e){var n={fn:e,next:void 0};a&&(a.next=n),i||(i=n,o()),a=n}},function(e,n,t){var r=t(61),i=t(0);e.exports=/ipad|iphone|ipod/i.test(r)&&void 0!==i.Pebble},function(e,n,t){var r=t(61);e.exports=/web0s(?!.*chrome)/i.test(r)},function(e,n,t){var r=t(0);e.exports=function(e,n){var t=r.console;t&&t.error&&(1==arguments.length?t.error(e):t.error(e,n))}},function(e,n){e.exports=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}}},function(e,n){var t=function(){this.head=null,this.tail=null};t.prototype={add:function(e){var n={item:e,next:null};this.head?this.tail.next=n:this.head=n,this.tail=n},get:function(){var e=this.head;if(e)return this.head=e.next,this.tail===e&&(this.tail=null),e.item}},e.exports=t},function(e,n){e.exports="object"==typeof window},function(e,n,t){var r=t(1),i=t(223);r({target:"Object",stat:!0,forced:Object.assign!==i},{assign:i})},function(e,n,t){"use strict";var r=t(9),i=t(2),a=t(10),o=t(3),s=t(65),l=t(96),c=t(95),d=t(13),u=t(44),h=Object.assign,f=Object.defineProperty,p=i([].concat);e.exports=!h||o((function(){if(r&&1!==h({b:1},h(f({},"a",{enumerable:!0,get:function(){f(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},n={},t=Symbol();return e[t]=7,"abcdefghijklmnopqrst".split("").forEach((function(e){n[e]=e})),7!=h({},e)[t]||"abcdefghijklmnopqrst"!=s(h({},n)).join("")}))?function(e,n){for(var t=d(e),i=arguments.length,o=1,h=l.f,f=c.f;i>o;)for(var m,g=u(arguments[o++]),v=h?p(s(g),h(g)):s(g),y=v.length,w=0;y>w;)m=v[w++],r&&!a(f,g,m)||(t[m]=g[m]);return t}:h},function(e,n,t){"use strict";var r=t(1),i=t(24),a=t(137),o=t(3),s=t(14),l=t(5),c=t(124),d=t(144),u=t(16);if(r({target:"Promise",proto:!0,real:!0,forced:!!a&&o((function(){a.prototype.finally.call({then:function(){}},(function(){}))}))},{finally:function(e){var n=c(this,s("Promise")),t=l(e);return this.then(t?function(t){return d(n,e()).then((function(){return t}))}:e,t?function(t){return d(n,e()).then((function(){throw t}))}:e)}}),!i&&l(a)){var h=s("Promise").prototype.finally;a.prototype.finally!==h&&u(a.prototype,"finally",h,{unsafe:!0})}},function(e,n,t){"use strict";var r=t(98),i=t(57);e.exports=r?{}.toString:function(){return"[object "+i(this)+"]"}},function(e,n,t){var r=t(0),i=t(42),a=t(68),o=t(6),s=t(4)("species"),l=r.Array;e.exports=function(e){var n;return i(e)&&(n=e.constructor,(a(n)&&(n===l||i(n.prototype))||o(n)&&null===(n=n[s]))&&(n=void 0)),void 0===n?l:n}},function(e,n,t){"use strict";var r=t(1),i=t(228).left,a=t(39),o=t(45),s=t(70);r({target:"Array",proto:!0,forced:!a("reduce")||!s&&o>79&&o<83},{reduce:function(e){var n=arguments.length;return i(this,e,n,n>1?arguments[1]:void 0)}})},function(e,n,t){var r=t(0),i=t(27),a=t(13),o=t(44),s=t(21),l=r.TypeError,c=function(e){return function(n,t,r,c){i(t);var d=a(n),u=o(d),h=s(d),f=e?h-1:0,p=e?-1:1;if(r<2)for(;;){if(f in u){c=u[f],f+=p;break}if(f+=p,e?f<0:h<=f)throw l("Reduce of empty array with no initial value")}for(;e?f>=0:h>f;f+=p)f in u&&(c=t(c,u[f],f,d));return c}};e.exports={left:c(!1),right:c(!0)}},function(e,n,t){"use strict";var r,i=t(1),a=t(2),o=t(32).f,s=t(83),l=t(20),c=t(150),d=t(30),u=t(151),h=t(24),f=a("".startsWith),p=a("".slice),m=Math.min,g=u("startsWith");i({target:"String",proto:!0,forced:!!(h||g||(r=o(String.prototype,"startsWith"),!r||r.writable))&&!g},{startsWith:function(e){var n=l(d(this));c(e);var t=s(m(arguments.length>1?arguments[1]:void 0,n.length)),r=l(e);return f?f(n,r,t):p(n,t,t+r.length)===r}})},function(e,n,t){var r=t(1),i=t(153),a=t(3),o=t(6),s=t(231).onFreeze,l=Object.freeze;r({target:"Object",stat:!0,forced:a((function(){l(1)})),sham:!i},{freeze:function(e){return l&&o(e)?l(s(e)):e}})},function(e,n,t){var r=t(1),i=t(2),a=t(46),o=t(6),s=t(11),l=t(12).f,c=t(56),d=t(154),u=t(232),h=t(60),f=t(153),p=!1,m=h("meta"),g=0,v=function(e){l(e,m,{value:{objectID:"O"+g++,weakData:{}}})},y=e.exports={enable:function(){y.enable=function(){},p=!0;var e=c.f,n=i([].splice),t={};t[m]=1,e(t).length&&(c.f=function(t){for(var r=e(t),i=0,a=r.length;i<a;i++)if(r[i]===m){n(r,i,1);break}return r},r({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:d.f}))},fastKey:function(e,n){if(!o(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!s(e,m)){if(!u(e))return"F";if(!n)return"E";v(e)}return e[m].objectID},getWeakData:function(e,n){if(!s(e,m)){if(!u(e))return!0;if(!n)return!1;v(e)}return e[m].weakData},onFreeze:function(e){return f&&p&&u(e)&&!s(e,m)&&v(e),e}};a[m]=!0},function(e,n,t){var r=t(3),i=t(6),a=t(22),o=t(233),s=Object.isExtensible,l=r((function(){s(1)}));e.exports=l||o?function(e){return!!i(e)&&((!o||"ArrayBuffer"!=a(e))&&(!s||s(e)))}:s},function(e,n,t){var r=t(3);e.exports=r((function(){if("function"==typeof ArrayBuffer){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}}))},function(e,n,t){var r=t(0);e.exports=r},function(e,n,t){"use strict";var r=t(0),i=t(36),a=t(10),o=t(13),s=t(236),l=t(138),c=t(68),d=t(21),u=t(48),h=t(123),f=t(86),p=r.Array;e.exports=function(e){var n=o(e),t=c(this),r=arguments.length,m=r>1?arguments[1]:void 0,g=void 0!==m;g&&(m=i(m,r>2?arguments[2]:void 0));var v,y,w,b,_,x,T=f(n),k=0;if(!T||this==p&&l(T))for(v=d(n),y=t?new this(v):p(v);v>k;k++)x=g?m(n[k],k):n[k],u(y,k,x);else for(_=(b=h(n,T)).next,y=t?new this:[];!(w=a(_,b)).done;k++)x=g?s(b,m,[w.value,k],!0):w.value,u(y,k,x);return y.length=k,y}},function(e,n,t){var r=t(8),i=t(139);e.exports=function(e,n,t,a){try{return a?n(r(t)[0],t[1]):n(t)}catch(n){i(e,"throw",n)}}},function(e,n,t){var r=t(2),i=t(13),a=Math.floor,o=r("".charAt),s=r("".replace),l=r("".slice),c=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,d=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,n,t,r,u,h){var f=t+e.length,p=r.length,m=d;return void 0!==u&&(u=i(u),m=c),s(h,m,(function(i,s){var c;switch(o(s,0)){case"$":return"$";case"&":return e;case"`":return l(n,0,t);case"'":return l(n,f);case"<":c=u[l(s,1,-1)];break;default:var d=+s;if(0===d)return i;if(d>p){var h=a(d/10);return 0===h?i:h<=p?void 0===r[h-1]?o(s,1):r[h-1]+o(s,1):i}c=r[d-1]}return void 0===c?"":c}))}},function(e,n,t){var r=t(1),i=t(0),a=t(14),o=t(37),s=t(2),l=t(3),c=i.Array,d=a("JSON","stringify"),u=s(/./.exec),h=s("".charAt),f=s("".charCodeAt),p=s("".replace),m=s(1..toString),g=/[\uD800-\uDFFF]/g,v=/^[\uD800-\uDBFF]$/,y=/^[\uDC00-\uDFFF]$/,w=function(e,n,t){var r=h(t,n-1),i=h(t,n+1);return u(v,e)&&!u(y,i)||u(y,e)&&!u(v,r)?"\\u"+m(f(e,0),16):e},b=l((function(){return'"\\udf06\\ud834"'!==d("\udf06\ud834")||'"\\udead"'!==d("\udead")}));d&&r({target:"JSON",stat:!0,forced:b},{stringify:function(e,n,t){for(var r=0,i=arguments.length,a=c(i);r<i;r++)a[r]=arguments[r];var s=o(d,null,a);return"string"==typeof s?p(s,g,w):s}})},function(e,n,t){var r=t(159),i=t(240);e.exports=function e(n,t,a,o,s){var l=-1,c=n.length;for(a||(a=i),s||(s=[]);++l<c;){var d=n[l];t>0&&a(d)?t>1?e(d,t-1,a,o,s):r(s,d):o||(s[s.length]=d)}return s}},function(e,n,t){var r=t(49),i=t(101),a=t(18),o=r?r.isConcatSpreadable:void 0;e.exports=function(e){return a(e)||i(e)||!!(o&&e&&e[o])}},function(e,n,t){var r=t(43),i=t(33);e.exports=function(e){return i(e)&&"[object Arguments]"==r(e)}},function(e,n,t){var r=t(49),i=Object.prototype,a=i.hasOwnProperty,o=i.toString,s=r?r.toStringTag:void 0;e.exports=function(e){var n=a.call(e,s),t=e[s];try{e[s]=void 0;var r=!0}catch(e){}var i=o.call(e);return r&&(n?e[s]=t:delete e[s]),i}},function(e,n){var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},function(e,n,t){var r=t(245),i=t(301),a=t(109),o=t(18),s=t(312);e.exports=function(e){return"function"==typeof e?e:null==e?a:"object"==typeof e?o(e)?i(e[0],e[1]):r(e):s(e)}},function(e,n,t){var r=t(246),i=t(300),a=t(176);e.exports=function(e){var n=i(e);return 1==n.length&&n[0][2]?a(n[0][0],n[0][1]):function(t){return t===e||r(t,e,n)}}},function(e,n,t){var r=t(161),i=t(165);e.exports=function(e,n,t,a){var o=t.length,s=o,l=!a;if(null==e)return!s;for(e=Object(e);o--;){var c=t[o];if(l&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++o<s;){var d=(c=t[o])[0],u=e[d],h=c[1];if(l&&c[2]){if(void 0===u&&!(d in e))return!1}else{var f=new r;if(a)var p=a(u,h,d,e,n,f);if(!(void 0===p?i(h,u,3,a,f):p))return!1}}return!0}},function(e,n){e.exports=function(){this.__data__=[],this.size=0}},function(e,n,t){var r=t(75),i=Array.prototype.splice;e.exports=function(e){var n=this.__data__,t=r(n,e);return!(t<0)&&(t==n.length-1?n.pop():i.call(n,t,1),--this.size,!0)}},function(e,n,t){var r=t(75);e.exports=function(e){var n=this.__data__,t=r(n,e);return t<0?void 0:n[t][1]}},function(e,n,t){var r=t(75);e.exports=function(e){return r(this.__data__,e)>-1}},function(e,n,t){var r=t(75);e.exports=function(e,n){var t=this.__data__,i=r(t,e);return i<0?(++this.size,t.push([e,n])):t[i][1]=n,this}},function(e,n,t){var r=t(74);e.exports=function(){this.__data__=new r,this.size=0}},function(e,n){e.exports=function(e){var n=this.__data__,t=n.delete(e);return this.size=n.size,t}},function(e,n){e.exports=function(e){return this.__data__.get(e)}},function(e,n){e.exports=function(e){return this.__data__.has(e)}},function(e,n,t){var r=t(74),i=t(102),a=t(104);e.exports=function(e,n){var t=this.__data__;if(t instanceof r){var o=t.__data__;if(!i||o.length<199)return o.push([e,n]),this.size=++t.size,this;t=this.__data__=new a(o)}return t.set(e,n),this.size=t.size,this}},function(e,n,t){var r=t(163),i=t(258),a=t(103),o=t(164),s=/^\[object .+?Constructor\]$/,l=Function.prototype,c=Object.prototype,d=l.toString,u=c.hasOwnProperty,h=RegExp("^"+d.call(u).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!a(e)||i(e))&&(r(e)?h:s).test(o(e))}},function(e,n,t){var r,i=t(259),a=(r=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";e.exports=function(e){return!!a&&a in e}},function(e,n,t){var r=t(19)["__core-js_shared__"];e.exports=r},function(e,n){e.exports=function(e,n){return null==e?void 0:e[n]}},function(e,n,t){var r=t(262),i=t(74),a=t(102);e.exports=function(){this.size=0,this.__data__={hash:new r,map:new(a||i),string:new r}}},function(e,n,t){var r=t(263),i=t(264),a=t(265),o=t(266),s=t(267);function l(e){var n=-1,t=null==e?0:e.length;for(this.clear();++n<t;){var r=e[n];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=a,l.prototype.has=o,l.prototype.set=s,e.exports=l},function(e,n,t){var r=t(76);e.exports=function(){this.__data__=r?r(null):{},this.size=0}},function(e,n){e.exports=function(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n}},function(e,n,t){var r=t(76),i=Object.prototype.hasOwnProperty;e.exports=function(e){var n=this.__data__;if(r){var t=n[e];return"__lodash_hash_undefined__"===t?void 0:t}return i.call(n,e)?n[e]:void 0}},function(e,n,t){var r=t(76),i=Object.prototype.hasOwnProperty;e.exports=function(e){var n=this.__data__;return r?void 0!==n[e]:i.call(n,e)}},function(e,n,t){var r=t(76);e.exports=function(e,n){var t=this.__data__;return this.size+=this.has(e)?0:1,t[e]=r&&void 0===n?"__lodash_hash_undefined__":n,this}},function(e,n,t){var r=t(77);e.exports=function(e){var n=r(this,e).delete(e);return this.size-=n?1:0,n}},function(e,n){e.exports=function(e){var n=typeof e;return"string"==n||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==e:null===e}},function(e,n,t){var r=t(77);e.exports=function(e){return r(this,e).get(e)}},function(e,n,t){var r=t(77);e.exports=function(e){return r(this,e).has(e)}},function(e,n,t){var r=t(77);e.exports=function(e,n){var t=r(this,e),i=t.size;return t.set(e,n),this.size+=t.size==i?0:1,this}},function(e,n,t){var r=t(161),i=t(166),a=t(277),o=t(280),s=t(296),l=t(18),c=t(170),d=t(172),u="[object Object]",h=Object.prototype.hasOwnProperty;e.exports=function(e,n,t,f,p,m){var g=l(e),v=l(n),y=g?"[object Array]":s(e),w=v?"[object Array]":s(n),b=(y="[object Arguments]"==y?u:y)==u,_=(w="[object Arguments]"==w?u:w)==u,x=y==w;if(x&&c(e)){if(!c(n))return!1;g=!0,b=!1}if(x&&!b)return m||(m=new r),g||d(e)?i(e,n,t,f,p,m):a(e,n,y,t,f,p,m);if(!(1&t)){var T=b&&h.call(e,"__wrapped__"),k=_&&h.call(n,"__wrapped__");if(T||k){var C=T?e.value():e,I=k?n.value():n;return m||(m=new r),p(C,I,t,f,m)}}return!!x&&(m||(m=new r),o(e,n,t,f,p,m))}},function(e,n){e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},function(e,n){e.exports=function(e){return this.__data__.has(e)}},function(e,n){e.exports=function(e,n){for(var t=-1,r=null==e?0:e.length;++t<r;)if(n(e[t],t,e))return!0;return!1}},function(e,n,t){var r=t(49),i=t(278),a=t(162),o=t(166),s=t(279),l=t(105),c=r?r.prototype:void 0,d=c?c.valueOf:void 0;e.exports=function(e,n,t,r,c,u,h){switch(t){case"[object DataView]":if(e.byteLength!=n.byteLength||e.byteOffset!=n.byteOffset)return!1;e=e.buffer,n=n.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=n.byteLength||!u(new i(e),new i(n)));case"[object Boolean]":case"[object Date]":case"[object Number]":return a(+e,+n);case"[object Error]":return e.name==n.name&&e.message==n.message;case"[object RegExp]":case"[object String]":return e==n+"";case"[object Map]":var f=s;case"[object Set]":var p=1&r;if(f||(f=l),e.size!=n.size&&!p)return!1;var m=h.get(e);if(m)return m==n;r|=2,h.set(e,n);var g=o(f(e),f(n),r,c,u,h);return h.delete(e),g;case"[object Symbol]":if(d)return d.call(e)==d.call(n)}return!1}},function(e,n,t){var r=t(19).Uint8Array;e.exports=r},function(e,n){e.exports=function(e){var n=-1,t=Array(e.size);return e.forEach((function(e,r){t[++n]=[r,e]})),t}},function(e,n,t){var r=t(281),i=Object.prototype.hasOwnProperty;e.exports=function(e,n,t,a,o,s){var l=1&t,c=r(e),d=c.length;if(d!=r(n).length&&!l)return!1;for(var u=d;u--;){var h=c[u];if(!(l?h in n:i.call(n,h)))return!1}var f=s.get(e),p=s.get(n);if(f&&p)return f==n&&p==e;var m=!0;s.set(e,n),s.set(n,e);for(var g=l;++u<d;){var v=e[h=c[u]],y=n[h];if(a)var w=l?a(y,v,h,n,e,s):a(v,y,h,e,n,s);if(!(void 0===w?v===y||o(v,y,t,a,s):w)){m=!1;break}g||(g="constructor"==h)}if(m&&!g){var b=e.constructor,_=n.constructor;b==_||!("constructor"in e)||!("constructor"in n)||"function"==typeof b&&b instanceof b&&"function"==typeof _&&_ instanceof _||(m=!1)}return s.delete(e),s.delete(n),m}},function(e,n,t){var r=t(282),i=t(283),a=t(169);e.exports=function(e){return r(e,a,i)}},function(e,n,t){var r=t(159),i=t(18);e.exports=function(e,n,t){var a=n(e);return i(e)?a:r(a,t(e))}},function(e,n,t){var r=t(284),i=t(285),a=Object.prototype.propertyIsEnumerable,o=Object.getOwnPropertySymbols,s=o?function(e){return null==e?[]:(e=Object(e),r(o(e),(function(n){return a.call(e,n)})))}:i;e.exports=s},function(e,n){e.exports=function(e,n){for(var t=-1,r=null==e?0:e.length,i=0,a=[];++t<r;){var o=e[t];n(o,t,e)&&(a[i++]=o)}return a}},function(e,n){e.exports=function(){return[]}},function(e,n,t){var r=t(287),i=t(101),a=t(18),o=t(170),s=t(171),l=t(172),c=Object.prototype.hasOwnProperty;e.exports=function(e,n){var t=a(e),d=!t&&i(e),u=!t&&!d&&o(e),h=!t&&!d&&!u&&l(e),f=t||d||u||h,p=f?r(e.length,String):[],m=p.length;for(var g in e)!n&&!c.call(e,g)||f&&("length"==g||u&&("offset"==g||"parent"==g)||h&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||s(g,m))||p.push(g);return p}},function(e,n){e.exports=function(e,n){for(var t=-1,r=Array(e);++t<e;)r[t]=n(t);return r}},function(e,n){e.exports=function(){return!1}},function(e,n,t){var r=t(43),i=t(106),a=t(33),o={};o["[object Float32Array]"]=o["[object Float64Array]"]=o["[object Int8Array]"]=o["[object Int16Array]"]=o["[object Int32Array]"]=o["[object Uint8Array]"]=o["[object Uint8ClampedArray]"]=o["[object Uint16Array]"]=o["[object Uint32Array]"]=!0,o["[object Arguments]"]=o["[object Array]"]=o["[object ArrayBuffer]"]=o["[object Boolean]"]=o["[object DataView]"]=o["[object Date]"]=o["[object Error]"]=o["[object Function]"]=o["[object Map]"]=o["[object Number]"]=o["[object Object]"]=o["[object RegExp]"]=o["[object Set]"]=o["[object String]"]=o["[object WeakMap]"]=!1,e.exports=function(e){return a(e)&&i(e.length)&&!!o[r(e)]}},function(e,n){e.exports=function(e){return function(n){return e(n)}}},function(e,n,t){(function(e){var r=t(160),i=n&&!n.nodeType&&n,a=i&&"object"==typeof e&&e&&!e.nodeType&&e,o=a&&a.exports===i&&r.process,s=function(){try{var e=a&&a.require&&a.require("util").types;return e||o&&o.binding&&o.binding("util")}catch(e){}}();e.exports=s}).call(this,t(126)(e))},function(e,n,t){var r=t(293),i=t(294),a=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return i(e);var n=[];for(var t in Object(e))a.call(e,t)&&"constructor"!=t&&n.push(t);return n}},function(e,n){var t=Object.prototype;e.exports=function(e){var n=e&&e.constructor;return e===("function"==typeof n&&n.prototype||t)}},function(e,n,t){var r=t(295)(Object.keys,Object);e.exports=r},function(e,n){e.exports=function(e,n){return function(t){return e(n(t))}}},function(e,n,t){var r=t(297),i=t(102),a=t(298),o=t(174),s=t(299),l=t(43),c=t(164),d=c(r),u=c(i),h=c(a),f=c(o),p=c(s),m=l;(r&&"[object DataView]"!=m(new r(new ArrayBuffer(1)))||i&&"[object Map]"!=m(new i)||a&&"[object Promise]"!=m(a.resolve())||o&&"[object Set]"!=m(new o)||s&&"[object WeakMap]"!=m(new s))&&(m=function(e){var n=l(e),t="[object Object]"==n?e.constructor:void 0,r=t?c(t):"";if(r)switch(r){case d:return"[object DataView]";case u:return"[object Map]";case h:return"[object Promise]";case f:return"[object Set]";case p:return"[object WeakMap]"}return n}),e.exports=m},function(e,n,t){var r=t(28)(t(19),"DataView");e.exports=r},function(e,n,t){var r=t(28)(t(19),"Promise");e.exports=r},function(e,n,t){var r=t(28)(t(19),"WeakMap");e.exports=r},function(e,n,t){var r=t(175),i=t(169);e.exports=function(e){for(var n=i(e),t=n.length;t--;){var a=n[t],o=e[a];n[t]=[a,o,r(o)]}return n}},function(e,n,t){var r=t(165),i=t(302),a=t(309),o=t(107),s=t(175),l=t(176),c=t(78);e.exports=function(e,n){return o(e)&&s(n)?l(c(e),n):function(t){var o=i(t,e);return void 0===o&&o===n?a(t,e):r(n,o,3)}}},function(e,n,t){var r=t(177);e.exports=function(e,n,t){var i=null==e?void 0:r(e,n);return void 0===i?t:i}},function(e,n,t){var r=t(304),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,a=/\\(\\)?/g,o=r((function(e){var n=[];return 46===e.charCodeAt(0)&&n.push(""),e.replace(i,(function(e,t,r,i){n.push(r?i.replace(a,"$1"):t||e)})),n}));e.exports=o},function(e,n,t){var r=t(305);e.exports=function(e){var n=r(e,(function(e){return 500===t.size&&t.clear(),e})),t=n.cache;return n}},function(e,n,t){var r=t(104);function i(e,n){if("function"!=typeof e||null!=n&&"function"!=typeof n)throw new TypeError("Expected a function");var t=function(){var r=arguments,i=n?n.apply(this,r):r[0],a=t.cache;if(a.has(i))return a.get(i);var o=e.apply(this,r);return t.cache=a.set(i,o)||a,o};return t.cache=new(i.Cache||r),t}i.Cache=r,e.exports=i},function(e,n,t){var r=t(307);e.exports=function(e){return null==e?"":r(e)}},function(e,n,t){var r=t(49),i=t(308),a=t(18),o=t(108),s=r?r.prototype:void 0,l=s?s.toString:void 0;e.exports=function e(n){if("string"==typeof n)return n;if(a(n))return i(n,e)+"";if(o(n))return l?l.call(n):"";var t=n+"";return"0"==t&&1/n==-1/0?"-0":t}},function(e,n){e.exports=function(e,n){for(var t=-1,r=null==e?0:e.length,i=Array(r);++t<r;)i[t]=n(e[t],t,e);return i}},function(e,n,t){var r=t(310),i=t(311);e.exports=function(e,n){return null!=e&&i(e,n,r)}},function(e,n){e.exports=function(e,n){return null!=e&&n in Object(e)}},function(e,n,t){var r=t(178),i=t(101),a=t(18),o=t(171),s=t(106),l=t(78);e.exports=function(e,n,t){for(var c=-1,d=(n=r(n,e)).length,u=!1;++c<d;){var h=l(n[c]);if(!(u=null!=e&&t(e,h)))break;e=e[h]}return u||++c!=d?u:!!(d=null==e?0:e.length)&&s(d)&&o(h,d)&&(a(e)||i(e))}},function(e,n,t){var r=t(313),i=t(314),a=t(107),o=t(78);e.exports=function(e){return a(e)?r(o(e)):i(e)}},function(e,n){e.exports=function(e){return function(n){return null==n?void 0:n[e]}}},function(e,n,t){var r=t(177);e.exports=function(e){return function(n){return r(n,e)}}},function(e,n,t){var r=t(109),i=t(316),a=t(318);e.exports=function(e,n){return a(i(e,n,r),e+"")}},function(e,n,t){var r=t(317),i=Math.max;e.exports=function(e,n,t){return n=i(void 0===n?e.length-1:n,0),function(){for(var a=arguments,o=-1,s=i(a.length-n,0),l=Array(s);++o<s;)l[o]=a[n+o];o=-1;for(var c=Array(n+1);++o<n;)c[o]=a[o];return c[n]=t(l),r(e,this,c)}}},function(e,n){e.exports=function(e,n,t){switch(t.length){case 0:return e.call(n);case 1:return e.call(n,t[0]);case 2:return e.call(n,t[0],t[1]);case 3:return e.call(n,t[0],t[1],t[2])}return e.apply(n,t)}},function(e,n,t){var r=t(319),i=t(322)(r);e.exports=i},function(e,n,t){var r=t(320),i=t(321),a=t(109),o=i?function(e,n){return i(e,"toString",{configurable:!0,enumerable:!1,value:r(n),writable:!0})}:a;e.exports=o},function(e,n){e.exports=function(e){return function(){return e}}},function(e,n,t){var r=t(28),i=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=i},function(e,n){var t=Date.now;e.exports=function(e){var n=0,r=0;return function(){var i=t(),a=16-(i-r);if(r=i,a>0){if(++n>=800)return arguments[0]}else n=0;return e.apply(void 0,arguments)}}},function(e,n,t){var r=t(167),i=t(324),a=t(329),o=t(168),s=t(330),l=t(105);e.exports=function(e,n,t){var c=-1,d=i,u=e.length,h=!0,f=[],p=f;if(t)h=!1,d=a;else if(u>=200){var m=n?null:s(e);if(m)return l(m);h=!1,d=o,p=new r}else p=n?[]:f;e:for(;++c<u;){var g=e[c],v=n?n(g):g;if(g=t||0!==g?g:0,h&&v==v){for(var y=p.length;y--;)if(p[y]===v)continue e;n&&p.push(v),f.push(g)}else d(p,v,t)||(p!==f&&p.push(v),f.push(g))}return f}},function(e,n,t){var r=t(325);e.exports=function(e,n){return!!(null==e?0:e.length)&&r(e,n,0)>-1}},function(e,n,t){var r=t(326),i=t(327),a=t(328);e.exports=function(e,n,t){return n==n?a(e,n,t):r(e,i,t)}},function(e,n){e.exports=function(e,n,t,r){for(var i=e.length,a=t+(r?1:-1);r?a--:++a<i;)if(n(e[a],a,e))return a;return-1}},function(e,n){e.exports=function(e){return e!=e}},function(e,n){e.exports=function(e,n,t){for(var r=t-1,i=e.length;++r<i;)if(e[r]===n)return r;return-1}},function(e,n){e.exports=function(e,n,t){for(var r=-1,i=null==e?0:e.length;++r<i;)if(t(n,e[r]))return!0;return!1}},function(e,n,t){var r=t(174),i=t(331),a=t(105),o=r&&1/a(new r([,-0]))[1]==1/0?function(e){return new r(e)}:i;e.exports=o},function(e,n){e.exports=function(){}},function(e,n,t){var r=t(173),i=t(33);e.exports=function(e){return i(e)&&r(e)}},function(e,n,t){},function(e,n,t){},function(e,n,t){},function(e,n,t){"use strict";var r=t(0),i=t(2),a=t(27),o=t(6),s=t(11),l=t(69),c=r.Function,d=i([].concat),u=i([].join),h={},f=function(e,n,t){if(!s(h,n)){for(var r=[],i=0;i<n;i++)r[i]="a["+i+"]";h[n]=c("C,a","return new C("+u(r,",")+")")}return h[n](e,t)};e.exports=c.bind||function(e){var n=a(this),t=n.prototype,r=l(arguments,1),i=function(){var t=d(r,l(arguments));return this instanceof i?f(n,t.length,t):n.apply(e,t)};return o(t)&&(i.prototype=t),i}},function(e,n,t){"use strict";t(182)},function(e,n,t){"use strict";t(183)},function(e,n,t){"use strict";t.r(n);t(120),t(213),t(222),t(224);var r=t(71),i=(t(117),t(55),t(7),t(17),t(23),t(81),t(34),Object.freeze({}));function a(e){return null==e}function o(e){return null!=e}function s(e){return!0===e}function l(e){return"string"==typeof e||"number"==typeof e||"symbol"==typeof e||"boolean"==typeof e}function c(e){return null!==e&&"object"==typeof e}var d=Object.prototype.toString;function u(e){return"[object Object]"===d.call(e)}function h(e){return"[object RegExp]"===d.call(e)}function f(e){var n=parseFloat(String(e));return n>=0&&Math.floor(n)===n&&isFinite(e)}function p(e){return o(e)&&"function"==typeof e.then&&"function"==typeof e.catch}function m(e){return null==e?"":Array.isArray(e)||u(e)&&e.toString===d?JSON.stringify(e,null,2):String(e)}function g(e){var n=parseFloat(e);return isNaN(n)?e:n}function v(e,n){for(var t=Object.create(null),r=e.split(","),i=0;i<r.length;i++)t[r[i]]=!0;return n?function(e){return t[e.toLowerCase()]}:function(e){return t[e]}}v("slot,component",!0);var y=v("key,ref,slot,slot-scope,is");function w(e,n){if(e.length){var t=e.indexOf(n);if(t>-1)return e.splice(t,1)}}var b=Object.prototype.hasOwnProperty;function _(e,n){return b.call(e,n)}function x(e){var n=Object.create(null);return function(t){return n[t]||(n[t]=e(t))}}var T=/-(\w)/g,k=x((function(e){return e.replace(T,(function(e,n){return n?n.toUpperCase():""}))})),C=x((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})),I=/\B([A-Z])/g,z=x((function(e){return e.replace(I,"-$1").toLowerCase()}));var A=Function.prototype.bind?function(e,n){return e.bind(n)}:function(e,n){function t(t){var r=arguments.length;return r?r>1?e.apply(n,arguments):e.call(n,t):e.call(n)}return t._length=e.length,t};function S(e,n){n=n||0;for(var t=e.length-n,r=new Array(t);t--;)r[t]=e[t+n];return r}function P(e,n){for(var t in n)e[t]=n[t];return e}function E(e){for(var n={},t=0;t<e.length;t++)e[t]&&P(n,e[t]);return n}function O(e,n,t){}var U=function(e,n,t){return!1},j=function(e){return e};function L(e,n){if(e===n)return!0;var t=c(e),r=c(n);if(!t||!r)return!t&&!r&&String(e)===String(n);try{var i=Array.isArray(e),a=Array.isArray(n);if(i&&a)return e.length===n.length&&e.every((function(e,t){return L(e,n[t])}));if(e instanceof Date&&n instanceof Date)return e.getTime()===n.getTime();if(i||a)return!1;var o=Object.keys(e),s=Object.keys(n);return o.length===s.length&&o.every((function(t){return L(e[t],n[t])}))}catch(e){return!1}}function R(e,n){for(var t=0;t<e.length;t++)if(L(e[t],n))return t;return-1}function $(e){var n=!1;return function(){n||(n=!0,e.apply(this,arguments))}}var M=["component","directive","filter"],N=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated","errorCaptured","serverPrefetch"],F={optionMergeStrategies:Object.create(null),silent:!1,productionTip:!1,devtools:!1,performance:!1,errorHandler:null,warnHandler:null,ignoredElements:[],keyCodes:Object.create(null),isReservedTag:U,isReservedAttr:U,isUnknownElement:U,getTagNamespace:O,parsePlatformTagName:j,mustUseProp:U,async:!0,_lifecycleHooks:N},D=/a-zA-Z\u00B7\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u037D\u037F-\u1FFF\u200C-\u200D\u203F-\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD/;function H(e,n,t,r){Object.defineProperty(e,n,{value:t,enumerable:!!r,writable:!0,configurable:!0})}var q=new RegExp("[^"+D.source+".$_\\d]");var B,G="__proto__"in{},V="undefined"!=typeof window,W="undefined"!=typeof WXEnvironment&&!!WXEnvironment.platform,Y=W&&WXEnvironment.platform.toLowerCase(),K=V&&window.navigator.userAgent.toLowerCase(),J=K&&/msie|trident/.test(K),X=K&&K.indexOf("msie 9.0")>0,Q=K&&K.indexOf("edge/")>0,Z=(K&&K.indexOf("android"),K&&/iphone|ipad|ipod|ios/.test(K)||"ios"===Y),ee=(K&&/chrome\/\d+/.test(K),K&&/phantomjs/.test(K),K&&K.match(/firefox\/(\d+)/)),ne={}.watch,te=!1;if(V)try{var re={};Object.defineProperty(re,"passive",{get:function(){te=!0}}),window.addEventListener("test-passive",null,re)}catch(e){}var ie=function(){return void 0===B&&(B=!V&&!W&&"undefined"!=typeof global&&(global.process&&"server"===global.process.env.VUE_ENV)),B},ae=V&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__;function oe(e){return"function"==typeof e&&/native code/.test(e.toString())}var se,le="undefined"!=typeof Symbol&&oe(Symbol)&&"undefined"!=typeof Reflect&&oe(Reflect.ownKeys);se="undefined"!=typeof Set&&oe(Set)?Set:function(){function e(){this.set=Object.create(null)}return e.prototype.has=function(e){return!0===this.set[e]},e.prototype.add=function(e){this.set[e]=!0},e.prototype.clear=function(){this.set=Object.create(null)},e}();var ce=O,de=0,ue=function(){this.id=de++,this.subs=[]};ue.prototype.addSub=function(e){this.subs.push(e)},ue.prototype.removeSub=function(e){w(this.subs,e)},ue.prototype.depend=function(){ue.target&&ue.target.addDep(this)},ue.prototype.notify=function(){var e=this.subs.slice();for(var n=0,t=e.length;n<t;n++)e[n].update()},ue.target=null;var he=[];function fe(e){he.push(e),ue.target=e}function pe(){he.pop(),ue.target=he[he.length-1]}var me=function(e,n,t,r,i,a,o,s){this.tag=e,this.data=n,this.children=t,this.text=r,this.elm=i,this.ns=void 0,this.context=a,this.fnContext=void 0,this.fnOptions=void 0,this.fnScopeId=void 0,this.key=n&&n.key,this.componentOptions=o,this.componentInstance=void 0,this.parent=void 0,this.raw=!1,this.isStatic=!1,this.isRootInsert=!0,this.isComment=!1,this.isCloned=!1,this.isOnce=!1,this.asyncFactory=s,this.asyncMeta=void 0,this.isAsyncPlaceholder=!1},ge={child:{configurable:!0}};ge.child.get=function(){return this.componentInstance},Object.defineProperties(me.prototype,ge);var ve=function(e){void 0===e&&(e="");var n=new me;return n.text=e,n.isComment=!0,n};function ye(e){return new me(void 0,void 0,void 0,String(e))}function we(e){var n=new me(e.tag,e.data,e.children&&e.children.slice(),e.text,e.elm,e.context,e.componentOptions,e.asyncFactory);return n.ns=e.ns,n.isStatic=e.isStatic,n.key=e.key,n.isComment=e.isComment,n.fnContext=e.fnContext,n.fnOptions=e.fnOptions,n.fnScopeId=e.fnScopeId,n.asyncMeta=e.asyncMeta,n.isCloned=!0,n}var be=Array.prototype,_e=Object.create(be);["push","pop","shift","unshift","splice","sort","reverse"].forEach((function(e){var n=be[e];H(_e,e,(function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];var i,a=n.apply(this,t),o=this.__ob__;switch(e){case"push":case"unshift":i=t;break;case"splice":i=t.slice(2)}return i&&o.observeArray(i),o.dep.notify(),a}))}));var xe=Object.getOwnPropertyNames(_e),Te=!0;function ke(e){Te=e}var Ce=function(e){this.value=e,this.dep=new ue,this.vmCount=0,H(e,"__ob__",this),Array.isArray(e)?(G?function(e,n){e.__proto__=n}(e,_e):function(e,n,t){for(var r=0,i=t.length;r<i;r++){var a=t[r];H(e,a,n[a])}}(e,_e,xe),this.observeArray(e)):this.walk(e)};function Ie(e,n){var t;if(c(e)&&!(e instanceof me))return _(e,"__ob__")&&e.__ob__ instanceof Ce?t=e.__ob__:Te&&!ie()&&(Array.isArray(e)||u(e))&&Object.isExtensible(e)&&!e._isVue&&(t=new Ce(e)),n&&t&&t.vmCount++,t}function ze(e,n,t,r,i){var a=new ue,o=Object.getOwnPropertyDescriptor(e,n);if(!o||!1!==o.configurable){var s=o&&o.get,l=o&&o.set;s&&!l||2!==arguments.length||(t=e[n]);var c=!i&&Ie(t);Object.defineProperty(e,n,{enumerable:!0,configurable:!0,get:function(){var n=s?s.call(e):t;return ue.target&&(a.depend(),c&&(c.dep.depend(),Array.isArray(n)&&Pe(n))),n},set:function(n){var r=s?s.call(e):t;n===r||n!=n&&r!=r||s&&!l||(l?l.call(e,n):t=n,c=!i&&Ie(n),a.notify())}})}}function Ae(e,n,t){if(Array.isArray(e)&&f(n))return e.length=Math.max(e.length,n),e.splice(n,1,t),t;if(n in e&&!(n in Object.prototype))return e[n]=t,t;var r=e.__ob__;return e._isVue||r&&r.vmCount?t:r?(ze(r.value,n,t),r.dep.notify(),t):(e[n]=t,t)}function Se(e,n){if(Array.isArray(e)&&f(n))e.splice(n,1);else{var t=e.__ob__;e._isVue||t&&t.vmCount||_(e,n)&&(delete e[n],t&&t.dep.notify())}}function Pe(e){for(var n=void 0,t=0,r=e.length;t<r;t++)(n=e[t])&&n.__ob__&&n.__ob__.dep.depend(),Array.isArray(n)&&Pe(n)}Ce.prototype.walk=function(e){for(var n=Object.keys(e),t=0;t<n.length;t++)ze(e,n[t])},Ce.prototype.observeArray=function(e){for(var n=0,t=e.length;n<t;n++)Ie(e[n])};var Ee=F.optionMergeStrategies;function Oe(e,n){if(!n)return e;for(var t,r,i,a=le?Reflect.ownKeys(n):Object.keys(n),o=0;o<a.length;o++)"__ob__"!==(t=a[o])&&(r=e[t],i=n[t],_(e,t)?r!==i&&u(r)&&u(i)&&Oe(r,i):Ae(e,t,i));return e}function Ue(e,n,t){return t?function(){var r="function"==typeof n?n.call(t,t):n,i="function"==typeof e?e.call(t,t):e;return r?Oe(r,i):i}:n?e?function(){return Oe("function"==typeof n?n.call(this,this):n,"function"==typeof e?e.call(this,this):e)}:n:e}function je(e,n){var t=n?e?e.concat(n):Array.isArray(n)?n:[n]:e;return t?function(e){for(var n=[],t=0;t<e.length;t++)-1===n.indexOf(e[t])&&n.push(e[t]);return n}(t):t}function Le(e,n,t,r){var i=Object.create(e||null);return n?P(i,n):i}Ee.data=function(e,n,t){return t?Ue(e,n,t):n&&"function"!=typeof n?e:Ue(e,n)},N.forEach((function(e){Ee[e]=je})),M.forEach((function(e){Ee[e+"s"]=Le})),Ee.watch=function(e,n,t,r){if(e===ne&&(e=void 0),n===ne&&(n=void 0),!n)return Object.create(e||null);if(!e)return n;var i={};for(var a in P(i,e),n){var o=i[a],s=n[a];o&&!Array.isArray(o)&&(o=[o]),i[a]=o?o.concat(s):Array.isArray(s)?s:[s]}return i},Ee.props=Ee.methods=Ee.inject=Ee.computed=function(e,n,t,r){if(!e)return n;var i=Object.create(null);return P(i,e),n&&P(i,n),i},Ee.provide=Ue;var Re=function(e,n){return void 0===n?e:n};function $e(e,n,t){if("function"==typeof n&&(n=n.options),function(e,n){var t=e.props;if(t){var r,i,a={};if(Array.isArray(t))for(r=t.length;r--;)"string"==typeof(i=t[r])&&(a[k(i)]={type:null});else if(u(t))for(var o in t)i=t[o],a[k(o)]=u(i)?i:{type:i};else 0;e.props=a}}(n),function(e,n){var t=e.inject;if(t){var r=e.inject={};if(Array.isArray(t))for(var i=0;i<t.length;i++)r[t[i]]={from:t[i]};else if(u(t))for(var a in t){var o=t[a];r[a]=u(o)?P({from:a},o):{from:o}}else 0}}(n),function(e){var n=e.directives;if(n)for(var t in n){var r=n[t];"function"==typeof r&&(n[t]={bind:r,update:r})}}(n),!n._base&&(n.extends&&(e=$e(e,n.extends,t)),n.mixins))for(var r=0,i=n.mixins.length;r<i;r++)e=$e(e,n.mixins[r],t);var a,o={};for(a in e)s(a);for(a in n)_(e,a)||s(a);function s(r){var i=Ee[r]||Re;o[r]=i(e[r],n[r],t,r)}return o}function Me(e,n,t,r){if("string"==typeof t){var i=e[n];if(_(i,t))return i[t];var a=k(t);if(_(i,a))return i[a];var o=C(a);return _(i,o)?i[o]:i[t]||i[a]||i[o]}}function Ne(e,n,t,r){var i=n[e],a=!_(t,e),o=t[e],s=qe(Boolean,i.type);if(s>-1)if(a&&!_(i,"default"))o=!1;else if(""===o||o===z(e)){var l=qe(String,i.type);(l<0||s<l)&&(o=!0)}if(void 0===o){o=function(e,n,t){if(!_(n,"default"))return;var r=n.default;0;if(e&&e.$options.propsData&&void 0===e.$options.propsData[t]&&void 0!==e._props[t])return e._props[t];return"function"==typeof r&&"Function"!==De(n.type)?r.call(e):r}(r,i,e);var c=Te;ke(!0),Ie(o),ke(c)}return o}var Fe=/^\s*function (\w+)/;function De(e){var n=e&&e.toString().match(Fe);return n?n[1]:""}function He(e,n){return De(e)===De(n)}function qe(e,n){if(!Array.isArray(n))return He(n,e)?0:-1;for(var t=0,r=n.length;t<r;t++)if(He(n[t],e))return t;return-1}function Be(e,n,t){fe();try{if(n)for(var r=n;r=r.$parent;){var i=r.$options.errorCaptured;if(i)for(var a=0;a<i.length;a++)try{if(!1===i[a].call(r,e,n,t))return}catch(e){Ve(e,r,"errorCaptured hook")}}Ve(e,n,t)}finally{pe()}}function Ge(e,n,t,r,i){var a;try{(a=t?e.apply(n,t):e.call(n))&&!a._isVue&&p(a)&&!a._handled&&(a.catch((function(e){return Be(e,r,i+" (Promise/async)")})),a._handled=!0)}catch(e){Be(e,r,i)}return a}function Ve(e,n,t){if(F.errorHandler)try{return F.errorHandler.call(null,e,n,t)}catch(n){n!==e&&We(n,null,"config.errorHandler")}We(e,n,t)}function We(e,n,t){if(!V&&!W||"undefined"==typeof console)throw e;console.error(e)}var Ye,Ke=!1,Je=[],Xe=!1;function Qe(){Xe=!1;var e=Je.slice(0);Je.length=0;for(var n=0;n<e.length;n++)e[n]()}if("undefined"!=typeof Promise&&oe(Promise)){var Ze=Promise.resolve();Ye=function(){Ze.then(Qe),Z&&setTimeout(O)},Ke=!0}else if(J||"undefined"==typeof MutationObserver||!oe(MutationObserver)&&"[object MutationObserverConstructor]"!==MutationObserver.toString())Ye="undefined"!=typeof setImmediate&&oe(setImmediate)?function(){setImmediate(Qe)}:function(){setTimeout(Qe,0)};else{var en=1,nn=new MutationObserver(Qe),tn=document.createTextNode(String(en));nn.observe(tn,{characterData:!0}),Ye=function(){en=(en+1)%2,tn.data=String(en)},Ke=!0}function rn(e,n){var t;if(Je.push((function(){if(e)try{e.call(n)}catch(e){Be(e,n,"nextTick")}else t&&t(n)})),Xe||(Xe=!0,Ye()),!e&&"undefined"!=typeof Promise)return new Promise((function(e){t=e}))}var an=new se;function on(e){!function e(n,t){var r,i,a=Array.isArray(n);if(!a&&!c(n)||Object.isFrozen(n)||n instanceof me)return;if(n.__ob__){var o=n.__ob__.dep.id;if(t.has(o))return;t.add(o)}if(a)for(r=n.length;r--;)e(n[r],t);else for(i=Object.keys(n),r=i.length;r--;)e(n[i[r]],t)}(e,an),an.clear()}var sn=x((function(e){var n="&"===e.charAt(0),t="~"===(e=n?e.slice(1):e).charAt(0),r="!"===(e=t?e.slice(1):e).charAt(0);return{name:e=r?e.slice(1):e,once:t,capture:r,passive:n}}));function ln(e,n){function t(){var e=arguments,r=t.fns;if(!Array.isArray(r))return Ge(r,null,arguments,n,"v-on handler");for(var i=r.slice(),a=0;a<i.length;a++)Ge(i[a],null,e,n,"v-on handler")}return t.fns=e,t}function cn(e,n,t,r,i,o){var l,c,d,u;for(l in e)c=e[l],d=n[l],u=sn(l),a(c)||(a(d)?(a(c.fns)&&(c=e[l]=ln(c,o)),s(u.once)&&(c=e[l]=i(u.name,c,u.capture)),t(u.name,c,u.capture,u.passive,u.params)):c!==d&&(d.fns=c,e[l]=d));for(l in n)a(e[l])&&r((u=sn(l)).name,n[l],u.capture)}function dn(e,n,t){var r;e instanceof me&&(e=e.data.hook||(e.data.hook={}));var i=e[n];function l(){t.apply(this,arguments),w(r.fns,l)}a(i)?r=ln([l]):o(i.fns)&&s(i.merged)?(r=i).fns.push(l):r=ln([i,l]),r.merged=!0,e[n]=r}function un(e,n,t,r,i){if(o(n)){if(_(n,t))return e[t]=n[t],i||delete n[t],!0;if(_(n,r))return e[t]=n[r],i||delete n[r],!0}return!1}function hn(e){return l(e)?[ye(e)]:Array.isArray(e)?function e(n,t){var r,i,c,d,u=[];for(r=0;r<n.length;r++)a(i=n[r])||"boolean"==typeof i||(c=u.length-1,d=u[c],Array.isArray(i)?i.length>0&&(fn((i=e(i,(t||"")+"_"+r))[0])&&fn(d)&&(u[c]=ye(d.text+i[0].text),i.shift()),u.push.apply(u,i)):l(i)?fn(d)?u[c]=ye(d.text+i):""!==i&&u.push(ye(i)):fn(i)&&fn(d)?u[c]=ye(d.text+i.text):(s(n._isVList)&&o(i.tag)&&a(i.key)&&o(t)&&(i.key="__vlist"+t+"_"+r+"__"),u.push(i)));return u}(e):void 0}function fn(e){return o(e)&&o(e.text)&&!1===e.isComment}function pn(e,n){if(e){for(var t=Object.create(null),r=le?Reflect.ownKeys(e):Object.keys(e),i=0;i<r.length;i++){var a=r[i];if("__ob__"!==a){for(var o=e[a].from,s=n;s;){if(s._provided&&_(s._provided,o)){t[a]=s._provided[o];break}s=s.$parent}if(!s)if("default"in e[a]){var l=e[a].default;t[a]="function"==typeof l?l.call(n):l}else 0}}return t}}function mn(e,n){if(!e||!e.length)return{};for(var t={},r=0,i=e.length;r<i;r++){var a=e[r],o=a.data;if(o&&o.attrs&&o.attrs.slot&&delete o.attrs.slot,a.context!==n&&a.fnContext!==n||!o||null==o.slot)(t.default||(t.default=[])).push(a);else{var s=o.slot,l=t[s]||(t[s]=[]);"template"===a.tag?l.push.apply(l,a.children||[]):l.push(a)}}for(var c in t)t[c].every(gn)&&delete t[c];return t}function gn(e){return e.isComment&&!e.asyncFactory||" "===e.text}function vn(e){return e.isComment&&e.asyncFactory}function yn(e,n,t){var r,a=Object.keys(n).length>0,o=e?!!e.$stable:!a,s=e&&e.$key;if(e){if(e._normalized)return e._normalized;if(o&&t&&t!==i&&s===t.$key&&!a&&!t.$hasNormal)return t;for(var l in r={},e)e[l]&&"$"!==l[0]&&(r[l]=wn(n,l,e[l]))}else r={};for(var c in n)c in r||(r[c]=bn(n,c));return e&&Object.isExtensible(e)&&(e._normalized=r),H(r,"$stable",o),H(r,"$key",s),H(r,"$hasNormal",a),r}function wn(e,n,t){var r=function(){var e=arguments.length?t.apply(null,arguments):t({}),n=(e=e&&"object"==typeof e&&!Array.isArray(e)?[e]:hn(e))&&e[0];return e&&(!n||1===e.length&&n.isComment&&!vn(n))?void 0:e};return t.proxy&&Object.defineProperty(e,n,{get:r,enumerable:!0,configurable:!0}),r}function bn(e,n){return function(){return e[n]}}function _n(e,n){var t,r,i,a,s;if(Array.isArray(e)||"string"==typeof e)for(t=new Array(e.length),r=0,i=e.length;r<i;r++)t[r]=n(e[r],r);else if("number"==typeof e)for(t=new Array(e),r=0;r<e;r++)t[r]=n(r+1,r);else if(c(e))if(le&&e[Symbol.iterator]){t=[];for(var l=e[Symbol.iterator](),d=l.next();!d.done;)t.push(n(d.value,t.length)),d=l.next()}else for(a=Object.keys(e),t=new Array(a.length),r=0,i=a.length;r<i;r++)s=a[r],t[r]=n(e[s],s,r);return o(t)||(t=[]),t._isVList=!0,t}function xn(e,n,t,r){var i,a=this.$scopedSlots[e];a?(t=t||{},r&&(t=P(P({},r),t)),i=a(t)||("function"==typeof n?n():n)):i=this.$slots[e]||("function"==typeof n?n():n);var o=t&&t.slot;return o?this.$createElement("template",{slot:o},i):i}function Tn(e){return Me(this.$options,"filters",e)||j}function kn(e,n){return Array.isArray(e)?-1===e.indexOf(n):e!==n}function Cn(e,n,t,r,i){var a=F.keyCodes[n]||t;return i&&r&&!F.keyCodes[n]?kn(i,r):a?kn(a,e):r?z(r)!==n:void 0===e}function In(e,n,t,r,i){if(t)if(c(t)){var a;Array.isArray(t)&&(t=E(t));var o=function(o){if("class"===o||"style"===o||y(o))a=e;else{var s=e.attrs&&e.attrs.type;a=r||F.mustUseProp(n,s,o)?e.domProps||(e.domProps={}):e.attrs||(e.attrs={})}var l=k(o),c=z(o);l in a||c in a||(a[o]=t[o],i&&((e.on||(e.on={}))["update:"+o]=function(e){t[o]=e}))};for(var s in t)o(s)}else;return e}function zn(e,n){var t=this._staticTrees||(this._staticTrees=[]),r=t[e];return r&&!n||Sn(r=t[e]=this.$options.staticRenderFns[e].call(this._renderProxy,null,this),"__static__"+e,!1),r}function An(e,n,t){return Sn(e,"__once__"+n+(t?"_"+t:""),!0),e}function Sn(e,n,t){if(Array.isArray(e))for(var r=0;r<e.length;r++)e[r]&&"string"!=typeof e[r]&&Pn(e[r],n+"_"+r,t);else Pn(e,n,t)}function Pn(e,n,t){e.isStatic=!0,e.key=n,e.isOnce=t}function En(e,n){if(n)if(u(n)){var t=e.on=e.on?P({},e.on):{};for(var r in n){var i=t[r],a=n[r];t[r]=i?[].concat(i,a):a}}else;return e}function On(e,n,t,r){n=n||{$stable:!t};for(var i=0;i<e.length;i++){var a=e[i];Array.isArray(a)?On(a,n,t):a&&(a.proxy&&(a.fn.proxy=!0),n[a.key]=a.fn)}return r&&(n.$key=r),n}function Un(e,n){for(var t=0;t<n.length;t+=2){var r=n[t];"string"==typeof r&&r&&(e[n[t]]=n[t+1])}return e}function jn(e,n){return"string"==typeof e?n+e:e}function Ln(e){e._o=An,e._n=g,e._s=m,e._l=_n,e._t=xn,e._q=L,e._i=R,e._m=zn,e._f=Tn,e._k=Cn,e._b=In,e._v=ye,e._e=ve,e._u=On,e._g=En,e._d=Un,e._p=jn}function Rn(e,n,t,r,a){var o,l=this,c=a.options;_(r,"_uid")?(o=Object.create(r))._original=r:(o=r,r=r._original);var d=s(c._compiled),u=!d;this.data=e,this.props=n,this.children=t,this.parent=r,this.listeners=e.on||i,this.injections=pn(c.inject,r),this.slots=function(){return l.$slots||yn(e.scopedSlots,l.$slots=mn(t,r)),l.$slots},Object.defineProperty(this,"scopedSlots",{enumerable:!0,get:function(){return yn(e.scopedSlots,this.slots())}}),d&&(this.$options=c,this.$slots=this.slots(),this.$scopedSlots=yn(e.scopedSlots,this.$slots)),c._scopeId?this._c=function(e,n,t,i){var a=qn(o,e,n,t,i,u);return a&&!Array.isArray(a)&&(a.fnScopeId=c._scopeId,a.fnContext=r),a}:this._c=function(e,n,t,r){return qn(o,e,n,t,r,u)}}function $n(e,n,t,r,i){var a=we(e);return a.fnContext=t,a.fnOptions=r,n.slot&&((a.data||(a.data={})).slot=n.slot),a}function Mn(e,n){for(var t in n)e[k(t)]=n[t]}Ln(Rn.prototype);var Nn={init:function(e,n){if(e.componentInstance&&!e.componentInstance._isDestroyed&&e.data.keepAlive){var t=e;Nn.prepatch(t,t)}else{(e.componentInstance=function(e,n){var t={_isComponent:!0,_parentVnode:e,parent:n},r=e.data.inlineTemplate;o(r)&&(t.render=r.render,t.staticRenderFns=r.staticRenderFns);return new e.componentOptions.Ctor(t)}(e,Qn)).$mount(n?e.elm:void 0,n)}},prepatch:function(e,n){var t=n.componentOptions;!function(e,n,t,r,a){0;var o=r.data.scopedSlots,s=e.$scopedSlots,l=!!(o&&!o.$stable||s!==i&&!s.$stable||o&&e.$scopedSlots.$key!==o.$key||!o&&e.$scopedSlots.$key),c=!!(a||e.$options._renderChildren||l);e.$options._parentVnode=r,e.$vnode=r,e._vnode&&(e._vnode.parent=r);if(e.$options._renderChildren=a,e.$attrs=r.data.attrs||i,e.$listeners=t||i,n&&e.$options.props){ke(!1);for(var d=e._props,u=e.$options._propKeys||[],h=0;h<u.length;h++){var f=u[h],p=e.$options.props;d[f]=Ne(f,p,n,e)}ke(!0),e.$options.propsData=n}t=t||i;var m=e.$options._parentListeners;e.$options._parentListeners=t,Xn(e,t,m),c&&(e.$slots=mn(a,r.context),e.$forceUpdate());0}(n.componentInstance=e.componentInstance,t.propsData,t.listeners,n,t.children)},insert:function(e){var n,t=e.context,r=e.componentInstance;r._isMounted||(r._isMounted=!0,tt(r,"mounted")),e.data.keepAlive&&(t._isMounted?((n=r)._inactive=!1,it.push(n)):nt(r,!0))},destroy:function(e){var n=e.componentInstance;n._isDestroyed||(e.data.keepAlive?function e(n,t){if(t&&(n._directInactive=!0,et(n)))return;if(!n._inactive){n._inactive=!0;for(var r=0;r<n.$children.length;r++)e(n.$children[r]);tt(n,"deactivated")}}(n,!0):n.$destroy())}},Fn=Object.keys(Nn);function Dn(e,n,t,r,l){if(!a(e)){var d=t.$options._base;if(c(e)&&(e=d.extend(e)),"function"==typeof e){var u;if(a(e.cid)&&void 0===(e=function(e,n){if(s(e.error)&&o(e.errorComp))return e.errorComp;if(o(e.resolved))return e.resolved;var t=Gn;t&&o(e.owners)&&-1===e.owners.indexOf(t)&&e.owners.push(t);if(s(e.loading)&&o(e.loadingComp))return e.loadingComp;if(t&&!o(e.owners)){var r=e.owners=[t],i=!0,l=null,d=null;t.$on("hook:destroyed",(function(){return w(r,t)}));var u=function(e){for(var n=0,t=r.length;n<t;n++)r[n].$forceUpdate();e&&(r.length=0,null!==l&&(clearTimeout(l),l=null),null!==d&&(clearTimeout(d),d=null))},h=$((function(t){e.resolved=Vn(t,n),i?r.length=0:u(!0)})),f=$((function(n){o(e.errorComp)&&(e.error=!0,u(!0))})),m=e(h,f);return c(m)&&(p(m)?a(e.resolved)&&m.then(h,f):p(m.component)&&(m.component.then(h,f),o(m.error)&&(e.errorComp=Vn(m.error,n)),o(m.loading)&&(e.loadingComp=Vn(m.loading,n),0===m.delay?e.loading=!0:l=setTimeout((function(){l=null,a(e.resolved)&&a(e.error)&&(e.loading=!0,u(!1))}),m.delay||200)),o(m.timeout)&&(d=setTimeout((function(){d=null,a(e.resolved)&&f(null)}),m.timeout)))),i=!1,e.loading?e.loadingComp:e.resolved}}(u=e,d)))return function(e,n,t,r,i){var a=ve();return a.asyncFactory=e,a.asyncMeta={data:n,context:t,children:r,tag:i},a}(u,n,t,r,l);n=n||{},kt(e),o(n.model)&&function(e,n){var t=e.model&&e.model.prop||"value",r=e.model&&e.model.event||"input";(n.attrs||(n.attrs={}))[t]=n.model.value;var i=n.on||(n.on={}),a=i[r],s=n.model.callback;o(a)?(Array.isArray(a)?-1===a.indexOf(s):a!==s)&&(i[r]=[s].concat(a)):i[r]=s}(e.options,n);var h=function(e,n,t){var r=n.options.props;if(!a(r)){var i={},s=e.attrs,l=e.props;if(o(s)||o(l))for(var c in r){var d=z(c);un(i,l,c,d,!0)||un(i,s,c,d,!1)}return i}}(n,e);if(s(e.options.functional))return function(e,n,t,r,a){var s=e.options,l={},c=s.props;if(o(c))for(var d in c)l[d]=Ne(d,c,n||i);else o(t.attrs)&&Mn(l,t.attrs),o(t.props)&&Mn(l,t.props);var u=new Rn(t,l,a,r,e),h=s.render.call(null,u._c,u);if(h instanceof me)return $n(h,t,u.parent,s,u);if(Array.isArray(h)){for(var f=hn(h)||[],p=new Array(f.length),m=0;m<f.length;m++)p[m]=$n(f[m],t,u.parent,s,u);return p}}(e,h,n,t,r);var f=n.on;if(n.on=n.nativeOn,s(e.options.abstract)){var m=n.slot;n={},m&&(n.slot=m)}!function(e){for(var n=e.hook||(e.hook={}),t=0;t<Fn.length;t++){var r=Fn[t],i=n[r],a=Nn[r];i===a||i&&i._merged||(n[r]=i?Hn(a,i):a)}}(n);var g=e.options.name||l;return new me("vue-component-"+e.cid+(g?"-"+g:""),n,void 0,void 0,void 0,t,{Ctor:e,propsData:h,listeners:f,tag:l,children:r},u)}}}function Hn(e,n){var t=function(t,r){e(t,r),n(t,r)};return t._merged=!0,t}function qn(e,n,t,r,i,d){return(Array.isArray(t)||l(t))&&(i=r,r=t,t=void 0),s(d)&&(i=2),function(e,n,t,r,i){if(o(t)&&o(t.__ob__))return ve();o(t)&&o(t.is)&&(n=t.is);if(!n)return ve();0;Array.isArray(r)&&"function"==typeof r[0]&&((t=t||{}).scopedSlots={default:r[0]},r.length=0);2===i?r=hn(r):1===i&&(r=function(e){for(var n=0;n<e.length;n++)if(Array.isArray(e[n]))return Array.prototype.concat.apply([],e);return e}(r));var l,d;if("string"==typeof n){var u;d=e.$vnode&&e.$vnode.ns||F.getTagNamespace(n),l=F.isReservedTag(n)?new me(F.parsePlatformTagName(n),t,r,void 0,void 0,e):t&&t.pre||!o(u=Me(e.$options,"components",n))?new me(n,t,r,void 0,void 0,e):Dn(u,t,e,r,n)}else l=Dn(n,t,e,r);return Array.isArray(l)?l:o(l)?(o(d)&&function e(n,t,r){n.ns=t,"foreignObject"===n.tag&&(t=void 0,r=!0);if(o(n.children))for(var i=0,l=n.children.length;i<l;i++){var c=n.children[i];o(c.tag)&&(a(c.ns)||s(r)&&"svg"!==c.tag)&&e(c,t,r)}}(l,d),o(t)&&function(e){c(e.style)&&on(e.style);c(e.class)&&on(e.class)}(t),l):ve()}(e,n,t,r,i)}var Bn,Gn=null;function Vn(e,n){return(e.__esModule||le&&"Module"===e[Symbol.toStringTag])&&(e=e.default),c(e)?n.extend(e):e}function Wn(e){if(Array.isArray(e))for(var n=0;n<e.length;n++){var t=e[n];if(o(t)&&(o(t.componentOptions)||vn(t)))return t}}function Yn(e,n){Bn.$on(e,n)}function Kn(e,n){Bn.$off(e,n)}function Jn(e,n){var t=Bn;return function r(){var i=n.apply(null,arguments);null!==i&&t.$off(e,r)}}function Xn(e,n,t){Bn=e,cn(n,t||{},Yn,Kn,Jn,e),Bn=void 0}var Qn=null;function Zn(e){var n=Qn;return Qn=e,function(){Qn=n}}function et(e){for(;e&&(e=e.$parent);)if(e._inactive)return!0;return!1}function nt(e,n){if(n){if(e._directInactive=!1,et(e))return}else if(e._directInactive)return;if(e._inactive||null===e._inactive){e._inactive=!1;for(var t=0;t<e.$children.length;t++)nt(e.$children[t]);tt(e,"activated")}}function tt(e,n){fe();var t=e.$options[n],r=n+" hook";if(t)for(var i=0,a=t.length;i<a;i++)Ge(t[i],e,null,e,r);e._hasHookEvent&&e.$emit("hook:"+n),pe()}var rt=[],it=[],at={},ot=!1,st=!1,lt=0;var ct=0,dt=Date.now;if(V&&!J){var ut=window.performance;ut&&"function"==typeof ut.now&&dt()>document.createEvent("Event").timeStamp&&(dt=function(){return ut.now()})}function ht(){var e,n;for(ct=dt(),st=!0,rt.sort((function(e,n){return e.id-n.id})),lt=0;lt<rt.length;lt++)(e=rt[lt]).before&&e.before(),n=e.id,at[n]=null,e.run();var t=it.slice(),r=rt.slice();lt=rt.length=it.length=0,at={},ot=st=!1,function(e){for(var n=0;n<e.length;n++)e[n]._inactive=!0,nt(e[n],!0)}(t),function(e){var n=e.length;for(;n--;){var t=e[n],r=t.vm;r._watcher===t&&r._isMounted&&!r._isDestroyed&&tt(r,"updated")}}(r),ae&&F.devtools&&ae.emit("flush")}var ft=0,pt=function(e,n,t,r,i){this.vm=e,i&&(e._watcher=this),e._watchers.push(this),r?(this.deep=!!r.deep,this.user=!!r.user,this.lazy=!!r.lazy,this.sync=!!r.sync,this.before=r.before):this.deep=this.user=this.lazy=this.sync=!1,this.cb=t,this.id=++ft,this.active=!0,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new se,this.newDepIds=new se,this.expression="","function"==typeof n?this.getter=n:(this.getter=function(e){if(!q.test(e)){var n=e.split(".");return function(e){for(var t=0;t<n.length;t++){if(!e)return;e=e[n[t]]}return e}}}(n),this.getter||(this.getter=O)),this.value=this.lazy?void 0:this.get()};pt.prototype.get=function(){var e;fe(this);var n=this.vm;try{e=this.getter.call(n,n)}catch(e){if(!this.user)throw e;Be(e,n,'getter for watcher "'+this.expression+'"')}finally{this.deep&&on(e),pe(),this.cleanupDeps()}return e},pt.prototype.addDep=function(e){var n=e.id;this.newDepIds.has(n)||(this.newDepIds.add(n),this.newDeps.push(e),this.depIds.has(n)||e.addSub(this))},pt.prototype.cleanupDeps=function(){for(var e=this.deps.length;e--;){var n=this.deps[e];this.newDepIds.has(n.id)||n.removeSub(this)}var t=this.depIds;this.depIds=this.newDepIds,this.newDepIds=t,this.newDepIds.clear(),t=this.deps,this.deps=this.newDeps,this.newDeps=t,this.newDeps.length=0},pt.prototype.update=function(){this.lazy?this.dirty=!0:this.sync?this.run():function(e){var n=e.id;if(null==at[n]){if(at[n]=!0,st){for(var t=rt.length-1;t>lt&&rt[t].id>e.id;)t--;rt.splice(t+1,0,e)}else rt.push(e);ot||(ot=!0,rn(ht))}}(this)},pt.prototype.run=function(){if(this.active){var e=this.get();if(e!==this.value||c(e)||this.deep){var n=this.value;if(this.value=e,this.user){var t='callback for watcher "'+this.expression+'"';Ge(this.cb,this.vm,[e,n],this.vm,t)}else this.cb.call(this.vm,e,n)}}},pt.prototype.evaluate=function(){this.value=this.get(),this.dirty=!1},pt.prototype.depend=function(){for(var e=this.deps.length;e--;)this.deps[e].depend()},pt.prototype.teardown=function(){if(this.active){this.vm._isBeingDestroyed||w(this.vm._watchers,this);for(var e=this.deps.length;e--;)this.deps[e].removeSub(this);this.active=!1}};var mt={enumerable:!0,configurable:!0,get:O,set:O};function gt(e,n,t){mt.get=function(){return this[n][t]},mt.set=function(e){this[n][t]=e},Object.defineProperty(e,t,mt)}function vt(e){e._watchers=[];var n=e.$options;n.props&&function(e,n){var t=e.$options.propsData||{},r=e._props={},i=e.$options._propKeys=[];e.$parent&&ke(!1);var a=function(a){i.push(a);var o=Ne(a,n,t,e);ze(r,a,o),a in e||gt(e,"_props",a)};for(var o in n)a(o);ke(!0)}(e,n.props),n.methods&&function(e,n){e.$options.props;for(var t in n)e[t]="function"!=typeof n[t]?O:A(n[t],e)}(e,n.methods),n.data?function(e){var n=e.$options.data;u(n=e._data="function"==typeof n?function(e,n){fe();try{return e.call(n,n)}catch(e){return Be(e,n,"data()"),{}}finally{pe()}}(n,e):n||{})||(n={});var t=Object.keys(n),r=e.$options.props,i=(e.$options.methods,t.length);for(;i--;){var a=t[i];0,r&&_(r,a)||(o=void 0,36!==(o=(a+"").charCodeAt(0))&&95!==o&&gt(e,"_data",a))}var o;Ie(n,!0)}(e):Ie(e._data={},!0),n.computed&&function(e,n){var t=e._computedWatchers=Object.create(null),r=ie();for(var i in n){var a=n[i],o="function"==typeof a?a:a.get;0,r||(t[i]=new pt(e,o||O,O,yt)),i in e||wt(e,i,a)}}(e,n.computed),n.watch&&n.watch!==ne&&function(e,n){for(var t in n){var r=n[t];if(Array.isArray(r))for(var i=0;i<r.length;i++)xt(e,t,r[i]);else xt(e,t,r)}}(e,n.watch)}var yt={lazy:!0};function wt(e,n,t){var r=!ie();"function"==typeof t?(mt.get=r?bt(n):_t(t),mt.set=O):(mt.get=t.get?r&&!1!==t.cache?bt(n):_t(t.get):O,mt.set=t.set||O),Object.defineProperty(e,n,mt)}function bt(e){return function(){var n=this._computedWatchers&&this._computedWatchers[e];if(n)return n.dirty&&n.evaluate(),ue.target&&n.depend(),n.value}}function _t(e){return function(){return e.call(this,this)}}function xt(e,n,t,r){return u(t)&&(r=t,t=t.handler),"string"==typeof t&&(t=e[t]),e.$watch(n,t,r)}var Tt=0;function kt(e){var n=e.options;if(e.super){var t=kt(e.super);if(t!==e.superOptions){e.superOptions=t;var r=function(e){var n,t=e.options,r=e.sealedOptions;for(var i in t)t[i]!==r[i]&&(n||(n={}),n[i]=t[i]);return n}(e);r&&P(e.extendOptions,r),(n=e.options=$e(t,e.extendOptions)).name&&(n.components[n.name]=e)}}return n}function Ct(e){this._init(e)}function It(e){e.cid=0;var n=1;e.extend=function(e){e=e||{};var t=this,r=t.cid,i=e._Ctor||(e._Ctor={});if(i[r])return i[r];var a=e.name||t.options.name;var o=function(e){this._init(e)};return(o.prototype=Object.create(t.prototype)).constructor=o,o.cid=n++,o.options=$e(t.options,e),o.super=t,o.options.props&&function(e){var n=e.options.props;for(var t in n)gt(e.prototype,"_props",t)}(o),o.options.computed&&function(e){var n=e.options.computed;for(var t in n)wt(e.prototype,t,n[t])}(o),o.extend=t.extend,o.mixin=t.mixin,o.use=t.use,M.forEach((function(e){o[e]=t[e]})),a&&(o.options.components[a]=o),o.superOptions=t.options,o.extendOptions=e,o.sealedOptions=P({},o.options),i[r]=o,o}}function zt(e){return e&&(e.Ctor.options.name||e.tag)}function At(e,n){return Array.isArray(e)?e.indexOf(n)>-1:"string"==typeof e?e.split(",").indexOf(n)>-1:!!h(e)&&e.test(n)}function St(e,n){var t=e.cache,r=e.keys,i=e._vnode;for(var a in t){var o=t[a];if(o){var s=o.name;s&&!n(s)&&Pt(t,a,r,i)}}}function Pt(e,n,t,r){var i=e[n];!i||r&&i.tag===r.tag||i.componentInstance.$destroy(),e[n]=null,w(t,n)}Ct.prototype._init=function(e){var n=this;n._uid=Tt++,n._isVue=!0,e&&e._isComponent?function(e,n){var t=e.$options=Object.create(e.constructor.options),r=n._parentVnode;t.parent=n.parent,t._parentVnode=r;var i=r.componentOptions;t.propsData=i.propsData,t._parentListeners=i.listeners,t._renderChildren=i.children,t._componentTag=i.tag,n.render&&(t.render=n.render,t.staticRenderFns=n.staticRenderFns)}(n,e):n.$options=$e(kt(n.constructor),e||{},n),n._renderProxy=n,n._self=n,function(e){var n=e.$options,t=n.parent;if(t&&!n.abstract){for(;t.$options.abstract&&t.$parent;)t=t.$parent;t.$children.push(e)}e.$parent=t,e.$root=t?t.$root:e,e.$children=[],e.$refs={},e._watcher=null,e._inactive=null,e._directInactive=!1,e._isMounted=!1,e._isDestroyed=!1,e._isBeingDestroyed=!1}(n),function(e){e._events=Object.create(null),e._hasHookEvent=!1;var n=e.$options._parentListeners;n&&Xn(e,n)}(n),function(e){e._vnode=null,e._staticTrees=null;var n=e.$options,t=e.$vnode=n._parentVnode,r=t&&t.context;e.$slots=mn(n._renderChildren,r),e.$scopedSlots=i,e._c=function(n,t,r,i){return qn(e,n,t,r,i,!1)},e.$createElement=function(n,t,r,i){return qn(e,n,t,r,i,!0)};var a=t&&t.data;ze(e,"$attrs",a&&a.attrs||i,null,!0),ze(e,"$listeners",n._parentListeners||i,null,!0)}(n),tt(n,"beforeCreate"),function(e){var n=pn(e.$options.inject,e);n&&(ke(!1),Object.keys(n).forEach((function(t){ze(e,t,n[t])})),ke(!0))}(n),vt(n),function(e){var n=e.$options.provide;n&&(e._provided="function"==typeof n?n.call(e):n)}(n),tt(n,"created"),n.$options.el&&n.$mount(n.$options.el)},function(e){var n={get:function(){return this._data}},t={get:function(){return this._props}};Object.defineProperty(e.prototype,"$data",n),Object.defineProperty(e.prototype,"$props",t),e.prototype.$set=Ae,e.prototype.$delete=Se,e.prototype.$watch=function(e,n,t){if(u(n))return xt(this,e,n,t);(t=t||{}).user=!0;var r=new pt(this,e,n,t);if(t.immediate){var i='callback for immediate watcher "'+r.expression+'"';fe(),Ge(n,this,[r.value],this,i),pe()}return function(){r.teardown()}}}(Ct),function(e){var n=/^hook:/;e.prototype.$on=function(e,t){var r=this;if(Array.isArray(e))for(var i=0,a=e.length;i<a;i++)r.$on(e[i],t);else(r._events[e]||(r._events[e]=[])).push(t),n.test(e)&&(r._hasHookEvent=!0);return r},e.prototype.$once=function(e,n){var t=this;function r(){t.$off(e,r),n.apply(t,arguments)}return r.fn=n,t.$on(e,r),t},e.prototype.$off=function(e,n){var t=this;if(!arguments.length)return t._events=Object.create(null),t;if(Array.isArray(e)){for(var r=0,i=e.length;r<i;r++)t.$off(e[r],n);return t}var a,o=t._events[e];if(!o)return t;if(!n)return t._events[e]=null,t;for(var s=o.length;s--;)if((a=o[s])===n||a.fn===n){o.splice(s,1);break}return t},e.prototype.$emit=function(e){var n=this,t=n._events[e];if(t){t=t.length>1?S(t):t;for(var r=S(arguments,1),i='event handler for "'+e+'"',a=0,o=t.length;a<o;a++)Ge(t[a],n,r,n,i)}return n}}(Ct),function(e){e.prototype._update=function(e,n){var t=this,r=t.$el,i=t._vnode,a=Zn(t);t._vnode=e,t.$el=i?t.__patch__(i,e):t.__patch__(t.$el,e,n,!1),a(),r&&(r.__vue__=null),t.$el&&(t.$el.__vue__=t),t.$vnode&&t.$parent&&t.$vnode===t.$parent._vnode&&(t.$parent.$el=t.$el)},e.prototype.$forceUpdate=function(){this._watcher&&this._watcher.update()},e.prototype.$destroy=function(){var e=this;if(!e._isBeingDestroyed){tt(e,"beforeDestroy"),e._isBeingDestroyed=!0;var n=e.$parent;!n||n._isBeingDestroyed||e.$options.abstract||w(n.$children,e),e._watcher&&e._watcher.teardown();for(var t=e._watchers.length;t--;)e._watchers[t].teardown();e._data.__ob__&&e._data.__ob__.vmCount--,e._isDestroyed=!0,e.__patch__(e._vnode,null),tt(e,"destroyed"),e.$off(),e.$el&&(e.$el.__vue__=null),e.$vnode&&(e.$vnode.parent=null)}}}(Ct),function(e){Ln(e.prototype),e.prototype.$nextTick=function(e){return rn(e,this)},e.prototype._render=function(){var e,n=this,t=n.$options,r=t.render,i=t._parentVnode;i&&(n.$scopedSlots=yn(i.data.scopedSlots,n.$slots,n.$scopedSlots)),n.$vnode=i;try{Gn=n,e=r.call(n._renderProxy,n.$createElement)}catch(t){Be(t,n,"render"),e=n._vnode}finally{Gn=null}return Array.isArray(e)&&1===e.length&&(e=e[0]),e instanceof me||(e=ve()),e.parent=i,e}}(Ct);var Et=[String,RegExp,Array],Ot={KeepAlive:{name:"keep-alive",abstract:!0,props:{include:Et,exclude:Et,max:[String,Number]},methods:{cacheVNode:function(){var e=this.cache,n=this.keys,t=this.vnodeToCache,r=this.keyToCache;if(t){var i=t.tag,a=t.componentInstance,o=t.componentOptions;e[r]={name:zt(o),tag:i,componentInstance:a},n.push(r),this.max&&n.length>parseInt(this.max)&&Pt(e,n[0],n,this._vnode),this.vnodeToCache=null}}},created:function(){this.cache=Object.create(null),this.keys=[]},destroyed:function(){for(var e in this.cache)Pt(this.cache,e,this.keys)},mounted:function(){var e=this;this.cacheVNode(),this.$watch("include",(function(n){St(e,(function(e){return At(n,e)}))})),this.$watch("exclude",(function(n){St(e,(function(e){return!At(n,e)}))}))},updated:function(){this.cacheVNode()},render:function(){var e=this.$slots.default,n=Wn(e),t=n&&n.componentOptions;if(t){var r=zt(t),i=this.include,a=this.exclude;if(i&&(!r||!At(i,r))||a&&r&&At(a,r))return n;var o=this.cache,s=this.keys,l=null==n.key?t.Ctor.cid+(t.tag?"::"+t.tag:""):n.key;o[l]?(n.componentInstance=o[l].componentInstance,w(s,l),s.push(l)):(this.vnodeToCache=n,this.keyToCache=l),n.data.keepAlive=!0}return n||e&&e[0]}}};!function(e){var n={get:function(){return F}};Object.defineProperty(e,"config",n),e.util={warn:ce,extend:P,mergeOptions:$e,defineReactive:ze},e.set=Ae,e.delete=Se,e.nextTick=rn,e.observable=function(e){return Ie(e),e},e.options=Object.create(null),M.forEach((function(n){e.options[n+"s"]=Object.create(null)})),e.options._base=e,P(e.options.components,Ot),function(e){e.use=function(e){var n=this._installedPlugins||(this._installedPlugins=[]);if(n.indexOf(e)>-1)return this;var t=S(arguments,1);return t.unshift(this),"function"==typeof e.install?e.install.apply(e,t):"function"==typeof e&&e.apply(null,t),n.push(e),this}}(e),function(e){e.mixin=function(e){return this.options=$e(this.options,e),this}}(e),It(e),function(e){M.forEach((function(n){e[n]=function(e,t){return t?("component"===n&&u(t)&&(t.name=t.name||e,t=this.options._base.extend(t)),"directive"===n&&"function"==typeof t&&(t={bind:t,update:t}),this.options[n+"s"][e]=t,t):this.options[n+"s"][e]}}))}(e)}(Ct),Object.defineProperty(Ct.prototype,"$isServer",{get:ie}),Object.defineProperty(Ct.prototype,"$ssrContext",{get:function(){return this.$vnode&&this.$vnode.ssrContext}}),Object.defineProperty(Ct,"FunctionalRenderContext",{value:Rn}),Ct.version="2.6.14";var Ut=v("style,class"),jt=v("input,textarea,option,select,progress"),Lt=v("contenteditable,draggable,spellcheck"),Rt=v("events,caret,typing,plaintext-only"),$t=v("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,truespeed,typemustmatch,visible"),Mt="http://www.w3.org/1999/xlink",Nt=function(e){return":"===e.charAt(5)&&"xlink"===e.slice(0,5)},Ft=function(e){return Nt(e)?e.slice(6,e.length):""},Dt=function(e){return null==e||!1===e};function Ht(e){for(var n=e.data,t=e,r=e;o(r.componentInstance);)(r=r.componentInstance._vnode)&&r.data&&(n=qt(r.data,n));for(;o(t=t.parent);)t&&t.data&&(n=qt(n,t.data));return function(e,n){if(o(e)||o(n))return Bt(e,Gt(n));return""}(n.staticClass,n.class)}function qt(e,n){return{staticClass:Bt(e.staticClass,n.staticClass),class:o(e.class)?[e.class,n.class]:n.class}}function Bt(e,n){return e?n?e+" "+n:e:n||""}function Gt(e){return Array.isArray(e)?function(e){for(var n,t="",r=0,i=e.length;r<i;r++)o(n=Gt(e[r]))&&""!==n&&(t&&(t+=" "),t+=n);return t}(e):c(e)?function(e){var n="";for(var t in e)e[t]&&(n&&(n+=" "),n+=t);return n}(e):"string"==typeof e?e:""}var Vt={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},Wt=v("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot"),Yt=v("svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,foreignobject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view",!0),Kt=function(e){return Wt(e)||Yt(e)};var Jt=Object.create(null);var Xt=v("text,number,password,search,email,tel,url");var Qt=Object.freeze({createElement:function(e,n){var t=document.createElement(e);return"select"!==e||n.data&&n.data.attrs&&void 0!==n.data.attrs.multiple&&t.setAttribute("multiple","multiple"),t},createElementNS:function(e,n){return document.createElementNS(Vt[e],n)},createTextNode:function(e){return document.createTextNode(e)},createComment:function(e){return document.createComment(e)},insertBefore:function(e,n,t){e.insertBefore(n,t)},removeChild:function(e,n){e.removeChild(n)},appendChild:function(e,n){e.appendChild(n)},parentNode:function(e){return e.parentNode},nextSibling:function(e){return e.nextSibling},tagName:function(e){return e.tagName},setTextContent:function(e,n){e.textContent=n},setStyleScope:function(e,n){e.setAttribute(n,"")}}),Zt={create:function(e,n){er(n)},update:function(e,n){e.data.ref!==n.data.ref&&(er(e,!0),er(n))},destroy:function(e){er(e,!0)}};function er(e,n){var t=e.data.ref;if(o(t)){var r=e.context,i=e.componentInstance||e.elm,a=r.$refs;n?Array.isArray(a[t])?w(a[t],i):a[t]===i&&(a[t]=void 0):e.data.refInFor?Array.isArray(a[t])?a[t].indexOf(i)<0&&a[t].push(i):a[t]=[i]:a[t]=i}}var nr=new me("",{},[]),tr=["create","activate","update","remove","destroy"];function rr(e,n){return e.key===n.key&&e.asyncFactory===n.asyncFactory&&(e.tag===n.tag&&e.isComment===n.isComment&&o(e.data)===o(n.data)&&function(e,n){if("input"!==e.tag)return!0;var t,r=o(t=e.data)&&o(t=t.attrs)&&t.type,i=o(t=n.data)&&o(t=t.attrs)&&t.type;return r===i||Xt(r)&&Xt(i)}(e,n)||s(e.isAsyncPlaceholder)&&a(n.asyncFactory.error))}function ir(e,n,t){var r,i,a={};for(r=n;r<=t;++r)o(i=e[r].key)&&(a[i]=r);return a}var ar={create:or,update:or,destroy:function(e){or(e,nr)}};function or(e,n){(e.data.directives||n.data.directives)&&function(e,n){var t,r,i,a=e===nr,o=n===nr,s=lr(e.data.directives,e.context),l=lr(n.data.directives,n.context),c=[],d=[];for(t in l)r=s[t],i=l[t],r?(i.oldValue=r.value,i.oldArg=r.arg,dr(i,"update",n,e),i.def&&i.def.componentUpdated&&d.push(i)):(dr(i,"bind",n,e),i.def&&i.def.inserted&&c.push(i));if(c.length){var u=function(){for(var t=0;t<c.length;t++)dr(c[t],"inserted",n,e)};a?dn(n,"insert",u):u()}d.length&&dn(n,"postpatch",(function(){for(var t=0;t<d.length;t++)dr(d[t],"componentUpdated",n,e)}));if(!a)for(t in s)l[t]||dr(s[t],"unbind",e,e,o)}(e,n)}var sr=Object.create(null);function lr(e,n){var t,r,i=Object.create(null);if(!e)return i;for(t=0;t<e.length;t++)(r=e[t]).modifiers||(r.modifiers=sr),i[cr(r)]=r,r.def=Me(n.$options,"directives",r.name);return i}function cr(e){return e.rawName||e.name+"."+Object.keys(e.modifiers||{}).join(".")}function dr(e,n,t,r,i){var a=e.def&&e.def[n];if(a)try{a(t.elm,e,t,r,i)}catch(r){Be(r,t.context,"directive "+e.name+" "+n+" hook")}}var ur=[Zt,ar];function hr(e,n){var t=n.componentOptions;if(!(o(t)&&!1===t.Ctor.options.inheritAttrs||a(e.data.attrs)&&a(n.data.attrs))){var r,i,s=n.elm,l=e.data.attrs||{},c=n.data.attrs||{};for(r in o(c.__ob__)&&(c=n.data.attrs=P({},c)),c)i=c[r],l[r]!==i&&fr(s,r,i,n.data.pre);for(r in(J||Q)&&c.value!==l.value&&fr(s,"value",c.value),l)a(c[r])&&(Nt(r)?s.removeAttributeNS(Mt,Ft(r)):Lt(r)||s.removeAttribute(r))}}function fr(e,n,t,r){r||e.tagName.indexOf("-")>-1?pr(e,n,t):$t(n)?Dt(t)?e.removeAttribute(n):(t="allowfullscreen"===n&&"EMBED"===e.tagName?"true":n,e.setAttribute(n,t)):Lt(n)?e.setAttribute(n,function(e,n){return Dt(n)||"false"===n?"false":"contenteditable"===e&&Rt(n)?n:"true"}(n,t)):Nt(n)?Dt(t)?e.removeAttributeNS(Mt,Ft(n)):e.setAttributeNS(Mt,n,t):pr(e,n,t)}function pr(e,n,t){if(Dt(t))e.removeAttribute(n);else{if(J&&!X&&"TEXTAREA"===e.tagName&&"placeholder"===n&&""!==t&&!e.__ieph){var r=function(n){n.stopImmediatePropagation(),e.removeEventListener("input",r)};e.addEventListener("input",r),e.__ieph=!0}e.setAttribute(n,t)}}var mr={create:hr,update:hr};function gr(e,n){var t=n.elm,r=n.data,i=e.data;if(!(a(r.staticClass)&&a(r.class)&&(a(i)||a(i.staticClass)&&a(i.class)))){var s=Ht(n),l=t._transitionClasses;o(l)&&(s=Bt(s,Gt(l))),s!==t._prevClass&&(t.setAttribute("class",s),t._prevClass=s)}}var vr,yr={create:gr,update:gr};function wr(e,n,t){var r=vr;return function i(){var a=n.apply(null,arguments);null!==a&&xr(e,i,t,r)}}var br=Ke&&!(ee&&Number(ee[1])<=53);function _r(e,n,t,r){if(br){var i=ct,a=n;n=a._wrapper=function(e){if(e.target===e.currentTarget||e.timeStamp>=i||e.timeStamp<=0||e.target.ownerDocument!==document)return a.apply(this,arguments)}}vr.addEventListener(e,n,te?{capture:t,passive:r}:t)}function xr(e,n,t,r){(r||vr).removeEventListener(e,n._wrapper||n,t)}function Tr(e,n){if(!a(e.data.on)||!a(n.data.on)){var t=n.data.on||{},r=e.data.on||{};vr=n.elm,function(e){if(o(e.__r)){var n=J?"change":"input";e[n]=[].concat(e.__r,e[n]||[]),delete e.__r}o(e.__c)&&(e.change=[].concat(e.__c,e.change||[]),delete e.__c)}(t),cn(t,r,_r,xr,wr,n.context),vr=void 0}}var kr,Cr={create:Tr,update:Tr};function Ir(e,n){if(!a(e.data.domProps)||!a(n.data.domProps)){var t,r,i=n.elm,s=e.data.domProps||{},l=n.data.domProps||{};for(t in o(l.__ob__)&&(l=n.data.domProps=P({},l)),s)t in l||(i[t]="");for(t in l){if(r=l[t],"textContent"===t||"innerHTML"===t){if(n.children&&(n.children.length=0),r===s[t])continue;1===i.childNodes.length&&i.removeChild(i.childNodes[0])}if("value"===t&&"PROGRESS"!==i.tagName){i._value=r;var c=a(r)?"":String(r);zr(i,c)&&(i.value=c)}else if("innerHTML"===t&&Yt(i.tagName)&&a(i.innerHTML)){(kr=kr||document.createElement("div")).innerHTML="<svg>"+r+"</svg>";for(var d=kr.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;d.firstChild;)i.appendChild(d.firstChild)}else if(r!==s[t])try{i[t]=r}catch(e){}}}}function zr(e,n){return!e.composing&&("OPTION"===e.tagName||function(e,n){var t=!0;try{t=document.activeElement!==e}catch(e){}return t&&e.value!==n}(e,n)||function(e,n){var t=e.value,r=e._vModifiers;if(o(r)){if(r.number)return g(t)!==g(n);if(r.trim)return t.trim()!==n.trim()}return t!==n}(e,n))}var Ar={create:Ir,update:Ir},Sr=x((function(e){var n={},t=/:(.+)/;return e.split(/;(?![^(]*\))/g).forEach((function(e){if(e){var r=e.split(t);r.length>1&&(n[r[0].trim()]=r[1].trim())}})),n}));function Pr(e){var n=Er(e.style);return e.staticStyle?P(e.staticStyle,n):n}function Er(e){return Array.isArray(e)?E(e):"string"==typeof e?Sr(e):e}var Or,Ur=/^--/,jr=/\s*!important$/,Lr=function(e,n,t){if(Ur.test(n))e.style.setProperty(n,t);else if(jr.test(t))e.style.setProperty(z(n),t.replace(jr,""),"important");else{var r=$r(n);if(Array.isArray(t))for(var i=0,a=t.length;i<a;i++)e.style[r]=t[i];else e.style[r]=t}},Rr=["Webkit","Moz","ms"],$r=x((function(e){if(Or=Or||document.createElement("div").style,"filter"!==(e=k(e))&&e in Or)return e;for(var n=e.charAt(0).toUpperCase()+e.slice(1),t=0;t<Rr.length;t++){var r=Rr[t]+n;if(r in Or)return r}}));function Mr(e,n){var t=n.data,r=e.data;if(!(a(t.staticStyle)&&a(t.style)&&a(r.staticStyle)&&a(r.style))){var i,s,l=n.elm,c=r.staticStyle,d=r.normalizedStyle||r.style||{},u=c||d,h=Er(n.data.style)||{};n.data.normalizedStyle=o(h.__ob__)?P({},h):h;var f=function(e,n){var t,r={};if(n)for(var i=e;i.componentInstance;)(i=i.componentInstance._vnode)&&i.data&&(t=Pr(i.data))&&P(r,t);(t=Pr(e.data))&&P(r,t);for(var a=e;a=a.parent;)a.data&&(t=Pr(a.data))&&P(r,t);return r}(n,!0);for(s in u)a(f[s])&&Lr(l,s,"");for(s in f)(i=f[s])!==u[s]&&Lr(l,s,null==i?"":i)}}var Nr={create:Mr,update:Mr},Fr=/\s+/;function Dr(e,n){if(n&&(n=n.trim()))if(e.classList)n.indexOf(" ")>-1?n.split(Fr).forEach((function(n){return e.classList.add(n)})):e.classList.add(n);else{var t=" "+(e.getAttribute("class")||"")+" ";t.indexOf(" "+n+" ")<0&&e.setAttribute("class",(t+n).trim())}}function Hr(e,n){if(n&&(n=n.trim()))if(e.classList)n.indexOf(" ")>-1?n.split(Fr).forEach((function(n){return e.classList.remove(n)})):e.classList.remove(n),e.classList.length||e.removeAttribute("class");else{for(var t=" "+(e.getAttribute("class")||"")+" ",r=" "+n+" ";t.indexOf(r)>=0;)t=t.replace(r," ");(t=t.trim())?e.setAttribute("class",t):e.removeAttribute("class")}}function qr(e){if(e){if("object"==typeof e){var n={};return!1!==e.css&&P(n,Br(e.name||"v")),P(n,e),n}return"string"==typeof e?Br(e):void 0}}var Br=x((function(e){return{enterClass:e+"-enter",enterToClass:e+"-enter-to",enterActiveClass:e+"-enter-active",leaveClass:e+"-leave",leaveToClass:e+"-leave-to",leaveActiveClass:e+"-leave-active"}})),Gr=V&&!X,Vr="transition",Wr="transitionend",Yr="animation",Kr="animationend";Gr&&(void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend&&(Vr="WebkitTransition",Wr="webkitTransitionEnd"),void 0===window.onanimationend&&void 0!==window.onwebkitanimationend&&(Yr="WebkitAnimation",Kr="webkitAnimationEnd"));var Jr=V?window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout:function(e){return e()};function Xr(e){Jr((function(){Jr(e)}))}function Qr(e,n){var t=e._transitionClasses||(e._transitionClasses=[]);t.indexOf(n)<0&&(t.push(n),Dr(e,n))}function Zr(e,n){e._transitionClasses&&w(e._transitionClasses,n),Hr(e,n)}function ei(e,n,t){var r=ti(e,n),i=r.type,a=r.timeout,o=r.propCount;if(!i)return t();var s="transition"===i?Wr:Kr,l=0,c=function(){e.removeEventListener(s,d),t()},d=function(n){n.target===e&&++l>=o&&c()};setTimeout((function(){l<o&&c()}),a+1),e.addEventListener(s,d)}var ni=/\b(transform|all)(,|$)/;function ti(e,n){var t,r=window.getComputedStyle(e),i=(r[Vr+"Delay"]||"").split(", "),a=(r[Vr+"Duration"]||"").split(", "),o=ri(i,a),s=(r[Yr+"Delay"]||"").split(", "),l=(r[Yr+"Duration"]||"").split(", "),c=ri(s,l),d=0,u=0;return"transition"===n?o>0&&(t="transition",d=o,u=a.length):"animation"===n?c>0&&(t="animation",d=c,u=l.length):u=(t=(d=Math.max(o,c))>0?o>c?"transition":"animation":null)?"transition"===t?a.length:l.length:0,{type:t,timeout:d,propCount:u,hasTransform:"transition"===t&&ni.test(r[Vr+"Property"])}}function ri(e,n){for(;e.length<n.length;)e=e.concat(e);return Math.max.apply(null,n.map((function(n,t){return ii(n)+ii(e[t])})))}function ii(e){return 1e3*Number(e.slice(0,-1).replace(",","."))}function ai(e,n){var t=e.elm;o(t._leaveCb)&&(t._leaveCb.cancelled=!0,t._leaveCb());var r=qr(e.data.transition);if(!a(r)&&!o(t._enterCb)&&1===t.nodeType){for(var i=r.css,s=r.type,l=r.enterClass,d=r.enterToClass,u=r.enterActiveClass,h=r.appearClass,f=r.appearToClass,p=r.appearActiveClass,m=r.beforeEnter,v=r.enter,y=r.afterEnter,w=r.enterCancelled,b=r.beforeAppear,_=r.appear,x=r.afterAppear,T=r.appearCancelled,k=r.duration,C=Qn,I=Qn.$vnode;I&&I.parent;)C=I.context,I=I.parent;var z=!C._isMounted||!e.isRootInsert;if(!z||_||""===_){var A=z&&h?h:l,S=z&&p?p:u,P=z&&f?f:d,E=z&&b||m,O=z&&"function"==typeof _?_:v,U=z&&x||y,j=z&&T||w,L=g(c(k)?k.enter:k);0;var R=!1!==i&&!X,M=li(O),N=t._enterCb=$((function(){R&&(Zr(t,P),Zr(t,S)),N.cancelled?(R&&Zr(t,A),j&&j(t)):U&&U(t),t._enterCb=null}));e.data.show||dn(e,"insert",(function(){var n=t.parentNode,r=n&&n._pending&&n._pending[e.key];r&&r.tag===e.tag&&r.elm._leaveCb&&r.elm._leaveCb(),O&&O(t,N)})),E&&E(t),R&&(Qr(t,A),Qr(t,S),Xr((function(){Zr(t,A),N.cancelled||(Qr(t,P),M||(si(L)?setTimeout(N,L):ei(t,s,N)))}))),e.data.show&&(n&&n(),O&&O(t,N)),R||M||N()}}}function oi(e,n){var t=e.elm;o(t._enterCb)&&(t._enterCb.cancelled=!0,t._enterCb());var r=qr(e.data.transition);if(a(r)||1!==t.nodeType)return n();if(!o(t._leaveCb)){var i=r.css,s=r.type,l=r.leaveClass,d=r.leaveToClass,u=r.leaveActiveClass,h=r.beforeLeave,f=r.leave,p=r.afterLeave,m=r.leaveCancelled,v=r.delayLeave,y=r.duration,w=!1!==i&&!X,b=li(f),_=g(c(y)?y.leave:y);0;var x=t._leaveCb=$((function(){t.parentNode&&t.parentNode._pending&&(t.parentNode._pending[e.key]=null),w&&(Zr(t,d),Zr(t,u)),x.cancelled?(w&&Zr(t,l),m&&m(t)):(n(),p&&p(t)),t._leaveCb=null}));v?v(T):T()}function T(){x.cancelled||(!e.data.show&&t.parentNode&&((t.parentNode._pending||(t.parentNode._pending={}))[e.key]=e),h&&h(t),w&&(Qr(t,l),Qr(t,u),Xr((function(){Zr(t,l),x.cancelled||(Qr(t,d),b||(si(_)?setTimeout(x,_):ei(t,s,x)))}))),f&&f(t,x),w||b||x())}}function si(e){return"number"==typeof e&&!isNaN(e)}function li(e){if(a(e))return!1;var n=e.fns;return o(n)?li(Array.isArray(n)?n[0]:n):(e._length||e.length)>1}function ci(e,n){!0!==n.data.show&&ai(n)}var di=function(e){var n,t,r={},i=e.modules,c=e.nodeOps;for(n=0;n<tr.length;++n)for(r[tr[n]]=[],t=0;t<i.length;++t)o(i[t][tr[n]])&&r[tr[n]].push(i[t][tr[n]]);function d(e){var n=c.parentNode(e);o(n)&&c.removeChild(n,e)}function u(e,n,t,i,a,l,d){if(o(e.elm)&&o(l)&&(e=l[d]=we(e)),e.isRootInsert=!a,!function(e,n,t,i){var a=e.data;if(o(a)){var l=o(e.componentInstance)&&a.keepAlive;if(o(a=a.hook)&&o(a=a.init)&&a(e,!1),o(e.componentInstance))return h(e,n),f(t,e.elm,i),s(l)&&function(e,n,t,i){var a,s=e;for(;s.componentInstance;)if(s=s.componentInstance._vnode,o(a=s.data)&&o(a=a.transition)){for(a=0;a<r.activate.length;++a)r.activate[a](nr,s);n.push(s);break}f(t,e.elm,i)}(e,n,t,i),!0}}(e,n,t,i)){var u=e.data,m=e.children,v=e.tag;o(v)?(e.elm=e.ns?c.createElementNS(e.ns,v):c.createElement(v,e),y(e),p(e,m,n),o(u)&&g(e,n),f(t,e.elm,i)):s(e.isComment)?(e.elm=c.createComment(e.text),f(t,e.elm,i)):(e.elm=c.createTextNode(e.text),f(t,e.elm,i))}}function h(e,n){o(e.data.pendingInsert)&&(n.push.apply(n,e.data.pendingInsert),e.data.pendingInsert=null),e.elm=e.componentInstance.$el,m(e)?(g(e,n),y(e)):(er(e),n.push(e))}function f(e,n,t){o(e)&&(o(t)?c.parentNode(t)===e&&c.insertBefore(e,n,t):c.appendChild(e,n))}function p(e,n,t){if(Array.isArray(n)){0;for(var r=0;r<n.length;++r)u(n[r],t,e.elm,null,!0,n,r)}else l(e.text)&&c.appendChild(e.elm,c.createTextNode(String(e.text)))}function m(e){for(;e.componentInstance;)e=e.componentInstance._vnode;return o(e.tag)}function g(e,t){for(var i=0;i<r.create.length;++i)r.create[i](nr,e);o(n=e.data.hook)&&(o(n.create)&&n.create(nr,e),o(n.insert)&&t.push(e))}function y(e){var n;if(o(n=e.fnScopeId))c.setStyleScope(e.elm,n);else for(var t=e;t;)o(n=t.context)&&o(n=n.$options._scopeId)&&c.setStyleScope(e.elm,n),t=t.parent;o(n=Qn)&&n!==e.context&&n!==e.fnContext&&o(n=n.$options._scopeId)&&c.setStyleScope(e.elm,n)}function w(e,n,t,r,i,a){for(;r<=i;++r)u(t[r],a,e,n,!1,t,r)}function b(e){var n,t,i=e.data;if(o(i))for(o(n=i.hook)&&o(n=n.destroy)&&n(e),n=0;n<r.destroy.length;++n)r.destroy[n](e);if(o(n=e.children))for(t=0;t<e.children.length;++t)b(e.children[t])}function _(e,n,t){for(;n<=t;++n){var r=e[n];o(r)&&(o(r.tag)?(x(r),b(r)):d(r.elm))}}function x(e,n){if(o(n)||o(e.data)){var t,i=r.remove.length+1;for(o(n)?n.listeners+=i:n=function(e,n){function t(){0==--t.listeners&&d(e)}return t.listeners=n,t}(e.elm,i),o(t=e.componentInstance)&&o(t=t._vnode)&&o(t.data)&&x(t,n),t=0;t<r.remove.length;++t)r.remove[t](e,n);o(t=e.data.hook)&&o(t=t.remove)?t(e,n):n()}else d(e.elm)}function T(e,n,t,r){for(var i=t;i<r;i++){var a=n[i];if(o(a)&&rr(e,a))return i}}function k(e,n,t,i,l,d){if(e!==n){o(n.elm)&&o(i)&&(n=i[l]=we(n));var h=n.elm=e.elm;if(s(e.isAsyncPlaceholder))o(n.asyncFactory.resolved)?z(e.elm,n,t):n.isAsyncPlaceholder=!0;else if(s(n.isStatic)&&s(e.isStatic)&&n.key===e.key&&(s(n.isCloned)||s(n.isOnce)))n.componentInstance=e.componentInstance;else{var f,p=n.data;o(p)&&o(f=p.hook)&&o(f=f.prepatch)&&f(e,n);var g=e.children,v=n.children;if(o(p)&&m(n)){for(f=0;f<r.update.length;++f)r.update[f](e,n);o(f=p.hook)&&o(f=f.update)&&f(e,n)}a(n.text)?o(g)&&o(v)?g!==v&&function(e,n,t,r,i){var s,l,d,h=0,f=0,p=n.length-1,m=n[0],g=n[p],v=t.length-1,y=t[0],b=t[v],x=!i;for(0;h<=p&&f<=v;)a(m)?m=n[++h]:a(g)?g=n[--p]:rr(m,y)?(k(m,y,r,t,f),m=n[++h],y=t[++f]):rr(g,b)?(k(g,b,r,t,v),g=n[--p],b=t[--v]):rr(m,b)?(k(m,b,r,t,v),x&&c.insertBefore(e,m.elm,c.nextSibling(g.elm)),m=n[++h],b=t[--v]):rr(g,y)?(k(g,y,r,t,f),x&&c.insertBefore(e,g.elm,m.elm),g=n[--p],y=t[++f]):(a(s)&&(s=ir(n,h,p)),a(l=o(y.key)?s[y.key]:T(y,n,h,p))?u(y,r,e,m.elm,!1,t,f):rr(d=n[l],y)?(k(d,y,r,t,f),n[l]=void 0,x&&c.insertBefore(e,d.elm,m.elm)):u(y,r,e,m.elm,!1,t,f),y=t[++f]);h>p?w(e,a(t[v+1])?null:t[v+1].elm,t,f,v,r):f>v&&_(n,h,p)}(h,g,v,t,d):o(v)?(o(e.text)&&c.setTextContent(h,""),w(h,null,v,0,v.length-1,t)):o(g)?_(g,0,g.length-1):o(e.text)&&c.setTextContent(h,""):e.text!==n.text&&c.setTextContent(h,n.text),o(p)&&o(f=p.hook)&&o(f=f.postpatch)&&f(e,n)}}}function C(e,n,t){if(s(t)&&o(e.parent))e.parent.data.pendingInsert=n;else for(var r=0;r<n.length;++r)n[r].data.hook.insert(n[r])}var I=v("attrs,class,staticClass,staticStyle,key");function z(e,n,t,r){var i,a=n.tag,l=n.data,c=n.children;if(r=r||l&&l.pre,n.elm=e,s(n.isComment)&&o(n.asyncFactory))return n.isAsyncPlaceholder=!0,!0;if(o(l)&&(o(i=l.hook)&&o(i=i.init)&&i(n,!0),o(i=n.componentInstance)))return h(n,t),!0;if(o(a)){if(o(c))if(e.hasChildNodes())if(o(i=l)&&o(i=i.domProps)&&o(i=i.innerHTML)){if(i!==e.innerHTML)return!1}else{for(var d=!0,u=e.firstChild,f=0;f<c.length;f++){if(!u||!z(u,c[f],t,r)){d=!1;break}u=u.nextSibling}if(!d||u)return!1}else p(n,c,t);if(o(l)){var m=!1;for(var v in l)if(!I(v)){m=!0,g(n,t);break}!m&&l.class&&on(l.class)}}else e.data!==n.text&&(e.data=n.text);return!0}return function(e,n,t,i){if(!a(n)){var l,d=!1,h=[];if(a(e))d=!0,u(n,h);else{var f=o(e.nodeType);if(!f&&rr(e,n))k(e,n,h,null,null,i);else{if(f){if(1===e.nodeType&&e.hasAttribute("data-server-rendered")&&(e.removeAttribute("data-server-rendered"),t=!0),s(t)&&z(e,n,h))return C(n,h,!0),e;l=e,e=new me(c.tagName(l).toLowerCase(),{},[],void 0,l)}var p=e.elm,g=c.parentNode(p);if(u(n,h,p._leaveCb?null:g,c.nextSibling(p)),o(n.parent))for(var v=n.parent,y=m(n);v;){for(var w=0;w<r.destroy.length;++w)r.destroy[w](v);if(v.elm=n.elm,y){for(var x=0;x<r.create.length;++x)r.create[x](nr,v);var T=v.data.hook.insert;if(T.merged)for(var I=1;I<T.fns.length;I++)T.fns[I]()}else er(v);v=v.parent}o(g)?_([e],0,0):o(e.tag)&&b(e)}}return C(n,h,d),n.elm}o(e)&&b(e)}}({nodeOps:Qt,modules:[mr,yr,Cr,Ar,Nr,V?{create:ci,activate:ci,remove:function(e,n){!0!==e.data.show?oi(e,n):n()}}:{}].concat(ur)});X&&document.addEventListener("selectionchange",(function(){var e=document.activeElement;e&&e.vmodel&&yi(e,"input")}));var ui={inserted:function(e,n,t,r){"select"===t.tag?(r.elm&&!r.elm._vOptions?dn(t,"postpatch",(function(){ui.componentUpdated(e,n,t)})):hi(e,n,t.context),e._vOptions=[].map.call(e.options,mi)):("textarea"===t.tag||Xt(e.type))&&(e._vModifiers=n.modifiers,n.modifiers.lazy||(e.addEventListener("compositionstart",gi),e.addEventListener("compositionend",vi),e.addEventListener("change",vi),X&&(e.vmodel=!0)))},componentUpdated:function(e,n,t){if("select"===t.tag){hi(e,n,t.context);var r=e._vOptions,i=e._vOptions=[].map.call(e.options,mi);if(i.some((function(e,n){return!L(e,r[n])})))(e.multiple?n.value.some((function(e){return pi(e,i)})):n.value!==n.oldValue&&pi(n.value,i))&&yi(e,"change")}}};function hi(e,n,t){fi(e,n,t),(J||Q)&&setTimeout((function(){fi(e,n,t)}),0)}function fi(e,n,t){var r=n.value,i=e.multiple;if(!i||Array.isArray(r)){for(var a,o,s=0,l=e.options.length;s<l;s++)if(o=e.options[s],i)a=R(r,mi(o))>-1,o.selected!==a&&(o.selected=a);else if(L(mi(o),r))return void(e.selectedIndex!==s&&(e.selectedIndex=s));i||(e.selectedIndex=-1)}}function pi(e,n){return n.every((function(n){return!L(n,e)}))}function mi(e){return"_value"in e?e._value:e.value}function gi(e){e.target.composing=!0}function vi(e){e.target.composing&&(e.target.composing=!1,yi(e.target,"input"))}function yi(e,n){var t=document.createEvent("HTMLEvents");t.initEvent(n,!0,!0),e.dispatchEvent(t)}function wi(e){return!e.componentInstance||e.data&&e.data.transition?e:wi(e.componentInstance._vnode)}var bi={model:ui,show:{bind:function(e,n,t){var r=n.value,i=(t=wi(t)).data&&t.data.transition,a=e.__vOriginalDisplay="none"===e.style.display?"":e.style.display;r&&i?(t.data.show=!0,ai(t,(function(){e.style.display=a}))):e.style.display=r?a:"none"},update:function(e,n,t){var r=n.value;!r!=!n.oldValue&&((t=wi(t)).data&&t.data.transition?(t.data.show=!0,r?ai(t,(function(){e.style.display=e.__vOriginalDisplay})):oi(t,(function(){e.style.display="none"}))):e.style.display=r?e.__vOriginalDisplay:"none")},unbind:function(e,n,t,r,i){i||(e.style.display=e.__vOriginalDisplay)}}},_i={name:String,appear:Boolean,css:Boolean,mode:String,type:String,enterClass:String,leaveClass:String,enterToClass:String,leaveToClass:String,enterActiveClass:String,leaveActiveClass:String,appearClass:String,appearActiveClass:String,appearToClass:String,duration:[Number,String,Object]};function xi(e){var n=e&&e.componentOptions;return n&&n.Ctor.options.abstract?xi(Wn(n.children)):e}function Ti(e){var n={},t=e.$options;for(var r in t.propsData)n[r]=e[r];var i=t._parentListeners;for(var a in i)n[k(a)]=i[a];return n}function ki(e,n){if(/\d-keep-alive$/.test(n.tag))return e("keep-alive",{props:n.componentOptions.propsData})}var Ci=function(e){return e.tag||vn(e)},Ii=function(e){return"show"===e.name},zi={name:"transition",props:_i,abstract:!0,render:function(e){var n=this,t=this.$slots.default;if(t&&(t=t.filter(Ci)).length){0;var r=this.mode;0;var i=t[0];if(function(e){for(;e=e.parent;)if(e.data.transition)return!0}(this.$vnode))return i;var a=xi(i);if(!a)return i;if(this._leaving)return ki(e,i);var o="__transition-"+this._uid+"-";a.key=null==a.key?a.isComment?o+"comment":o+a.tag:l(a.key)?0===String(a.key).indexOf(o)?a.key:o+a.key:a.key;var s=(a.data||(a.data={})).transition=Ti(this),c=this._vnode,d=xi(c);if(a.data.directives&&a.data.directives.some(Ii)&&(a.data.show=!0),d&&d.data&&!function(e,n){return n.key===e.key&&n.tag===e.tag}(a,d)&&!vn(d)&&(!d.componentInstance||!d.componentInstance._vnode.isComment)){var u=d.data.transition=P({},s);if("out-in"===r)return this._leaving=!0,dn(u,"afterLeave",(function(){n._leaving=!1,n.$forceUpdate()})),ki(e,i);if("in-out"===r){if(vn(a))return c;var h,f=function(){h()};dn(s,"afterEnter",f),dn(s,"enterCancelled",f),dn(u,"delayLeave",(function(e){h=e}))}}return i}}},Ai=P({tag:String,moveClass:String},_i);function Si(e){e.elm._moveCb&&e.elm._moveCb(),e.elm._enterCb&&e.elm._enterCb()}function Pi(e){e.data.newPos=e.elm.getBoundingClientRect()}function Ei(e){var n=e.data.pos,t=e.data.newPos,r=n.left-t.left,i=n.top-t.top;if(r||i){e.data.moved=!0;var a=e.elm.style;a.transform=a.WebkitTransform="translate("+r+"px,"+i+"px)",a.transitionDuration="0s"}}delete Ai.mode;var Oi={Transition:zi,TransitionGroup:{props:Ai,beforeMount:function(){var e=this,n=this._update;this._update=function(t,r){var i=Zn(e);e.__patch__(e._vnode,e.kept,!1,!0),e._vnode=e.kept,i(),n.call(e,t,r)}},render:function(e){for(var n=this.tag||this.$vnode.data.tag||"span",t=Object.create(null),r=this.prevChildren=this.children,i=this.$slots.default||[],a=this.children=[],o=Ti(this),s=0;s<i.length;s++){var l=i[s];if(l.tag)if(null!=l.key&&0!==String(l.key).indexOf("__vlist"))a.push(l),t[l.key]=l,(l.data||(l.data={})).transition=o;else;}if(r){for(var c=[],d=[],u=0;u<r.length;u++){var h=r[u];h.data.transition=o,h.data.pos=h.elm.getBoundingClientRect(),t[h.key]?c.push(h):d.push(h)}this.kept=e(n,null,c),this.removed=d}return e(n,null,a)},updated:function(){var e=this.prevChildren,n=this.moveClass||(this.name||"v")+"-move";e.length&&this.hasMove(e[0].elm,n)&&(e.forEach(Si),e.forEach(Pi),e.forEach(Ei),this._reflow=document.body.offsetHeight,e.forEach((function(e){if(e.data.moved){var t=e.elm,r=t.style;Qr(t,n),r.transform=r.WebkitTransform=r.transitionDuration="",t.addEventListener(Wr,t._moveCb=function e(r){r&&r.target!==t||r&&!/transform$/.test(r.propertyName)||(t.removeEventListener(Wr,e),t._moveCb=null,Zr(t,n))})}})))},methods:{hasMove:function(e,n){if(!Gr)return!1;if(this._hasMove)return this._hasMove;var t=e.cloneNode();e._transitionClasses&&e._transitionClasses.forEach((function(e){Hr(t,e)})),Dr(t,n),t.style.display="none",this.$el.appendChild(t);var r=ti(t);return this.$el.removeChild(t),this._hasMove=r.hasTransform}}}};Ct.config.mustUseProp=function(e,n,t){return"value"===t&&jt(e)&&"button"!==n||"selected"===t&&"option"===e||"checked"===t&&"input"===e||"muted"===t&&"video"===e},Ct.config.isReservedTag=Kt,Ct.config.isReservedAttr=Ut,Ct.config.getTagNamespace=function(e){return Yt(e)?"svg":"math"===e?"math":void 0},Ct.config.isUnknownElement=function(e){if(!V)return!0;if(Kt(e))return!1;if(e=e.toLowerCase(),null!=Jt[e])return Jt[e];var n=document.createElement(e);return e.indexOf("-")>-1?Jt[e]=n.constructor===window.HTMLUnknownElement||n.constructor===window.HTMLElement:Jt[e]=/HTMLUnknownElement/.test(n.toString())},P(Ct.options.directives,bi),P(Ct.options.components,Oi),Ct.prototype.__patch__=V?di:O,Ct.prototype.$mount=function(e,n){return function(e,n,t){var r;return e.$el=n,e.$options.render||(e.$options.render=ve),tt(e,"beforeMount"),r=function(){e._update(e._render(),t)},new pt(e,r,O,{before:function(){e._isMounted&&!e._isDestroyed&&tt(e,"beforeUpdate")}},!0),t=!1,null==e.$vnode&&(e._isMounted=!0,tt(e,"mounted")),e}(this,e=e&&V?function(e){if("string"==typeof e){var n=document.querySelector(e);return n||document.createElement("div")}return e}(e):void 0,n)},V&&setTimeout((function(){F.devtools&&ae&&ae.emit("init",Ct)}),0);var Ui=Ct;
/*!
  * vue-router v3.5.3
  * (c) 2021 Evan You
  * @license MIT
  */function ji(e,n){for(var t in n)e[t]=n[t];return e}var Li=/[!'()*]/g,Ri=function(e){return"%"+e.charCodeAt(0).toString(16)},$i=/%2C/g,Mi=function(e){return encodeURIComponent(e).replace(Li,Ri).replace($i,",")};function Ni(e){try{return decodeURIComponent(e)}catch(e){0}return e}var Fi=function(e){return null==e||"object"==typeof e?e:String(e)};function Di(e){var n={};return(e=e.trim().replace(/^(\?|#|&)/,""))?(e.split("&").forEach((function(e){var t=e.replace(/\+/g," ").split("="),r=Ni(t.shift()),i=t.length>0?Ni(t.join("=")):null;void 0===n[r]?n[r]=i:Array.isArray(n[r])?n[r].push(i):n[r]=[n[r],i]})),n):n}function Hi(e){var n=e?Object.keys(e).map((function(n){var t=e[n];if(void 0===t)return"";if(null===t)return Mi(n);if(Array.isArray(t)){var r=[];return t.forEach((function(e){void 0!==e&&(null===e?r.push(Mi(n)):r.push(Mi(n)+"="+Mi(e)))})),r.join("&")}return Mi(n)+"="+Mi(t)})).filter((function(e){return e.length>0})).join("&"):null;return n?"?"+n:""}var qi=/\/?$/;function Bi(e,n,t,r){var i=r&&r.options.stringifyQuery,a=n.query||{};try{a=Gi(a)}catch(e){}var o={name:n.name||e&&e.name,meta:e&&e.meta||{},path:n.path||"/",hash:n.hash||"",query:a,params:n.params||{},fullPath:Yi(n,i),matched:e?Wi(e):[]};return t&&(o.redirectedFrom=Yi(t,i)),Object.freeze(o)}function Gi(e){if(Array.isArray(e))return e.map(Gi);if(e&&"object"==typeof e){var n={};for(var t in e)n[t]=Gi(e[t]);return n}return e}var Vi=Bi(null,{path:"/"});function Wi(e){for(var n=[];e;)n.unshift(e),e=e.parent;return n}function Yi(e,n){var t=e.path,r=e.query;void 0===r&&(r={});var i=e.hash;return void 0===i&&(i=""),(t||"/")+(n||Hi)(r)+i}function Ki(e,n,t){return n===Vi?e===n:!!n&&(e.path&&n.path?e.path.replace(qi,"")===n.path.replace(qi,"")&&(t||e.hash===n.hash&&Ji(e.query,n.query)):!(!e.name||!n.name)&&(e.name===n.name&&(t||e.hash===n.hash&&Ji(e.query,n.query)&&Ji(e.params,n.params))))}function Ji(e,n){if(void 0===e&&(e={}),void 0===n&&(n={}),!e||!n)return e===n;var t=Object.keys(e).sort(),r=Object.keys(n).sort();return t.length===r.length&&t.every((function(t,i){var a=e[t];if(r[i]!==t)return!1;var o=n[t];return null==a||null==o?a===o:"object"==typeof a&&"object"==typeof o?Ji(a,o):String(a)===String(o)}))}function Xi(e){for(var n=0;n<e.matched.length;n++){var t=e.matched[n];for(var r in t.instances){var i=t.instances[r],a=t.enteredCbs[r];if(i&&a){delete t.enteredCbs[r];for(var o=0;o<a.length;o++)i._isBeingDestroyed||a[o](i)}}}}var Qi={name:"RouterView",functional:!0,props:{name:{type:String,default:"default"}},render:function(e,n){var t=n.props,r=n.children,i=n.parent,a=n.data;a.routerView=!0;for(var o=i.$createElement,s=t.name,l=i.$route,c=i._routerViewCache||(i._routerViewCache={}),d=0,u=!1;i&&i._routerRoot!==i;){var h=i.$vnode?i.$vnode.data:{};h.routerView&&d++,h.keepAlive&&i._directInactive&&i._inactive&&(u=!0),i=i.$parent}if(a.routerViewDepth=d,u){var f=c[s],p=f&&f.component;return p?(f.configProps&&Zi(p,a,f.route,f.configProps),o(p,a,r)):o()}var m=l.matched[d],g=m&&m.components[s];if(!m||!g)return c[s]=null,o();c[s]={component:g},a.registerRouteInstance=function(e,n){var t=m.instances[s];(n&&t!==e||!n&&t===e)&&(m.instances[s]=n)},(a.hook||(a.hook={})).prepatch=function(e,n){m.instances[s]=n.componentInstance},a.hook.init=function(e){e.data.keepAlive&&e.componentInstance&&e.componentInstance!==m.instances[s]&&(m.instances[s]=e.componentInstance),Xi(l)};var v=m.props&&m.props[s];return v&&(ji(c[s],{route:l,configProps:v}),Zi(g,a,l,v)),o(g,a,r)}};function Zi(e,n,t,r){var i=n.props=function(e,n){switch(typeof n){case"undefined":return;case"object":return n;case"function":return n(e);case"boolean":return n?e.params:void 0;default:0}}(t,r);if(i){i=n.props=ji({},i);var a=n.attrs=n.attrs||{};for(var o in i)e.props&&o in e.props||(a[o]=i[o],delete i[o])}}function ea(e,n,t){var r=e.charAt(0);if("/"===r)return e;if("?"===r||"#"===r)return n+e;var i=n.split("/");t&&i[i.length-1]||i.pop();for(var a=e.replace(/^\//,"").split("/"),o=0;o<a.length;o++){var s=a[o];".."===s?i.pop():"."!==s&&i.push(s)}return""!==i[0]&&i.unshift(""),i.join("/")}function na(e){return e.replace(/\/+/g,"/")}var ta=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)},ra=va,ia=ca,aa=function(e,n){return ua(ca(e,n),n)},oa=ua,sa=ga,la=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function ca(e,n){for(var t,r=[],i=0,a=0,o="",s=n&&n.delimiter||"/";null!=(t=la.exec(e));){var l=t[0],c=t[1],d=t.index;if(o+=e.slice(a,d),a=d+l.length,c)o+=c[1];else{var u=e[a],h=t[2],f=t[3],p=t[4],m=t[5],g=t[6],v=t[7];o&&(r.push(o),o="");var y=null!=h&&null!=u&&u!==h,w="+"===g||"*"===g,b="?"===g||"*"===g,_=t[2]||s,x=p||m;r.push({name:f||i++,prefix:h||"",delimiter:_,optional:b,repeat:w,partial:y,asterisk:!!v,pattern:x?fa(x):v?".*":"[^"+ha(_)+"]+?"})}}return a<e.length&&(o+=e.substr(a)),o&&r.push(o),r}function da(e){return encodeURI(e).replace(/[\/?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function ua(e,n){for(var t=new Array(e.length),r=0;r<e.length;r++)"object"==typeof e[r]&&(t[r]=new RegExp("^(?:"+e[r].pattern+")$",ma(n)));return function(n,r){for(var i="",a=n||{},o=(r||{}).pretty?da:encodeURIComponent,s=0;s<e.length;s++){var l=e[s];if("string"!=typeof l){var c,d=a[l.name];if(null==d){if(l.optional){l.partial&&(i+=l.prefix);continue}throw new TypeError('Expected "'+l.name+'" to be defined')}if(ta(d)){if(!l.repeat)throw new TypeError('Expected "'+l.name+'" to not repeat, but received `'+JSON.stringify(d)+"`");if(0===d.length){if(l.optional)continue;throw new TypeError('Expected "'+l.name+'" to not be empty')}for(var u=0;u<d.length;u++){if(c=o(d[u]),!t[s].test(c))throw new TypeError('Expected all "'+l.name+'" to match "'+l.pattern+'", but received `'+JSON.stringify(c)+"`");i+=(0===u?l.prefix:l.delimiter)+c}}else{if(c=l.asterisk?encodeURI(d).replace(/[?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})):o(d),!t[s].test(c))throw new TypeError('Expected "'+l.name+'" to match "'+l.pattern+'", but received "'+c+'"');i+=l.prefix+c}}else i+=l}return i}}function ha(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function fa(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function pa(e,n){return e.keys=n,e}function ma(e){return e&&e.sensitive?"":"i"}function ga(e,n,t){ta(n)||(t=n||t,n=[]);for(var r=(t=t||{}).strict,i=!1!==t.end,a="",o=0;o<e.length;o++){var s=e[o];if("string"==typeof s)a+=ha(s);else{var l=ha(s.prefix),c="(?:"+s.pattern+")";n.push(s),s.repeat&&(c+="(?:"+l+c+")*"),a+=c=s.optional?s.partial?l+"("+c+")?":"(?:"+l+"("+c+"))?":l+"("+c+")"}}var d=ha(t.delimiter||"/"),u=a.slice(-d.length)===d;return r||(a=(u?a.slice(0,-d.length):a)+"(?:"+d+"(?=$))?"),a+=i?"$":r&&u?"":"(?="+d+"|$)",pa(new RegExp("^"+a,ma(t)),n)}function va(e,n,t){return ta(n)||(t=n||t,n=[]),t=t||{},e instanceof RegExp?function(e,n){var t=e.source.match(/\((?!\?)/g);if(t)for(var r=0;r<t.length;r++)n.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return pa(e,n)}(e,n):ta(e)?function(e,n,t){for(var r=[],i=0;i<e.length;i++)r.push(va(e[i],n,t).source);return pa(new RegExp("(?:"+r.join("|")+")",ma(t)),n)}(e,n,t):function(e,n,t){return ga(ca(e,t),n,t)}(e,n,t)}ra.parse=ia,ra.compile=aa,ra.tokensToFunction=oa,ra.tokensToRegExp=sa;var ya=Object.create(null);function wa(e,n,t){n=n||{};try{var r=ya[e]||(ya[e]=ra.compile(e));return"string"==typeof n.pathMatch&&(n[0]=n.pathMatch),r(n,{pretty:!0})}catch(e){return""}finally{delete n[0]}}function ba(e,n,t,r){var i="string"==typeof e?{path:e}:e;if(i._normalized)return i;if(i.name){var a=(i=ji({},e)).params;return a&&"object"==typeof a&&(i.params=ji({},a)),i}if(!i.path&&i.params&&n){(i=ji({},i))._normalized=!0;var o=ji(ji({},n.params),i.params);if(n.name)i.name=n.name,i.params=o;else if(n.matched.length){var s=n.matched[n.matched.length-1].path;i.path=wa(s,o,n.path)}else 0;return i}var l=function(e){var n="",t="",r=e.indexOf("#");r>=0&&(n=e.slice(r),e=e.slice(0,r));var i=e.indexOf("?");return i>=0&&(t=e.slice(i+1),e=e.slice(0,i)),{path:e,query:t,hash:n}}(i.path||""),c=n&&n.path||"/",d=l.path?ea(l.path,c,t||i.append):c,u=function(e,n,t){void 0===n&&(n={});var r,i=t||Di;try{r=i(e||"")}catch(e){r={}}for(var a in n){var o=n[a];r[a]=Array.isArray(o)?o.map(Fi):Fi(o)}return r}(l.query,i.query,r&&r.options.parseQuery),h=i.hash||l.hash;return h&&"#"!==h.charAt(0)&&(h="#"+h),{_normalized:!0,path:d,query:u,hash:h}}var _a,xa=function(){},Ta={name:"RouterLink",props:{to:{type:[String,Object],required:!0},tag:{type:String,default:"a"},custom:Boolean,exact:Boolean,exactPath:Boolean,append:Boolean,replace:Boolean,activeClass:String,exactActiveClass:String,ariaCurrentValue:{type:String,default:"page"},event:{type:[String,Array],default:"click"}},render:function(e){var n=this,t=this.$router,r=this.$route,i=t.resolve(this.to,r,this.append),a=i.location,o=i.route,s=i.href,l={},c=t.options.linkActiveClass,d=t.options.linkExactActiveClass,u=null==c?"router-link-active":c,h=null==d?"router-link-exact-active":d,f=null==this.activeClass?u:this.activeClass,p=null==this.exactActiveClass?h:this.exactActiveClass,m=o.redirectedFrom?Bi(null,ba(o.redirectedFrom),null,t):o;l[p]=Ki(r,m,this.exactPath),l[f]=this.exact||this.exactPath?l[p]:function(e,n){return 0===e.path.replace(qi,"/").indexOf(n.path.replace(qi,"/"))&&(!n.hash||e.hash===n.hash)&&function(e,n){for(var t in n)if(!(t in e))return!1;return!0}(e.query,n.query)}(r,m);var g=l[p]?this.ariaCurrentValue:null,v=function(e){ka(e)&&(n.replace?t.replace(a,xa):t.push(a,xa))},y={click:ka};Array.isArray(this.event)?this.event.forEach((function(e){y[e]=v})):y[this.event]=v;var w={class:l},b=!this.$scopedSlots.$hasNormal&&this.$scopedSlots.default&&this.$scopedSlots.default({href:s,route:o,navigate:v,isActive:l[f],isExactActive:l[p]});if(b){if(1===b.length)return b[0];if(b.length>1||!b.length)return 0===b.length?e():e("span",{},b)}if("a"===this.tag)w.on=y,w.attrs={href:s,"aria-current":g};else{var _=function e(n){var t;if(n)for(var r=0;r<n.length;r++){if("a"===(t=n[r]).tag)return t;if(t.children&&(t=e(t.children)))return t}}(this.$slots.default);if(_){_.isStatic=!1;var x=_.data=ji({},_.data);for(var T in x.on=x.on||{},x.on){var k=x.on[T];T in y&&(x.on[T]=Array.isArray(k)?k:[k])}for(var C in y)C in x.on?x.on[C].push(y[C]):x.on[C]=v;var I=_.data.attrs=ji({},_.data.attrs);I.href=s,I["aria-current"]=g}else w.on=y}return e(this.tag,w,this.$slots.default)}};function ka(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey||e.defaultPrevented||void 0!==e.button&&0!==e.button)){if(e.currentTarget&&e.currentTarget.getAttribute){var n=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(n))return}return e.preventDefault&&e.preventDefault(),!0}}var Ca="undefined"!=typeof window;function Ia(e,n,t,r,i){var a=n||[],o=t||Object.create(null),s=r||Object.create(null);e.forEach((function(e){!function e(n,t,r,i,a,o){var s=i.path,l=i.name;0;var c=i.pathToRegexpOptions||{},d=function(e,n,t){t||(e=e.replace(/\/$/,""));if("/"===e[0])return e;if(null==n)return e;return na(n.path+"/"+e)}(s,a,c.strict);"boolean"==typeof i.caseSensitive&&(c.sensitive=i.caseSensitive);var u={path:d,regex:za(d,c),components:i.components||{default:i.component},alias:i.alias?"string"==typeof i.alias?[i.alias]:i.alias:[],instances:{},enteredCbs:{},name:l,parent:a,matchAs:o,redirect:i.redirect,beforeEnter:i.beforeEnter,meta:i.meta||{},props:null==i.props?{}:i.components?i.props:{default:i.props}};i.children&&i.children.forEach((function(i){var a=o?na(o+"/"+i.path):void 0;e(n,t,r,i,u,a)}));t[u.path]||(n.push(u.path),t[u.path]=u);if(void 0!==i.alias)for(var h=Array.isArray(i.alias)?i.alias:[i.alias],f=0;f<h.length;++f){0;var p={path:h[f],children:i.children};e(n,t,r,p,a,u.path||"/")}l&&(r[l]||(r[l]=u))}(a,o,s,e,i)}));for(var l=0,c=a.length;l<c;l++)"*"===a[l]&&(a.push(a.splice(l,1)[0]),c--,l--);return{pathList:a,pathMap:o,nameMap:s}}function za(e,n){return ra(e,[],n)}function Aa(e,n){var t=Ia(e),r=t.pathList,i=t.pathMap,a=t.nameMap;function o(e,t,o){var s=ba(e,t,!1,n),c=s.name;if(c){var d=a[c];if(!d)return l(null,s);var u=d.regex.keys.filter((function(e){return!e.optional})).map((function(e){return e.name}));if("object"!=typeof s.params&&(s.params={}),t&&"object"==typeof t.params)for(var h in t.params)!(h in s.params)&&u.indexOf(h)>-1&&(s.params[h]=t.params[h]);return s.path=wa(d.path,s.params),l(d,s,o)}if(s.path){s.params={};for(var f=0;f<r.length;f++){var p=r[f],m=i[p];if(Sa(m.regex,s.path,s.params))return l(m,s,o)}}return l(null,s)}function s(e,t){var r=e.redirect,i="function"==typeof r?r(Bi(e,t,null,n)):r;if("string"==typeof i&&(i={path:i}),!i||"object"!=typeof i)return l(null,t);var s=i,c=s.name,d=s.path,u=t.query,h=t.hash,f=t.params;if(u=s.hasOwnProperty("query")?s.query:u,h=s.hasOwnProperty("hash")?s.hash:h,f=s.hasOwnProperty("params")?s.params:f,c){a[c];return o({_normalized:!0,name:c,query:u,hash:h,params:f},void 0,t)}if(d){var p=function(e,n){return ea(e,n.parent?n.parent.path:"/",!0)}(d,e);return o({_normalized:!0,path:wa(p,f),query:u,hash:h},void 0,t)}return l(null,t)}function l(e,t,r){return e&&e.redirect?s(e,r||t):e&&e.matchAs?function(e,n,t){var r=o({_normalized:!0,path:wa(t,n.params)});if(r){var i=r.matched,a=i[i.length-1];return n.params=r.params,l(a,n)}return l(null,n)}(0,t,e.matchAs):Bi(e,t,r,n)}return{match:o,addRoute:function(e,n){var t="object"!=typeof e?a[e]:void 0;Ia([n||e],r,i,a,t),t&&t.alias.length&&Ia(t.alias.map((function(e){return{path:e,children:[n]}})),r,i,a,t)},getRoutes:function(){return r.map((function(e){return i[e]}))},addRoutes:function(e){Ia(e,r,i,a)}}}function Sa(e,n,t){var r=n.match(e);if(!r)return!1;if(!t)return!0;for(var i=1,a=r.length;i<a;++i){var o=e.keys[i-1];o&&(t[o.name||"pathMatch"]="string"==typeof r[i]?Ni(r[i]):r[i])}return!0}var Pa=Ca&&window.performance&&window.performance.now?window.performance:Date;function Ea(){return Pa.now().toFixed(3)}var Oa=Ea();function Ua(){return Oa}function ja(e){return Oa=e}var La=Object.create(null);function Ra(){"scrollRestoration"in window.history&&(window.history.scrollRestoration="manual");var e=window.location.protocol+"//"+window.location.host,n=window.location.href.replace(e,""),t=ji({},window.history.state);return t.key=Ua(),window.history.replaceState(t,"",n),window.addEventListener("popstate",Na),function(){window.removeEventListener("popstate",Na)}}function $a(e,n,t,r){if(e.app){var i=e.options.scrollBehavior;i&&e.app.$nextTick((function(){var a=function(){var e=Ua();if(e)return La[e]}(),o=i.call(e,n,t,r?a:null);o&&("function"==typeof o.then?o.then((function(e){Ba(e,a)})).catch((function(e){0})):Ba(o,a))}))}}function Ma(){var e=Ua();e&&(La[e]={x:window.pageXOffset,y:window.pageYOffset})}function Na(e){Ma(),e.state&&e.state.key&&ja(e.state.key)}function Fa(e){return Ha(e.x)||Ha(e.y)}function Da(e){return{x:Ha(e.x)?e.x:window.pageXOffset,y:Ha(e.y)?e.y:window.pageYOffset}}function Ha(e){return"number"==typeof e}var qa=/^#\d/;function Ba(e,n){var t,r="object"==typeof e;if(r&&"string"==typeof e.selector){var i=qa.test(e.selector)?document.getElementById(e.selector.slice(1)):document.querySelector(e.selector);if(i){var a=e.offset&&"object"==typeof e.offset?e.offset:{};n=function(e,n){var t=document.documentElement.getBoundingClientRect(),r=e.getBoundingClientRect();return{x:r.left-t.left-n.x,y:r.top-t.top-n.y}}(i,a={x:Ha((t=a).x)?t.x:0,y:Ha(t.y)?t.y:0})}else Fa(e)&&(n=Da(e))}else r&&Fa(e)&&(n=Da(e));n&&("scrollBehavior"in document.documentElement.style?window.scrollTo({left:n.x,top:n.y,behavior:e.behavior}):window.scrollTo(n.x,n.y))}var Ga,Va=Ca&&((-1===(Ga=window.navigator.userAgent).indexOf("Android 2.")&&-1===Ga.indexOf("Android 4.0")||-1===Ga.indexOf("Mobile Safari")||-1!==Ga.indexOf("Chrome")||-1!==Ga.indexOf("Windows Phone"))&&window.history&&"function"==typeof window.history.pushState);function Wa(e,n){Ma();var t=window.history;try{if(n){var r=ji({},t.state);r.key=Ua(),t.replaceState(r,"",e)}else t.pushState({key:ja(Ea())},"",e)}catch(t){window.location[n?"replace":"assign"](e)}}function Ya(e){Wa(e,!0)}function Ka(e,n,t){var r=function(i){i>=e.length?t():e[i]?n(e[i],(function(){r(i+1)})):r(i+1)};r(0)}var Ja={redirected:2,aborted:4,cancelled:8,duplicated:16};function Xa(e,n){return Za(e,n,Ja.redirected,'Redirected when going from "'+e.fullPath+'" to "'+function(e){if("string"==typeof e)return e;if("path"in e)return e.path;var n={};return eo.forEach((function(t){t in e&&(n[t]=e[t])})),JSON.stringify(n,null,2)}(n)+'" via a navigation guard.')}function Qa(e,n){return Za(e,n,Ja.cancelled,'Navigation cancelled from "'+e.fullPath+'" to "'+n.fullPath+'" with a new navigation.')}function Za(e,n,t,r){var i=new Error(r);return i._isRouter=!0,i.from=e,i.to=n,i.type=t,i}var eo=["params","query","hash"];function no(e){return Object.prototype.toString.call(e).indexOf("Error")>-1}function to(e,n){return no(e)&&e._isRouter&&(null==n||e.type===n)}function ro(e){return function(n,t,r){var i=!1,a=0,o=null;io(e,(function(e,n,t,s){if("function"==typeof e&&void 0===e.cid){i=!0,a++;var l,c=so((function(n){var i;((i=n).__esModule||oo&&"Module"===i[Symbol.toStringTag])&&(n=n.default),e.resolved="function"==typeof n?n:_a.extend(n),t.components[s]=n,--a<=0&&r()})),d=so((function(e){var n="Failed to resolve async component "+s+": "+e;o||(o=no(e)?e:new Error(n),r(o))}));try{l=e(c,d)}catch(e){d(e)}if(l)if("function"==typeof l.then)l.then(c,d);else{var u=l.component;u&&"function"==typeof u.then&&u.then(c,d)}}})),i||r()}}function io(e,n){return ao(e.map((function(e){return Object.keys(e.components).map((function(t){return n(e.components[t],e.instances[t],e,t)}))})))}function ao(e){return Array.prototype.concat.apply([],e)}var oo="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;function so(e){var n=!1;return function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];if(!n)return n=!0,e.apply(this,t)}}var lo=function(e,n){this.router=e,this.base=function(e){if(!e)if(Ca){var n=document.querySelector("base");e=(e=n&&n.getAttribute("href")||"/").replace(/^https?:\/\/[^\/]+/,"")}else e="/";"/"!==e.charAt(0)&&(e="/"+e);return e.replace(/\/$/,"")}(n),this.current=Vi,this.pending=null,this.ready=!1,this.readyCbs=[],this.readyErrorCbs=[],this.errorCbs=[],this.listeners=[]};function co(e,n,t,r){var i=io(e,(function(e,r,i,a){var o=function(e,n){"function"!=typeof e&&(e=_a.extend(e));return e.options[n]}(e,n);if(o)return Array.isArray(o)?o.map((function(e){return t(e,r,i,a)})):t(o,r,i,a)}));return ao(r?i.reverse():i)}function uo(e,n){if(n)return function(){return e.apply(n,arguments)}}lo.prototype.listen=function(e){this.cb=e},lo.prototype.onReady=function(e,n){this.ready?e():(this.readyCbs.push(e),n&&this.readyErrorCbs.push(n))},lo.prototype.onError=function(e){this.errorCbs.push(e)},lo.prototype.transitionTo=function(e,n,t){var r,i=this;try{r=this.router.match(e,this.current)}catch(e){throw this.errorCbs.forEach((function(n){n(e)})),e}var a=this.current;this.confirmTransition(r,(function(){i.updateRoute(r),n&&n(r),i.ensureURL(),i.router.afterHooks.forEach((function(e){e&&e(r,a)})),i.ready||(i.ready=!0,i.readyCbs.forEach((function(e){e(r)})))}),(function(e){t&&t(e),e&&!i.ready&&(to(e,Ja.redirected)&&a===Vi||(i.ready=!0,i.readyErrorCbs.forEach((function(n){n(e)}))))}))},lo.prototype.confirmTransition=function(e,n,t){var r=this,i=this.current;this.pending=e;var a,o,s=function(e){!to(e)&&no(e)&&(r.errorCbs.length?r.errorCbs.forEach((function(n){n(e)})):console.error(e)),t&&t(e)},l=e.matched.length-1,c=i.matched.length-1;if(Ki(e,i)&&l===c&&e.matched[l]===i.matched[c])return this.ensureURL(),e.hash&&$a(this.router,i,e,!1),s(((o=Za(a=i,e,Ja.duplicated,'Avoided redundant navigation to current location: "'+a.fullPath+'".')).name="NavigationDuplicated",o));var d=function(e,n){var t,r=Math.max(e.length,n.length);for(t=0;t<r&&e[t]===n[t];t++);return{updated:n.slice(0,t),activated:n.slice(t),deactivated:e.slice(t)}}(this.current.matched,e.matched),u=d.updated,h=d.deactivated,f=d.activated,p=[].concat(function(e){return co(e,"beforeRouteLeave",uo,!0)}(h),this.router.beforeHooks,function(e){return co(e,"beforeRouteUpdate",uo)}(u),f.map((function(e){return e.beforeEnter})),ro(f)),m=function(n,t){if(r.pending!==e)return s(Qa(i,e));try{n(e,i,(function(n){!1===n?(r.ensureURL(!0),s(function(e,n){return Za(e,n,Ja.aborted,'Navigation aborted from "'+e.fullPath+'" to "'+n.fullPath+'" via a navigation guard.')}(i,e))):no(n)?(r.ensureURL(!0),s(n)):"string"==typeof n||"object"==typeof n&&("string"==typeof n.path||"string"==typeof n.name)?(s(Xa(i,e)),"object"==typeof n&&n.replace?r.replace(n):r.push(n)):t(n)}))}catch(e){s(e)}};Ka(p,m,(function(){Ka(function(e){return co(e,"beforeRouteEnter",(function(e,n,t,r){return function(e,n,t){return function(r,i,a){return e(r,i,(function(e){"function"==typeof e&&(n.enteredCbs[t]||(n.enteredCbs[t]=[]),n.enteredCbs[t].push(e)),a(e)}))}}(e,t,r)}))}(f).concat(r.router.resolveHooks),m,(function(){if(r.pending!==e)return s(Qa(i,e));r.pending=null,n(e),r.router.app&&r.router.app.$nextTick((function(){Xi(e)}))}))}))},lo.prototype.updateRoute=function(e){this.current=e,this.cb&&this.cb(e)},lo.prototype.setupListeners=function(){},lo.prototype.teardown=function(){this.listeners.forEach((function(e){e()})),this.listeners=[],this.current=Vi,this.pending=null};var ho=function(e){function n(n,t){e.call(this,n,t),this._startLocation=fo(this.base)}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.setupListeners=function(){var e=this;if(!(this.listeners.length>0)){var n=this.router,t=n.options.scrollBehavior,r=Va&&t;r&&this.listeners.push(Ra());var i=function(){var t=e.current,i=fo(e.base);e.current===Vi&&i===e._startLocation||e.transitionTo(i,(function(e){r&&$a(n,e,t,!0)}))};window.addEventListener("popstate",i),this.listeners.push((function(){window.removeEventListener("popstate",i)}))}},n.prototype.go=function(e){window.history.go(e)},n.prototype.push=function(e,n,t){var r=this,i=this.current;this.transitionTo(e,(function(e){Wa(na(r.base+e.fullPath)),$a(r.router,e,i,!1),n&&n(e)}),t)},n.prototype.replace=function(e,n,t){var r=this,i=this.current;this.transitionTo(e,(function(e){Ya(na(r.base+e.fullPath)),$a(r.router,e,i,!1),n&&n(e)}),t)},n.prototype.ensureURL=function(e){if(fo(this.base)!==this.current.fullPath){var n=na(this.base+this.current.fullPath);e?Wa(n):Ya(n)}},n.prototype.getCurrentLocation=function(){return fo(this.base)},n}(lo);function fo(e){var n=window.location.pathname,t=n.toLowerCase(),r=e.toLowerCase();return!e||t!==r&&0!==t.indexOf(na(r+"/"))||(n=n.slice(e.length)),(n||"/")+window.location.search+window.location.hash}var po=function(e){function n(n,t,r){e.call(this,n,t),r&&function(e){var n=fo(e);if(!/^\/#/.test(n))return window.location.replace(na(e+"/#"+n)),!0}(this.base)||mo()}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.setupListeners=function(){var e=this;if(!(this.listeners.length>0)){var n=this.router.options.scrollBehavior,t=Va&&n;t&&this.listeners.push(Ra());var r=function(){var n=e.current;mo()&&e.transitionTo(go(),(function(r){t&&$a(e.router,r,n,!0),Va||wo(r.fullPath)}))},i=Va?"popstate":"hashchange";window.addEventListener(i,r),this.listeners.push((function(){window.removeEventListener(i,r)}))}},n.prototype.push=function(e,n,t){var r=this,i=this.current;this.transitionTo(e,(function(e){yo(e.fullPath),$a(r.router,e,i,!1),n&&n(e)}),t)},n.prototype.replace=function(e,n,t){var r=this,i=this.current;this.transitionTo(e,(function(e){wo(e.fullPath),$a(r.router,e,i,!1),n&&n(e)}),t)},n.prototype.go=function(e){window.history.go(e)},n.prototype.ensureURL=function(e){var n=this.current.fullPath;go()!==n&&(e?yo(n):wo(n))},n.prototype.getCurrentLocation=function(){return go()},n}(lo);function mo(){var e=go();return"/"===e.charAt(0)||(wo("/"+e),!1)}function go(){var e=window.location.href,n=e.indexOf("#");return n<0?"":e=e.slice(n+1)}function vo(e){var n=window.location.href,t=n.indexOf("#");return(t>=0?n.slice(0,t):n)+"#"+e}function yo(e){Va?Wa(vo(e)):window.location.hash=e}function wo(e){Va?Ya(vo(e)):window.location.replace(vo(e))}var bo=function(e){function n(n,t){e.call(this,n,t),this.stack=[],this.index=-1}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.push=function(e,n,t){var r=this;this.transitionTo(e,(function(e){r.stack=r.stack.slice(0,r.index+1).concat(e),r.index++,n&&n(e)}),t)},n.prototype.replace=function(e,n,t){var r=this;this.transitionTo(e,(function(e){r.stack=r.stack.slice(0,r.index).concat(e),n&&n(e)}),t)},n.prototype.go=function(e){var n=this,t=this.index+e;if(!(t<0||t>=this.stack.length)){var r=this.stack[t];this.confirmTransition(r,(function(){var e=n.current;n.index=t,n.updateRoute(r),n.router.afterHooks.forEach((function(n){n&&n(r,e)}))}),(function(e){to(e,Ja.duplicated)&&(n.index=t)}))}},n.prototype.getCurrentLocation=function(){var e=this.stack[this.stack.length-1];return e?e.fullPath:"/"},n.prototype.ensureURL=function(){},n}(lo),_o=function(e){void 0===e&&(e={}),this.app=null,this.apps=[],this.options=e,this.beforeHooks=[],this.resolveHooks=[],this.afterHooks=[],this.matcher=Aa(e.routes||[],this);var n=e.mode||"hash";switch(this.fallback="history"===n&&!Va&&!1!==e.fallback,this.fallback&&(n="hash"),Ca||(n="abstract"),this.mode=n,n){case"history":this.history=new ho(this,e.base);break;case"hash":this.history=new po(this,e.base,this.fallback);break;case"abstract":this.history=new bo(this,e.base);break;default:0}},xo={currentRoute:{configurable:!0}};function To(e,n){return e.push(n),function(){var t=e.indexOf(n);t>-1&&e.splice(t,1)}}_o.prototype.match=function(e,n,t){return this.matcher.match(e,n,t)},xo.currentRoute.get=function(){return this.history&&this.history.current},_o.prototype.init=function(e){var n=this;if(this.apps.push(e),e.$once("hook:destroyed",(function(){var t=n.apps.indexOf(e);t>-1&&n.apps.splice(t,1),n.app===e&&(n.app=n.apps[0]||null),n.app||n.history.teardown()})),!this.app){this.app=e;var t=this.history;if(t instanceof ho||t instanceof po){var r=function(e){t.setupListeners(),function(e){var r=t.current,i=n.options.scrollBehavior;Va&&i&&"fullPath"in e&&$a(n,e,r,!1)}(e)};t.transitionTo(t.getCurrentLocation(),r,r)}t.listen((function(e){n.apps.forEach((function(n){n._route=e}))}))}},_o.prototype.beforeEach=function(e){return To(this.beforeHooks,e)},_o.prototype.beforeResolve=function(e){return To(this.resolveHooks,e)},_o.prototype.afterEach=function(e){return To(this.afterHooks,e)},_o.prototype.onReady=function(e,n){this.history.onReady(e,n)},_o.prototype.onError=function(e){this.history.onError(e)},_o.prototype.push=function(e,n,t){var r=this;if(!n&&!t&&"undefined"!=typeof Promise)return new Promise((function(n,t){r.history.push(e,n,t)}));this.history.push(e,n,t)},_o.prototype.replace=function(e,n,t){var r=this;if(!n&&!t&&"undefined"!=typeof Promise)return new Promise((function(n,t){r.history.replace(e,n,t)}));this.history.replace(e,n,t)},_o.prototype.go=function(e){this.history.go(e)},_o.prototype.back=function(){this.go(-1)},_o.prototype.forward=function(){this.go(1)},_o.prototype.getMatchedComponents=function(e){var n=e?e.matched?e:this.resolve(e).route:this.currentRoute;return n?[].concat.apply([],n.matched.map((function(e){return Object.keys(e.components).map((function(n){return e.components[n]}))}))):[]},_o.prototype.resolve=function(e,n,t){var r=ba(e,n=n||this.history.current,t,this),i=this.match(r,n),a=i.redirectedFrom||i.fullPath;return{location:r,route:i,href:function(e,n,t){var r="hash"===t?"#"+n:n;return e?na(e+"/"+r):r}(this.history.base,a,this.mode),normalizedTo:r,resolved:i}},_o.prototype.getRoutes=function(){return this.matcher.getRoutes()},_o.prototype.addRoute=function(e,n){this.matcher.addRoute(e,n),this.history.current!==Vi&&this.history.transitionTo(this.history.getCurrentLocation())},_o.prototype.addRoutes=function(e){this.matcher.addRoutes(e),this.history.current!==Vi&&this.history.transitionTo(this.history.getCurrentLocation())},Object.defineProperties(_o.prototype,xo),_o.install=function e(n){if(!e.installed||_a!==n){e.installed=!0,_a=n;var t=function(e){return void 0!==e},r=function(e,n){var r=e.$options._parentVnode;t(r)&&t(r=r.data)&&t(r=r.registerRouteInstance)&&r(e,n)};n.mixin({beforeCreate:function(){t(this.$options.router)?(this._routerRoot=this,this._router=this.$options.router,this._router.init(this),n.util.defineReactive(this,"_route",this._router.history.current)):this._routerRoot=this.$parent&&this.$parent._routerRoot||this,r(this,this)},destroyed:function(){r(this)}}),Object.defineProperty(n.prototype,"$router",{get:function(){return this._routerRoot._router}}),Object.defineProperty(n.prototype,"$route",{get:function(){return this._routerRoot._route}}),n.component("RouterView",Qi),n.component("RouterLink",Ta);var i=n.config.optionMergeStrategies;i.beforeRouteEnter=i.beforeRouteLeave=i.beforeRouteUpdate=i.created}},_o.version="3.5.3",_o.isNavigationFailure=to,_o.NavigationFailureType=Ja,_o.START_LOCATION=Vi,Ca&&window.Vue&&window.Vue.use(_o);var ko=_o;t(203),t(149),t(227),t(113),t(229),t(114),t(115),t(230);function Co(e){e.locales&&Object.keys(e.locales).forEach((function(n){e.locales[n].path=n})),Object.freeze(e)}t(58),t(73),t(99);function Io(e){return(Io="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var zo=t(50),Ao=(t(158),t(29),t(82),t(205),t(206),{NotFound:function(){return t.e(6).then(t.bind(null,411))},Layout:function(){return Promise.all([t.e(0),t.e(2)]).then(t.bind(null,410))}}),So={"v-191607df":function(){return t.e(7).then(t.bind(null,414))},"v-3a585cdc":function(){return t.e(8).then(t.bind(null,415))},"v-2c027e9c":function(){return t.e(9).then(t.bind(null,416))},"v-50be0ffc":function(){return t.e(10).then(t.bind(null,417))},"v-6eb378b4":function(){return t.e(11).then(t.bind(null,418))},"v-5c8a7d76":function(){return t.e(12).then(t.bind(null,419))},"v-2223cd7c":function(){return t.e(13).then(t.bind(null,420))},"v-42ac7bf6":function(){return t.e(14).then(t.bind(null,421))},"v-9c16b5c8":function(){return t.e(15).then(t.bind(null,422))},"v-40e1b208":function(){return t.e(16).then(t.bind(null,423))},"v-0d29a8dc":function(){return t.e(17).then(t.bind(null,424))},"v-3ac42abc":function(){return t.e(18).then(t.bind(null,425))},"v-0374659c":function(){return t.e(19).then(t.bind(null,426))},"v-be96f388":function(){return t.e(20).then(t.bind(null,427))},"v-662c0cfc":function(){return t.e(21).then(t.bind(null,428))},"v-fa95bd84":function(){return t.e(22).then(t.bind(null,429))},"v-153367bc":function(){return t.e(23).then(t.bind(null,430))},"v-56d17308":function(){return t.e(24).then(t.bind(null,431))},"v-63bf3588":function(){return t.e(25).then(t.bind(null,432))},"v-1855e3a4":function(){return t.e(26).then(t.bind(null,433))},"v-7b174ab0":function(){return t.e(27).then(t.bind(null,434))},"v-93872304":function(){return t.e(28).then(t.bind(null,435))},"v-fa492d08":function(){return t.e(29).then(t.bind(null,436))},"v-b2808fb8":function(){return t.e(30).then(t.bind(null,437))},"v-6ff320c8":function(){return t.e(31).then(t.bind(null,438))},"v-ab312ec8":function(){return t.e(32).then(t.bind(null,439))},"v-b91d9d08":function(){return t.e(33).then(t.bind(null,440))},"v-52542808":function(){return t.e(34).then(t.bind(null,441))},"v-f8976a88":function(){return t.e(35).then(t.bind(null,442))},"v-a2cc2b88":function(){return t.e(36).then(t.bind(null,443))},"v-79e8da30":function(){return t.e(37).then(t.bind(null,444))},"v-6cb04d69":function(){return t.e(38).then(t.bind(null,445))},"v-793f1988":function(){return t.e(39).then(t.bind(null,446))},"v-0e4e8a08":function(){return t.e(40).then(t.bind(null,447))},"v-614ab2dc":function(){return t.e(41).then(t.bind(null,448))},"v-5866be48":function(){return t.e(42).then(t.bind(null,449))},"v-4782cd2c":function(){return t.e(43).then(t.bind(null,450))},"v-f2d7ce48":function(){return t.e(44).then(t.bind(null,451))},"v-158c9b2c":function(){return t.e(45).then(t.bind(null,452))},"v-2083487c":function(){return t.e(46).then(t.bind(null,453))},"v-dab714c8":function(){return t.e(47).then(t.bind(null,454))},"v-04c5a2bc":function(){return t.e(48).then(t.bind(null,455))},"v-76e6cfdc":function(){return t.e(49).then(t.bind(null,456))},"v-5f89e808":function(){return t.e(50).then(t.bind(null,457))},"v-f0f039c8":function(){return t.e(51).then(t.bind(null,458))},"v-597641dc":function(){return t.e(52).then(t.bind(null,459))},"v-160d9024":function(){return t.e(57).then(t.bind(null,460))},"v-f3511518":function(){return t.e(53).then(t.bind(null,461))},"v-2cb65f34":function(){return t.e(58).then(t.bind(null,462))},"v-313b9c48":function(){return t.e(56).then(t.bind(null,463))},"v-7a397374":function(){return t.e(59).then(t.bind(null,464))},"v-1b51365a":function(){return t.e(61).then(t.bind(null,465))},"v-374c71c8":function(){return t.e(60).then(t.bind(null,466))},"v-6408f788":function(){return t.e(62).then(t.bind(null,467))},"v-5ded71bc":function(){return t.e(63).then(t.bind(null,468))},"v-1cb3d19c":function(){return t.e(64).then(t.bind(null,469))},"v-0caea6c8":function(){return t.e(66).then(t.bind(null,470))},"v-7b84ce1c":function(){return t.e(65).then(t.bind(null,471))},"v-1367e85c":function(){return t.e(67).then(t.bind(null,472))},"v-2e6d9fa6":function(){return t.e(68).then(t.bind(null,473))},"v-738f7b1c":function(){return t.e(54).then(t.bind(null,474))},"v-36b6dd5c":function(){return t.e(55).then(t.bind(null,475))}};function Po(e){var n=Object.create(null);return function(t){return n[t]||(n[t]=e(t))}}var Eo=/-(\w)/g,Oo=Po((function(e){return e.replace(Eo,(function(e,n){return n?n.toUpperCase():""}))})),Uo=/\B([A-Z])/g,jo=Po((function(e){return e.replace(Uo,"-$1").toLowerCase()})),Lo=Po((function(e){return e.charAt(0).toUpperCase()+e.slice(1)}));function Ro(e,n){if(n)return e(n)?e(n):n.includes("-")?e(Lo(Oo(n))):e(Lo(n))||e(jo(n))}var $o=Object.assign({},Ao,So),Mo=function(e){return $o[e]},No=function(e){return So[e]},Fo=function(e){return Ao[e]},Do=function(e){return Ui.component(e)};function Ho(e){return Ro(No,e)}function qo(e){return Ro(Fo,e)}function Bo(e){return Ro(Mo,e)}function Go(e){return Ro(Do,e)}function Vo(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return Promise.all(n.filter((function(e){return e})).map(function(){var e=Object(r.a)(regeneratorRuntime.mark((function e(n){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Go(n)||!Bo(n)){e.next=5;break}return e.next=3,Bo(n)();case 3:t=e.sent,Ui.component(n,t.default);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()))}function Wo(e,n){"undefined"!=typeof window&&window.__VUEPRESS__&&(window.__VUEPRESS__[e]=n)}var Yo=t(110),Ko=(t(238),t(197),t(198),t(184)),Jo=t.n(Ko),Xo=t(185),Qo=t.n(Xo),Zo={created:function(){if(this.siteMeta=this.$site.headTags.filter((function(e){return"meta"===Object(Yo.a)(e,1)[0]})).map((function(e){var n=Object(Yo.a)(e,2);n[0];return n[1]})),this.$ssrContext){var e=this.getMergedMetaTags();this.$ssrContext.title=this.$title,this.$ssrContext.lang=this.$lang,this.$ssrContext.pageMeta=(n=e)?n.map((function(e){var n="<meta";return Object.keys(e).forEach((function(t){n+=" ".concat(t,'="').concat(Qo()(e[t]),'"')})),n+">"})).join("\n    "):"",this.$ssrContext.canonicalLink=ns(this.$canonicalUrl)}var n},mounted:function(){this.currentMetaTags=Object(zo.a)(document.querySelectorAll("meta")),this.updateMeta(),this.updateCanonicalLink()},methods:{updateMeta:function(){document.title=this.$title,document.documentElement.lang=this.$lang;var e=this.getMergedMetaTags();this.currentMetaTags=ts(e,this.currentMetaTags)},getMergedMetaTags:function(){var e=this.$page.frontmatter.meta||[];return Jo()([{name:"description",content:this.$description}],e,this.siteMeta,rs)},updateCanonicalLink:function(){es(),this.$canonicalUrl&&document.head.insertAdjacentHTML("beforeend",ns(this.$canonicalUrl))}},watch:{$page:function(){this.updateMeta(),this.updateCanonicalLink()}},beforeDestroy:function(){ts(null,this.currentMetaTags),es()}};function es(){var e=document.querySelector("link[rel='canonical']");e&&e.remove()}function ns(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e?'<link href="'.concat(e,'" rel="canonical" />'):""}function ts(e,n){if(n&&Object(zo.a)(n).filter((function(e){return e.parentNode===document.head})).forEach((function(e){return document.head.removeChild(e)})),e)return e.map((function(e){var n=document.createElement("meta");return Object.keys(e).forEach((function(t){n.setAttribute(t,e[t])})),document.head.appendChild(n),n}))}function rs(e){for(var n=0,t=["name","property","itemprop"];n<t.length;n++){var r=t[n];if(e.hasOwnProperty(r))return e[r]+r}return JSON.stringify(e)}t(112);var is=t(186),as={mounted:function(){window.addEventListener("scroll",this.onScroll)},methods:{onScroll:t.n(is)()((function(){this.setActiveHash()}),300),setActiveHash:function(){for(var e=this,n=[].slice.call(document.querySelectorAll(".sidebar-link")),t=[].slice.call(document.querySelectorAll(".header-anchor")).filter((function(e){return n.some((function(n){return n.hash===e.hash}))})),r=Math.max(window.pageYOffset,document.documentElement.scrollTop,document.body.scrollTop),i=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),a=window.innerHeight+r,o=0;o<t.length;o++){var s=t[o],l=t[o+1],c=0===o&&0===r||r>=s.parentElement.offsetTop+10&&(!l||r<l.parentElement.offsetTop-10),d=decodeURIComponent(this.$route.hash);if(c&&d!==decodeURIComponent(s.hash)){var u=s;if(a===i)for(var h=o+1;h<t.length;h++)if(d===decodeURIComponent(t[h].hash))return;return this.$vuepress.$set("disableScrollBehavior",!0),void this.$router.replace(decodeURIComponent(u.hash),(function(){e.$nextTick((function(){e.$vuepress.$set("disableScrollBehavior",!1)}))}))}}}},beforeDestroy:function(){window.removeEventListener("scroll",this.onScroll)}},os=(t(100),t(80)),ss=t.n(os),ls={mounted:function(){var e=this;ss.a.configure({showSpinner:!1}),this.$router.beforeEach((function(e,n,t){e.path===n.path||Ui.component(e.name)||ss.a.start(),t()})),this.$router.afterEach((function(){ss.a.done(),e.isSidebarOpen=!1}))}},cs=t(187),ds=t.n(cs),us=[Zo,as,ls,{mounted:function(){ds.a.polyfill()}}],hs={name:"GlobalLayout",computed:{layout:function(){var e=this.getLayout();return Wo("layout",e),Ui.component(e)}},methods:{getLayout:function(){if(this.$page.path){var e=this.$page.frontmatter.layout;return e&&(this.$vuepress.getLayoutAsyncComponent(e)||this.$vuepress.getVueComponent(e))?e:"Layout"}return"NotFound"}}},fs=t(52),ps=Object(fs.a)(hs,(function(){var e=this.$createElement;return(this._self._c||e)(this.layout,{tag:"component"})}),[],!1,null,null,null).exports;!function(e,n,t){var r;switch(n){case"components":e[n]||(e[n]={}),Object.assign(e[n],t);break;case"mixins":e[n]||(e[n]=[]),(r=e[n]).push.apply(r,Object(zo.a)(t));break;default:throw new Error("Unknown option name.")}}(ps,"mixins",us);var ms=[{name:"v-191607df",path:"/",component:ps,beforeEnter:function(e,n,t){Vo("Layout","v-191607df").then(t)}},{path:"/index.html",redirect:"/"},{name:"v-3a585cdc",path:"/advance/directive.html",component:ps,beforeEnter:function(e,n,t){Vo("Layout","v-3a585cdc").then(t)}},{name:"v-2c027e9c",path:"/advance/issue.html",component:ps,beforeEnter:function(e,n,t){Vo("Layout","v-2c027e9c").then(t)}},{name:"v-50be0ffc",path:"/advance/log.html",component:ps,beforeEnter:function(e,n,t){Vo("Layout","v-50be0ffc").then(t)}},{name:"v-6eb378b4",path:"/advance/priority.html",component:ps,beforeEnter:function(e,n,t){Vo("Layout","v-6eb378b4").then(t)}},{name:"v-5c8a7d76",path:"/advance/rule.html",component:ps,beforeEnter:function(e,n,t){Vo("Layout","v-5c8a7d76").then(t)}},{name:"v-2223cd7c",path:"/advance/upgrade.html",component:ps,beforeEnter:function(e,n,t){Vo("Layout","v-2223cd7c").then(t)}},{name:"v-42ac7bf6",path:"/advance/variable.html",component:ps,beforeEnter:function(e,n,t){Vo("Layout","v-42ac7bf6").then(t)}},{name:"v-9c16b5c8",path:"/changes/2_x_x.html",component:ps,beforeEnter:function(e,n,t){Vo("Layout","v-9c16b5c8").then(t)}},{name:"v-40e1b208",path:"/changes/3_x_x.html",component:ps,beforeEnter:function(e,n,t){Vo("Layout","v-40e1b208").then(t)}},{name:"v-0d29a8dc",path:"/changes/4_x_x.html",component:ps,beforeEnter:function(e,n,t){Vo("Layout","v-0d29a8dc").then(t)}},{name:"v-3ac42abc",path:"/changes/5_x_x.html",component:ps,beforeEnter:function(e,n,t){Vo("Layout","v-3ac42abc").then(t)}},{name:"v-0374659c",path:"/changes/6_0_x.html",component:ps,beforeEnter:function(e,n,t){Vo("Layout","v-0374659c").then(t)}},{name:"v-be96f388",path:"/changes/current.html",component:ps,beforeEnter:function(e,n,t){Vo("Layout","v-be96f388").then(t)}},{name:"v-662c0cfc",path:"/changes/lts.html",component:ps,beforeEnter:function(e,n,t){Vo("Layout","v-662c0cfc").then(t)}},{name:"v-fa95bd84",path:"/changes/overview.html",component:ps,beforeEnter:function(e,n,t){Vo("Layout","v-fa95bd84").then(t)}},{name:"v-153367bc",path:"/guide/compatibility.html",component:ps,beforeEnter:function(e,n,t){Vo("Layout","v-153367bc").then(t)}},{name:"v-56d17308",path:"/guide/configuration.html",component:ps,beforeEnter:function(e,n,t){Vo("Layout","v-56d17308").then(t)}},{name:"v-63bf3588",path:"/guide/faq.html",component:ps,beforeEnter:function(e,n,t){Vo("Layout","v-63bf3588").then(t)}},{name:"v-1855e3a4",path:"/guide/installation.html",component:ps,beforeEnter:function(e,n,t){Vo("Layout","v-1855e3a4").then(t)}},{name:"v-7b174ab0",path:"/guide/overview.html",component:ps,beforeEnter:function(e,n,t){Vo("Layout","v-7b174ab0").then(t)}},{name:"v-93872304",path:"/guide/test.html",component:ps,beforeEnter:function(e,n,t){Vo("Layout","v-93872304").then(t)}},{name:"v-fa492d08",path:"/guide/version.html",component:ps,beforeEnter:function(e,n,t){Vo("Layout","v-fa492d08").then(t)}},{name:"v-b2808fb8",path:"/practice/enable-captcha-when-blocking-requests.html",component:ps,beforeEnter:function(e,n,t){Vo("Layout","v-b2808fb8").then(t)}},{name:"v-6ff320c8",path:"/practice/enable-captcha.html",component:ps,beforeEnter:function(e,n,t){Vo("Layout","v-6ff320c8").then(t)}},{name:"v-ab312ec8",path:"/practice/enable-modsecurity.html",component:ps,beforeEnter:function(e,n,t){Vo("Layout","v-ab312ec8").then(t)}},{name:"v-b91d9d08",path:"/practice/limit-the-rate-per-arbitrary-url.html",component:ps,beforeEnter:function(e,n,t){Vo("Layout","v-b91d9d08").then(t)}},{name:"v-52542808",path:"/practice/overview.html",component:ps,beforeEnter:function(e,n,t){Vo("Layout","v-52542808").then(t)}},{name:"v-f8976a88",path:"/practice/protect-against-distributed-http-flood.html",component:ps,beforeEnter:function(e,n,t){Vo("Layout","v-f8976a88").then(t)}},{name:"v-a2cc2b88",path:"/practice/reduce-bandwidth-usage-when-attacked.html",component:ps,beforeEnter:function(e,n,t){Vo("Layout","v-a2cc2b88").then(t)}},{name:"v-79e8da30",path:"/roadmap/overview.html",component:ps,beforeEnter:function(e,n,t){Vo("Layout","v-79e8da30").then(t)}},{name:"v-6cb04d69",path:"/zh-cn/",component:ps,beforeEnter:function(e,n,t){Vo("Layout","v-6cb04d69").then(t)}},{path:"/zh-cn/index.html",redirect:"/zh-cn/"},{name:"v-793f1988",path:"/zh-cn/advance/directive.html",component:ps,beforeEnter:function(e,n,t){Vo("Layout","v-793f1988").then(t)}},{name:"v-0e4e8a08",path:"/zh-cn/advance/issue.html",component:ps,beforeEnter:function(e,n,t){Vo("Layout","v-0e4e8a08").then(t)}},{name:"v-614ab2dc",path:"/zh-cn/advance/log.html",component:ps,beforeEnter:function(e,n,t){Vo("Layout","v-614ab2dc").then(t)}},{name:"v-5866be48",path:"/zh-cn/advance/priority.html",component:ps,beforeEnter:function(e,n,t){Vo("Layout","v-5866be48").then(t)}},{name:"v-4782cd2c",path:"/zh-cn/advance/rule.html",component:ps,beforeEnter:function(e,n,t){Vo("Layout","v-4782cd2c").then(t)}},{name:"v-f2d7ce48",path:"/zh-cn/advance/upgrade.html",component:ps,beforeEnter:function(e,n,t){Vo("Layout","v-f2d7ce48").then(t)}},{name:"v-158c9b2c",path:"/zh-cn/advance/variable.html",component:ps,beforeEnter:function(e,n,t){Vo("Layout","v-158c9b2c").then(t)}},{name:"v-2083487c",path:"/zh-cn/changes/2_x_x.html",component:ps,beforeEnter:function(e,n,t){Vo("Layout","v-2083487c").then(t)}},{name:"v-dab714c8",path:"/zh-cn/changes/3_x_x.html",component:ps,beforeEnter:function(e,n,t){Vo("Layout","v-dab714c8").then(t)}},{name:"v-04c5a2bc",path:"/zh-cn/changes/4_x_x.html",component:ps,beforeEnter:function(e,n,t){Vo("Layout","v-04c5a2bc").then(t)}},{name:"v-76e6cfdc",path:"/zh-cn/changes/5_x_x.html",component:ps,beforeEnter:function(e,n,t){Vo("Layout","v-76e6cfdc").then(t)}},{name:"v-5f89e808",path:"/zh-cn/changes/6_0_x.html",component:ps,beforeEnter:function(e,n,t){Vo("Layout","v-5f89e808").then(t)}},{name:"v-f0f039c8",path:"/zh-cn/changes/current.html",component:ps,beforeEnter:function(e,n,t){Vo("Layout","v-f0f039c8").then(t)}},{name:"v-597641dc",path:"/zh-cn/changes/lts.html",component:ps,beforeEnter:function(e,n,t){Vo("Layout","v-597641dc").then(t)}},{name:"v-160d9024",path:"/zh-cn/guide/installation.html",component:ps,beforeEnter:function(e,n,t){Vo("Layout","v-160d9024").then(t)}},{name:"v-f3511518",path:"/zh-cn/changes/overview.html",component:ps,beforeEnter:function(e,n,t){Vo("Layout","v-f3511518").then(t)}},{name:"v-2cb65f34",path:"/zh-cn/guide/overview.html",component:ps,beforeEnter:function(e,n,t){Vo("Layout","v-2cb65f34").then(t)}},{name:"v-313b9c48",path:"/zh-cn/guide/faq.html",component:ps,beforeEnter:function(e,n,t){Vo("Layout","v-313b9c48").then(t)}},{name:"v-7a397374",path:"/zh-cn/guide/test.html",component:ps,beforeEnter:function(e,n,t){Vo("Layout","v-7a397374").then(t)}},{name:"v-1b51365a",path:"/zh-cn/practice/enable-captcha-when-blocking-requests.html",component:ps,beforeEnter:function(e,n,t){Vo("Layout","v-1b51365a").then(t)}},{name:"v-374c71c8",path:"/zh-cn/guide/version.html",component:ps,beforeEnter:function(e,n,t){Vo("Layout","v-374c71c8").then(t)}},{name:"v-6408f788",path:"/zh-cn/practice/enable-captcha.html",component:ps,beforeEnter:function(e,n,t){Vo("Layout","v-6408f788").then(t)}},{name:"v-5ded71bc",path:"/zh-cn/practice/enable-modsecurity.html",component:ps,beforeEnter:function(e,n,t){Vo("Layout","v-5ded71bc").then(t)}},{name:"v-1cb3d19c",path:"/zh-cn/practice/limit-the-rate-per-arbitrary-url.html",component:ps,beforeEnter:function(e,n,t){Vo("Layout","v-1cb3d19c").then(t)}},{name:"v-0caea6c8",path:"/zh-cn/practice/protect-against-distributed-http-flood.html",component:ps,beforeEnter:function(e,n,t){Vo("Layout","v-0caea6c8").then(t)}},{name:"v-7b84ce1c",path:"/zh-cn/practice/overview.html",component:ps,beforeEnter:function(e,n,t){Vo("Layout","v-7b84ce1c").then(t)}},{name:"v-1367e85c",path:"/zh-cn/practice/reduce-bandwidth-usage-when-attacked.html",component:ps,beforeEnter:function(e,n,t){Vo("Layout","v-1367e85c").then(t)}},{name:"v-2e6d9fa6",path:"/zh-cn/roadmap/overview.html",component:ps,beforeEnter:function(e,n,t){Vo("Layout","v-2e6d9fa6").then(t)}},{name:"v-738f7b1c",path:"/zh-cn/guide/compatibility.html",component:ps,beforeEnter:function(e,n,t){Vo("Layout","v-738f7b1c").then(t)}},{name:"v-36b6dd5c",path:"/zh-cn/guide/configuration.html",component:ps,beforeEnter:function(e,n,t){Vo("Layout","v-36b6dd5c").then(t)}},{path:"*",component:ps}],gs={title:"",description:"",base:"/ngx_waf-docs/",headTags:[["link",{rel:"icon",href:"https://cdn.jsdelivr.net/gh/ADD-SP/ngx_waf@master/assets/logo.png"}],["meta",{name:"robots",content:"noindex, nofollow, noarchive, nosnippet, noimageindex, noodp, notranslate, max-video-preview:-1"}]],pages:[{title:"Home",frontmatter:{home:!0,heroImage:"https://cdn.jsdelivr.net/gh/ADD-SP/ngx_waf@master/assets/logo.png",heroText:"ngx_waf",tagline:"Handy, High performance Nginx firewall module.",actionText:"Quick Start â",actionLink:"/guide/overview.html",features:[{title:"Basic protection",details:"Such as black and white list of IPs or IP range, uri black and white list, and request body black list, etc."},{title:"Easy",details:"Directives and rules are easy to write and readable."},{title:"Fast",details:"The IP detection is a constant-time operation. Most of the remaining inspections use caching to improve performance."},{title:"Advanced protection",details:"Compatible with ModSecurity's rules, you can use OWASP ModSecurity Core Rule Set."},{title:"Friendly crawler verification",details:"Supports verifying Google, Bing, Baidu and Yandex crawlers and allowing them automatically to avoid false positives."},{title:"Captcha",details:"Supports three kinds of captchas: hCaptcha, reCAPTCHAv2 and reCAPTCHAv3."}],footer:"BSD 3-Clause License | Copyright Â© 2020, ADD-SP"},regularPath:"/",relativePath:"README.md",key:"v-191607df",path:"/",lastUpdated:"1/10/2022, 3:38:27 PM",lastUpdatedTimestamp:1641829107e3,headersStr:null,content:"",normalizedContent:"",charsets:{}},{title:"Directive",frontmatter:{title:"Directive",lang:"en"},regularPath:"/advance/directive.html",relativePath:"advance/directive.md",key:"v-3a585cdc",path:"/advance/directive.html",headers:[{level:2,title:"waf",slug:"waf",normalizedTitle:"waf",charIndex:16},{level:2,title:"waf_zone",slug:"waf-zone",normalizedTitle:"waf_zone",charIndex:247},{level:2,title:"waf_rule_path",slug:"waf-rule-path",normalizedTitle:"waf_rule_path",charIndex:1109},{level:2,title:"waf_mode",slug:"waf-mode",normalizedTitle:"waf_mode",charIndex:1297},{level:2,title:"waf_cc_deny",slug:"waf-cc-deny",normalizedTitle:"waf_cc_deny",charIndex:561},{level:2,title:"waf_cache",slug:"waf-cache",normalizedTitle:"waf_cache",charIndex:3645},{level:2,title:"waf_modsecurity",slug:"waf-modsecurity",normalizedTitle:"waf_modsecurity",charIndex:7422},{level:2,title:"waf_modsecurity_transaction_id",slug:"waf-modsecurity-transaction-id",normalizedTitle:"waf_modsecurity_transaction_id",charIndex:8918},{level:2,title:"waf_captcha",slug:"waf-captcha",normalizedTitle:"waf_captcha",charIndex:9403},{level:2,title:"waf_verify_bot",slug:"waf-verify-bot",normalizedTitle:"waf_verify_bot",charIndex:12074},{level:2,title:"waf_under_attack",slug:"waf-under-attack",normalizedTitle:"waf_under_attack",charIndex:13040},{level:2,title:"waf_priority",slug:"waf-priority",normalizedTitle:"waf_priority",charIndex:14940},{level:2,title:"waf_http_status",slug:"waf-http-status",normalizedTitle:"waf_http_status",charIndex:16130},{level:2,title:"waf_action",slug:"waf-action",normalizedTitle:"waf_action",charIndex:16721},{level:2,title:"waf_block_page",slug:"waf-block-page",normalizedTitle:"waf_block_page",charIndex:17612}],lastUpdated:"1/10/2022, 3:38:27 PM",lastUpdatedTimestamp:1641829107e3,headersStr:"waf waf_zone waf_rule_path waf_mode waf_cc_deny waf_cache waf_modsecurity waf_modsecurity_transaction_id waf_captcha waf_verify_bot waf_under_attack waf_priority waf_http_status waf_action waf_block_page",content:"# Directive\n\n\n# waf\n\n * syntax: waf <on | off | bypass >\n * default: waf off\n * context: http, server, location\n\nenable, disable or bypass.\n\n * on: enable\n * off: disable\n * bypass: only inspect and record logs, without blocking any requests.\n\n\n# waf_zone\n\n * syntax: waf_zone <name=zone_name> [size=5m]\n * default: â\n * context: http\n\nCreates a piece of shared memory to record some information that needs to be shared across processes because of nginx's multi-process model.\n\nYou may need to fill in the parameter zone when you use certain directive, such as waf_cc_deny. The fill format is name:tag, i.e. name and tag. Name and tag are \"many-to-many\", but for the same zone, the tag names cannot be repeated for the same zone.\n\nAll tags within the same zone share the entire shared memory of that zone. For performance reasons, it is recommended that one zone be created for each server context. It is better not to have multiple server context sharing a single zone, because accessing shared memory requires locking, so minimize the number of locking.\n\nTIP\n\n1MB of memory can record at least 4096 IP.\n\n\n# waf_rule_path\n\n * syntax: waf_rule_path <dir>\n * default: â\n * context: http, server, location\n\nThe absolute path to the directory where the rule file is located, and must end with /.\n\n\n# waf_mode\n\n * syntax: waf_mode <mode_type> ...\n * default: â\n * context: http, server, location\n\nSpecify the working mode of the firewall, specifying at least one mode and up to eight modes.\n\nmode_type has the following values (not case sensitive):\n\n * GET: Start the inspection process when Http.Method=GET.\n * HEAD: Start the inspection process when Http.Method=HEAD.\n * POST: Start the inspection process when Http.Method=POST.\n * PUT: Start the inspection process when Http.Method=PUT.\n * DELETE: Start the inspection process when Http.Method=DELETE.\n * MKCOL: Start the check process when Http.Method=MKCOL.\n * COPY: Start the inspection process when Http.Method=COPY.\n * MOVE: Start the inspection process when Http.Method=MOVE.\n * OPTIONS: Start the inspection process when Http.Method=OPTIONS.\n * PROPFIN: Start the inspection process when Http.Method=PROPFIN.\n * PROPPATCH: Start the inspection process when Http.Method=PROPPATCH.\n * LOCK: Start the inspection process when Http.Method=LOCK.\n * UNLOCK: Start the inspection process when Http.Method=UNLOCK.\n * PATCH: Start the inspection process when Http.Method=PATCH.\n * TRAC: Start the inspection process when Http.Method=TRAC.\n * CMN-METH: Equivalent to HEAD GET POST.\n * ALL-METH: Any HTTP request method will start the inspection process.\n * IP: Enable IP address inspecting rules.\n * URL: Enable URL inspecting rules.\n * RBODY: Enable POST request body inspecting rules.\n * ARGS: Enable ARGS inspecting rules.\n * UA: Enable UA inspecting rules.\n * COOKIE: Enable COOKIE inspecting rules.\n * REFERER: Enable REFERER inspecting rules.\n * CC: Enable 'Anti Challenge Collapsar'. When you enable this mode, you must set waf_cc_deny.\n * ADV: Enable the advanced rules.\n * LIB-INJECTION-SQLI: Use libinjection to detect SQL injection.\n * LIB-INJECTION-XSS: Use libinjection to detect XSS attacks.\n * LIB-INJECTION: Equivalent to LIB-INJECTION-SQLI LIB-INJECTION-XSS.\n * CACHE: Enable caching. Enabling this mode will cache the result of the inspection, so that the next time the same target is inspected, there is no need to repeat the inspection. However, the results of the POST body inspection are not cached. For example, if a URL is not in the blacklist after inspection, the next time the same URL is inspected, the cache can be read directly. When you enable this mode, you must set waf_cache.\n * STD: Standard working mode, equivalent to HEAD GET POST IP URL RBODY ARGS UA CC CACHE LIB-INJECTION-SQLI.\n * STATIC: working mode for static sites, equivalent to HEAD GET IP URL UA CC CACHE.\n * DYNAMIC: working mode for dynamic sites, equivalent to HEAD GET POST IP URL ARGS UA RBODY COOKIE CC CACHE LIB-INJECTION-SQLI.\n * FULL: Enable all modes.\n * [DATA EXPUNGED]: This mode [DATA EXPUNGED].\n\nYou can turn off a mode by prefixing mode_type with the prefix ! to turn off a mode. The following is an example of using the standard working mode, but without inspecting the User-Agent.\n\nwaf_mode STD !UA;\n\n\nNOTE\n\nIf two or more conflicting modes are enabled at the same time, the mode to the right will override the mode to its left. The following example means inspecting the User-Agent.\n\nwaf_mode !UA STD;\n\n\nNOTE\n\nThe mode of CC is independent of other modes, and whether it takes effect or not is not affected by other modes. A typical situation such as the URL mode will be affected by the GET mode, because if the GET mode is not used, the check will not be started when Http.Method=GET, and the URL will naturally not be inspected, but CC mode will not be similarly affected.\n\nCHANGES IN LATEST 'Current' VERSION\n\nThe parameters CC and CACHE are removed.\n\n * STD: Standard working mode, equivalent to HEAD GET POST IP URL RBODY ARGS UA.\n * STATIC: working mode for static sites, equivalent to HEAD GET IP URL UA.\n * DYNAMIC: working mode for dynamic sites, equivalent to HEAD GET POST IP URL ARGS UA RBODY COOKIE.\n * LIB-INJECTION: Removed.\n * LIB-INJECTION-SQLI: Removed.\n * LIB-INJECTION-XSS: Removed.\n * ADV: Removed.\n\n\n# waf_cc_deny\n\n * syntax: waf_cc_deny <rate=nr/m> [duration=1h] [size=20m]\n * default: â\n * context: http, server, location\n\nSet the parameters related to CC protection.\n\n * rate: Indicates the upper limit of the number of requests over a period of time, such as 500r/m. Exceeding the limit returns a 503 status code with a Retry-After response header.\n * duration: Indicates the time to block IP after exceeding the limit of the first parameter rate, such as 60s, 60m, 60h and 60d, if not specified, the default is 1h.\n * size: Used to set the size of the memory for recording IP accesses, such as 20m, 2048k, must not be less than 20m, if not specified, the default is 20m. When this memory is exhausted, the program will clean up some of the records according to the LRU policy.\n\nCHANGES IN LATEST 'Current' VERSION\n\n * syntax: waf_cc_deny <off | on> <rate=nr/t> <zone=name:tag> [duration=1h]\n * default: waf_cc_deny off\n * context: server, location\n\n----------------------------------------\n\n * zone: Set the shared memory used to record the necessary information.\n * rate: indicates the upper rate of requests, such as 500r/s, 500r/60s, 500r/m, 500r/60m, 500r/h, 500r/60h and 500r/d. Exceeding the limit returns a 503 status code with a Retry-After response header.\n\n\n# waf_cache\n\n * syntax: waf_cache <capacity=n>\n * default: â\n * context: http, server, location\n\nSet the parameters related to cache rule inspection results.\n\n * capacity: For some inspection items with caching mechanism enabled, the maximum number of inspection results per inspection item to be cached for each inspection target.\n\nCache-enabled inspections\n\nCache-enabled inspections refer to all inspections except CC protection, I P black and white list inspection, and POST inspection.\n\nPerformance optimization suggestions\n\nToo small a capacity will result in frequent cache cleanups, increasing memory fragmentation and reducing performance. So please set it reasonably according to your actual needs.\n\nCHANGES IN LATEST 'Current' VERSION\n\n * syntax: waf_cache <off | on> [capacity=50]\n * default: waf_cache off capacity=50\n * context: server, location\n\n\n# waf_modsecurity\n\n * syntax: waf_modsecurity <on | off> <file=*/path/to/modsecuriy/rules.conf*> <remote_key=key> <remote_url=url>\n * default: waf_modsecurity off\n * context: http, server, location\n\nUse ModSecurity's rules.\n\n * file: absolute path to the rule file.\n * remote_key: key for reading remote rule file.\n * remote_url: URL to read the remote file.\n\nYou can refer to the use case in Enable ModSecurity | Best Practices.\n\nNote\n\n * If you use the parameter remote_key, you must also use the parameter remote_url.\n * If you use the parameters file, remote_key and remote_url at the same time, then both rules will be loaded.\n\nMEMORY LEAKS\n\nMemory leaks can cause the system to have less and less memory available, degrade performance, and possibly cause programs or systems to crash.\n\nThe latest version v3.0.5 of ModSecurity has a memory leak bug.\n\n * ngin reload memory leak - Issue #2552 - SpiderLabs/ModSecurity\n * It often leads memory leak on nginx reload - Issue #2502 - SpiderLabs/ModSecurity\n\nIf you have ModSecurity enabled, memory leaks can occur when reloading nginx, which can have serious consequences in the long run.\n\nWe strongly recommend that you avoid using commands like the following.\n\nnginx -s reload\nsystemctl restart nginx\nservice nginx restart\n\n\nWhen you need to reload nginx, it is highly recommended to shut down nginx first and then start nginx.\n\nnginx -s stop && nginx\nsystemctl stop nginx && systemctl start nginx\nservice nginx stop && serivce nginx start\n\n\n\n# waf_modsecurity_transaction_id\n\n * Configuration syntax: waf_modsecurity_transaction_id <string>\n * Default configuration: waf_modsecurity off\n * Configuration segments: http, server, location\n\nSpecify the transaction ID for ModSecurity. you can use constant strings and variables here, here is an example.\n\nserver {\n    location /file/ {\n        waf_modsecurity_transaction_id \"$host-file\";\n    }\n\n    location /api/ {\n        waf_modsecurity_transaction_id \"$host-api\";\n    }\n}\n\n\n\n# waf_captcha\n\n * syntax: waf_captcha <on | off> <prov=hCaptcha | reCAPTCHAv2:checkbox | reCAPTCHAv2:invisible | reCAPTCHAv3> [file=/full/path] [sitekey=your_sitekey] <secret=your_secret> [score=0.5] [expire=30m] [api=uri] [verify=/captcha] [max_fails=times:duration] [zone=name:tag]\n * default: waf_captcha off\n * context: http, server, location\n\nUse CAPTCHA for human identification of the client.\n\n * prov: CAPTCHA platform with hCaptcha, reCAPTCHAv2 and reCAPTCHAv3.\n * file: The absolute path to the HTML file used to access the captcha, you can find the corresponding HTML file under assets/ and fill in your sitekey in the file. If you omit this parameter, a built-in HTML file (from the directory assets/) will be selected and used based on the value of the parameter prov, where you need to set the parameter sitekey.\n * sitekey: the sitekey you get from the captcha platform, this parameter needs to be set if and only if the parameter file is omitted.\n * secret: the key used to confirm the result of the CAPTCHA, you can get it from the corresponding CAPTCHA platform.\n * socre: when prov=reCAPTCHAv3, this indicates the minimum value of the CAPTCHA scoring result, below which the validation will be considered as failed. The default value is 0.5.\n * expire: the expiration time of the CAPTCHA, after which the CAPTCHA needs to be re-run. The default is 30 minutes.\n * api: The API provided by the CAPTCHA platform to the server to confirm the result of the CAPTCHA run.\n   * If prov=hCaptcha, the default value is https://hcaptcha.com/siteverify.\n   * If prov=reCAPTCHAv2:xxx, then the default value is https://www.recaptcha.net/recaptcha/api/siteverify.\n   * If prov=reCAPTCHAv3, the default value is https://www.recaptcha.net/recaptcha/api/siteverify.\n * verify: the url used by the captcha to submit the token to the backend, defaults to /captcha.\n * max_fails: The maximum number of times the CAPTCHA can be refreshed/tried, beyond which the corresponding IP is blacked out for a period of time. For example, max_fails=20:5m means that the IP will be blacked out for 5 minutes after 20 consecutive refreshes/tries. This is useful when you are using billing CAPTCHA. When you set this parameter, you must also set the parameter zone.\n * zone: Set the shared memory used to record the number of CAPTCHA tries, this parameter is required if and only if parameter max_fails is set.\n\nYou can refer to the use case in Enable Captcha | Best Practices.\n\nUse your own CAPTCHA page\n\nYou can customize the captcha page based on the HTML file under the directory assets/ and load it with the parameter file.\n\nDon't forget to fill in the sitekey in the HTML file.\n\n\n# waf_verify_bot\n\n * syntax: waf_verify_bot <off | on | strict> [who] ...\n * default: waf_verify_bot off GoogleBot BingBot BaiduSpider YandexBot SogouSpider\n * context: http, server, location\n\nVerify friendly crawlers, such as GoogleBot.\n\nIf the first parameter is on then all subsequent checks will be stopped and the request will be released.\n\nIf the first parameter is strict, then if the User-Agent of a request is correct, but the IP address is incorrect, it will be blocked (with false positives).\n\n * who: the name of the crawler, values include GoogleBot, BingBot, BaiduSpider, YandexBot and SogouSpider. If not specified, the default is all.\n\nHOW IT WORKS?\n\n * Overview of Google crawlers (user agents) | Search Central\n * Googlebot Verification | Google Search Central | Google Developers\n * Which Crawlers Does Bing Use? - Bing Webmaster Tools\n * How to Verify Bingbot\n * ç¾åº¦ç¨æ·æå¡ä¸­å¿-ç«é¿å¹³å°\n * How to check that a robot belongs to Yandex\n * æçèµæºå¹³å°_å¬å¹³å¼æ¾çäº¤æµå¹³å°\n\n\n# waf_under_attack\n\n * syntax: waf_under_attack <on | off> [uri=str]\n * default: waf_under_attack off\n * context: http, server, location\n\nIf your site is under attack you can try using this directive. Turning it on forces a five-second delay on each user's first visit and automatically jumps to the page pointed to by uri.\n\n * uri: can be a full URL or a path. For example, https://example.com/attack.html or /attack.html.\n\nYou can refer to the use case in protect against distributed CC Attacks (distributed HTTP flooding) | Best Practices.\n\nTips\n\nThe page pointed to by uri should automatically jump to the page the user wants to visit after five seconds, the URL of the page can be obtained by querying a string with the parameter target.\n\nassets/under-attack.html is a sample page, you should copy this file to your web directory and configure uri correctly.\n\nNaturally, you can also write your own html file and point to it with uri.\n\nCHANGES IN LATEST 'Current' VERSION\n\nIn the LTS version we implemented this feature through redirects, but many reasons (such as caching and CDN) would cause the redirects to fail or not validate the cookie properly. So we changed the implementation so that we return the specified page by changing the response body in a way that does not cause the URI to change.\n\nWe also added the response header Cache-Control: no-store to avoid the impact of caching.\n\n * synyax: waf_under_attack <on | off> [file=full_path]\n\n * default: waf_under_attack off\n\n * context: http, server, location\n\n * Removed the parameter uri.\n\n * Added parameter file, the value of this parameter should be the absolute path to an HTML file, e.g. file=/path/to/under-attack.html. This HTML has only one function, which is to refresh automatically after five seconds. When you omit this parameter, the default is to use the built-in HTML file, which comes from assets/under-attack.html.\n\n\n# waf_priority\n\n * syntax: waf_priority \"str\"\n * default: waf_priority \"W-IP IP CC UNDER-ATTACK W-URL URL ARGS UA W-REFERER REFERER COOKIE ADV\"\n * context: http, server, location\n\nSet the priority of each inspection process, except for POST detection, which always has the lowest priority.\n\n * UNDER-ATTACK: Directive waf_under_attack.\n * W-IP: IP whitelist inspection\n * IP: IP Blacklist inspection\n * CC: CC protection\n * W-URL: URL whitelist inspection\n * URL: URL blacklist inspection\n * ARGS: URL parameter (query string) blacklist inspection\n * UA: User-Agent blacklist inspection\n * W-REFERER: Referer whitelist inspection\n * REFERER: Referer blacklist inspection\n * COOKIE: Cookie blacklist inspection\n * ADV: Advanced rules.\n\nWARNING\n\nstr must be wrapped in single or double quotes, and str must contain all of the inspection process.\n\nCHANGES IN LATEST 'Current' VERSION\n\n * default: waf_priority \"W-IP IP VERIFY-BOT CC CAPTCHA UNDER-ATTACK W-URL URL ARGS UA W-REFERER REFERER COOKIE POST MODSECURITY\"\n\n----------------------------------------\n\n * VERIFY-BOT: friendly crawler verification.\n * CAPTCHA: Captcha.\n * POST: Request body blacklist.\n * ModSecurity.\n * ADV: Removed.\n\n\n# waf_http_status\n\n * syntax: waf_http_status [general=http_status_code] [cc_deny=http_status_code]\n * default: waf_http_status general=403 cc_deny=503\n * context: http, server, location\n\nThis directive is used to set the HTTP status code returned when a request is blocked.\n\n * general: Indicates the HTTP status code returned when all blacklist-based inpection are triggered.\n * cc_deny: Indicates the HTTP status code returned when CC protection is triggered.\n\nCHANGES IN LATEST 'Current' VERSION\n\nThis directive has been removed from v10.0.0 and the associated features moved to directive waf_action.\n\n\n# waf_action\n\n * syntax: waf_action [blacklist=action] [cc_deny=action] [modsecurity=action] [verify_bot=action] [zone=name:tag]\n * default: waf_action blacklist=403 cc_deny=503 modsecurity=follow verify_bot=403\n * context: http, server, location\n\nThis directive is used to set the action to be taken when blocking a request. action indicates a specific action and can be the following values.\n\n * 4xx | 5xxï¼HTTP response code.\n * CAPTCHAï¼Use the CAPTCHA to challenge.\n * followï¼Follow the action of Modsecurity's rule, only for parameter modsecurity.\n\nparameters:\n\n * blacklist: All blacklist-based rules, such as IP blacklist, User-Agent blacklist, URL blacklist, etc.\n * cc_deny: CC protection.\n * modsecurityï¼ModSecurity's rules.\n * verify_botï¼waf_verify_bot.\n * zoneï¼Set the shared memory used to record the necessary information, if and only if an action is CAPTCHA.\n\n\n# waf_block_page\n\n * syntax: waf_block_page < default | path/to/file.html >\n * default: ââ\n * context: http, server, location\n\nUsed to set the page returned when a request is blocked, default is a built-in HTML file from assets/block.html, [DATA EXPUNGED] is [DATA EXPUNGED].",normalizedContent:"# directive\n\n\n# waf\n\n * syntax: waf <on | off | bypass >\n * default: waf off\n * context: http, server, location\n\nenable, disable or bypass.\n\n * on: enable\n * off: disable\n * bypass: only inspect and record logs, without blocking any requests.\n\n\n# waf_zone\n\n * syntax: waf_zone <name=zone_name> [size=5m]\n * default: â\n * context: http\n\ncreates a piece of shared memory to record some information that needs to be shared across processes because of nginx's multi-process model.\n\nyou may need to fill in the parameter zone when you use certain directive, such as waf_cc_deny. the fill format is name:tag, i.e. name and tag. name and tag are \"many-to-many\", but for the same zone, the tag names cannot be repeated for the same zone.\n\nall tags within the same zone share the entire shared memory of that zone. for performance reasons, it is recommended that one zone be created for each server context. it is better not to have multiple server context sharing a single zone, because accessing shared memory requires locking, so minimize the number of locking.\n\ntip\n\n1mb of memory can record at least 4096 ip.\n\n\n# waf_rule_path\n\n * syntax: waf_rule_path <dir>\n * default: â\n * context: http, server, location\n\nthe absolute path to the directory where the rule file is located, and must end with /.\n\n\n# waf_mode\n\n * syntax: waf_mode <mode_type> ...\n * default: â\n * context: http, server, location\n\nspecify the working mode of the firewall, specifying at least one mode and up to eight modes.\n\nmode_type has the following values (not case sensitive):\n\n * get: start the inspection process when http.method=get.\n * head: start the inspection process when http.method=head.\n * post: start the inspection process when http.method=post.\n * put: start the inspection process when http.method=put.\n * delete: start the inspection process when http.method=delete.\n * mkcol: start the check process when http.method=mkcol.\n * copy: start the inspection process when http.method=copy.\n * move: start the inspection process when http.method=move.\n * options: start the inspection process when http.method=options.\n * propfin: start the inspection process when http.method=propfin.\n * proppatch: start the inspection process when http.method=proppatch.\n * lock: start the inspection process when http.method=lock.\n * unlock: start the inspection process when http.method=unlock.\n * patch: start the inspection process when http.method=patch.\n * trac: start the inspection process when http.method=trac.\n * cmn-meth: equivalent to head get post.\n * all-meth: any http request method will start the inspection process.\n * ip: enable ip address inspecting rules.\n * url: enable url inspecting rules.\n * rbody: enable post request body inspecting rules.\n * args: enable args inspecting rules.\n * ua: enable ua inspecting rules.\n * cookie: enable cookie inspecting rules.\n * referer: enable referer inspecting rules.\n * cc: enable 'anti challenge collapsar'. when you enable this mode, you must set waf_cc_deny.\n * adv: enable the advanced rules.\n * lib-injection-sqli: use libinjection to detect sql injection.\n * lib-injection-xss: use libinjection to detect xss attacks.\n * lib-injection: equivalent to lib-injection-sqli lib-injection-xss.\n * cache: enable caching. enabling this mode will cache the result of the inspection, so that the next time the same target is inspected, there is no need to repeat the inspection. however, the results of the post body inspection are not cached. for example, if a url is not in the blacklist after inspection, the next time the same url is inspected, the cache can be read directly. when you enable this mode, you must set waf_cache.\n * std: standard working mode, equivalent to head get post ip url rbody args ua cc cache lib-injection-sqli.\n * static: working mode for static sites, equivalent to head get ip url ua cc cache.\n * dynamic: working mode for dynamic sites, equivalent to head get post ip url args ua rbody cookie cc cache lib-injection-sqli.\n * full: enable all modes.\n * [data expunged]: this mode [data expunged].\n\nyou can turn off a mode by prefixing mode_type with the prefix ! to turn off a mode. the following is an example of using the standard working mode, but without inspecting the user-agent.\n\nwaf_mode std !ua;\n\n\nnote\n\nif two or more conflicting modes are enabled at the same time, the mode to the right will override the mode to its left. the following example means inspecting the user-agent.\n\nwaf_mode !ua std;\n\n\nnote\n\nthe mode of cc is independent of other modes, and whether it takes effect or not is not affected by other modes. a typical situation such as the url mode will be affected by the get mode, because if the get mode is not used, the check will not be started when http.method=get, and the url will naturally not be inspected, but cc mode will not be similarly affected.\n\nchanges in latest 'current' version\n\nthe parameters cc and cache are removed.\n\n * std: standard working mode, equivalent to head get post ip url rbody args ua.\n * static: working mode for static sites, equivalent to head get ip url ua.\n * dynamic: working mode for dynamic sites, equivalent to head get post ip url args ua rbody cookie.\n * lib-injection: removed.\n * lib-injection-sqli: removed.\n * lib-injection-xss: removed.\n * adv: removed.\n\n\n# waf_cc_deny\n\n * syntax: waf_cc_deny <rate=nr/m> [duration=1h] [size=20m]\n * default: â\n * context: http, server, location\n\nset the parameters related to cc protection.\n\n * rate: indicates the upper limit of the number of requests over a period of time, such as 500r/m. exceeding the limit returns a 503 status code with a retry-after response header.\n * duration: indicates the time to block ip after exceeding the limit of the first parameter rate, such as 60s, 60m, 60h and 60d, if not specified, the default is 1h.\n * size: used to set the size of the memory for recording ip accesses, such as 20m, 2048k, must not be less than 20m, if not specified, the default is 20m. when this memory is exhausted, the program will clean up some of the records according to the lru policy.\n\nchanges in latest 'current' version\n\n * syntax: waf_cc_deny <off | on> <rate=nr/t> <zone=name:tag> [duration=1h]\n * default: waf_cc_deny off\n * context: server, location\n\n----------------------------------------\n\n * zone: set the shared memory used to record the necessary information.\n * rate: indicates the upper rate of requests, such as 500r/s, 500r/60s, 500r/m, 500r/60m, 500r/h, 500r/60h and 500r/d. exceeding the limit returns a 503 status code with a retry-after response header.\n\n\n# waf_cache\n\n * syntax: waf_cache <capacity=n>\n * default: â\n * context: http, server, location\n\nset the parameters related to cache rule inspection results.\n\n * capacity: for some inspection items with caching mechanism enabled, the maximum number of inspection results per inspection item to be cached for each inspection target.\n\ncache-enabled inspections\n\ncache-enabled inspections refer to all inspections except cc protection, i p black and white list inspection, and post inspection.\n\nperformance optimization suggestions\n\ntoo small a capacity will result in frequent cache cleanups, increasing memory fragmentation and reducing performance. so please set it reasonably according to your actual needs.\n\nchanges in latest 'current' version\n\n * syntax: waf_cache <off | on> [capacity=50]\n * default: waf_cache off capacity=50\n * context: server, location\n\n\n# waf_modsecurity\n\n * syntax: waf_modsecurity <on | off> <file=*/path/to/modsecuriy/rules.conf*> <remote_key=key> <remote_url=url>\n * default: waf_modsecurity off\n * context: http, server, location\n\nuse modsecurity's rules.\n\n * file: absolute path to the rule file.\n * remote_key: key for reading remote rule file.\n * remote_url: url to read the remote file.\n\nyou can refer to the use case in enable modsecurity | best practices.\n\nnote\n\n * if you use the parameter remote_key, you must also use the parameter remote_url.\n * if you use the parameters file, remote_key and remote_url at the same time, then both rules will be loaded.\n\nmemory leaks\n\nmemory leaks can cause the system to have less and less memory available, degrade performance, and possibly cause programs or systems to crash.\n\nthe latest version v3.0.5 of modsecurity has a memory leak bug.\n\n * ngin reload memory leak - issue #2552 - spiderlabs/modsecurity\n * it often leads memory leak on nginx reload - issue #2502 - spiderlabs/modsecurity\n\nif you have modsecurity enabled, memory leaks can occur when reloading nginx, which can have serious consequences in the long run.\n\nwe strongly recommend that you avoid using commands like the following.\n\nnginx -s reload\nsystemctl restart nginx\nservice nginx restart\n\n\nwhen you need to reload nginx, it is highly recommended to shut down nginx first and then start nginx.\n\nnginx -s stop && nginx\nsystemctl stop nginx && systemctl start nginx\nservice nginx stop && serivce nginx start\n\n\n\n# waf_modsecurity_transaction_id\n\n * configuration syntax: waf_modsecurity_transaction_id <string>\n * default configuration: waf_modsecurity off\n * configuration segments: http, server, location\n\nspecify the transaction id for modsecurity. you can use constant strings and variables here, here is an example.\n\nserver {\n    location /file/ {\n        waf_modsecurity_transaction_id \"$host-file\";\n    }\n\n    location /api/ {\n        waf_modsecurity_transaction_id \"$host-api\";\n    }\n}\n\n\n\n# waf_captcha\n\n * syntax: waf_captcha <on | off> <prov=hcaptcha | recaptchav2:checkbox | recaptchav2:invisible | recaptchav3> [file=/full/path] [sitekey=your_sitekey] <secret=your_secret> [score=0.5] [expire=30m] [api=uri] [verify=/captcha] [max_fails=times:duration] [zone=name:tag]\n * default: waf_captcha off\n * context: http, server, location\n\nuse captcha for human identification of the client.\n\n * prov: captcha platform with hcaptcha, recaptchav2 and recaptchav3.\n * file: the absolute path to the html file used to access the captcha, you can find the corresponding html file under assets/ and fill in your sitekey in the file. if you omit this parameter, a built-in html file (from the directory assets/) will be selected and used based on the value of the parameter prov, where you need to set the parameter sitekey.\n * sitekey: the sitekey you get from the captcha platform, this parameter needs to be set if and only if the parameter file is omitted.\n * secret: the key used to confirm the result of the captcha, you can get it from the corresponding captcha platform.\n * socre: when prov=recaptchav3, this indicates the minimum value of the captcha scoring result, below which the validation will be considered as failed. the default value is 0.5.\n * expire: the expiration time of the captcha, after which the captcha needs to be re-run. the default is 30 minutes.\n * api: the api provided by the captcha platform to the server to confirm the result of the captcha run.\n   * if prov=hcaptcha, the default value is https://hcaptcha.com/siteverify.\n   * if prov=recaptchav2:xxx, then the default value is https://www.recaptcha.net/recaptcha/api/siteverify.\n   * if prov=recaptchav3, the default value is https://www.recaptcha.net/recaptcha/api/siteverify.\n * verify: the url used by the captcha to submit the token to the backend, defaults to /captcha.\n * max_fails: the maximum number of times the captcha can be refreshed/tried, beyond which the corresponding ip is blacked out for a period of time. for example, max_fails=20:5m means that the ip will be blacked out for 5 minutes after 20 consecutive refreshes/tries. this is useful when you are using billing captcha. when you set this parameter, you must also set the parameter zone.\n * zone: set the shared memory used to record the number of captcha tries, this parameter is required if and only if parameter max_fails is set.\n\nyou can refer to the use case in enable captcha | best practices.\n\nuse your own captcha page\n\nyou can customize the captcha page based on the html file under the directory assets/ and load it with the parameter file.\n\ndon't forget to fill in the sitekey in the html file.\n\n\n# waf_verify_bot\n\n * syntax: waf_verify_bot <off | on | strict> [who] ...\n * default: waf_verify_bot off googlebot bingbot baiduspider yandexbot sogouspider\n * context: http, server, location\n\nverify friendly crawlers, such as googlebot.\n\nif the first parameter is on then all subsequent checks will be stopped and the request will be released.\n\nif the first parameter is strict, then if the user-agent of a request is correct, but the ip address is incorrect, it will be blocked (with false positives).\n\n * who: the name of the crawler, values include googlebot, bingbot, baiduspider, yandexbot and sogouspider. if not specified, the default is all.\n\nhow it works?\n\n * overview of google crawlers (user agents) | search central\n * googlebot verification | google search central | google developers\n * which crawlers does bing use? - bing webmaster tools\n * how to verify bingbot\n * ç¾åº¦ç¨æ·æå¡ä¸­å¿-ç«é¿å¹³å°\n * how to check that a robot belongs to yandex\n * æçèµæºå¹³å°_å¬å¹³å¼æ¾çäº¤æµå¹³å°\n\n\n# waf_under_attack\n\n * syntax: waf_under_attack <on | off> [uri=str]\n * default: waf_under_attack off\n * context: http, server, location\n\nif your site is under attack you can try using this directive. turning it on forces a five-second delay on each user's first visit and automatically jumps to the page pointed to by uri.\n\n * uri: can be a full url or a path. for example, https://example.com/attack.html or /attack.html.\n\nyou can refer to the use case in protect against distributed cc attacks (distributed http flooding) | best practices.\n\ntips\n\nthe page pointed to by uri should automatically jump to the page the user wants to visit after five seconds, the url of the page can be obtained by querying a string with the parameter target.\n\nassets/under-attack.html is a sample page, you should copy this file to your web directory and configure uri correctly.\n\nnaturally, you can also write your own html file and point to it with uri.\n\nchanges in latest 'current' version\n\nin the lts version we implemented this feature through redirects, but many reasons (such as caching and cdn) would cause the redirects to fail or not validate the cookie properly. so we changed the implementation so that we return the specified page by changing the response body in a way that does not cause the uri to change.\n\nwe also added the response header cache-control: no-store to avoid the impact of caching.\n\n * synyax: waf_under_attack <on | off> [file=full_path]\n\n * default: waf_under_attack off\n\n * context: http, server, location\n\n * removed the parameter uri.\n\n * added parameter file, the value of this parameter should be the absolute path to an html file, e.g. file=/path/to/under-attack.html. this html has only one function, which is to refresh automatically after five seconds. when you omit this parameter, the default is to use the built-in html file, which comes from assets/under-attack.html.\n\n\n# waf_priority\n\n * syntax: waf_priority \"str\"\n * default: waf_priority \"w-ip ip cc under-attack w-url url args ua w-referer referer cookie adv\"\n * context: http, server, location\n\nset the priority of each inspection process, except for post detection, which always has the lowest priority.\n\n * under-attack: directive waf_under_attack.\n * w-ip: ip whitelist inspection\n * ip: ip blacklist inspection\n * cc: cc protection\n * w-url: url whitelist inspection\n * url: url blacklist inspection\n * args: url parameter (query string) blacklist inspection\n * ua: user-agent blacklist inspection\n * w-referer: referer whitelist inspection\n * referer: referer blacklist inspection\n * cookie: cookie blacklist inspection\n * adv: advanced rules.\n\nwarning\n\nstr must be wrapped in single or double quotes, and str must contain all of the inspection process.\n\nchanges in latest 'current' version\n\n * default: waf_priority \"w-ip ip verify-bot cc captcha under-attack w-url url args ua w-referer referer cookie post modsecurity\"\n\n----------------------------------------\n\n * verify-bot: friendly crawler verification.\n * captcha: captcha.\n * post: request body blacklist.\n * modsecurity.\n * adv: removed.\n\n\n# waf_http_status\n\n * syntax: waf_http_status [general=http_status_code] [cc_deny=http_status_code]\n * default: waf_http_status general=403 cc_deny=503\n * context: http, server, location\n\nthis directive is used to set the http status code returned when a request is blocked.\n\n * general: indicates the http status code returned when all blacklist-based inpection are triggered.\n * cc_deny: indicates the http status code returned when cc protection is triggered.\n\nchanges in latest 'current' version\n\nthis directive has been removed from v10.0.0 and the associated features moved to directive waf_action.\n\n\n# waf_action\n\n * syntax: waf_action [blacklist=action] [cc_deny=action] [modsecurity=action] [verify_bot=action] [zone=name:tag]\n * default: waf_action blacklist=403 cc_deny=503 modsecurity=follow verify_bot=403\n * context: http, server, location\n\nthis directive is used to set the action to be taken when blocking a request. action indicates a specific action and can be the following values.\n\n * 4xx | 5xxï¼http response code.\n * captchaï¼use the captcha to challenge.\n * followï¼follow the action of modsecurity's rule, only for parameter modsecurity.\n\nparameters:\n\n * blacklist: all blacklist-based rules, such as ip blacklist, user-agent blacklist, url blacklist, etc.\n * cc_deny: cc protection.\n * modsecurityï¼modsecurity's rules.\n * verify_botï¼waf_verify_bot.\n * zoneï¼set the shared memory used to record the necessary information, if and only if an action is captcha.\n\n\n# waf_block_page\n\n * syntax: waf_block_page < default | path/to/file.html >\n * default: ââ\n * context: http, server, location\n\nused to set the page returned when a request is blocked, default is a built-in html file from assets/block.html, [data expunged] is [data expunged].",charsets:{cjk:!0}},{title:"Known Issues",frontmatter:{title:"Known Issues",lang:"en"},regularPath:"/advance/issue.html",relativePath:"advance/issue.md",key:"v-2c027e9c",path:"/advance/issue.html",lastUpdated:"1/10/2022, 3:38:27 PM",lastUpdatedTimestamp:1641829107e3,headersStr:null,content:"# Known Issues\n\nBugs that exist in the latest stable release are listed here, bugs that have been fixed in the latest stable release are not listed here.",normalizedContent:"# known issues\n\nbugs that exist in the latest stable release are listed here, bugs that have been fixed in the latest stable release are not listed here.",charsets:{}},{title:"Log",frontmatter:{title:"Log",lang:"en"},regularPath:"/advance/log.html",relativePath:"advance/log.md",key:"v-50be0ffc",path:"/advance/log.html",headers:[{level:2,title:"Blocking Log",slug:"blocking-log",normalizedTitle:"blocking log",charIndex:10},{level:2,title:"Debugging Log",slug:"debugging-log",normalizedTitle:"debugging log",charIndex:754},{level:2,title:"Customised Log Format",slug:"customised-log-format",normalizedTitle:"customised log format",charIndex:2188}],lastUpdated:"1/10/2022, 3:38:27 PM",lastUpdatedTimestamp:1641829107e3,headersStr:"Blocking Log Debugging Log Customised Log Format",content:'# Log\n\n\n# Blocking Log\n\nThe blocking log is stored in error.log. The log level of the blocking log is ALERT. The format is ngx_waf: [rule type][specific rule triggered].\n\nYou can use the following command to quickly view the blocking log.\n\ncat /path/to/error.log | grep ngx_waf:\n\n\nHere are two examples.\n\n2020/01/20 22:56:30 [alert] 6666#0: *30 ngx_waf: [BLACK-URL][(?i)(?:/\\.env$)], client: 192.168.1.1, server: example.com, request: "GET /v1/.env HTTP/1.1", host: "example.com", referrer: "http:/example.com/v1/.env"\n\n2020/01/20 22:58:40 [alert] 6667#0: *11 ngx_waf: [BLACK-POST][(?i)(?:select.+(?:from|limit))], client: 192.168.1.1, server: example.com, request: "POST /xmlrpc.php HTTP/1.1", host: "example.com", referrer: "https://example.com/"\n\n\n\n# Debugging Log\n\nWhen you adjust the error log level to debug in the nginx configuration file, the debug log will be output in error.log for troubleshooting purposes. for troubleshooting purposes. The format is ngx_waf_debug: debug information.\n\nYou can use the following command to quickly view the debug log.\n\ncat /path/to/error.log | grep ngx_waf_debug:\n\n\nBelow is a typical modulation log that illustrates the flow of a CC defense detection.\n\n2021/02/21 20:35:33 [debug] 6666#0: *1 ngx_waf_debug: Start the CC inspection process.\n2021/02/21 20:35:33 [debug] 6666#0: *1 ngx_waf_debug: The module context has been obtained.\n2021/02/21 20:35:33 [debug] 6666#0: *1 ngx_waf_debug: The configuration of the module has been obtained.\n2021/02/21 20:35:33 [debug] 6666#0: *1 ngx_waf_debug: Detection has begun.\n2021/02/21 20:35:33 [debug] 6666#0: *1 ngx_waf_debug: Shared memory is locked.\n2021/02/21 20:35:33 [debug] 6666#0: *1 ngx_waf_debug: Shared memory is unlocked.\n2021/02/21 20:35:33 [debug] 6666#0: *1 ngx_waf_debug: Detection is over.\n2021/02/21 20:35:33 [debug] 6666#0: *1 ngx_waf_debug: The CC detection process is fully completed.\n\n\nSENSITIVE INFORMATION DISCLOSURE\n\nIn the latest Current version, debug logs may contain some sensitive information, such as data received and sent by the server, CAPTCHA keys, etc. When providing debug logs it is recommended to send them to us via email. You can find our email address here.\n\n\n# Customised Log Format\n\nnginx allows custom log formats, and a server block can write to multiple log files at the same time, giving us the opportunity to customise our log formats. This module provides some built-in Variables that can be used to customise the blocking log with a little effort.\n\nHere is an example.\n\n...\n\nhttp {\n    ...\n\n    log_format  main    \'$remote_addr - $remote_user [$time_local] "$request" \'\n                        \'$status $body_bytes_sent "$http_referer" \'\n                        \'"$http_user_agent" "$http_x_forwarded_for"\';\n\n    log_format yaml     \'- remote_addr: "$remote_addr"\\n\'\n                        \'  remote_user: "$remote_user"\\n\'\n                        \'  time_local: "$time_local"\\n\'\n                        \'  request: "$request"\\n\'\n                        \'  status: "$status"\\n\'\n                        \'  body_bytes_sent: "$body_bytes_sent"\\n\'\n                        \'  http_referer: "$http_referer"\\n\'\n                        \'  http_user_agent: "$http_user_agent"\\n\'\n                        \'  http_x_forwarded_for: "$http_x_forwarded_for"\\n\'\n                        \'  waf_blocked: $waf_blocked\\n\'\n                        \'  waf_spend: $waf_spend\\n\'\n                        \'  waf_rule_type: "$waf_rule_type"\\n\'\n                        \'  waf_rule_details: "$waf_rule_details"\\n\';\n\n\n    server {\n        ...\n\n        access_log  logs/access.log  main;\n        access_log  logs/access.yml  yaml   if=$waf_log;\n        access_log  logs/waf.yml     yaml   if=$waf_blocking_log;\n\n        ...\n    }\n\n    ...\n}\n\n...\n\n\nThe above configuration stores the normal log format in logs/access.log, while the yaml format logs are stored in logs/access.yml. It is worth noting that yaml format logs use the three built-in variables provided by the module. You can easily read `logs/access.The above configuration will have the following effect.\n\n * normal access logs are written to logs/access.log.\n * YAML-formatted access logs are written to logs/access.yml.\n * YAML-formatted intercept logs are written to logs/waf.yml.\n\nLog analysis\n\nYou can customize the log format, and then programmatically analyze it and make statistical graphs.\n\nABOUT YAML FORMAT\n\nYAML is a highly readable data serialisation format that is very easy to learn. As long as you can read JSON, learning YAML will be a snap. You can search for a description of the YAML format yourself.',normalizedContent:'# log\n\n\n# blocking log\n\nthe blocking log is stored in error.log. the log level of the blocking log is alert. the format is ngx_waf: [rule type][specific rule triggered].\n\nyou can use the following command to quickly view the blocking log.\n\ncat /path/to/error.log | grep ngx_waf:\n\n\nhere are two examples.\n\n2020/01/20 22:56:30 [alert] 6666#0: *30 ngx_waf: [black-url][(?i)(?:/\\.env$)], client: 192.168.1.1, server: example.com, request: "get /v1/.env http/1.1", host: "example.com", referrer: "http:/example.com/v1/.env"\n\n2020/01/20 22:58:40 [alert] 6667#0: *11 ngx_waf: [black-post][(?i)(?:select.+(?:from|limit))], client: 192.168.1.1, server: example.com, request: "post /xmlrpc.php http/1.1", host: "example.com", referrer: "https://example.com/"\n\n\n\n# debugging log\n\nwhen you adjust the error log level to debug in the nginx configuration file, the debug log will be output in error.log for troubleshooting purposes. for troubleshooting purposes. the format is ngx_waf_debug: debug information.\n\nyou can use the following command to quickly view the debug log.\n\ncat /path/to/error.log | grep ngx_waf_debug:\n\n\nbelow is a typical modulation log that illustrates the flow of a cc defense detection.\n\n2021/02/21 20:35:33 [debug] 6666#0: *1 ngx_waf_debug: start the cc inspection process.\n2021/02/21 20:35:33 [debug] 6666#0: *1 ngx_waf_debug: the module context has been obtained.\n2021/02/21 20:35:33 [debug] 6666#0: *1 ngx_waf_debug: the configuration of the module has been obtained.\n2021/02/21 20:35:33 [debug] 6666#0: *1 ngx_waf_debug: detection has begun.\n2021/02/21 20:35:33 [debug] 6666#0: *1 ngx_waf_debug: shared memory is locked.\n2021/02/21 20:35:33 [debug] 6666#0: *1 ngx_waf_debug: shared memory is unlocked.\n2021/02/21 20:35:33 [debug] 6666#0: *1 ngx_waf_debug: detection is over.\n2021/02/21 20:35:33 [debug] 6666#0: *1 ngx_waf_debug: the cc detection process is fully completed.\n\n\nsensitive information disclosure\n\nin the latest current version, debug logs may contain some sensitive information, such as data received and sent by the server, captcha keys, etc. when providing debug logs it is recommended to send them to us via email. you can find our email address here.\n\n\n# customised log format\n\nnginx allows custom log formats, and a server block can write to multiple log files at the same time, giving us the opportunity to customise our log formats. this module provides some built-in variables that can be used to customise the blocking log with a little effort.\n\nhere is an example.\n\n...\n\nhttp {\n    ...\n\n    log_format  main    \'$remote_addr - $remote_user [$time_local] "$request" \'\n                        \'$status $body_bytes_sent "$http_referer" \'\n                        \'"$http_user_agent" "$http_x_forwarded_for"\';\n\n    log_format yaml     \'- remote_addr: "$remote_addr"\\n\'\n                        \'  remote_user: "$remote_user"\\n\'\n                        \'  time_local: "$time_local"\\n\'\n                        \'  request: "$request"\\n\'\n                        \'  status: "$status"\\n\'\n                        \'  body_bytes_sent: "$body_bytes_sent"\\n\'\n                        \'  http_referer: "$http_referer"\\n\'\n                        \'  http_user_agent: "$http_user_agent"\\n\'\n                        \'  http_x_forwarded_for: "$http_x_forwarded_for"\\n\'\n                        \'  waf_blocked: $waf_blocked\\n\'\n                        \'  waf_spend: $waf_spend\\n\'\n                        \'  waf_rule_type: "$waf_rule_type"\\n\'\n                        \'  waf_rule_details: "$waf_rule_details"\\n\';\n\n\n    server {\n        ...\n\n        access_log  logs/access.log  main;\n        access_log  logs/access.yml  yaml   if=$waf_log;\n        access_log  logs/waf.yml     yaml   if=$waf_blocking_log;\n\n        ...\n    }\n\n    ...\n}\n\n...\n\n\nthe above configuration stores the normal log format in logs/access.log, while the yaml format logs are stored in logs/access.yml. it is worth noting that yaml format logs use the three built-in variables provided by the module. you can easily read `logs/access.the above configuration will have the following effect.\n\n * normal access logs are written to logs/access.log.\n * yaml-formatted access logs are written to logs/access.yml.\n * yaml-formatted intercept logs are written to logs/waf.yml.\n\nlog analysis\n\nyou can customize the log format, and then programmatically analyze it and make statistical graphs.\n\nabout yaml format\n\nyaml is a highly readable data serialisation format that is very easy to learn. as long as you can read json, learning yaml will be a snap. you can search for a description of the yaml format yourself.',charsets:{cjk:!0}},{title:"Rule Priority",frontmatter:{title:"Rule Priority",lang:"en"},regularPath:"/advance/priority.html",relativePath:"advance/priority.md",key:"v-6eb378b4",path:"/advance/priority.html",lastUpdated:"1/10/2022, 3:38:27 PM",lastUpdatedTimestamp:1641829107e3,headersStr:null,content:"# Rule Priority\n\nThere are many inspection process in this module, so it is important to specify the inspection priority of each inspection process to avoid illogical inspection results.\n\nThe following is a list of all the tests in order of priority, from top to bottom.\n\n 1.  IP whitelist inspection\n 2.  IP blacklist inspection\n 3.  Friendly crawler verification\n 4.  CC protection\n 5.  CAPTCHA\n 6.  Under attack mode\n 7.  Url whitelist inspection\n 8.  Url blacklist inspection\n 9.  Get parameter blacklist inspection\n 10. User-Agent blacklist inspection\n 11. Referer whitelist inspection\n 12. Referer blacklist inspection\n 13. Cookie blacklist inspection\n 14. Post request body blacklist\n 15. ModSecurity\n\nChange priority\n\nYou can modify the priority through the configuration file, but the priority of the POST request body detection is not allowed to be modified, it will always have the lowest priority. See waf_priority for details\n\nCHANGES IN LATEST 'Current' VERSION\n\nAllows the priority of the request body inspection to be modified by the directive waf_priority.",normalizedContent:"# rule priority\n\nthere are many inspection process in this module, so it is important to specify the inspection priority of each inspection process to avoid illogical inspection results.\n\nthe following is a list of all the tests in order of priority, from top to bottom.\n\n 1.  ip whitelist inspection\n 2.  ip blacklist inspection\n 3.  friendly crawler verification\n 4.  cc protection\n 5.  captcha\n 6.  under attack mode\n 7.  url whitelist inspection\n 8.  url blacklist inspection\n 9.  get parameter blacklist inspection\n 10. user-agent blacklist inspection\n 11. referer whitelist inspection\n 12. referer blacklist inspection\n 13. cookie blacklist inspection\n 14. post request body blacklist\n 15. modsecurity\n\nchange priority\n\nyou can modify the priority through the configuration file, but the priority of the post request body detection is not allowed to be modified, it will always have the lowest priority. see waf_priority for details\n\nchanges in latest 'current' version\n\nallows the priority of the request body inspection to be modified by the directive waf_priority.",charsets:{}},{title:"Rule Description",frontmatter:{title:"Rule Description",lang:"en"},regularPath:"/advance/rule.html",relativePath:"advance/rule.md",key:"v-5c8a7d76",path:"/advance/rule.html",headers:[{level:2,title:"IP Whitelist",slug:"ip-whitelist",normalizedTitle:"ip whitelist",charIndex:849},{level:2,title:"IP Blacklist",slug:"ip-blacklist",normalizedTitle:"ip blacklist",charIndex:1304},{level:2,title:"Url Whitelist",slug:"url-whitelist",normalizedTitle:"url whitelist",charIndex:1496},{level:2,title:"Url Blacklist",slug:"url-blacklist",normalizedTitle:"url blacklist",charIndex:1718},{level:2,title:"Get Parameter Blacklist",slug:"get-parameter-blacklist",normalizedTitle:"get parameter blacklist",charIndex:1947},{level:2,title:"Post body Blacklist",slug:"post-body-blacklist",normalizedTitle:"post body blacklist",charIndex:2226},{level:2,title:"User-Agent Blacklist",slug:"user-agent-blacklist",normalizedTitle:"user-agent blacklist",charIndex:2584},{level:2,title:"Cookie Blacklist",slug:"cookie-blacklist",normalizedTitle:"cookie blacklist",charIndex:2838},{level:2,title:"Referer Whitelist",slug:"referer-whitelist",normalizedTitle:"referer whitelist",charIndex:3087},{level:2,title:"Referer Blacklist",slug:"referer-blacklist",normalizedTitle:"referer blacklist",charIndex:3343}],lastUpdated:"1/10/2022, 3:38:27 PM",lastUpdatedTimestamp:1641829107e3,headersStr:"IP Whitelist IP Blacklist Url Whitelist Url Blacklist Get Parameter Blacklist Post body Blacklist User-Agent Blacklist Cookie Blacklist Referer Whitelist Referer Blacklist",content:"# Rule Description\n\nThis module uses the following configuration files, all of which must be in the same directory and to which nginx has read access.\n\n * IP whitelist with the file names white-ipv4 and white-ipv6.\n * IP blacklist with the filenames ipv4 and ipv6.\n * Url whitelist with the filename white-url.\n * Url blacklist with the filename url.\n * Get parameter blacklist with the filename args.\n * Post request body blacklist, with the filename post.\n * UserAgent blacklist with the filename user-agent.\n * Cookie blacklist, with the filename cookie.\n * Referer whitelist with the filename white-referer.\n * Referer blacklist with the filename referer.\n * Advanced rules with the file name advaced.\n\nNOTE\n\nSome rule files require writing regular expressions, one regular expression per line. Regular expressions follow the PCRE standard.\n\n\n# IP Whitelist\n\nThe ip whitelist consists of the following two files.\n\n * ipv4 whitelist with the file name white-ipv4.\n * ipv6 whitelist with the file name white-ipv6.\n\nSpecify one IP address or IP address range per line when writing.\n\nHere are some examples.\n\nSpecifies a single ipv4 address.\n\n192.168.2.1\n\n\nSpecifies an ipv4 address range.\n\n192.168.2.0/24\n\n\nSpecifies a single ipv6 address.\n\nFE80::1000\n\n\nSpecifies an ipv6 address range.\n\nFE80::/10\n\n\n\n# IP Blacklist\n\nThe IP blacklist consists of the following two files.\n\n * ipv4 blacklist with the file name ipv4.\n * ipv6 blacklist with the file name ipv6.\n\nWrite the same as IP Whitelist.\n\n\n# Url Whitelist\n\nThe Url whitelist file name is white-url, and the rule is written with one regular expression per line. Url matched by any of the regular expressions will be released directly without subsequent checks.\n\n\n# Url Blacklist\n\nThe Url blacklist file name is url, and the rule is written with one regular expression per line. Url will be blocked if it is matched by any of the regular expressions, and a 403 status code will be returned.\n\n\n# Get Parameter Blacklist\n\nThe Get parameter is blacklisted with the file name args, and the rule is written with one regular expression per line. If the Get parameter is matched by any of the regular expressions, it will be intercepted and a 403 status code will be returned.\n\n\n# Post body Blacklist\n\nThe file name of the Post body blacklist is post, and the rule is written with one regular expression per line. The content of the Post body will be blocked if any of the regular expressions match it, and a 403 status code will be returned.\n\nWARNING\n\nSometimes this module does not perform Post body inspection, see FAQ for details.\n\n\n# User-Agent Blacklist\n\nThe file name of the UserAgent blacklist is user-agent, and the rule is written with one regular expression per line. UserAgent will be blocked if any of the regular expressions match it, and a 403 status code will be returned.\n\n\n# Cookie Blacklist\n\nThe file name of the cookie blacklist is cookie and the rule is written with one regular expression per line. If a cookie is matched by any of the regular expressions, it will be blocked and a 403 status code will be returned.\n\n\n# Referer Whitelist\n\nThe referer whitelist is named white-referer, and the rule is written with one regular expression per line. The referer will be released if it is matched by any of the regular expressions, and no subsequent checks will be performed.\n\n\n# Referer Blacklist\n\nThe Referer blacklist file is named referer and the rule is written with one regular expression per line. Referer will be blocked if it is matched by any of the regular expressions, and a 403 status code will be returned.",normalizedContent:"# rule description\n\nthis module uses the following configuration files, all of which must be in the same directory and to which nginx has read access.\n\n * ip whitelist with the file names white-ipv4 and white-ipv6.\n * ip blacklist with the filenames ipv4 and ipv6.\n * url whitelist with the filename white-url.\n * url blacklist with the filename url.\n * get parameter blacklist with the filename args.\n * post request body blacklist, with the filename post.\n * useragent blacklist with the filename user-agent.\n * cookie blacklist, with the filename cookie.\n * referer whitelist with the filename white-referer.\n * referer blacklist with the filename referer.\n * advanced rules with the file name advaced.\n\nnote\n\nsome rule files require writing regular expressions, one regular expression per line. regular expressions follow the pcre standard.\n\n\n# ip whitelist\n\nthe ip whitelist consists of the following two files.\n\n * ipv4 whitelist with the file name white-ipv4.\n * ipv6 whitelist with the file name white-ipv6.\n\nspecify one ip address or ip address range per line when writing.\n\nhere are some examples.\n\nspecifies a single ipv4 address.\n\n192.168.2.1\n\n\nspecifies an ipv4 address range.\n\n192.168.2.0/24\n\n\nspecifies a single ipv6 address.\n\nfe80::1000\n\n\nspecifies an ipv6 address range.\n\nfe80::/10\n\n\n\n# ip blacklist\n\nthe ip blacklist consists of the following two files.\n\n * ipv4 blacklist with the file name ipv4.\n * ipv6 blacklist with the file name ipv6.\n\nwrite the same as ip whitelist.\n\n\n# url whitelist\n\nthe url whitelist file name is white-url, and the rule is written with one regular expression per line. url matched by any of the regular expressions will be released directly without subsequent checks.\n\n\n# url blacklist\n\nthe url blacklist file name is url, and the rule is written with one regular expression per line. url will be blocked if it is matched by any of the regular expressions, and a 403 status code will be returned.\n\n\n# get parameter blacklist\n\nthe get parameter is blacklisted with the file name args, and the rule is written with one regular expression per line. if the get parameter is matched by any of the regular expressions, it will be intercepted and a 403 status code will be returned.\n\n\n# post body blacklist\n\nthe file name of the post body blacklist is post, and the rule is written with one regular expression per line. the content of the post body will be blocked if any of the regular expressions match it, and a 403 status code will be returned.\n\nwarning\n\nsometimes this module does not perform post body inspection, see faq for details.\n\n\n# user-agent blacklist\n\nthe file name of the useragent blacklist is user-agent, and the rule is written with one regular expression per line. useragent will be blocked if any of the regular expressions match it, and a 403 status code will be returned.\n\n\n# cookie blacklist\n\nthe file name of the cookie blacklist is cookie and the rule is written with one regular expression per line. if a cookie is matched by any of the regular expressions, it will be blocked and a 403 status code will be returned.\n\n\n# referer whitelist\n\nthe referer whitelist is named white-referer, and the rule is written with one regular expression per line. the referer will be released if it is matched by any of the regular expressions, and no subsequent checks will be performed.\n\n\n# referer blacklist\n\nthe referer blacklist file is named referer and the rule is written with one regular expression per line. referer will be blocked if it is matched by any of the regular expressions, and a 403 status code will be returned.",charsets:{}},{title:"Cross-version Upgrades",frontmatter:{title:"Cross-version Upgrades",lang:"en"},regularPath:"/advance/upgrade.html",relativePath:"advance/upgrade.md",key:"v-2223cd7c",path:"/advance/upgrade.html",headers:[{level:2,title:"Upgrade from 9.x.x to 10.x.x",slug:"upgrade-from-9-x-x-to-10-x-x",normalizedTitle:"upgrade from 9.x.x to 10.x.x",charIndex:131},{level:2,title:"Upgrade from 8.x.x to 9.x.x",slug:"upgrade-from-8-x-x-to-9-x-x",normalizedTitle:"upgrade from 8.x.x to 9.x.x",charIndex:574},{level:2,title:"Upgrade from 7.x.x to 8.x.x",slug:"upgrade-from-7-x-x-to-8-x-x",normalizedTitle:"upgrade from 7.x.x to 8.x.x",charIndex:1267},{level:2,title:"Upgrade from 6.x.x to 7.x.x",slug:"upgrade-from-6-x-x-to-7-x-x",normalizedTitle:"upgrade from 6.x.x to 7.x.x",charIndex:2549},{level:2,title:"Upgrade from 5.x.x to 6.x.x",slug:"upgrade-from-5-x-x-to-6-x-x",normalizedTitle:"upgrade from 5.x.x to 6.x.x",charIndex:2688}],lastUpdated:"1/10/2022, 3:38:27 PM",lastUpdatedTimestamp:1641829107e3,headersStr:"Upgrade from 9.x.x to 10.x.x Upgrade from 8.x.x to 9.x.x Upgrade from 7.x.x to 8.x.x Upgrade from 6.x.x to 7.x.x Upgrade from 5.x.x to 6.x.x",content:"# Cross-version Upgrades\n\nTo upgrade the module, you need to reinstall it according to the instructions in installation guide.\n\n\n# Upgrade from 9.x.x to 10.x.x\n\n 1. If you use the directive waf_http_status, replace it with the directive waf_action according to the documentation.\n 2. If you set the parameter size of the directive waf_cc_deny, you should replace it with the parameter zone according to the documentation.\n 3. If you use the parameter CAPTCHA of the directive waf_cc_deny, you should use the directive waf_action instead, according to the documentation.\n\n\n# Upgrade from 8.x.x to 9.x.x\n\n 1. Install the dynamic libraries and headers for libmodsecurity.\n 2. Run the command git clone -b v2.3.0 https://github.com/troydhanson/uthash.git lib/uthash in the root of the project.\n 3. Remove some parameters from the command waf_mode, if you are using them.\n    * LIBINJECTION\n    * LIBINJECTION-SQLI\n    * LIBINJECTION-XSS\n    * ADV\n 4. Delete the file advanced for advanced rules. 5.\n 5. The parameter ADV of the directive waf_priority is removed, please delete it if you use this parameter.\n 6. A new parameter MODSECURITY has been added to the directive waf_priority. If you use this directive, please fill in the parameter in the appropriate place.\n\n\n# Upgrade from 7.x.x to 8.x.x\n\n 1. Install the dynamic libraries and headers for libcurl.\n 2. Run the command git clone https://github.com/DaveGamble/cJSON.git lib/cjson in the root of the project.\n 3. Run the command git clone https://github.com/libinjection/libinjection.git lib/libinjection at the root of the project.\n 4. If you used the directive waf_mode and used the directive's parameters CC or CACHE, remove both parameters. The function of each of these two parameters has been moved into the directive waf_cc_deny and waf_cache respectively.\n 5. If you want to enable CC protection, change the parameter of the directive waf_cc_deny, for example, change waf_cc_deny rate=2000r/m duration=1h to waf_cc_deny on rate=2000r/m duration=1h.\n 6. If you want to enable caching, change the parameter of the directive waf_cache, for example, change waf_cache capacity=50 to waf_cache on capacity=50.\n 7. If you use the directives waf_cc_deny or waf_cache in the http context, move these two directives to a lower context, such as to the server context.\n 8. If you use the directive waf_cache and use the directive's parameters interval or percent, remove these two parameters, which have been removed.\n 9. If you use the directive waf_priority, add VERIFY-BOT and CAPTCHA to it.\n\n\n# Upgrade from 6.x.x to 7.x.x\n\n 1. If you use the directive waf_cc_deny in the http block, move this directive to a more internal level.\n\n\n# Upgrade from 5.x.x to 6.x.x\n\n 1. Create a new empty file named advanced in the rules directory.\n 2. If the directive waf_priority is used, you can delete it or modify it according to the directive in the documentation.",normalizedContent:"# cross-version upgrades\n\nto upgrade the module, you need to reinstall it according to the instructions in installation guide.\n\n\n# upgrade from 9.x.x to 10.x.x\n\n 1. if you use the directive waf_http_status, replace it with the directive waf_action according to the documentation.\n 2. if you set the parameter size of the directive waf_cc_deny, you should replace it with the parameter zone according to the documentation.\n 3. if you use the parameter captcha of the directive waf_cc_deny, you should use the directive waf_action instead, according to the documentation.\n\n\n# upgrade from 8.x.x to 9.x.x\n\n 1. install the dynamic libraries and headers for libmodsecurity.\n 2. run the command git clone -b v2.3.0 https://github.com/troydhanson/uthash.git lib/uthash in the root of the project.\n 3. remove some parameters from the command waf_mode, if you are using them.\n    * libinjection\n    * libinjection-sqli\n    * libinjection-xss\n    * adv\n 4. delete the file advanced for advanced rules. 5.\n 5. the parameter adv of the directive waf_priority is removed, please delete it if you use this parameter.\n 6. a new parameter modsecurity has been added to the directive waf_priority. if you use this directive, please fill in the parameter in the appropriate place.\n\n\n# upgrade from 7.x.x to 8.x.x\n\n 1. install the dynamic libraries and headers for libcurl.\n 2. run the command git clone https://github.com/davegamble/cjson.git lib/cjson in the root of the project.\n 3. run the command git clone https://github.com/libinjection/libinjection.git lib/libinjection at the root of the project.\n 4. if you used the directive waf_mode and used the directive's parameters cc or cache, remove both parameters. the function of each of these two parameters has been moved into the directive waf_cc_deny and waf_cache respectively.\n 5. if you want to enable cc protection, change the parameter of the directive waf_cc_deny, for example, change waf_cc_deny rate=2000r/m duration=1h to waf_cc_deny on rate=2000r/m duration=1h.\n 6. if you want to enable caching, change the parameter of the directive waf_cache, for example, change waf_cache capacity=50 to waf_cache on capacity=50.\n 7. if you use the directives waf_cc_deny or waf_cache in the http context, move these two directives to a lower context, such as to the server context.\n 8. if you use the directive waf_cache and use the directive's parameters interval or percent, remove these two parameters, which have been removed.\n 9. if you use the directive waf_priority, add verify-bot and captcha to it.\n\n\n# upgrade from 6.x.x to 7.x.x\n\n 1. if you use the directive waf_cc_deny in the http block, move this directive to a more internal level.\n\n\n# upgrade from 5.x.x to 6.x.x\n\n 1. create a new empty file named advanced in the rules directory.\n 2. if the directive waf_priority is used, you can delete it or modify it according to the directive in the documentation.",charsets:{}},{title:"Embedded Variables",frontmatter:{title:"Embedded Variables",lang:"en"},regularPath:"/advance/variable.html",relativePath:"advance/variable.md",key:"v-42ac7bf6",path:"/advance/variable.html",headers:[{level:2,title:"$waf_log",slug:"waf-log",normalizedTitle:"$waf_log",charIndex:250},{level:2,title:"$waf_blocking_log",slug:"waf-blocking-log",normalizedTitle:"$waf_blocking_log",charIndex:440},{level:2,title:"$waf_blocked",slug:"waf-blocked",normalizedTitle:"$waf_blocked",charIndex:638},{level:2,title:"$waf_spend",slug:"waf-spend",normalizedTitle:"$waf_spend",charIndex:770},{level:2,title:"$waf_rule_type",slug:"waf-rule-type",normalizedTitle:"$waf_rule_type",charIndex:954},{level:2,title:"$waf_rule_details",slug:"waf-rule-details",normalizedTitle:"$waf_rule_details",charIndex:1445},{level:2,title:"$waf_rate",slug:"waf-rate",normalizedTitle:"$waf_rate",charIndex:1607}],lastUpdated:"1/10/2022, 3:38:27 PM",lastUpdatedTimestamp:1641829107e3,headersStr:"$waf_log $waf_blocking_log $waf_blocked $waf_spend $waf_rule_type $waf_rule_details $waf_rate",content:"# Embedded Variables\n\nWhen writing nginx.conf, some variables are inevitably needed. For example, $remote_addr can be used to get the client IP address.\n\nThis module adds several available variables.\n\nCAN NOT BE USED FOR DIRECTIVE `if`\n\nSee FAQ.\n\n\n# $waf_log\n\nNot an empty string if the firewall is checked in this request, otherwise an empty string. This variable is mainly used in the directive access_log, see Customised Log Format.\n\n\n# $waf_blocking_log\n\nNot an empty string if this request was originally blocked by the module, and vice versa. This variable is mainly used in the directive access_log, see Customised Log Format.\n\n\n# $waf_blocked\n\nWhether this request is intercepted by this module, if intercepted, its value is 'true', otherwise it is 'false'.\n\n\n# $waf_spend\n\nIndicates how much time (in milliseconds) this check took, retaining 5 decimal places, with rounding rules depending on the specific C standard library implementation.\n\n\n# $waf_rule_type\n\nIf a black and white list rule is in effect for this request, the value is the type of rule that triggered it. Here are the possible values. If no black and white list rule is in effect then the value is ''.\n\n * 'CC-DENY'\n * 'WHITE-IPV4'\n * 'WHITE-IPV6'\n * 'BLACK-IPV4'\n * 'BLACK-IPV6'\n * 'WHITE-URL'\n * 'BLACK-URL'\n * 'BLACK-ARGS'\n * 'BLACK-USER-AGENT'\n * 'WHITE-REFERER'\n * 'BLACK-REFERER'\n * 'BLACK-COOKIE'\n * 'BLACK-POST'\n * 'UNDER-ATTACK'\n * 'FAKE-BOT'\n * 'CAPTCHA'\n\n\n# $waf_rule_details\n\nIf this request is blocked by this module, its value is the content of the specific rule triggered. If it is not blocked, its value is ''.\n\n\n# $waf_rate\n\nAn integer that represents the number of accesses to the current IP in a cycle.",normalizedContent:"# embedded variables\n\nwhen writing nginx.conf, some variables are inevitably needed. for example, $remote_addr can be used to get the client ip address.\n\nthis module adds several available variables.\n\ncan not be used for directive `if`\n\nsee faq.\n\n\n# $waf_log\n\nnot an empty string if the firewall is checked in this request, otherwise an empty string. this variable is mainly used in the directive access_log, see customised log format.\n\n\n# $waf_blocking_log\n\nnot an empty string if this request was originally blocked by the module, and vice versa. this variable is mainly used in the directive access_log, see customised log format.\n\n\n# $waf_blocked\n\nwhether this request is intercepted by this module, if intercepted, its value is 'true', otherwise it is 'false'.\n\n\n# $waf_spend\n\nindicates how much time (in milliseconds) this check took, retaining 5 decimal places, with rounding rules depending on the specific c standard library implementation.\n\n\n# $waf_rule_type\n\nif a black and white list rule is in effect for this request, the value is the type of rule that triggered it. here are the possible values. if no black and white list rule is in effect then the value is ''.\n\n * 'cc-deny'\n * 'white-ipv4'\n * 'white-ipv6'\n * 'black-ipv4'\n * 'black-ipv6'\n * 'white-url'\n * 'black-url'\n * 'black-args'\n * 'black-user-agent'\n * 'white-referer'\n * 'black-referer'\n * 'black-cookie'\n * 'black-post'\n * 'under-attack'\n * 'fake-bot'\n * 'captcha'\n\n\n# $waf_rule_details\n\nif this request is blocked by this module, its value is the content of the specific rule triggered. if it is not blocked, its value is ''.\n\n\n# $waf_rate\n\nan integer that represents the number of accesses to the current ip in a cycle.",charsets:{}},{title:"2.x.x",frontmatter:{title:"2.x.x",lang:"en"},regularPath:"/changes/2_x_x.html",relativePath:"changes/2_x_x.md",key:"v-9c16b5c8",path:"/changes/2_x_x.html",headers:[{level:2,title:"[2.1.1] - 2020-12.10",slug:"_2-1-1-2020-12-10",normalizedTitle:"[2.1.1] - 2020-12.10",charIndex:343},{level:3,title:"Added",slug:"added",normalizedTitle:"added",charIndex:368},{level:3,title:"Changed",slug:"changed",normalizedTitle:"changed",charIndex:378},{level:3,title:"Fixed",slug:"fixed",normalizedTitle:"fixed",charIndex:390},{level:2,title:"[2.1.0] - 2020-12-09",slug:"_2-1-0-2020-12-09",normalizedTitle:"[2.1.0] - 2020-12-09",charIndex:649},{level:3,title:"Added",slug:"added-2",normalizedTitle:"added",charIndex:368},{level:3,title:"Changed",slug:"changed-2",normalizedTitle:"changed",charIndex:378},{level:3,title:"Fixed",slug:"fixed-2",normalizedTitle:"fixed",charIndex:390},{level:2,title:"[2.0.2] - 2020-12-07",slug:"_2-0-2-2020-12-07",normalizedTitle:"[2.0.2] - 2020-12-07",charIndex:819},{level:3,title:"Added",slug:"added-3",normalizedTitle:"added",charIndex:368},{level:3,title:"Changed",slug:"changed-3",normalizedTitle:"changed",charIndex:378},{level:3,title:"Fixed",slug:"fixed-3",normalizedTitle:"fixed",charIndex:390},{level:2,title:"[2.0.1] - 2020-12-03",slug:"_2-0-1-2020-12-03",normalizedTitle:"[2.0.1] - 2020-12-03",charIndex:1070},{level:3,title:"Added",slug:"added-4",normalizedTitle:"added",charIndex:368},{level:3,title:"Changed",slug:"changed-4",normalizedTitle:"changed",charIndex:378},{level:3,title:"Fixed",slug:"fixed-4",normalizedTitle:"fixed",charIndex:390},{level:2,title:"[2.0.0] - 2020-09-29",slug:"_2-0-0-2020-09-29",normalizedTitle:"[2.0.0] - 2020-09-29",charIndex:1482},{level:3,title:"Added",slug:"added-5",normalizedTitle:"added",charIndex:368},{level:3,title:"Changed",slug:"changed-5",normalizedTitle:"changed",charIndex:378},{level:3,title:"Fixed",slug:"fixed-5",normalizedTitle:"fixed",charIndex:390}],lastUpdated:"1/10/2022, 3:38:27 PM",lastUpdatedTimestamp:1641829107e3,headersStr:"[2.1.1] - 2020-12.10 Added Changed Fixed [2.1.0] - 2020-12-09 Added Changed Fixed [2.0.2] - 2020-12-07 Added Changed Fixed [2.0.1] - 2020-12-03 Added Changed Fixed [2.0.0] - 2020-09-29 Added Changed Fixed",content:'# Change Log (2.x.x)\n\nThe format is based on Keep a Changelog, and this project adheres to Semantic Versioning.\n\nWhat is a breaking change?\n\n * The original configuration file may not work, for example, if a directive item is removed or renamed.\n * It may be necessary to update the build environment, such as installing new dependencies.\n\n\n# [2.1.1] - 2020-12.10\n\n\n# Added\n\n\n# Changed\n\n\n# Fixed\n\n * Fixed a module startup failure error. The error message for this error is nginx: [alert] could not open error log file: open() "ngx_waf: /logs/error.log" failed (2: No such file or directory) (0dfc46f).\n\n----------------------------------------\n\n\n# [2.1.0] - 2020-12-09\n\n\n# Added\n\n * Compatible with the mainline version of NGINX (f31f906 & 65277d1).\n\n\n# Changed\n\n\n# Fixed\n\n----------------------------------------\n\n\n# [2.0.2] - 2020-12-07\n\n\n# Added\n\n\n# Changed\n\n\n# Fixed\n\n * Fix for Anti Challenge Collapsar failing when waf_mult_mount is disabled (048fe5c).\n\n * Fixed compile error caused by incorrect #include (3fa298c).\n\n----------------------------------------\n\n\n# [2.0.1] - 2020-12-03\n\n\n# Added\n\n\n# Changed\n\n * Instead of downloading the uthash dependency manually, you can install the system library with yum install uthash-devel or apt-get install uthash-dev (7cfc94b).\n\n\n# Fixed\n\n * Fixed a bug that failed to compile under CentOS/RHEL 6 or 7 that was caused by not properly preventing macro redefinitions (28e1c8a & 566ae4a).\n\n----------------------------------------\n\n\n# [2.0.0] - 2020-09-29\n\n\n# Added\n\n * We can compile the module with --add-dynamic-module. Thanks for dvershinin\'s work(https://github.com/ADD-SP/ngx_waf/pull/4)ã\n\n\n# Changed\n\n * Remove a default User-Agent rule that is (?i)(? :Sogou web spider), as it will block non-malicious web spider(827d4e5).\n\n * Merge directives (ba92cfd). These directives will be merged: waf_check_ipv4, waf_check_url, waf_check_args, waf_check_ua, waf_check_referer, waf_check_cookie, waf_check_post, waf_check_cookie, waf_cc_deny. The merged new directive is waf_mode, see README.\n\n\n# Fixed\n\n * The blank lines in the rules can now be read correctly (955cf2d).',normalizedContent:'# change log (2.x.x)\n\nthe format is based on keep a changelog, and this project adheres to semantic versioning.\n\nwhat is a breaking change?\n\n * the original configuration file may not work, for example, if a directive item is removed or renamed.\n * it may be necessary to update the build environment, such as installing new dependencies.\n\n\n# [2.1.1] - 2020-12.10\n\n\n# added\n\n\n# changed\n\n\n# fixed\n\n * fixed a module startup failure error. the error message for this error is nginx: [alert] could not open error log file: open() "ngx_waf: /logs/error.log" failed (2: no such file or directory) (0dfc46f).\n\n----------------------------------------\n\n\n# [2.1.0] - 2020-12-09\n\n\n# added\n\n * compatible with the mainline version of nginx (f31f906 & 65277d1).\n\n\n# changed\n\n\n# fixed\n\n----------------------------------------\n\n\n# [2.0.2] - 2020-12-07\n\n\n# added\n\n\n# changed\n\n\n# fixed\n\n * fix for anti challenge collapsar failing when waf_mult_mount is disabled (048fe5c).\n\n * fixed compile error caused by incorrect #include (3fa298c).\n\n----------------------------------------\n\n\n# [2.0.1] - 2020-12-03\n\n\n# added\n\n\n# changed\n\n * instead of downloading the uthash dependency manually, you can install the system library with yum install uthash-devel or apt-get install uthash-dev (7cfc94b).\n\n\n# fixed\n\n * fixed a bug that failed to compile under centos/rhel 6 or 7 that was caused by not properly preventing macro redefinitions (28e1c8a & 566ae4a).\n\n----------------------------------------\n\n\n# [2.0.0] - 2020-09-29\n\n\n# added\n\n * we can compile the module with --add-dynamic-module. thanks for dvershinin\'s work(https://github.com/add-sp/ngx_waf/pull/4)ã\n\n\n# changed\n\n * remove a default user-agent rule that is (?i)(? :sogou web spider), as it will block non-malicious web spider(827d4e5).\n\n * merge directives (ba92cfd). these directives will be merged: waf_check_ipv4, waf_check_url, waf_check_args, waf_check_ua, waf_check_referer, waf_check_cookie, waf_check_post, waf_check_cookie, waf_cc_deny. the merged new directive is waf_mode, see readme.\n\n\n# fixed\n\n * the blank lines in the rules can now be read correctly (955cf2d).',charsets:{}},{title:"3.x.x",frontmatter:{title:"3.x.x",lang:"en"},regularPath:"/changes/3_x_x.html",relativePath:"changes/3_x_x.md",key:"v-40e1b208",path:"/changes/3_x_x.html",headers:[{level:2,title:"[3.1.6] - 2021-03-07",slug:"_3-1-6-2021-03-07",normalizedTitle:"[3.1.6] - 2021-03-07",charIndex:343},{level:3,title:"Fixed",slug:"fixed",normalizedTitle:"fixed",charIndex:368},{level:2,title:"[3.1.5] - 2021-03-03",slug:"_3-1-5-2021-03-03",normalizedTitle:"[3.1.5] - 2021-03-03",charIndex:441},{level:3,title:"Fixed",slug:"fixed-2",normalizedTitle:"fixed",charIndex:368},{level:2,title:"[3.1.4] - 2021-03-02",slug:"_3-1-4-2021-03-02",normalizedTitle:"[3.1.4] - 2021-03-02",charIndex:619},{level:3,title:"Changed",slug:"changed",normalizedTitle:"changed",charIndex:644},{level:2,title:"[3.1.3] - 2021-02-23",slug:"_3-1-3-2021-02-23",normalizedTitle:"[3.1.3] - 2021-02-23",charIndex:797},{level:3,title:"Fixed",slug:"fixed-3",normalizedTitle:"fixed",charIndex:368},{level:2,title:"[3.1.2] - 2021-01-18",slug:"_3-1-2-2021-01-18",normalizedTitle:"[3.1.2] - 2021-01-18",charIndex:932},{level:3,title:"Fixed",slug:"fixed-4",normalizedTitle:"fixed",charIndex:368},{level:2,title:"[3.1.1] - 2021-01-18",slug:"_3-1-1-2021-01-18",normalizedTitle:"[3.1.1] - 2021-01-18",charIndex:1114},{level:3,title:"Fixed",slug:"fixed-5",normalizedTitle:"fixed",charIndex:368},{level:2,title:"[3.1.0] - 2021-01-17",slug:"_3-1-0-2021-01-17",normalizedTitle:"[3.1.0] - 2021-01-17",charIndex:1244},{level:3,title:"Note",slug:"note",normalizedTitle:"note",charIndex:1269},{level:3,title:"Added",slug:"added",normalizedTitle:"added",charIndex:1376},{level:3,title:"Fixed",slug:"fixed-6",normalizedTitle:"fixed",charIndex:368},{level:2,title:"[3.0.2] - 2021-01-10",slug:"_3-0-2-2021-01-10",normalizedTitle:"[3.0.2] - 2021-01-10",charIndex:1590},{level:3,title:"Note",slug:"note-2",normalizedTitle:"note",charIndex:1269},{level:3,title:"Fixed",slug:"fixed-7",normalizedTitle:"fixed",charIndex:368},{level:2,title:"[3.0.1] - 2020-12-28",slug:"_3-0-1-2020-12-28",normalizedTitle:"[3.0.1] - 2020-12-28",charIndex:1851},{level:3,title:"Fixed",slug:"fixed-8",normalizedTitle:"fixed",charIndex:368},{level:2,title:"[3.0.0] - 2020-12-25",slug:"_3-0-0-2020-12-25",normalizedTitle:"[3.0.0] - 2020-12-25",charIndex:1994},{level:3,title:"Added",slug:"added-2",normalizedTitle:"added",charIndex:1376},{level:3,title:"Changed",slug:"changed-2",normalizedTitle:"changed",charIndex:644},{level:3,title:"Fixed",slug:"fixed-9",normalizedTitle:"fixed",charIndex:368}],lastUpdated:"1/10/2022, 3:38:27 PM",lastUpdatedTimestamp:1641829107e3,headersStr:"[3.1.6] - 2021-03-07 Fixed [3.1.5] - 2021-03-03 Fixed [3.1.4] - 2021-03-02 Changed [3.1.3] - 2021-02-23 Fixed [3.1.2] - 2021-01-18 Fixed [3.1.1] - 2021-01-18 Fixed [3.1.0] - 2021-01-17 Note Added Fixed [3.0.2] - 2021-01-10 Note Fixed [3.0.1] - 2020-12-28 Fixed [3.0.0] - 2020-12-25 Added Changed Fixed",content:"# Change Log (3.x.x)\n\nThe format is based on Keep a Changelog, and this project adheres to Semantic Versioning.\n\nWhat is a breaking change?\n\n * The original configuration file may not work, for example, if a directive item is removed or renamed.\n * It may be necessary to update the build environment, such as installing new dependencies.\n\n\n# [3.1.6] - 2021-03-07\n\n\n# Fixed\n\n * Correcting the order in which rules take effect (51c7824).\n\n\n# [3.1.5] - 2021-03-03\n\n\n# Fixed\n\n * Fixed a bug in the config script that caused dependencies to not be checked correctly (075a27e).\n\n----------------------------------------\n\n\n# [3.1.4] - 2021-03-02\n\n\n# Changed\n\n * Use safer string handling functions to avoid buffer overflows when conditions allow (177ae68).\n\n----------------------------------------\n\n\n# [3.1.3] - 2021-02-23\n\n\n# Fixed\n\n * Order of effectiveness of correction rules (857ec84).\n\n----------------------------------------\n\n\n# [3.1.2] - 2021-01-18\n\n\n# Fixed\n\n * Fixed a bug that caused module initialization to fail when the rule file was not writable (20acd27).\n\n----------------------------------------\n\n\n# [3.1.1] - 2021-01-18\n\n\n# Fixed\n\n * Compatible with lower versions of gcc (becbbe0).\n\n----------------------------------------\n\n\n# [3.1.0] - 2021-01-17\n\n\n# Note\n\n * v3.0.3 was skipped because a backward compatibility feature was added during the v3.0.3 test.\n\n\n# Added\n\n * Add debug log for easy troubleshooting (bac1d02).\n\n\n# Fixed\n\n * Fixed a segmentation fault (57d7719)ã\n\n * More accurate visit frequency statistics (53d3b14).\n\n----------------------------------------\n\n\n# [3.0.2] - 2021-01-10\n\n\n# Note\n\n * Because of hotfixes performed on v3.0.1, all beta versions of v3.0.2 are voided, please do not use these beta versions.\n\n\n# Fixed\n\n * Fixed a build error on Alpine Linux (e989aa3).\n\n----------------------------------------\n\n\n# [3.0.1] - 2020-12-28\n\n\n# Fixed\n\n * Fixed a segmentation fault when inspecting cookies (8dc2b56).\n\n----------------------------------------\n\n\n# [3.0.0] - 2020-12-25\n\n\n# Added\n\n * Anti Challenge Collapsar now supports IPV6 (00fbc1c).\n\n * IP black and white lists support IPV6, and can recognize IPV6 strings such as fe80::/10 (8519b26).\n\n\n# Changed\n\n * Delete some meaningless logs (bd279e7).\n\n * Friendly error alerts (d1185b2 & f2b617d). Warnings or error reporting when IP addresses in the rule file are invalid or IP address blocks overlap (does not detect all overlaps).\n\n * Faster IP matching (2b9e774).\n\n\n# Fixed\n\n * Fixed a bug that caused the cookie inspection not work (87beed1).\n\n * Modify the config file to ensure that the latest module code is compiled when executing make or make modules (25f97f5). Before the fix, if only the files under inc/ changed, the latest code would not be compiled because the files under inc/ were not checked for changes.\n\n * Fixed a bug with incorrect IPV4 segment identification (73a22eb). This bug could cause the subnet mask not to be generated correctly when a rule like 192.168.0.0/10, i.e. the suffix is not a multiple of 8, appears in the rule.",normalizedContent:"# change log (3.x.x)\n\nthe format is based on keep a changelog, and this project adheres to semantic versioning.\n\nwhat is a breaking change?\n\n * the original configuration file may not work, for example, if a directive item is removed or renamed.\n * it may be necessary to update the build environment, such as installing new dependencies.\n\n\n# [3.1.6] - 2021-03-07\n\n\n# fixed\n\n * correcting the order in which rules take effect (51c7824).\n\n\n# [3.1.5] - 2021-03-03\n\n\n# fixed\n\n * fixed a bug in the config script that caused dependencies to not be checked correctly (075a27e).\n\n----------------------------------------\n\n\n# [3.1.4] - 2021-03-02\n\n\n# changed\n\n * use safer string handling functions to avoid buffer overflows when conditions allow (177ae68).\n\n----------------------------------------\n\n\n# [3.1.3] - 2021-02-23\n\n\n# fixed\n\n * order of effectiveness of correction rules (857ec84).\n\n----------------------------------------\n\n\n# [3.1.2] - 2021-01-18\n\n\n# fixed\n\n * fixed a bug that caused module initialization to fail when the rule file was not writable (20acd27).\n\n----------------------------------------\n\n\n# [3.1.1] - 2021-01-18\n\n\n# fixed\n\n * compatible with lower versions of gcc (becbbe0).\n\n----------------------------------------\n\n\n# [3.1.0] - 2021-01-17\n\n\n# note\n\n * v3.0.3 was skipped because a backward compatibility feature was added during the v3.0.3 test.\n\n\n# added\n\n * add debug log for easy troubleshooting (bac1d02).\n\n\n# fixed\n\n * fixed a segmentation fault (57d7719)ã\n\n * more accurate visit frequency statistics (53d3b14).\n\n----------------------------------------\n\n\n# [3.0.2] - 2021-01-10\n\n\n# note\n\n * because of hotfixes performed on v3.0.1, all beta versions of v3.0.2 are voided, please do not use these beta versions.\n\n\n# fixed\n\n * fixed a build error on alpine linux (e989aa3).\n\n----------------------------------------\n\n\n# [3.0.1] - 2020-12-28\n\n\n# fixed\n\n * fixed a segmentation fault when inspecting cookies (8dc2b56).\n\n----------------------------------------\n\n\n# [3.0.0] - 2020-12-25\n\n\n# added\n\n * anti challenge collapsar now supports ipv6 (00fbc1c).\n\n * ip black and white lists support ipv6, and can recognize ipv6 strings such as fe80::/10 (8519b26).\n\n\n# changed\n\n * delete some meaningless logs (bd279e7).\n\n * friendly error alerts (d1185b2 & f2b617d). warnings or error reporting when ip addresses in the rule file are invalid or ip address blocks overlap (does not detect all overlaps).\n\n * faster ip matching (2b9e774).\n\n\n# fixed\n\n * fixed a bug that caused the cookie inspection not work (87beed1).\n\n * modify the config file to ensure that the latest module code is compiled when executing make or make modules (25f97f5). before the fix, if only the files under inc/ changed, the latest code would not be compiled because the files under inc/ were not checked for changes.\n\n * fixed a bug with incorrect ipv4 segment identification (73a22eb). this bug could cause the subnet mask not to be generated correctly when a rule like 192.168.0.0/10, i.e. the suffix is not a multiple of 8, appears in the rule.",charsets:{}},{title:"4.x.x",frontmatter:{title:"4.x.x",lang:"en"},regularPath:"/changes/4_x_x.html",relativePath:"changes/4_x_x.md",key:"v-0d29a8dc",path:"/changes/4_x_x.html",headers:[{level:2,title:"[4.0.0] - 2021-03-22 GMT+0800",slug:"_4-0-0-2021-03-22-gmt-0800",normalizedTitle:"[4.0.0] - 2021-03-22 gmt+0800",charIndex:343},{level:3,title:"WARNING",slug:"warning",normalizedTitle:"warning",charIndex:377},{level:3,title:"Added",slug:"added",normalizedTitle:"added",charIndex:430},{level:3,title:"Removed",slug:"removed",normalizedTitle:"removed",charIndex:511},{level:3,title:"Changed",slug:"changed",normalizedTitle:"changed",charIndex:636},{level:3,title:"Fixed",slug:"fixed",normalizedTitle:"fixed",charIndex:700}],lastUpdated:"1/10/2022, 3:38:27 PM",lastUpdatedTimestamp:1641829107e3,headersStr:"[4.0.0] - 2021-03-22 GMT+0800 WARNING Added Removed Changed Fixed",content:"# Change Log (4.x.x)\n\nThe format is based on Keep a Changelog, and this project adheres to Semantic Versioning.\n\nWhat is a breaking change?\n\n * The original configuration file may not work, for example, if a directive item is removed or renamed.\n * It may be necessary to update the build environment, such as installing new dependencies.\n\n\n# [4.0.0] - 2021-03-22 GMT+0800\n\n\n# WARNING\n\nThis version contains breaking changes.\n\n\n# Added\n\n * Added some parameters to waf_mode and waf_cc_deny_limit (368db2b).\n\n\n# Removed\n\n * Abort directive: waf_mult_mount. The function of this directive has been merged into the directive waf_mode.\n\n\n# Changed\n\n * Adds some parameters to the directive waf_mode.\n\n\n# Fixed\n\n * Fixed an error in the name of the built-in variable waf_rule_details, which was set to waf_rule_deatails in a previous version of the code.\n\n * No more superfluous inspections.\n\n * Completely resolve compatibility issues with the ngx_http_rewrite_module.",normalizedContent:"# change log (4.x.x)\n\nthe format is based on keep a changelog, and this project adheres to semantic versioning.\n\nwhat is a breaking change?\n\n * the original configuration file may not work, for example, if a directive item is removed or renamed.\n * it may be necessary to update the build environment, such as installing new dependencies.\n\n\n# [4.0.0] - 2021-03-22 gmt+0800\n\n\n# warning\n\nthis version contains breaking changes.\n\n\n# added\n\n * added some parameters to waf_mode and waf_cc_deny_limit (368db2b).\n\n\n# removed\n\n * abort directive: waf_mult_mount. the function of this directive has been merged into the directive waf_mode.\n\n\n# changed\n\n * adds some parameters to the directive waf_mode.\n\n\n# fixed\n\n * fixed an error in the name of the built-in variable waf_rule_details, which was set to waf_rule_deatails in a previous version of the code.\n\n * no more superfluous inspections.\n\n * completely resolve compatibility issues with the ngx_http_rewrite_module.",charsets:{}},{title:"5.x.x",frontmatter:{title:"5.x.x",lang:"en"},regularPath:"/changes/5_x_x.html",relativePath:"changes/5_x_x.md",key:"v-3ac42abc",path:"/changes/5_x_x.html",headers:[{level:2,title:"[5.5.1] - 2021-07-16 UTC+0800",slug:"_5-5-1-2021-07-16-utc-0800",normalizedTitle:"[5.5.1] - 2021-07-16 utc+0800",charIndex:343},{level:3,title:"Fixed",slug:"fixed",normalizedTitle:"fixed",charIndex:377},{level:2,title:"[5.5.0] - 2021-06-25 UTC+0800",slug:"_5-5-0-2021-06-25-utc-0800",normalizedTitle:"[5.5.0] - 2021-06-25 utc+0800",charIndex:470},{level:3,title:"Changed",slug:"changed",normalizedTitle:"changed",charIndex:504},{level:2,title:"[5.4.2] - 2021-06-15 UTC+0800",slug:"_5-4-2-2021-06-15-utc-0800",normalizedTitle:"[5.4.2] - 2021-06-15 utc+0800",charIndex:687},{level:3,title:"Fixed",slug:"fixed-2",normalizedTitle:"fixed",charIndex:377},{level:2,title:"[5.4.1] - 2021-06-09 UTC+0800",slug:"_5-4-1-2021-06-09-utc-0800",normalizedTitle:"[5.4.1] - 2021-06-09 utc+0800",charIndex:858},{level:3,title:"Fixed",slug:"fixed-3",normalizedTitle:"fixed",charIndex:377},{level:2,title:"[5.4.0] - 2021-06-03 UTC+0800",slug:"_5-4-0-2021-06-03-utc-0800",normalizedTitle:"[5.4.0] - 2021-06-03 utc+0800",charIndex:1032},{level:3,title:"NOTE",slug:"note",normalizedTitle:"note",charIndex:1066},{level:3,title:"Added",slug:"added",normalizedTitle:"added",charIndex:1209},{level:3,title:"Changed",slug:"changed-2",normalizedTitle:"changed",charIndex:504},{level:3,title:"Fixed",slug:"fixed-4",normalizedTitle:"fixed",charIndex:377},{level:2,title:"[5.3.2] - 2021-05-28 UTC+0800",slug:"_5-3-2-2021-05-28-utc-0800",normalizedTitle:"[5.3.2] - 2021-05-28 utc+0800",charIndex:1419},{level:3,title:"Fixed",slug:"fixed-5",normalizedTitle:"fixed",charIndex:377},{level:2,title:"[5.3.1] - 2021-05-26 GMT+0800",slug:"_5-3-1-2021-05-26-gmt-0800",normalizedTitle:"[5.3.1] - 2021-05-26 gmt+0800",charIndex:1528},{level:3,title:"Fixed",slug:"fixed-6",normalizedTitle:"fixed",charIndex:377},{level:2,title:"[5.3.0] - 2021-05-16 GMT+0800",slug:"_5-3-0-2021-05-16-gmt-0800",normalizedTitle:"[5.3.0] - 2021-05-16 gmt+0800",charIndex:1706},{level:3,title:"Added",slug:"added-2",normalizedTitle:"added",charIndex:1209},{level:3,title:"Changed",slug:"changed-3",normalizedTitle:"changed",charIndex:504},{level:3,title:"Fixed",slug:"fixed-7",normalizedTitle:"fixed",charIndex:377},{level:2,title:"[5.1.2] - 2021-04-30 GMT+0800",slug:"_5-1-2-2021-04-30-gmt-0800",normalizedTitle:"[5.1.2] - 2021-04-30 gmt+0800",charIndex:2219},{level:3,title:"Added",slug:"added-3",normalizedTitle:"added",charIndex:1209},{level:2,title:"[5.1.1] - 2021-04-23 GMT+0800",slug:"_5-1-1-2021-04-23-gmt-0800",normalizedTitle:"[5.1.1] - 2021-04-23 gmt+0800",charIndex:2471},{level:3,title:"Fixed",slug:"fixed-8",normalizedTitle:"fixed",charIndex:377},{level:2,title:"[5.1.0] - 2021-04-20 GMT+0800",slug:"_5-1-0-2021-04-20-gmt-0800",normalizedTitle:"[5.1.0] - 2021-04-20 gmt+0800",charIndex:2604},{level:3,title:"Added",slug:"added-4",normalizedTitle:"added",charIndex:1209},{level:2,title:"[5.0.0] - 2021-04-07 GMT+0800",slug:"_5-0-0-2021-04-07-gmt-0800",normalizedTitle:"[5.0.0] - 2021-04-07 gmt+0800",charIndex:2997},{level:3,title:"WARNING",slug:"warning",normalizedTitle:"warning",charIndex:3031},{level:3,title:"Added",slug:"added-5",normalizedTitle:"added",charIndex:1209},{level:3,title:"Removed",slug:"removed",normalizedTitle:"removed",charIndex:3573},{level:3,title:"Changed",slug:"changed-4",normalizedTitle:"changed",charIndex:504},{level:3,title:"Fixed",slug:"fixed-9",normalizedTitle:"fixed",charIndex:377}],lastUpdated:"1/10/2022, 3:38:27 PM",lastUpdatedTimestamp:1641829107e3,headersStr:"[5.5.1] - 2021-07-16 UTC+0800 Fixed [5.5.0] - 2021-06-25 UTC+0800 Changed [5.4.2] - 2021-06-15 UTC+0800 Fixed [5.4.1] - 2021-06-09 UTC+0800 Fixed [5.4.0] - 2021-06-03 UTC+0800 NOTE Added Changed Fixed [5.3.2] - 2021-05-28 UTC+0800 Fixed [5.3.1] - 2021-05-26 GMT+0800 Fixed [5.3.0] - 2021-05-16 GMT+0800 Added Changed Fixed [5.1.2] - 2021-04-30 GMT+0800 Added [5.1.1] - 2021-04-23 GMT+0800 Fixed [5.1.0] - 2021-04-20 GMT+0800 Added [5.0.0] - 2021-04-07 GMT+0800 WARNING Added Removed Changed Fixed",content:"# Change Log (5.x.x)\n\nThe format is based on Keep a Changelog, and this project adheres to Semantic Versioning.\n\nWhat is a breaking change?\n\n * The original configuration file may not work, for example, if a directive item is removed or renamed.\n * It may be necessary to update the build environment, such as installing new dependencies.\n\n\n# [5.5.1] - 2021-07-16 UTC+0800\n\n\n# Fixed\n\n * Segmentation fault.\n\n * Memory leak.\n\n----------------------------------------\n\n\n# [5.5.0] - 2021-06-25 UTC+0800\n\n\n# Changed\n\n * Because of high false positives, libinjection-based XSS attack detection has been disabled in working modes STD and DYNAMIC.\n\n----------------------------------------\n\n\n# [5.4.2] - 2021-06-15 UTC+0800\n\n\n# Fixed\n\n * When POST inspection is enabled, POST requests are not logged in the access log.\n\n----------------------------------------\n\n\n# [5.4.1] - 2021-06-09 UTC+0800\n\n\n# Fixed\n\n * The value of built-in variables may be wrong when the directive error_page is used.\n\n----------------------------------------\n\n\n# [5.4.0] - 2021-06-03 UTC+0800\n\n\n# NOTE\n\nThe clone link for libinjection has been replaced in this release. The new link is https://github.com/libinjection/libinjection.git.\n\n\n# Added\n\n * Anti XSS (powered by libinjection).\n\n\n# Changed\n\n * Add debug log related to built-in variable calculation.\n\n\n# Fixed\n\n * POST inspection is not working.\n\n----------------------------------------\n\n\n# [5.3.2] - 2021-05-28 UTC+0800\n\n\n# Fixed\n\n * Memory corruption.\n\n----------------------------------------\n\n\n# [5.3.1] - 2021-05-26 GMT+0800\n\n\n# Fixed\n\n * Sometimes the module does not compile even if the dependencies are installed correctly.\n\n----------------------------------------\n\n\n# [5.3.0] - 2021-05-16 GMT+0800\n\n\n# Added\n\n * New directive: waf_under_attack, which can be used when the site is under attack.\n\n * New directive: waf_http_status, which sets the HTTP status code returned when a request is blocked.\n\n * New built-in variable: $waf_blocking_log, not an empty string when the request is blocked for its value.\n\n\n# Changed\n\n * Update default rules.\n\n\n# Fixed\n\n * CC protection sometimes not work.\n\n * Cookie inspection sometimes not work.\n\n----------------------------------------\n\n\n# [5.1.2] - 2021-04-30 GMT+0800\n\n\n# Added\n\n * Support for detecting SQL injection (powered by libinjection). This feature can be enabled by enabling the mode LIB-INJECTION, see the documentation for details.\n\n----------------------------------------\n\n\n# [5.1.1] - 2021-04-23 GMT+0800\n\n\n# Fixed\n\n * URL and Referer whitelist are not working.\n\n----------------------------------------\n\n\n# [5.1.0] - 2021-04-20 GMT+0800\n\n\n# Added\n\n * New built-in variable waf_log, which is not an empty string when this module has performed a inspection, but an empty string otherwise, mainly used in the directive access_log.\n\n * New built-in variable waf_spend, which records the time (in milliseconds) taken by this module to perform the inspection.\n\n----------------------------------------\n\n\n# [5.0.0] - 2021-04-07 GMT+0800\n\n\n# WARNING\n\nThis version contains breaking changes.\n\n\n# Added\n\n * A new mode CACHE has been added, enabling this mode will cache the results of each inspection to improve performance.\n\n * New configuration waf_cache has been added to set parameters related to cache.\n\n * Added directive waf_cc_deny to set CC protection related parameters.\n\n * New directive waf_priority has been added to set the priority of all checks except for POST checks.\n\n * The Retry-Afte response header is appended when the CC protection returns a 503 status code.\n\n\n# Removed\n\n * The directive waf_cc_deny_limit is deprecated and replaced with the new directive waf_cc_deny.\n\n\n# Changed\n\n * Swaps the default priority of CC protection and IP whitelist inspection.\n\n\n# Fixed\n\n * Fixed a segmentation fault when the number of worker processes is greater than one.\n\n * Fixed a bug where CC protection statistics were sometimes inaccurate.",normalizedContent:"# change log (5.x.x)\n\nthe format is based on keep a changelog, and this project adheres to semantic versioning.\n\nwhat is a breaking change?\n\n * the original configuration file may not work, for example, if a directive item is removed or renamed.\n * it may be necessary to update the build environment, such as installing new dependencies.\n\n\n# [5.5.1] - 2021-07-16 utc+0800\n\n\n# fixed\n\n * segmentation fault.\n\n * memory leak.\n\n----------------------------------------\n\n\n# [5.5.0] - 2021-06-25 utc+0800\n\n\n# changed\n\n * because of high false positives, libinjection-based xss attack detection has been disabled in working modes std and dynamic.\n\n----------------------------------------\n\n\n# [5.4.2] - 2021-06-15 utc+0800\n\n\n# fixed\n\n * when post inspection is enabled, post requests are not logged in the access log.\n\n----------------------------------------\n\n\n# [5.4.1] - 2021-06-09 utc+0800\n\n\n# fixed\n\n * the value of built-in variables may be wrong when the directive error_page is used.\n\n----------------------------------------\n\n\n# [5.4.0] - 2021-06-03 utc+0800\n\n\n# note\n\nthe clone link for libinjection has been replaced in this release. the new link is https://github.com/libinjection/libinjection.git.\n\n\n# added\n\n * anti xss (powered by libinjection).\n\n\n# changed\n\n * add debug log related to built-in variable calculation.\n\n\n# fixed\n\n * post inspection is not working.\n\n----------------------------------------\n\n\n# [5.3.2] - 2021-05-28 utc+0800\n\n\n# fixed\n\n * memory corruption.\n\n----------------------------------------\n\n\n# [5.3.1] - 2021-05-26 gmt+0800\n\n\n# fixed\n\n * sometimes the module does not compile even if the dependencies are installed correctly.\n\n----------------------------------------\n\n\n# [5.3.0] - 2021-05-16 gmt+0800\n\n\n# added\n\n * new directive: waf_under_attack, which can be used when the site is under attack.\n\n * new directive: waf_http_status, which sets the http status code returned when a request is blocked.\n\n * new built-in variable: $waf_blocking_log, not an empty string when the request is blocked for its value.\n\n\n# changed\n\n * update default rules.\n\n\n# fixed\n\n * cc protection sometimes not work.\n\n * cookie inspection sometimes not work.\n\n----------------------------------------\n\n\n# [5.1.2] - 2021-04-30 gmt+0800\n\n\n# added\n\n * support for detecting sql injection (powered by libinjection). this feature can be enabled by enabling the mode lib-injection, see the documentation for details.\n\n----------------------------------------\n\n\n# [5.1.1] - 2021-04-23 gmt+0800\n\n\n# fixed\n\n * url and referer whitelist are not working.\n\n----------------------------------------\n\n\n# [5.1.0] - 2021-04-20 gmt+0800\n\n\n# added\n\n * new built-in variable waf_log, which is not an empty string when this module has performed a inspection, but an empty string otherwise, mainly used in the directive access_log.\n\n * new built-in variable waf_spend, which records the time (in milliseconds) taken by this module to perform the inspection.\n\n----------------------------------------\n\n\n# [5.0.0] - 2021-04-07 gmt+0800\n\n\n# warning\n\nthis version contains breaking changes.\n\n\n# added\n\n * a new mode cache has been added, enabling this mode will cache the results of each inspection to improve performance.\n\n * new configuration waf_cache has been added to set parameters related to cache.\n\n * added directive waf_cc_deny to set cc protection related parameters.\n\n * new directive waf_priority has been added to set the priority of all checks except for post checks.\n\n * the retry-afte response header is appended when the cc protection returns a 503 status code.\n\n\n# removed\n\n * the directive waf_cc_deny_limit is deprecated and replaced with the new directive waf_cc_deny.\n\n\n# changed\n\n * swaps the default priority of cc protection and ip whitelist inspection.\n\n\n# fixed\n\n * fixed a segmentation fault when the number of worker processes is greater than one.\n\n * fixed a bug where cc protection statistics were sometimes inaccurate.",charsets:{}},{title:"6.0.x",frontmatter:{title:"6.0.x",lang:"en"},regularPath:"/changes/6_0_x.html",relativePath:"changes/6_0_x.md",key:"v-0374659c",path:"/changes/6_0_x.html",headers:[{level:2,title:"[6.0.3] - 2021-08-02 UTC+0800",slug:"_6-0-3-2021-08-02-utc-0800",normalizedTitle:"[6.0.3] - 2021-08-02 utc+0800",charIndex:343},{level:3,title:"Fixed",slug:"fixed",normalizedTitle:"fixed",charIndex:377},{level:2,title:"[6.0.2] - 2021-08-01 UTC+0800",slug:"_6-0-2-2021-08-01-utc-0800",normalizedTitle:"[6.0.2] - 2021-08-01 utc+0800",charIndex:519},{level:3,title:"Fixed",slug:"fixed-2",normalizedTitle:"fixed",charIndex:377},{level:2,title:"[6.0.1] - 2021-07-30 UTC+0800",slug:"_6-0-1-2021-07-30-utc-0800",normalizedTitle:"[6.0.1] - 2021-07-30 utc+0800",charIndex:705},{level:3,title:"Deprecated",slug:"deprecated",normalizedTitle:"deprecated",charIndex:739},{level:3,title:"Changed",slug:"changed",normalizedTitle:"changed",charIndex:953},{level:3,title:"Fixed",slug:"fixed-3",normalizedTitle:"fixed",charIndex:377},{level:2,title:"[6.0.0] - 2021-07-21 UTC+0800",slug:"_6-0-0-2021-07-21-utc-0800",normalizedTitle:"[6.0.0] - 2021-07-21 utc+0800",charIndex:1141},{level:3,title:"NOTE",slug:"note",normalizedTitle:"note",charIndex:1175},{level:3,title:"Upgrade from 5.x.x to 6.x.x",slug:"upgrade-from-5-x-x-to-6-x-x",normalizedTitle:"upgrade from 5.x.x to 6.x.x",charIndex:1391},{level:3,title:"Pre-built modules",slug:"pre-built-modules",normalizedTitle:"pre-built modules",charIndex:1615},{level:3,title:"Added",slug:"added",normalizedTitle:"added",charIndex:2605},{level:3,title:"Removed",slug:"removed",normalizedTitle:"removed",charIndex:2684},{level:3,title:"Changed",slug:"changed-2",normalizedTitle:"changed",charIndex:953}],lastUpdated:"1/10/2022, 3:38:27 PM",lastUpdatedTimestamp:1641829107e3,headersStr:"[6.0.3] - 2021-08-02 UTC+0800 Fixed [6.0.2] - 2021-08-01 UTC+0800 Fixed [6.0.1] - 2021-07-30 UTC+0800 Deprecated Changed Fixed [6.0.0] - 2021-07-21 UTC+0800 NOTE Upgrade from 5.x.x to 6.x.x Pre-built modules Added Removed Changed",content:"# Change Log (6.0.x)\n\nThe format is based on Keep a Changelog, and this project adheres to Semantic Versioning.\n\nWhat is a breaking change?\n\n * The original configuration file may not work, for example, if a directive item is removed or renamed.\n * It may be necessary to update the build environment, such as installing new dependencies.\n\n\n# [6.0.3] - 2021-08-02 UTC+0800\n\n\n# Fixed\n\n * A segmentation fault may be raised when releasing resources from the virtual machine.\n\n----------------------------------------\n\n\n# [6.0.2] - 2021-08-01 UTC+0800\n\n\n# Fixed\n\n * The whitelist of URL and Referer in the upper-level configuration cannot be inherited properly.\n\n----------------------------------------\n\n\n# [6.0.1] - 2021-07-30 UTC+0800\n\n\n# Deprecated\n\n * Deprecates the parameters interval and percent of the directive waf_cache, but does not remove them, only that they no longer have any effect. These two parameters will be removed in the future.\n\n\n# Changed\n\n * Improved performance of CC protection.\n\n\n# Fixed\n\n * Extreme cases may waste a lot of memory. Thanks to @RekGRpth for their help.\n\n----------------------------------------\n\n\n# [6.0.0] - 2021-07-21 UTC+0800\n\n\n# NOTE\n\n * This release contains some breaking changes.\n\n * Advanced rules have a high performance cost because the principle is to compile the rules into a series of instructions that are then executed by the VM.\n\n\n# Upgrade from 5.x.x to 6.x.x\n\n 1. Create a new empty file named advanced in the rules directory.\n\n 2. If the directive waf_priority is used, you can delete it or modify it according to the directive in the documentation.\n\n\n# Pre-built modules\n\nWe now provide pre-compiled modules that can be used as long as the following requirements are met.\n\n 1. The version of nginx must be the latest stable or mainline version.\n 2. The C standard library implementation must be the GNU implementation or the MUSL implementation.\n\n> The download script will automatically check if the second condition is met.\n\nYou can execute assets/download.sh to download the corresponding version of the module and save it to the current directory. Here is the use case.\n\n# nginx-stable ngx_waf-stable\nsh assets/download stable stable\n\n# nginx-mainline ngx_waf-stable\nsh assets/download mainline stable\n\n# nginx-stable ngx_waf-beta\nsh assets/download stable beta\n\n# nginx-mainline ngx_waf-beta\nsh assets/download mainline beta\n\n\n> Each update takes about an hour and a half to compile the module, so it is recommended that you download the updated module more than two hours after the update, otherwise you may download the old module.\n\n\n# Added\n\n * Advanced rules are supported, see the documentation for details.\n\n\n# Removed\n\n * Remove mode COMPAT, no longer fully compatible with ngx_http_rewrite_module.\n\n\n# Changed\n\n * Updated the directive waf_priority, see the documentation for details.\n\n * You can now use all the directives of this module in blocks http, server and location",normalizedContent:"# change log (6.0.x)\n\nthe format is based on keep a changelog, and this project adheres to semantic versioning.\n\nwhat is a breaking change?\n\n * the original configuration file may not work, for example, if a directive item is removed or renamed.\n * it may be necessary to update the build environment, such as installing new dependencies.\n\n\n# [6.0.3] - 2021-08-02 utc+0800\n\n\n# fixed\n\n * a segmentation fault may be raised when releasing resources from the virtual machine.\n\n----------------------------------------\n\n\n# [6.0.2] - 2021-08-01 utc+0800\n\n\n# fixed\n\n * the whitelist of url and referer in the upper-level configuration cannot be inherited properly.\n\n----------------------------------------\n\n\n# [6.0.1] - 2021-07-30 utc+0800\n\n\n# deprecated\n\n * deprecates the parameters interval and percent of the directive waf_cache, but does not remove them, only that they no longer have any effect. these two parameters will be removed in the future.\n\n\n# changed\n\n * improved performance of cc protection.\n\n\n# fixed\n\n * extreme cases may waste a lot of memory. thanks to @rekgrpth for their help.\n\n----------------------------------------\n\n\n# [6.0.0] - 2021-07-21 utc+0800\n\n\n# note\n\n * this release contains some breaking changes.\n\n * advanced rules have a high performance cost because the principle is to compile the rules into a series of instructions that are then executed by the vm.\n\n\n# upgrade from 5.x.x to 6.x.x\n\n 1. create a new empty file named advanced in the rules directory.\n\n 2. if the directive waf_priority is used, you can delete it or modify it according to the directive in the documentation.\n\n\n# pre-built modules\n\nwe now provide pre-compiled modules that can be used as long as the following requirements are met.\n\n 1. the version of nginx must be the latest stable or mainline version.\n 2. the c standard library implementation must be the gnu implementation or the musl implementation.\n\n> the download script will automatically check if the second condition is met.\n\nyou can execute assets/download.sh to download the corresponding version of the module and save it to the current directory. here is the use case.\n\n# nginx-stable ngx_waf-stable\nsh assets/download stable stable\n\n# nginx-mainline ngx_waf-stable\nsh assets/download mainline stable\n\n# nginx-stable ngx_waf-beta\nsh assets/download stable beta\n\n# nginx-mainline ngx_waf-beta\nsh assets/download mainline beta\n\n\n> each update takes about an hour and a half to compile the module, so it is recommended that you download the updated module more than two hours after the update, otherwise you may download the old module.\n\n\n# added\n\n * advanced rules are supported, see the documentation for details.\n\n\n# removed\n\n * remove mode compat, no longer fully compatible with ngx_http_rewrite_module.\n\n\n# changed\n\n * updated the directive waf_priority, see the documentation for details.\n\n * you can now use all the directives of this module in blocks http, server and location",charsets:{}},{title:"Current",frontmatter:{title:"Current",lang:"en"},regularPath:"/changes/current.html",relativePath:"changes/current.md",key:"v-be96f388",path:"/changes/current.html",headers:[{level:2,title:"[Unreleased]",slug:"unreleased",normalizedTitle:"[unreleased]",charIndex:345},{level:3,title:"Added",slug:"added",normalizedTitle:"added",charIndex:362},{level:3,title:"Removed",slug:"removed",normalizedTitle:"removed",charIndex:372},{level:3,title:"Changed",slug:"changed",normalizedTitle:"changed",charIndex:384},{level:3,title:"Fixed",slug:"fixed",normalizedTitle:"fixed",charIndex:396},{level:2,title:"[10.1.1] - 2022-01-07 UTC+0800",slug:"_10-1-1-2022-01-07-utc-0800",normalizedTitle:"[10.1.1] - 2022-01-07 utc+0800",charIndex:448},{level:3,title:"Added",slug:"added-2",normalizedTitle:"added",charIndex:362},{level:3,title:"Fixed",slug:"fixed-2",normalizedTitle:"fixed",charIndex:396},{level:2,title:"[10.1.0] - 2021-12-14 UTC+0800",slug:"_10-1-0-2021-12-14-utc-0800",normalizedTitle:"[10.1.0] - 2021-12-14 utc+0800",charIndex:664},{level:3,title:"Added",slug:"added-3",normalizedTitle:"added",charIndex:362},{level:3,title:"Fixed",slug:"fixed-3",normalizedTitle:"fixed",charIndex:396},{level:2,title:"[10.0.1] - 2021-12-05 UTC+0800",slug:"_10-0-1-2021-12-05-utc-0800",normalizedTitle:"[10.0.1] - 2021-12-05 utc+0800",charIndex:1194},{level:3,title:"Added",slug:"added-4",normalizedTitle:"added",charIndex:362},{level:3,title:"Fixed",slug:"fixed-4",normalizedTitle:"fixed",charIndex:396},{level:2,title:"[10.0.0] - 2021-11-30 UTC+0800",slug:"_10-0-0-2021-11-30-utc-0800",normalizedTitle:"[10.0.0] - 2021-11-30 utc+0800",charIndex:1543},{level:3,title:"Added",slug:"added-5",normalizedTitle:"added",charIndex:362},{level:3,title:"Removed",slug:"removed-2",normalizedTitle:"removed",charIndex:372},{level:3,title:"Changed",slug:"changed-2",normalizedTitle:"changed",charIndex:384},{level:2,title:"[9.0.6] - 2021-10-10 UTC+0800",slug:"_9-0-6-2021-10-10-utc-0800",normalizedTitle:"[9.0.6] - 2021-10-10 utc+0800",charIndex:3507},{level:3,title:"Fixed",slug:"fixed-5",normalizedTitle:"fixed",charIndex:396},{level:2,title:"[9.0.5] - 2021-10-09 UTC+0800",slug:"_9-0-5-2021-10-09-utc-0800",normalizedTitle:"[9.0.5] - 2021-10-09 utc+0800",charIndex:3655},{level:3,title:"New test suite",slug:"new-test-suite",normalizedTitle:"new test suite",charIndex:3689},{level:3,title:"Changed",slug:"changed-3",normalizedTitle:"changed",charIndex:384},{level:3,title:"Fixed",slug:"fixed-6",normalizedTitle:"fixed",charIndex:396},{level:2,title:"[9.0.4] - 2021-09-29 UTC+0800",slug:"_9-0-4-2021-09-29-utc-0800",normalizedTitle:"[9.0.4] - 2021-09-29 utc+0800",charIndex:4740},{level:3,title:"Fixed",slug:"fixed-7",normalizedTitle:"fixed",charIndex:396},{level:2,title:"[9.0.3] - 2021-09-28 UTC+0800",slug:"_9-0-3-2021-09-28-utc-0800",normalizedTitle:"[9.0.3] - 2021-09-28 utc+0800",charIndex:4926},{level:3,title:"Changed",slug:"changed-4",normalizedTitle:"changed",charIndex:384},{level:3,title:"Fixed",slug:"fixed-8",normalizedTitle:"fixed",charIndex:396},{level:2,title:"[9.0.2] - 2021-09-25 UTC+0800",slug:"_9-0-2-2021-09-25-utc-0800",normalizedTitle:"[9.0.2] - 2021-09-25 utc+0800",charIndex:5085},{level:3,title:"Fixed",slug:"fixed-9",normalizedTitle:"fixed",charIndex:396},{level:2,title:"[9.0.1] - 2021-09-24 UTC+0800",slug:"_9-0-1-2021-09-24-utc-0800",normalizedTitle:"[9.0.1] - 2021-09-24 utc+0800",charIndex:5248},{level:3,title:"Fixed",slug:"fixed-10",normalizedTitle:"fixed",charIndex:396},{level:2,title:"[9.0.0] - 2021-09-23 UTC+0800",slug:"_9-0-0-2021-09-23-utc-0800",normalizedTitle:"[9.0.0] - 2021-09-23 utc+0800",charIndex:5375},{level:3,title:"NOTE",slug:"note",normalizedTitle:"note",charIndex:5409},{level:3,title:"Added",slug:"added-6",normalizedTitle:"added",charIndex:362},{level:3,title:"Removed",slug:"removed-3",normalizedTitle:"removed",charIndex:372},{level:3,title:"Fixes",slug:"fixes",normalizedTitle:"fixes",charIndex:5942},{level:2,title:"[8.0.3] - 2021-08-27 UTC+0800",slug:"_8-0-3-2021-08-27-utc-0800",normalizedTitle:"[8.0.3] - 2021-08-27 utc+0800",charIndex:6166},{level:3,title:"Fixed",slug:"fixed-11",normalizedTitle:"fixed",charIndex:396},{level:2,title:"[8.0.2] - 2021-08-27 UTC+0800",slug:"_8-0-2-2021-08-27-utc-0800",normalizedTitle:"[8.0.2] - 2021-08-27 utc+0800",charIndex:6399},{level:3,title:"Fixed",slug:"fixed-12",normalizedTitle:"fixed",charIndex:396},{level:2,title:"[8.0.1] - 2021-08-23 UTC+0800",slug:"_8-0-1-2021-08-23-utc-0800",normalizedTitle:"[8.0.1] - 2021-08-23 utc+0800",charIndex:6848},{level:3,title:"Added",slug:"added-7",normalizedTitle:"added",charIndex:362},{level:3,title:"Fixed",slug:"fixed-13",normalizedTitle:"fixed",charIndex:396},{level:2,title:"[8.0.0] - 2021-08-21 UTC+0800",slug:"_8-0-0-2021-08-21-utc-0800",normalizedTitle:"[8.0.0] - 2021-08-21 utc+0800",charIndex:7158},{level:3,title:"NOTE",slug:"note-2",normalizedTitle:"note",charIndex:5409},{level:3,title:"Added",slug:"added-8",normalizedTitle:"added",charIndex:362},{level:3,title:"Changed",slug:"changed-5",normalizedTitle:"changed",charIndex:384},{level:3,title:"Removed",slug:"removed-4",normalizedTitle:"removed",charIndex:372},{level:2,title:"[7.1.0] - 2021-08-16 UTC+0800",slug:"_7-1-0-2021-08-16-utc-0800",normalizedTitle:"[7.1.0] - 2021-08-16 utc+0800",charIndex:8458},{level:3,title:"Added",slug:"added-9",normalizedTitle:"added",charIndex:362},{level:2,title:"[7.0.1] - 2021-08-11 UTC+0800",slug:"_7-0-1-2021-08-11-utc-0800",normalizedTitle:"[7.0.1] - 2021-08-11 utc+0800",charIndex:8690},{level:3,title:"Fixed",slug:"fixed-14",normalizedTitle:"fixed",charIndex:396},{level:2,title:"[7.0.0] - 2021-08-04 UTC+0800",slug:"_7-0-0-2021-08-04-utc-0800",normalizedTitle:"[7.0.0] - 2021-08-04 utc+0800",charIndex:8915},{level:3,title:"Changed",slug:"changed-6",normalizedTitle:"changed",charIndex:384}],lastUpdated:"1/10/2022, 3:38:27 PM",lastUpdatedTimestamp:1641829107e3,headersStr:"[Unreleased] Added Removed Changed Fixed [10.1.1] - 2022-01-07 UTC+0800 Added Fixed [10.1.0] - 2021-12-14 UTC+0800 Added Fixed [10.0.1] - 2021-12-05 UTC+0800 Added Fixed [10.0.0] - 2021-11-30 UTC+0800 Added Removed Changed [9.0.6] - 2021-10-10 UTC+0800 Fixed [9.0.5] - 2021-10-09 UTC+0800 New test suite Changed Fixed [9.0.4] - 2021-09-29 UTC+0800 Fixed [9.0.3] - 2021-09-28 UTC+0800 Changed Fixed [9.0.2] - 2021-09-25 UTC+0800 Fixed [9.0.1] - 2021-09-24 UTC+0800 Fixed [9.0.0] - 2021-09-23 UTC+0800 NOTE Added Removed Fixes [8.0.3] - 2021-08-27 UTC+0800 Fixed [8.0.2] - 2021-08-27 UTC+0800 Fixed [8.0.1] - 2021-08-23 UTC+0800 Added Fixed [8.0.0] - 2021-08-21 UTC+0800 NOTE Added Changed Removed [7.1.0] - 2021-08-16 UTC+0800 Added [7.0.1] - 2021-08-11 UTC+0800 Fixed [7.0.0] - 2021-08-04 UTC+0800 Changed",content:"# Change Log (Current)\n\nThe format is based on Keep a Changelog, and this project adheres to Semantic Versioning.\n\nWhat is a breaking change?\n\n * The original configuration file may not work, for example, if a directive item is removed or renamed.\n * It may be necessary to update the build environment, such as installing new dependencies.\n\n\n# [Unreleased]\n\n\n# Added\n\n\n# Removed\n\n\n# Changed\n\n\n# Fixed\n\n----------------------------------------\n\n\n# [10.1.1] - 2022-01-07 UTC+0800\n\n\n# Added\n\n * PCRE2 library support.\n\n\n# Fixed\n\n * Memory leak.\n\n * CAPTCHA and Under-Attack-Mode sometimes cause infinite page refreshes.\n\n----------------------------------------\n\n\n# [10.1.0] - 2021-12-14 UTC+0800\n\n\n# Added\n\n * You can set the directive waf to bypass, in which case no requests will be intercepted, but ngx_waf will still do the detection and logging.\n\n * The directive waf_verify_bot has a new parameter SogouSpider, which is used to verify if it is a Sogou crawler.\n\n\n# Fixed\n\n * Garbage collection is not running, which does not lead to memory leaks, but does lead to performance problems.\n\n * Sometimes the [FAKE-BOT] log is printed incorrectly.\n\n----------------------------------------\n\n\n# [10.0.1] - 2021-12-05 UTC+0800\n\n\n# Added\n\n * Added two Easter eggs, which you can find clues in the documentation. These two eggs are not triggered automatically and need to be enabled manually.\n\n\n# Fixed\n\n * All parameters of the directive waf_mode corresponding to the request method are not working.\n\n----------------------------------------\n\n\n# [10.0.0] - 2021-11-30 UTC+0800\n\n\n# Added\n\n * New directive waf_zone, used to declare a piece of shared memory that will be used for other directives, such as waf_cc_deny.\n\n * New directive waf_action, used to set actions after intercepting a request, such as returning a specific status code or challenging the client with a captcha.\n\n * New directive waf_block_page, used to set the blocking page to return the specified HTML file when the request is blocked.\n\n * A new embedded variable, $waf_rate, is used to indicate the number of accesses to the current IP in a period. The period is determined by the parameter rate of the directive waf_cc_deny, or by the parameter duration if the IP has been blacked out.\n\n * The directive waf_captcha has a new parameter max_fails, which sets the maximum number of attempts for the captcha and the blocking time after it is exceeded.\n\n * The directive waf_captcha has a new parameter zone that specifies a piece of shared memory, which needs to be set if and only if the parameter max_fails is set.\n\n * The directive waf_captcha has a new parameter sitekey, which needs to be set if and only if the parameter file is omitted.\n\n * When you reload nginx, the module keeps as much information in shared memory as possible so that it is not emptied, such as statistics used by CC protection.\n\n\n# Removed\n\n * The directive waf_http_status has been removed and the related features have been merged into the directive waf_action.\n\n * The parameter size of the directive waf_cc_deny has been removed and zone is now used instead.\n\n\n# Changed\n\n * You can omit the parameter file of the directive waf_under_attack; omitting this parameter will use a built-in file from assets/under_attack.html.\n\n * You can omit the argument file to the directive waf_captcha, which when omitted will use a built-in file based on the value of the argument prov, which comes from the directory assets/.\n\n----------------------------------------\n\n\n# [9.0.6] - 2021-10-10 UTC+0800\n\n\n# Fixed\n\n * If the directive try_files is executed, CAPTCHA may fail.\n\n----------------------------------------\n\n\n# [9.0.5] - 2021-10-09 UTC+0800\n\n\n# New test suite\n\nBy chance, I found a test suite: test-nginx. It looked great, so I wrote a lot of test cases and tested with it. Unfortunately I found a lot of bugs, very wise of me.\n\n\n# Changed\n\n * Removed useless debug log.\n\n * More debug log.\n\n\n# Fixed\n\n * Sometimes the connection is closed prematurely.\n\n * When CAPTCHA is enabled, the request body inspection may be wrong.\n\n * CAPTCHA may fail due to HTTP caching.\n\n * Memory leak when reloading nginx.\n\n * Failed to properly merge directive waf_cache from different contexts.\n\n * Failed to properly merge directives waf_cc_deny from different contexts.\n\n * Failed to inherit Referer blacklist different contexts.\n\n * Failed to properly handle incorrect command syntax.\n\n * Fixed a default rule of URL.\n\n * Fixed the following files so that the page can be refreshed automatically after the CAPTCHA is completed.\n   \n   * assets/hCaptcha.html\n   * assets/reCAPTCHAv2_Checkbox.html\n   * assets/reCAPTCHAv2_Invisible.html\n   * assets/reCAPTCHAv3.html\n\n----------------------------------------\n\n\n# [9.0.4] - 2021-09-29 UTC+0800\n\n\n# Fixed\n\n * All inspections are incorrectly skipped when the directive rewrite causes an internal redirect.\n\n----------------------------------------\n\n\n# [9.0.3] - 2021-09-28 UTC+0800\n\n\n# Changed\n\n * More debug logs.\n\n\n# Fixed\n\n * Failed to display the CAPTCHA page.\n\n----------------------------------------\n\n\n# [9.0.2] - 2021-09-25 UTC+0800\n\n\n# Fixed\n\n * Sometimes the value of the built-in variable $waf_blocking_log is wrong.\n\n----------------------------------------\n\n\n# [9.0.1] - 2021-09-24 UTC+0800\n\n\n# Fixed\n\n * Failed to load rules of ModSecurity.\n\n----------------------------------------\n\n\n# [9.0.0] - 2021-09-23 UTC+0800\n\n\n# NOTE\n\nIf you would like to upgrade to this version, please see the documentation for guidelines on upgrading across versions.\n\n\n# Added\n\n * Compatible with ModSecurity.\n\n * Added two directives: waf_modsecurity and waf_modsecurity_transaction_id.\n\n * Added parameter MODSECURITY to directive waf_priority.\n\n\n# Removed\n\n * Removed some parameters for directive waf_mode: LIBINJECTION, LIBINJECTION-SQLI, LIBINJECTION-XSS and ADV.\n\n * Removed the parameter ADV from the directive waf_priority.\n\n * Removed dependency libinjection.\n\n\n# Fixes\n\n * No longer returns a 404 status code when the captcha succeeds, but a 204 status code instead.\n\n * Sometimes a complete inspection of the request body is not performed.\n\n----------------------------------------\n\n\n# [8.0.3] - 2021-08-27 UTC+0800\n\n\n# Fixed\n\n * Memory leak.\n\n * A field of a structure is not initialized, so you will see a lot of malloc(size) failed (12: Out of memory) in the error log.\n\n----------------------------------------\n\n\n# [8.0.2] - 2021-08-27 UTC+0800\n\n\n# Fixed\n\n * nginx crashes(segmentation fault) after enabling CAPTCHA because the directive waf_captcha was not properly merged with different contexts.\n\n * CAPTCHA page cannot be displayed because the directive waf_captcha was not properly merged with different contexts.\n\n * If the directive proxy_pass is used, neither Under-Attack-Mode nor CAPTCHA will work properly.\n\n----------------------------------------\n\n\n# [8.0.1] - 2021-08-23 UTC+0800\n\n\n# Added\n\n * No longer generates additional response headers when CC protection returns the status code 444.\n\n\n# Fixed\n\n * Segmentation fault when User-Agent is empty.\n\n * The directive waf_http_status could not be merged correctly.\n\n----------------------------------------\n\n\n# [8.0.0] - 2021-08-21 UTC+0800\n\n\n# NOTE\n\nIf you would like to upgrade to this version, please see the documentation for guidelines on upgrading across versions.\n\n\n# Added\n\n * Introduced CAPTCHAs for third-party platforms, supporting hCaptcha, reCAPTCHAv2 and reCAPTCHAv3, with the associated directive waf_captcha.\n\n * Support recognizing friendly crawlers, including GooleBot, BingBot, BaiduSpider and YandexBot, and automatically allow them after successful recognition, the related command is waf_verify_bot.\n\n * CC protection supports enabling CAPTCHA mode, which enables CAPTCHA when the request rate exceeds the limit, and blocks the IP if the CAPTCHA fails three times in a row, and recounts the request rate on the contrary.\n\n\n# Changed\n\n * The syntax of the directive waf_mode has changed, see the documentation for a guide to cross-version upgrades.\n\n * The syntax of the directive waf_cc_deny has changed, see the documented guide to cross-version upgrades for details.\n\n * The syntax of the directive waf_cache has been changed, see the cross-version upgrade guide in the documentation.\n\n * Support for modifying the priority of request body inspection.\n\n\n# Removed\n\n * Removed two parameters of the directive waf_cache: interval and percent.\n\n----------------------------------------\n\n\n# [7.1.0] - 2021-08-16 UTC+0800\n\n\n# Added\n\n * The parameter rate of the directive waf_cc_deny allows more formats, such as 500r/s, 500r/60s, 500r/m, 500r/60m, 500r/h, 500r/60h and 500r/d.\n\n----------------------------------------\n\n\n# [7.0.1] - 2021-08-11 UTC+0800\n\n\n# Fixed\n\n * Failed to parse 0.0.0.0/0 correctly when handling IP black and white lists.\n\n * Compatible with environments that do not support IPV6.\n\n----------------------------------------\n\n\n# [7.0.0] - 2021-08-04 UTC+0800\n\n\n# Changed\n\n * Changed the way Under Attack Mode is implemented. It is no longer implemented using redirects, but by modifying the response body.\n\n * Removed directive uri from configuration item waf_under_attack, see documentation for details.\n\n * Added a directive file to the configuration item waf_under_attack whose value should be the absolute path to an HTML file, see the documentation for details.\n\n * The directive waf_cc_deny is not allowed at the context httpã",normalizedContent:"# change log (current)\n\nthe format is based on keep a changelog, and this project adheres to semantic versioning.\n\nwhat is a breaking change?\n\n * the original configuration file may not work, for example, if a directive item is removed or renamed.\n * it may be necessary to update the build environment, such as installing new dependencies.\n\n\n# [unreleased]\n\n\n# added\n\n\n# removed\n\n\n# changed\n\n\n# fixed\n\n----------------------------------------\n\n\n# [10.1.1] - 2022-01-07 utc+0800\n\n\n# added\n\n * pcre2 library support.\n\n\n# fixed\n\n * memory leak.\n\n * captcha and under-attack-mode sometimes cause infinite page refreshes.\n\n----------------------------------------\n\n\n# [10.1.0] - 2021-12-14 utc+0800\n\n\n# added\n\n * you can set the directive waf to bypass, in which case no requests will be intercepted, but ngx_waf will still do the detection and logging.\n\n * the directive waf_verify_bot has a new parameter sogouspider, which is used to verify if it is a sogou crawler.\n\n\n# fixed\n\n * garbage collection is not running, which does not lead to memory leaks, but does lead to performance problems.\n\n * sometimes the [fake-bot] log is printed incorrectly.\n\n----------------------------------------\n\n\n# [10.0.1] - 2021-12-05 utc+0800\n\n\n# added\n\n * added two easter eggs, which you can find clues in the documentation. these two eggs are not triggered automatically and need to be enabled manually.\n\n\n# fixed\n\n * all parameters of the directive waf_mode corresponding to the request method are not working.\n\n----------------------------------------\n\n\n# [10.0.0] - 2021-11-30 utc+0800\n\n\n# added\n\n * new directive waf_zone, used to declare a piece of shared memory that will be used for other directives, such as waf_cc_deny.\n\n * new directive waf_action, used to set actions after intercepting a request, such as returning a specific status code or challenging the client with a captcha.\n\n * new directive waf_block_page, used to set the blocking page to return the specified html file when the request is blocked.\n\n * a new embedded variable, $waf_rate, is used to indicate the number of accesses to the current ip in a period. the period is determined by the parameter rate of the directive waf_cc_deny, or by the parameter duration if the ip has been blacked out.\n\n * the directive waf_captcha has a new parameter max_fails, which sets the maximum number of attempts for the captcha and the blocking time after it is exceeded.\n\n * the directive waf_captcha has a new parameter zone that specifies a piece of shared memory, which needs to be set if and only if the parameter max_fails is set.\n\n * the directive waf_captcha has a new parameter sitekey, which needs to be set if and only if the parameter file is omitted.\n\n * when you reload nginx, the module keeps as much information in shared memory as possible so that it is not emptied, such as statistics used by cc protection.\n\n\n# removed\n\n * the directive waf_http_status has been removed and the related features have been merged into the directive waf_action.\n\n * the parameter size of the directive waf_cc_deny has been removed and zone is now used instead.\n\n\n# changed\n\n * you can omit the parameter file of the directive waf_under_attack; omitting this parameter will use a built-in file from assets/under_attack.html.\n\n * you can omit the argument file to the directive waf_captcha, which when omitted will use a built-in file based on the value of the argument prov, which comes from the directory assets/.\n\n----------------------------------------\n\n\n# [9.0.6] - 2021-10-10 utc+0800\n\n\n# fixed\n\n * if the directive try_files is executed, captcha may fail.\n\n----------------------------------------\n\n\n# [9.0.5] - 2021-10-09 utc+0800\n\n\n# new test suite\n\nby chance, i found a test suite: test-nginx. it looked great, so i wrote a lot of test cases and tested with it. unfortunately i found a lot of bugs, very wise of me.\n\n\n# changed\n\n * removed useless debug log.\n\n * more debug log.\n\n\n# fixed\n\n * sometimes the connection is closed prematurely.\n\n * when captcha is enabled, the request body inspection may be wrong.\n\n * captcha may fail due to http caching.\n\n * memory leak when reloading nginx.\n\n * failed to properly merge directive waf_cache from different contexts.\n\n * failed to properly merge directives waf_cc_deny from different contexts.\n\n * failed to inherit referer blacklist different contexts.\n\n * failed to properly handle incorrect command syntax.\n\n * fixed a default rule of url.\n\n * fixed the following files so that the page can be refreshed automatically after the captcha is completed.\n   \n   * assets/hcaptcha.html\n   * assets/recaptchav2_checkbox.html\n   * assets/recaptchav2_invisible.html\n   * assets/recaptchav3.html\n\n----------------------------------------\n\n\n# [9.0.4] - 2021-09-29 utc+0800\n\n\n# fixed\n\n * all inspections are incorrectly skipped when the directive rewrite causes an internal redirect.\n\n----------------------------------------\n\n\n# [9.0.3] - 2021-09-28 utc+0800\n\n\n# changed\n\n * more debug logs.\n\n\n# fixed\n\n * failed to display the captcha page.\n\n----------------------------------------\n\n\n# [9.0.2] - 2021-09-25 utc+0800\n\n\n# fixed\n\n * sometimes the value of the built-in variable $waf_blocking_log is wrong.\n\n----------------------------------------\n\n\n# [9.0.1] - 2021-09-24 utc+0800\n\n\n# fixed\n\n * failed to load rules of modsecurity.\n\n----------------------------------------\n\n\n# [9.0.0] - 2021-09-23 utc+0800\n\n\n# note\n\nif you would like to upgrade to this version, please see the documentation for guidelines on upgrading across versions.\n\n\n# added\n\n * compatible with modsecurity.\n\n * added two directives: waf_modsecurity and waf_modsecurity_transaction_id.\n\n * added parameter modsecurity to directive waf_priority.\n\n\n# removed\n\n * removed some parameters for directive waf_mode: libinjection, libinjection-sqli, libinjection-xss and adv.\n\n * removed the parameter adv from the directive waf_priority.\n\n * removed dependency libinjection.\n\n\n# fixes\n\n * no longer returns a 404 status code when the captcha succeeds, but a 204 status code instead.\n\n * sometimes a complete inspection of the request body is not performed.\n\n----------------------------------------\n\n\n# [8.0.3] - 2021-08-27 utc+0800\n\n\n# fixed\n\n * memory leak.\n\n * a field of a structure is not initialized, so you will see a lot of malloc(size) failed (12: out of memory) in the error log.\n\n----------------------------------------\n\n\n# [8.0.2] - 2021-08-27 utc+0800\n\n\n# fixed\n\n * nginx crashes(segmentation fault) after enabling captcha because the directive waf_captcha was not properly merged with different contexts.\n\n * captcha page cannot be displayed because the directive waf_captcha was not properly merged with different contexts.\n\n * if the directive proxy_pass is used, neither under-attack-mode nor captcha will work properly.\n\n----------------------------------------\n\n\n# [8.0.1] - 2021-08-23 utc+0800\n\n\n# added\n\n * no longer generates additional response headers when cc protection returns the status code 444.\n\n\n# fixed\n\n * segmentation fault when user-agent is empty.\n\n * the directive waf_http_status could not be merged correctly.\n\n----------------------------------------\n\n\n# [8.0.0] - 2021-08-21 utc+0800\n\n\n# note\n\nif you would like to upgrade to this version, please see the documentation for guidelines on upgrading across versions.\n\n\n# added\n\n * introduced captchas for third-party platforms, supporting hcaptcha, recaptchav2 and recaptchav3, with the associated directive waf_captcha.\n\n * support recognizing friendly crawlers, including goolebot, bingbot, baiduspider and yandexbot, and automatically allow them after successful recognition, the related command is waf_verify_bot.\n\n * cc protection supports enabling captcha mode, which enables captcha when the request rate exceeds the limit, and blocks the ip if the captcha fails three times in a row, and recounts the request rate on the contrary.\n\n\n# changed\n\n * the syntax of the directive waf_mode has changed, see the documentation for a guide to cross-version upgrades.\n\n * the syntax of the directive waf_cc_deny has changed, see the documented guide to cross-version upgrades for details.\n\n * the syntax of the directive waf_cache has been changed, see the cross-version upgrade guide in the documentation.\n\n * support for modifying the priority of request body inspection.\n\n\n# removed\n\n * removed two parameters of the directive waf_cache: interval and percent.\n\n----------------------------------------\n\n\n# [7.1.0] - 2021-08-16 utc+0800\n\n\n# added\n\n * the parameter rate of the directive waf_cc_deny allows more formats, such as 500r/s, 500r/60s, 500r/m, 500r/60m, 500r/h, 500r/60h and 500r/d.\n\n----------------------------------------\n\n\n# [7.0.1] - 2021-08-11 utc+0800\n\n\n# fixed\n\n * failed to parse 0.0.0.0/0 correctly when handling ip black and white lists.\n\n * compatible with environments that do not support ipv6.\n\n----------------------------------------\n\n\n# [7.0.0] - 2021-08-04 utc+0800\n\n\n# changed\n\n * changed the way under attack mode is implemented. it is no longer implemented using redirects, but by modifying the response body.\n\n * removed directive uri from configuration item waf_under_attack, see documentation for details.\n\n * added a directive file to the configuration item waf_under_attack whose value should be the absolute path to an html file, see the documentation for details.\n\n * the directive waf_cc_deny is not allowed at the context httpã",charsets:{}},{title:"Long-term Support (LTS)",frontmatter:{title:"Long-term Support (LTS)",lang:"en"},regularPath:"/changes/lts.html",relativePath:"changes/lts.md",key:"v-662c0cfc",path:"/changes/lts.html",headers:[{level:2,title:"[Unreleased]",slug:"unreleased",normalizedTitle:"[unreleased]",charIndex:341},{level:3,title:"Added",slug:"added",normalizedTitle:"added",charIndex:358},{level:3,title:"Removed",slug:"removed",normalizedTitle:"removed",charIndex:368},{level:3,title:"Changed",slug:"changed",normalizedTitle:"changed",charIndex:380},{level:3,title:"Fixed",slug:"fixed",normalizedTitle:"fixed",charIndex:392},{level:2,title:"[6.1.8] - 2022-01-07 UTC+0800",slug:"_6-1-8-2022-01-07-utc-0800",normalizedTitle:"[6.1.8] - 2022-01-07 utc+0800",charIndex:444},{level:3,title:"Fixed",slug:"fixed-2",normalizedTitle:"fixed",charIndex:392},{level:2,title:"[6.1.7] - 2021-12-05 UTC+0800",slug:"_6-1-7-2021-12-05-utc-0800",normalizedTitle:"[6.1.7] - 2021-12-05 utc+0800",charIndex:547},{level:3,title:"Fixed",slug:"fixed-3",normalizedTitle:"fixed",charIndex:392},{level:2,title:"[6.1.6] - 2021-10-10 UTC+0800",slug:"_6-1-6-2021-10-10-utc-0800",normalizedTitle:"[6.1.6] - 2021-10-10 utc+0800",charIndex:731},{level:3,title:"Fixed",slug:"fixed-4",normalizedTitle:"fixed",charIndex:392},{level:2,title:"[6.1.5] - 2021-09-29 UTC+0800",slug:"_6-1-5-2021-09-29-utc-0800",normalizedTitle:"[6.1.5] - 2021-09-29 utc+0800",charIndex:1015},{level:3,title:"Fixed",slug:"fixed-5",normalizedTitle:"fixed",charIndex:392},{level:2,title:"[6.1.4] - 2021-08-27 UTC+0800",slug:"_6-1-4-2021-08-27-utc-0800",normalizedTitle:"[6.1.4] - 2021-08-27 utc+0800",charIndex:1201},{level:3,title:"Fixed",slug:"fixed-6",normalizedTitle:"fixed",charIndex:392},{level:2,title:"[6.1.3] - 2021-08-23 UTC+0800",slug:"_6-1-3-2021-08-23-utc-0800",normalizedTitle:"[6.1.3] - 2021-08-23 utc+0800",charIndex:1304},{level:3,title:"Added",slug:"added-2",normalizedTitle:"added",charIndex:358},{level:3,title:"Fixed",slug:"fixed-7",normalizedTitle:"fixed",charIndex:392},{level:2,title:"[6.1.2] - 2021-08-11 UTC+0800",slug:"_6-1-2-2021-08-11-utc-0800",normalizedTitle:"[6.1.2] - 2021-08-11 utc+0800",charIndex:1565},{level:3,title:"Fixed",slug:"fixed-8",normalizedTitle:"fixed",charIndex:392},{level:2,title:"[6.1.1] - 2021-08-04 UTC+0800",slug:"_6-1-1-2021-08-04-utc-0800",normalizedTitle:"[6.1.1] - 2021-08-04 utc+0800",charIndex:1790},{level:3,title:"Fixed",slug:"fixed-9",normalizedTitle:"fixed",charIndex:392},{level:2,title:"[6.1.0] - 2021-08-03 UTC+0800",slug:"_6-1-0-2021-08-03-utc-0800",normalizedTitle:"[6.1.0] - 2021-08-03 utc+0800",charIndex:1939},{level:3,title:"Added",slug:"added-3",normalizedTitle:"added",charIndex:358}],lastUpdated:"1/10/2022, 3:38:27 PM",lastUpdatedTimestamp:1641829107e3,headersStr:"[Unreleased] Added Removed Changed Fixed [6.1.8] - 2022-01-07 UTC+0800 Fixed [6.1.7] - 2021-12-05 UTC+0800 Fixed [6.1.6] - 2021-10-10 UTC+0800 Fixed [6.1.5] - 2021-09-29 UTC+0800 Fixed [6.1.4] - 2021-08-27 UTC+0800 Fixed [6.1.3] - 2021-08-23 UTC+0800 Added Fixed [6.1.2] - 2021-08-11 UTC+0800 Fixed [6.1.1] - 2021-08-04 UTC+0800 Fixed [6.1.0] - 2021-08-03 UTC+0800 Added",content:"# Change Log (LTS)\n\nThe format is based on Keep a Changelog, and this project adheres to Semantic Versioning.\n\nWhat is a breaking change?\n\n * The original configuration file may not work, for example, if a directive item is removed or renamed.\n * It may be necessary to update the build environment, such as installing new dependencies.\n\n\n# [Unreleased]\n\n\n# Added\n\n\n# Removed\n\n\n# Changed\n\n\n# Fixed\n\n----------------------------------------\n\n\n# [6.1.8] - 2022-01-07 UTC+0800\n\n\n# Fixed\n\n * Memory leak.\n\n----------------------------------------\n\n\n# [6.1.7] - 2021-12-05 UTC+0800\n\n\n# Fixed\n\n * All parameters of the directive waf_mode corresponding to the request method are not working.\n\n----------------------------------------\n\n\n# [6.1.6] - 2021-10-10 UTC+0800\n\n\n# Fixed\n\n * Sometimes the connection is closed prematurely.\n\n * Sometimes the request body is read incompletely.\n\n * Failed to inherit Referer blacklist different contexts.\n\n * Fixed a default rule of URL.\n\n----------------------------------------\n\n\n# [6.1.5] - 2021-09-29 UTC+0800\n\n\n# Fixed\n\n * All inspections are incorrectly skipped when the directive rewrite causes an internal redirect.\n\n----------------------------------------\n\n\n# [6.1.4] - 2021-08-27 UTC+0800\n\n\n# Fixed\n\n * Memory leak.\n\n----------------------------------------\n\n\n# [6.1.3] - 2021-08-23 UTC+0800\n\n\n# Added\n\n * No longer generates additional response headers when CC protection returns the status code 444.\n\n\n# Fixed\n\n * The directive waf_http_status could not be merged correctly.\n\n----------------------------------------\n\n\n# [6.1.2] - 2021-08-11 UTC+0800\n\n\n# Fixed\n\n * Failed to parse 0.0.0.0/0 correctly when handling IP black and white lists.\n\n * Compatible with environments that do not support IPV6.\n\n----------------------------------------\n\n\n# [6.1.1] - 2021-08-04 UTC+0800\n\n\n# Fixed\n\n * Under Attack Mode (UAM) sometimes does not work correctly.\n\n----------------------------------------\n\n\n# [6.1.0] - 2021-08-03 UTC+0800\n\n\n# Added\n\n * Added three options to the directive waf_mode.\n   * ADV: Enable the advanced rules.\n   * CMN-METH: Equivalent to head get post.\n   * ALL-METH: Any http request method will start checking.",normalizedContent:"# change log (lts)\n\nthe format is based on keep a changelog, and this project adheres to semantic versioning.\n\nwhat is a breaking change?\n\n * the original configuration file may not work, for example, if a directive item is removed or renamed.\n * it may be necessary to update the build environment, such as installing new dependencies.\n\n\n# [unreleased]\n\n\n# added\n\n\n# removed\n\n\n# changed\n\n\n# fixed\n\n----------------------------------------\n\n\n# [6.1.8] - 2022-01-07 utc+0800\n\n\n# fixed\n\n * memory leak.\n\n----------------------------------------\n\n\n# [6.1.7] - 2021-12-05 utc+0800\n\n\n# fixed\n\n * all parameters of the directive waf_mode corresponding to the request method are not working.\n\n----------------------------------------\n\n\n# [6.1.6] - 2021-10-10 utc+0800\n\n\n# fixed\n\n * sometimes the connection is closed prematurely.\n\n * sometimes the request body is read incompletely.\n\n * failed to inherit referer blacklist different contexts.\n\n * fixed a default rule of url.\n\n----------------------------------------\n\n\n# [6.1.5] - 2021-09-29 utc+0800\n\n\n# fixed\n\n * all inspections are incorrectly skipped when the directive rewrite causes an internal redirect.\n\n----------------------------------------\n\n\n# [6.1.4] - 2021-08-27 utc+0800\n\n\n# fixed\n\n * memory leak.\n\n----------------------------------------\n\n\n# [6.1.3] - 2021-08-23 utc+0800\n\n\n# added\n\n * no longer generates additional response headers when cc protection returns the status code 444.\n\n\n# fixed\n\n * the directive waf_http_status could not be merged correctly.\n\n----------------------------------------\n\n\n# [6.1.2] - 2021-08-11 utc+0800\n\n\n# fixed\n\n * failed to parse 0.0.0.0/0 correctly when handling ip black and white lists.\n\n * compatible with environments that do not support ipv6.\n\n----------------------------------------\n\n\n# [6.1.1] - 2021-08-04 utc+0800\n\n\n# fixed\n\n * under attack mode (uam) sometimes does not work correctly.\n\n----------------------------------------\n\n\n# [6.1.0] - 2021-08-03 utc+0800\n\n\n# added\n\n * added three options to the directive waf_mode.\n   * adv: enable the advanced rules.\n   * cmn-meth: equivalent to head get post.\n   * all-meth: any http request method will start checking.",charsets:{}},{title:"Overview",frontmatter:{title:"Overview",lang:"en"},regularPath:"/changes/overview.html",relativePath:"changes/overview.md",key:"v-fa95bd84",path:"/changes/overview.html",headers:[{level:2,title:"Long-term Support (LTS)",slug:"long-term-support-lts",normalizedTitle:"long-term support (lts)",charIndex:53},{level:2,title:"Current",slug:"current",normalizedTitle:"current",charIndex:81},{level:2,title:"Legacy versions",slug:"legacy-versions",normalizedTitle:"legacy versions",charIndex:479}],lastUpdated:"1/10/2022, 3:38:27 PM",lastUpdatedTimestamp:1641829107e3,headersStr:"Long-term Support (LTS) Current Legacy versions",content:"# Overview\n\nThis project maintains two release flow, Long-term Support (LTS) and Current.\n\n\n# Long-term Support (LTS)\n\nLTS is maintained for at least one year, and only bugs will be fixed during the maintenance period, especially serious bugs, and some minor bugs may not be fixed.\n\n\n# Current\n\nBugs are also fixed in the Current version, but the Current version includes all updates, such as new features, feature changes, feature deletions, performance optimizations, etc.\n\n\n# Legacy versions\n\n * 6.0.x\n * 5.x.x\n * 4.x.x\n * 3.x.x\n * 2.x.x",normalizedContent:"# overview\n\nthis project maintains two release flow, long-term support (lts) and current.\n\n\n# long-term support (lts)\n\nlts is maintained for at least one year, and only bugs will be fixed during the maintenance period, especially serious bugs, and some minor bugs may not be fixed.\n\n\n# current\n\nbugs are also fixed in the current version, but the current version includes all updates, such as new features, feature changes, feature deletions, performance optimizations, etc.\n\n\n# legacy versions\n\n * 6.0.x\n * 5.x.x\n * 4.x.x\n * 3.x.x\n * 2.x.x",charsets:{}},{title:"Compatibility Statement",frontmatter:{title:"Compatibility Statement",lang:"en"},regularPath:"/guide/compatibility.html",relativePath:"guide/compatibility.md",key:"v-153367bc",path:"/guide/compatibility.html",headers:[{level:2,title:"OS Compatibility",slug:"os-compatibility",normalizedTitle:"os compatibility",charIndex:30},{level:2,title:"Nginx Compatibility",slug:"nginx-compatibility",normalizedTitle:"nginx compatibility",charIndex:125},{level:2,title:"Module Compatibility",slug:"module-compatibility",normalizedTitle:"module compatibility",charIndex:229},{level:3,title:"ngxhttprewrite_module",slug:"ngx-http-rewrite-module",normalizedTitle:"ngxhttprewrite_module",charIndex:null}],lastUpdated:"1/10/2022, 3:38:27 PM",lastUpdatedTimestamp:1641829107e3,headersStr:"OS Compatibility Nginx Compatibility Module Compatibility ngxhttprewrite_module",content:"# Compatibility Statement\n\n\n# OS Compatibility\n\nCompatibility with operating systems other than Linux is not guaranteed.\n\n\n# Nginx Compatibility\n\nThis module only guarantees compatibility with nginx-1.18.0 or newer versions.\n\n\n# Module Compatibility\n\n\n# ngx_http_rewrite_module\n\nThere is a compatibility issue between ngx_waf and ngx_http_rewrite_module.\n\n * The module does not take effect if the request directive return takes effect.\n * The module does not take effect if the request directive rewrite results in a return (e.g., a 302 redirect).\n\nReplace 'rewrite' with 'try_files'.\n\nYou may have the following configuration.\n\nif (! -e $request_filename) {\n    rewrite (.*) /index.php\n}\n\n\nYou can replace it with the following configuration.\n\ntry_files $uri $uri/ /index.php;\n\n\nSee rewrite and try_files for details http_core_module.html#try_files).",normalizedContent:"# compatibility statement\n\n\n# os compatibility\n\ncompatibility with operating systems other than linux is not guaranteed.\n\n\n# nginx compatibility\n\nthis module only guarantees compatibility with nginx-1.18.0 or newer versions.\n\n\n# module compatibility\n\n\n# ngx_http_rewrite_module\n\nthere is a compatibility issue between ngx_waf and ngx_http_rewrite_module.\n\n * the module does not take effect if the request directive return takes effect.\n * the module does not take effect if the request directive rewrite results in a return (e.g., a 302 redirect).\n\nreplace 'rewrite' with 'try_files'.\n\nyou may have the following configuration.\n\nif (! -e $request_filename) {\n    rewrite (.*) /index.php\n}\n\n\nyou can replace it with the following configuration.\n\ntry_files $uri $uri/ /index.php;\n\n\nsee rewrite and try_files for details http_core_module.html#try_files).",charsets:{}},{title:"Configuration Guide",frontmatter:{title:"Configuration Guide",lang:"en"},regularPath:"/guide/configuration.html",relativePath:"guide/configuration.md",key:"v-56d17308",path:"/guide/configuration.html",headers:[{level:2,title:"LTS version",slug:"lts-version",normalizedTitle:"lts version",charIndex:246},{level:2,title:"'Current' version",slug:"current-version",normalizedTitle:"'current' version",charIndex:1053}],lastUpdated:"1/10/2022, 3:38:27 PM",lastUpdatedTimestamp:1641829107e3,headersStr:"LTS version 'Current' version",content:"# Configuration Guide\n\nYou can enable ngx_waf by adding configuration to a server block inside nginx.conf. Here is an example.\n\nWARNING\n\nThe configurations listed below are required if you intend to change them unless you know what it means.\n\n\n# LTS version\n\nhttp {\n    ...\n    server {\n        ...\n        # on means enabled, off means disabled.\n        waf on;\n\n        # The absolute path to the directory where the rule file is located, must end with /.\n        waf_rule_path /usr/local/src/ngx_waf/assets/rules/;\n\n        # Firewall working mode, STD indicates standard mode.\n        waf_mode STD;\n\n        # CC defense parameter, 1000 requests per minute limit, \n        # block the corresponding ip for 60 minutes after exceeding the limit.\n        waf_cc_deny rate=1000r/m duration=60m;\n\n        # Cache detection results for up to 50 detection targets, \n        # effective for all detections \n        # except IP black and white list detection, CC protection and POST detection.\n        waf_cache capacity=50;\n        ...\n    }\n    ...\n}\n\n\n\n# 'Current' version\n\nhttp {\n    waf_zone name=waf size=20m;\n    ...\n    server {\n        ...\n        # on means enabled, off means disabled.\n        waf on;\n\n        # The absolute path to the directory where the rule file is located, must end with /.\n        waf_rule_path /usr/local/src/ngx_waf/assets/rules/;\n\n        # Firewall working mode, STD indicates standard mode.\n        waf_mode STD;\n\n        # CC defense parameter, 1000 requests per minute limit, \n        # block the corresponding ip for 60 minutes after exceeding the limit.\n        waf_cc_deny on rate=1000r/m duration=60m zone=waf:cc;\n\n        # Cache detection results for up to 50 detection targets, \n        # effective for all detections \n        # except IP black and white list detection, CC protection and POST detection.\n        waf_cache on capacity=50;\n        ...\n    }\n    ...\n}\n",normalizedContent:"# configuration guide\n\nyou can enable ngx_waf by adding configuration to a server block inside nginx.conf. here is an example.\n\nwarning\n\nthe configurations listed below are required if you intend to change them unless you know what it means.\n\n\n# lts version\n\nhttp {\n    ...\n    server {\n        ...\n        # on means enabled, off means disabled.\n        waf on;\n\n        # the absolute path to the directory where the rule file is located, must end with /.\n        waf_rule_path /usr/local/src/ngx_waf/assets/rules/;\n\n        # firewall working mode, std indicates standard mode.\n        waf_mode std;\n\n        # cc defense parameter, 1000 requests per minute limit, \n        # block the corresponding ip for 60 minutes after exceeding the limit.\n        waf_cc_deny rate=1000r/m duration=60m;\n\n        # cache detection results for up to 50 detection targets, \n        # effective for all detections \n        # except ip black and white list detection, cc protection and post detection.\n        waf_cache capacity=50;\n        ...\n    }\n    ...\n}\n\n\n\n# 'current' version\n\nhttp {\n    waf_zone name=waf size=20m;\n    ...\n    server {\n        ...\n        # on means enabled, off means disabled.\n        waf on;\n\n        # the absolute path to the directory where the rule file is located, must end with /.\n        waf_rule_path /usr/local/src/ngx_waf/assets/rules/;\n\n        # firewall working mode, std indicates standard mode.\n        waf_mode std;\n\n        # cc defense parameter, 1000 requests per minute limit, \n        # block the corresponding ip for 60 minutes after exceeding the limit.\n        waf_cc_deny on rate=1000r/m duration=60m zone=waf:cc;\n\n        # cache detection results for up to 50 detection targets, \n        # effective for all detections \n        # except ip black and white list detection, cc protection and post detection.\n        waf_cache on capacity=50;\n        ...\n    }\n    ...\n}\n",charsets:{}},{title:"FAQ",frontmatter:{title:"FAQ",lang:"en"},regularPath:"/guide/faq.html",relativePath:"guide/faq.md",key:"v-63bf3588",path:"/guide/faq.html",headers:[{level:2,title:"How does this module perform?",slug:"how-does-this-module-perform",normalizedTitle:"how does this module perform?",charIndex:10},{level:2,title:"Cache Policy",slug:"cache-policy",normalizedTitle:"cache policy",charIndex:471},{level:2,title:"Embedded variables and directive if",slug:"embedded-variables-and-directive-if",normalizedTitle:"embedded variables and directive if",charIndex:493},{level:2,title:"ngx_http_access_module",slug:"ngx-http-access-module",normalizedTitle:"ngx_http_access_module",charIndex:739},{level:2,title:"Post Inspection Failure",slug:"post-inspection-failure",normalizedTitle:"post inspection failure",charIndex:873},{level:2,title:"Can I change the rules at runtime?",slug:"can-i-change-the-rules-at-runtime",normalizedTitle:"can i change the rules at runtime?",charIndex:1264},{level:2,title:"Is IP inspection affected by CDN?",slug:"is-ip-inspection-affected-by-cdn",normalizedTitle:"is ip inspection affected by cdn?",charIndex:1438},{level:2,title:"Regular expression Denial of Service (ReDoS)",slug:"regular-expression-denial-of-service-redos",normalizedTitle:"regular expression denial of service (redos)",charIndex:1596},{level:2,title:'fork() failed while spawning "worker process" (12: Cannot allocate memory)',slug:"fork-failed-while-spawning-worker-process-12-cannot-allocate-memory",normalizedTitle:"fork() failed while spawning &quot;worker process&quot; (12: cannot allocate memory)",charIndex:null},{level:2,title:"PANIC: unprotected error in call to Lua API (attempt to index a nil value)",slug:"panic-unprotected-error-in-call-to-lua-api-attempt-to-index-a-nil-value",normalizedTitle:"panic: unprotected error in call to lua api (attempt to index a nil value)",charIndex:2783}],lastUpdated:"1/10/2022, 3:38:27 PM",lastUpdatedTimestamp:1641829107e3,headersStr:'How does this module perform? Cache Policy Embedded variables and directive if ngx_http_access_module Post Inspection Failure Can I change the rules at runtime? Is IP inspection affected by CDN? Regular expression Denial of Service (ReDoS) fork() failed while spawning "worker process" (12: Cannot allocate memory) PANIC: unprotected error in call to Lua API (attempt to index a nil value)',content:'# FAQ\n\n\n# How does this module perform?\n\nIP inspection and CC defense take constant time, other inspections take O(nm), where n is the number of relevant rules and m is the time complexity to perform regular matching, but the results of this inspection are automatically cached after each inspection, so that the next time the same target is inspected, the cache can be used instead of checking all the rules. The result of the POST request body check is not cached.\n\n\n# Cache Policy\n\nLRU\n\n\n# Embedded variables and directive if\n\nIn short, due to NGINX\'s state machine model, you cannot use any embedded variables from this module (such as $waf_rule_type) for the directive if, except for the parameter if of the directive access_log.\n\n\n# ngx_http_access_module\n\nWhen this module is used with ngx_http_access_module, ngx_http_access_module will run before this module.\n\n\n# Post Inspection Failure\n\nFor performance reasons, this module will inspect whether it is in the memory before inspecting the request body. If it is, it will inspect normally, otherwise skip the inspection. You can try to edit nginx.conf.\n\nhttp {\n    ...\n    client_body_buffer_size 10M;\n    client_body_in_file_only off;\n    ...\n}\n\n\nclient_body_buffer_size and client_body_in_file_only.\n\n\n# Can I change the rules at runtime?\n\nNo, this module will only read the rules when nginx reads the configuration. nginx will read the configuration on startup and reload.\n\n\n# Is IP inspection affected by CDN?\n\nIf you use the ngx_http_realip_module module to get the real IP, then this module will use the real IP for inspection.\n\n\n# Regular expression Denial of Service (ReDoS)\n\n> The regular expression denial of service (ReDoS) is an algorithmic complexity attack that produces a denial-of-service by providing a regular expression that takes a very long time to evaluate.\n> \n> ReDoS - Wikipedia\n\n * This module uses the PCRE library to execute regular expressions. The PCRE library can specify the upper limit of the main loop counter at compile time and stop automatically when the upper limit is exceeded. The default limit is 500000. You can also adjust it manually at compile time, see the pcre2 build man page.\n\n * This module caches all regular inspections (except POST inspections), so that the next time you encounter a string for an attack, you do not need to execute the regular expression again without triggering the cache cleanup process.\n\n\n# fork() failed while spawning "worker process" (12: Cannot allocate memory)\n\nIt may be caused by excessive use of nginx -s reload. The module requests some memory when reading the configuration, but somehow the memory is not released immediately after nginx -s reload, so frequent nginx -s reload in a short period of time will most likely cause this error.\n\n\n# PANIC: unprotected error in call to Lua API (attempt to index a nil value)\n\nPlease check the version of libmodsecurity. After testing, libmodsecurity v3.0.3 has this bug, please update to libmodsecurity v3.0.5.',normalizedContent:'# faq\n\n\n# how does this module perform?\n\nip inspection and cc defense take constant time, other inspections take o(nm), where n is the number of relevant rules and m is the time complexity to perform regular matching, but the results of this inspection are automatically cached after each inspection, so that the next time the same target is inspected, the cache can be used instead of checking all the rules. the result of the post request body check is not cached.\n\n\n# cache policy\n\nlru\n\n\n# embedded variables and directive if\n\nin short, due to nginx\'s state machine model, you cannot use any embedded variables from this module (such as $waf_rule_type) for the directive if, except for the parameter if of the directive access_log.\n\n\n# ngx_http_access_module\n\nwhen this module is used with ngx_http_access_module, ngx_http_access_module will run before this module.\n\n\n# post inspection failure\n\nfor performance reasons, this module will inspect whether it is in the memory before inspecting the request body. if it is, it will inspect normally, otherwise skip the inspection. you can try to edit nginx.conf.\n\nhttp {\n    ...\n    client_body_buffer_size 10m;\n    client_body_in_file_only off;\n    ...\n}\n\n\nclient_body_buffer_size and client_body_in_file_only.\n\n\n# can i change the rules at runtime?\n\nno, this module will only read the rules when nginx reads the configuration. nginx will read the configuration on startup and reload.\n\n\n# is ip inspection affected by cdn?\n\nif you use the ngx_http_realip_module module to get the real ip, then this module will use the real ip for inspection.\n\n\n# regular expression denial of service (redos)\n\n> the regular expression denial of service (redos) is an algorithmic complexity attack that produces a denial-of-service by providing a regular expression that takes a very long time to evaluate.\n> \n> redos - wikipedia\n\n * this module uses the pcre library to execute regular expressions. the pcre library can specify the upper limit of the main loop counter at compile time and stop automatically when the upper limit is exceeded. the default limit is 500000. you can also adjust it manually at compile time, see the pcre2 build man page.\n\n * this module caches all regular inspections (except post inspections), so that the next time you encounter a string for an attack, you do not need to execute the regular expression again without triggering the cache cleanup process.\n\n\n# fork() failed while spawning "worker process" (12: cannot allocate memory)\n\nit may be caused by excessive use of nginx -s reload. the module requests some memory when reading the configuration, but somehow the memory is not released immediately after nginx -s reload, so frequent nginx -s reload in a short period of time will most likely cause this error.\n\n\n# panic: unprotected error in call to lua api (attempt to index a nil value)\n\nplease check the version of libmodsecurity. after testing, libmodsecurity v3.0.3 has this bug, please update to libmodsecurity v3.0.5.',charsets:{}},{title:"Installation Guide",frontmatter:{title:"Installation Guide",lang:"en",sidebarDepth:3},regularPath:"/guide/installation.html",relativePath:"guide/installation.md",key:"v-1855e3a4",path:"/guide/installation.html",headers:[{level:2,title:"Static Modules",slug:"static-modules",normalizedTitle:"static modules",charIndex:398},{level:2,title:"Dynamic Modules",slug:"dynamic-modules",normalizedTitle:"dynamic modules",charIndex:3419},{level:3,title:"Downloading pre-built modules",slug:"downloading-pre-built-modules",normalizedTitle:"downloading pre-built modules",charIndex:3439},{level:3,title:"Compile and install",slug:"compile-and-install",normalizedTitle:"compile and install",charIndex:4638}],lastUpdated:"1/10/2022, 3:38:27 PM",lastUpdatedTimestamp:1641829107e3,headersStr:"Static Modules Dynamic Modules Downloading pre-built modules Compile and install",content:"# Installation Guide\n\nPlease read the Version Description first to pick the right version.\n\nnginx provides two ways to install modules, namely 'statically linked' and 'dynamically loaded', and the modules installed in each way are called 'static modules' and dynamic modules'.\n\nYou can choose whether to use static or dynamic modules by running the script assets/guide.sh.\n\nsh assets/guide.sh\n\n\n\n# Static Modules\n\nNOTE\n\nCompiling and installing the module may require some dependencies, such as gcc, so please work out the dependencies yourself; this article does not provide such information.\n\nWARNING\n\nCompiling and installing a new module requires knowing the parameters of the current nginx's configure script, which you can get by running nginx -V. Here is an example.\n\nnginx version: nginx/1.19.6\nbuilt by gcc 9.3.0 (Ubuntu 9.3.0-17ubuntu1~20.04)\nbuilt with OpenSSL 1.1.1i  8 Dec 2020\nTLS SNI support enabled\nconfigure arguments: --with-mail=dynamic --with-openssl=/usr/local/src/openssl-OpenSSL_1_1_1i --prefix=/usr/local/nginx --user=nginx --group=nginx --with-file-aio --with-http_ssl_module --with-http_geoip_module --with-http_v2_module --with-http_realip_module --with-stream_ssl_preread_module --with-http_addition_module --with-http_xslt_module=dynamic --with-http_image_filter_module=dynamic --with-http_sub_module --with-http_dav_module --with-http_flv_module --with-http_mp4_module --with-http_gunzip_module --with-http_gzip_static_module --with-http_random_index_module --with-http_secure_link_module --with-http_degradation_module --with-http_slice_module --with-http_perl_module --with-http_stub_status_module --with-http_auth_request_module --with-mail=dynamic --with-mail_ssl_module --with-pcre --with-pcre-jit --with-stream=dynamic --with-stream_ssl_module --with-debug --with-cc-opt='-O3 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector-strong --param=ssp-buffer-size=4 -grecord-gcc-switches -m64 -mtune=generic'\n\n\nBe sure to remember what comes after configure arguments:, which will be replaced by ARG below.\n\nInstalling a static module requires recompiling the entire nginx, which takes longer than installing a dynamic module.\n\nFirst download the corresponding version of nginx, download page. The following is an example of nginx-1.20.1.\n\ncd /usr/local/src\nwget https://nginx.org/download/nginx-1.20.1.tar.gz\ntar -zxf nginx-1.20.1.tar.gz\n\n\nThen download the source code of this module, the following will use the stable version of the source code\n\ncd /usr/local/src\ngit clone -b lts https://github.com/ADD-SP/ngx_waf.git\n\n\nNext you should run the configuration script.\n\ncd /usr/local/src/nginx-1.20.1\n./configure ARG --add-module=/usr/local/src/ngx_waf --with-debug\nsed -i 's/^\\(CFLAGS.*\\)/\\1 -fstack-protector-strong -Wno-sign-compare/' objs/Makefile\n\n\nThen start compiling.\n\n# Not using parallel compilation\nmake\n\n# Use parallel compilation.\nmake -j$(nproc)\n\n\nNOTE\n\nParallel compilation will improve the compilation speed, but there is a chance of strange errors, so you can disable parallel compilation if it goes wrong.\n\nFinally, you should stop nginx and replace the nginx binary. Assume here that the absolute path to the nginx binary is /usr/local/nginx/sbin/nginx.\n\ncp objs/nginx /usr/local/nginx/sbin/nginx\n\n\nHot Deployment\n\nIf you do not want to not nginx when replacing binaries, you can refer to the official documentation for hot deployment scenarios.\n\n\n# Dynamic Modules\n\n\n# Downloading pre-built modules\n\nYou can download dynamic modules by executing the script assets/download.sh. Here are some use cases.\n\n# LTS module for nginx-1.20.1\nsh assets/download.sh 1.20.1 lts\n\n# LTS module for nginx-1.21.1\nsh assets/download.sh 1.21.1 lts\n\n# Current module for nginx-1.20.1\nsh assets/download.sh 1.20.1 current\n\n# Current module for nginx-1.21.1\nsh assets/download.sh 1.21.1 current\n\n\nAfter executing the script you will see output like the following.\n\nchecking for command ... yes\nchecking for libc implementation ... yes\n + GNU C libary\nPulling remote image addsp/ngx_waf-prebuild:ngx-1.21.1-module-lts-glibc\n......\n......\n......\nDownload complete!\n\n\nIf you see Download complete! then the download was successful and the module will be saved in the current directory. You can copy it to a directory and add a line to the top of nginx.conf.\n\nload_module \"/path/to/ngx_http_waf_module.so\";\n\n\nThen close nginx and run nginx -t. If there are no errors, the module is loaded properly, otherwise your nginx does not support pre-built modules, so compile and install the module.\n\nNOTE\n\nOnce we have updated the module it takes about two hours to compile and upload the module.\n\n\n# Compile and install\n\nCompiling and installing dynamic modules does not require recompiling the entire nginx, only all modules, which is faster than static modules, which is the recommended way in this document.\n\nThe process of downloading nginx source code and module source code is the same as for Static Modules and will not be repeated.\n\nRun the configuration script\n\n./configure --add-dynamic-module=/usr/local/src/ngx_waf --with-compat --with-debug\nsed -i 's/^\\(CFLAGS.*\\)/\\1 -fstack-protector-strong -Wno-sign-compare/' objs/Makefile\n\n\nThen start compiling the dynamic module\n\nmake modules\n\n\nYou should then stop nginx and copy the dynamic modules to the modules directory. Assume here that the absolute path to the modules directory is /usr/local/nginx/modules.\n\ncp objs/*.so /usr/local/nginx/modules\n\n\nFinally, add a line to the top of the nginx configuration file.\n\nload_module \"/usr/local/nginx/modules/ngx_http_waf_module.so\";\n",normalizedContent:"# installation guide\n\nplease read the version description first to pick the right version.\n\nnginx provides two ways to install modules, namely 'statically linked' and 'dynamically loaded', and the modules installed in each way are called 'static modules' and dynamic modules'.\n\nyou can choose whether to use static or dynamic modules by running the script assets/guide.sh.\n\nsh assets/guide.sh\n\n\n\n# static modules\n\nnote\n\ncompiling and installing the module may require some dependencies, such as gcc, so please work out the dependencies yourself; this article does not provide such information.\n\nwarning\n\ncompiling and installing a new module requires knowing the parameters of the current nginx's configure script, which you can get by running nginx -v. here is an example.\n\nnginx version: nginx/1.19.6\nbuilt by gcc 9.3.0 (ubuntu 9.3.0-17ubuntu1~20.04)\nbuilt with openssl 1.1.1i  8 dec 2020\ntls sni support enabled\nconfigure arguments: --with-mail=dynamic --with-openssl=/usr/local/src/openssl-openssl_1_1_1i --prefix=/usr/local/nginx --user=nginx --group=nginx --with-file-aio --with-http_ssl_module --with-http_geoip_module --with-http_v2_module --with-http_realip_module --with-stream_ssl_preread_module --with-http_addition_module --with-http_xslt_module=dynamic --with-http_image_filter_module=dynamic --with-http_sub_module --with-http_dav_module --with-http_flv_module --with-http_mp4_module --with-http_gunzip_module --with-http_gzip_static_module --with-http_random_index_module --with-http_secure_link_module --with-http_degradation_module --with-http_slice_module --with-http_perl_module --with-http_stub_status_module --with-http_auth_request_module --with-mail=dynamic --with-mail_ssl_module --with-pcre --with-pcre-jit --with-stream=dynamic --with-stream_ssl_module --with-debug --with-cc-opt='-o3 -g -pipe -wall -wp,-d_fortify_source=2 -fexceptions -fstack-protector-strong --param=ssp-buffer-size=4 -grecord-gcc-switches -m64 -mtune=generic'\n\n\nbe sure to remember what comes after configure arguments:, which will be replaced by arg below.\n\ninstalling a static module requires recompiling the entire nginx, which takes longer than installing a dynamic module.\n\nfirst download the corresponding version of nginx, download page. the following is an example of nginx-1.20.1.\n\ncd /usr/local/src\nwget https://nginx.org/download/nginx-1.20.1.tar.gz\ntar -zxf nginx-1.20.1.tar.gz\n\n\nthen download the source code of this module, the following will use the stable version of the source code\n\ncd /usr/local/src\ngit clone -b lts https://github.com/add-sp/ngx_waf.git\n\n\nnext you should run the configuration script.\n\ncd /usr/local/src/nginx-1.20.1\n./configure arg --add-module=/usr/local/src/ngx_waf --with-debug\nsed -i 's/^\\(cflags.*\\)/\\1 -fstack-protector-strong -wno-sign-compare/' objs/makefile\n\n\nthen start compiling.\n\n# not using parallel compilation\nmake\n\n# use parallel compilation.\nmake -j$(nproc)\n\n\nnote\n\nparallel compilation will improve the compilation speed, but there is a chance of strange errors, so you can disable parallel compilation if it goes wrong.\n\nfinally, you should stop nginx and replace the nginx binary. assume here that the absolute path to the nginx binary is /usr/local/nginx/sbin/nginx.\n\ncp objs/nginx /usr/local/nginx/sbin/nginx\n\n\nhot deployment\n\nif you do not want to not nginx when replacing binaries, you can refer to the official documentation for hot deployment scenarios.\n\n\n# dynamic modules\n\n\n# downloading pre-built modules\n\nyou can download dynamic modules by executing the script assets/download.sh. here are some use cases.\n\n# lts module for nginx-1.20.1\nsh assets/download.sh 1.20.1 lts\n\n# lts module for nginx-1.21.1\nsh assets/download.sh 1.21.1 lts\n\n# current module for nginx-1.20.1\nsh assets/download.sh 1.20.1 current\n\n# current module for nginx-1.21.1\nsh assets/download.sh 1.21.1 current\n\n\nafter executing the script you will see output like the following.\n\nchecking for command ... yes\nchecking for libc implementation ... yes\n + gnu c libary\npulling remote image addsp/ngx_waf-prebuild:ngx-1.21.1-module-lts-glibc\n......\n......\n......\ndownload complete!\n\n\nif you see download complete! then the download was successful and the module will be saved in the current directory. you can copy it to a directory and add a line to the top of nginx.conf.\n\nload_module \"/path/to/ngx_http_waf_module.so\";\n\n\nthen close nginx and run nginx -t. if there are no errors, the module is loaded properly, otherwise your nginx does not support pre-built modules, so compile and install the module.\n\nnote\n\nonce we have updated the module it takes about two hours to compile and upload the module.\n\n\n# compile and install\n\ncompiling and installing dynamic modules does not require recompiling the entire nginx, only all modules, which is faster than static modules, which is the recommended way in this document.\n\nthe process of downloading nginx source code and module source code is the same as for static modules and will not be repeated.\n\nrun the configuration script\n\n./configure --add-dynamic-module=/usr/local/src/ngx_waf --with-compat --with-debug\nsed -i 's/^\\(cflags.*\\)/\\1 -fstack-protector-strong -wno-sign-compare/' objs/makefile\n\n\nthen start compiling the dynamic module\n\nmake modules\n\n\nyou should then stop nginx and copy the dynamic modules to the modules directory. assume here that the absolute path to the modules directory is /usr/local/nginx/modules.\n\ncp objs/*.so /usr/local/nginx/modules\n\n\nfinally, add a line to the top of the nginx configuration file.\n\nload_module \"/usr/local/nginx/modules/ngx_http_waf_module.so\";\n",charsets:{}},{title:"Overview",frontmatter:{title:"Overview",lang:"en"},regularPath:"/guide/overview.html",relativePath:"guide/overview.md",key:"v-7b174ab0",path:"/guide/overview.html",headers:[{level:2,title:"Why ngx_waf",slug:"why-ngx-waf",normalizedTitle:"why ngx_waf",charIndex:63},{level:2,title:"Features",slug:"features",normalizedTitle:"features",charIndex:717},{level:2,title:"Contact",slug:"contact",normalizedTitle:"contact",charIndex:1832},{level:2,title:"Sponsor",slug:"sponsor",normalizedTitle:"sponsor",charIndex:2002},{level:2,title:"Test Suite",slug:"test-suite",normalizedTitle:"test suite",charIndex:2106},{level:2,title:"Performance Test",slug:"performance-test",normalizedTitle:"performance test",charIndex:2971},{level:2,title:"Thanks",slug:"thanks",normalizedTitle:"thanks",charIndex:2203}],lastUpdated:"1/10/2022, 3:38:27 PM",lastUpdatedTimestamp:1641829107e3,headersStr:"Why ngx_waf Features Contact Sponsor Test Suite Performance Test Thanks",content:"# Overview\n\nHandy, High performance Nginx firewall module.\n\n\n# Why ngx_waf\n\n * Basic protection: such as black and white list of IPs or IP range, uri black and white list, and request body black list, etc.\n * Easy to use: configuration files and rule files are easy to write and readable.\n * High performance: Efficient algorithms and caching.\n * Advanced protection: ModSecurity compatible, you can use OWASP(Open Web Application Security ProjectÂ®) ModSecurity Core Rule Set.\n * Friendly crawler verification: Supports verifying Google, Bing, Baidu and Yandex crawlers and allowing them automatically to avoid false positives.\n * Captcha: Supports three kinds of captchas: hCaptcha, reCAPTCHAv2 and reCAPTCHAv3.\n\n\n# Features\n\n * ModSecurity compatible. This feature is only available in the latest Current version.\n * Anti SQL injection (powered by libinjection).\n * Anti XSS (powered by libinjection).\n * IPV4 and IPV6 support.\n * Support for enabling CAPTCHAs, including hCaptcha, reCAPTCHAv2 and reCAPTCHAv3. This feature is only available in the latest Current version.\n * Support authentication-friendly crawlers (based on user agent and IP identification) to avoid blocking of these crawlers (e.g. GoogleBot). This feature is only available in the latest Current version.\n * CC protection, if the request rate exceeds the limit, the IP will be automatically banned for a period of time, or use CAPTCHA to do human identification and allow it if successful..\n * Exceptional allow on specific IP address.\n * Block the specified IP or IP range.\n * Block the specified request body.\n * Exceptional allow on specific URL.\n * Block the specified URL.\n * Block the specified query string.\n * Block the specified UserAgent.\n * Block the specified Cookie.\n * Exceptional allow on specific Referer.\n * Block the specified Referer.\n\n\n# Contact\n\n * Telegram Channel: https://t.me/ngx_waf\n * Telegram Group (English): https://t.me/group_ngx_waf\n * Telegram Group (Chinese): https://t.me/group_ngx_waf_cn\n\n\n# Sponsor\n\nHope you can help promote this project. The more stars got, the better this project is. ð\n\n\n# Test Suite\n\nThis module comes with a Perl-driven test suite. The test cases are declarative too. Thanks to the Test::Nginx module in the Perl world.\n\nTo run it on your side:\n\n## It will take a lot of time, but it only needs to be run once.\ncpan Test::Nginx\n\n# You need to specify a temporary directory.\n# If the directory does not exist it will be created automatically.\n# If the directory already exists it will be **removed** first and then created.\nexport MODULE_TEST_PATH=/path/to/temp/dir\n\n# You need to specify the absolute path to the dynamic module if you have it installed, \n# otherwise you do not need to run this line.\nexport MODULE_PATH=/path/to/ngx_http_waf_module.so\n\ncd ./test/test-nginx\nsh ./init.sh\nsh ./start.sh ./t/*.t\n\n\nSome parts of the test suite requires standard modules proxy, rewrite and SSI to be enabled as well when building Nginx.\n\n\n# Performance Test\n\nPerformance Test\n\n\n# Thanks\n\n * ModSecurity: An open source, cross platform web application firewall (WAF) engine.\n * uthash: C macros for hash tables and more.\n * libcurl: The multiprotocol file transfer library .\n * cJSON: Ultralightweight JSON parser in ANSI C.\n * libinjection: SQL / SQLI tokenizer parser analyzer.\n * libsodium: A modern, portable, easy to use crypto library.\n * test-nginx: Data-driven test scaffold for Nginx C module and OpenResty Lua library development.\n * lastversion: A command line tool that helps you download or install a specific version of a project.\n * ngx_lua_waf: A web application firewall based on the lua-nginx-module (openresty).\n * nginx-book: The Chinese language development guide for nginx.\n * nginx-development-guide: The Chinese language development guide for nginx.",normalizedContent:"# overview\n\nhandy, high performance nginx firewall module.\n\n\n# why ngx_waf\n\n * basic protection: such as black and white list of ips or ip range, uri black and white list, and request body black list, etc.\n * easy to use: configuration files and rule files are easy to write and readable.\n * high performance: efficient algorithms and caching.\n * advanced protection: modsecurity compatible, you can use owasp(open web application security projectÂ®) modsecurity core rule set.\n * friendly crawler verification: supports verifying google, bing, baidu and yandex crawlers and allowing them automatically to avoid false positives.\n * captcha: supports three kinds of captchas: hcaptcha, recaptchav2 and recaptchav3.\n\n\n# features\n\n * modsecurity compatible. this feature is only available in the latest current version.\n * anti sql injection (powered by libinjection).\n * anti xss (powered by libinjection).\n * ipv4 and ipv6 support.\n * support for enabling captchas, including hcaptcha, recaptchav2 and recaptchav3. this feature is only available in the latest current version.\n * support authentication-friendly crawlers (based on user agent and ip identification) to avoid blocking of these crawlers (e.g. googlebot). this feature is only available in the latest current version.\n * cc protection, if the request rate exceeds the limit, the ip will be automatically banned for a period of time, or use captcha to do human identification and allow it if successful..\n * exceptional allow on specific ip address.\n * block the specified ip or ip range.\n * block the specified request body.\n * exceptional allow on specific url.\n * block the specified url.\n * block the specified query string.\n * block the specified useragent.\n * block the specified cookie.\n * exceptional allow on specific referer.\n * block the specified referer.\n\n\n# contact\n\n * telegram channel: https://t.me/ngx_waf\n * telegram group (english): https://t.me/group_ngx_waf\n * telegram group (chinese): https://t.me/group_ngx_waf_cn\n\n\n# sponsor\n\nhope you can help promote this project. the more stars got, the better this project is. ð\n\n\n# test suite\n\nthis module comes with a perl-driven test suite. the test cases are declarative too. thanks to the test::nginx module in the perl world.\n\nto run it on your side:\n\n## it will take a lot of time, but it only needs to be run once.\ncpan test::nginx\n\n# you need to specify a temporary directory.\n# if the directory does not exist it will be created automatically.\n# if the directory already exists it will be **removed** first and then created.\nexport module_test_path=/path/to/temp/dir\n\n# you need to specify the absolute path to the dynamic module if you have it installed, \n# otherwise you do not need to run this line.\nexport module_path=/path/to/ngx_http_waf_module.so\n\ncd ./test/test-nginx\nsh ./init.sh\nsh ./start.sh ./t/*.t\n\n\nsome parts of the test suite requires standard modules proxy, rewrite and ssi to be enabled as well when building nginx.\n\n\n# performance test\n\nperformance test\n\n\n# thanks\n\n * modsecurity: an open source, cross platform web application firewall (waf) engine.\n * uthash: c macros for hash tables and more.\n * libcurl: the multiprotocol file transfer library .\n * cjson: ultralightweight json parser in ansi c.\n * libinjection: sql / sqli tokenizer parser analyzer.\n * libsodium: a modern, portable, easy to use crypto library.\n * test-nginx: data-driven test scaffold for nginx c module and openresty lua library development.\n * lastversion: a command line tool that helps you download or install a specific version of a project.\n * ngx_lua_waf: a web application firewall based on the lua-nginx-module (openresty).\n * nginx-book: the chinese language development guide for nginx.\n * nginx-development-guide: the chinese language development guide for nginx.",charsets:{}},{title:"Test",frontmatter:{title:"Test",lang:"en"},regularPath:"/guide/test.html",relativePath:"guide/test.md",key:"v-93872304",path:"/guide/test.html",headers:[{level:2,title:"Quick Test",slug:"quick-test",normalizedTitle:"quick test",charIndex:11},{level:2,title:"Automated Testing",slug:"automated-testing",normalizedTitle:"automated testing",charIndex:199},{level:2,title:"Performance Test",slug:"performance-test",normalizedTitle:"performance test",charIndex:912},{level:3,title:"Example Test",slug:"example-test",normalizedTitle:"example test",charIndex:933},{level:3,title:"Test By Yourself",slug:"test-by-yourself",normalizedTitle:"test by yourself",charIndex:3437}],lastUpdated:"1/10/2022, 3:38:27 PM",lastUpdatedTimestamp:1641829107e3,headersStr:"Quick Test Automated Testing Performance Test Example Test Test By Yourself",content:"# Test\n\n\n# Quick Test\n\nRun the following command, if the output is 403 then the module is working properly.\n\ncurl -I -o /dev/null --user-agent bench -s -w \"%{http_code}\\\\n\" https://example.com/\n\n\n\n# Automated Testing\n\nThis project comes with many test cases.\n\nTo run it on your side:\n\n## It will take a lot of time, but it only needs to be run once.\ncpan Test::Nginx\n\n# You need to specify a temporary directory.\n# If the directory does not exist it will be created automatically.\n# If the directory already exists it will be **removed** first and then created.\nexport MODULE_TEST_PATH=/path/to/temp/dir\n\n# You need to specify the absolute path to the dynamic module if you have it installed, \n# otherwise you do not need to run this line.\nexport MODULE_PATH=/path/to/ngx_http_waf_module.so\n\ncd . /test/test-nginx\nsh ./init.sh\nsh ./start.sh ./t/*.t\n\n\nNormally all cases will pass, if not please let us know.\n\n\n# Performance Test\n\n\n# Example Test\n\n# Test Description\n\n * ngx_waf v5.1.1.\n * Approximately 210,000 IPV4 whitelist rules were used.\n * About 210,000 IPV4 blacklist rules were used.\n * Approximately 48,000 IPV6 whitelist rules were used.\n * Approximately 48,000 IPV6 blacklist rules were used.\n * 100,000 URL blacklist rules used, obtained by random string generator.\n * 100,000 URL whitelist rules were used, obtained by a random string generator.\n * Uses 5000 random strings, obtained by a random string generator. One of them is randomly selected as the URI for each request to send a GET request.\n * The test lasts 30 minutes.\n * Tested twice, once with the firewall on and once with the firewall off.\n\nNOTE\n\nThe IP for testing is obtained from IPdney.\n\nConfiguration used for testing.\n\nmaster_process on;\nworker_processes  1;\n\nhttp {\n    server {\n        listen 80;\n        server_name  localhost;\n\n        access_log off;\n        \n        waf on;\n        waf_mode DYNAMIC !CC !POST;\n        waf_rule_path /usr/local/src/ngx_waf/rules/;\n        waf_cache capacity=6000 interval=1h percent=50;\n\n        location / {\n            default_type text/html;\n            return 200 'hello';\n        }\n    }\n}\n\n\n# Test Command\n\nwrk -c 100 -d 30m -t 1 -s test/wrk/rand.lua --latency http://localhost/ -- /path/to/rand-str.txt\n\n\n# Test Results\n\nWith the firewall on, QPS(Queries Per Second) is reduced by about 4%.\n\n# waf on;\nwrk -c 100 -d 30m -t 1 -s ngx_waf/test/wrk/rand.lua --timeout 1m --latency http://localhost/ -- /usr/local/src/ngx_waf/txt.txt\n\nRunning 30m test @ http://localhost/\n  1 threads and 100 connections\n  Thread Stats   Avg      Stdev     Max   +/- Stdev\n    Latency    78.56ms  340.74ms   3.97s    94.52%\n    Req/Sec    67.33k    25.42k   95.38k    86.58%\n  Latency Distribution\n     50%    1.14ms\n     75%    1.48ms\n     90%    4.84ms\n     99%    1.97s\n  120532104 requests in 30.00m, 17.06GB read\nRequests/sec:  66959.26\nTransfer/sec:      9.71MB\n\n\n# waf off;\nwrk -c 100 -d 30m -t 1 -s ngx_waf/test/wrk/rand.lua --timeout 1m --latency http://localhost/ -- /usr/local/src/ngx_waf/txt.txt\n\nRunning 30m test @ http://localhost/\n  1 threads and 100 connections\n  Thread Stats   Avg      Stdev     Max   +/- Stdev\n    Latency   803.44us    0.87ms  40.32ms   95.23%\n    Req/Sec    70.69k    10.46k  105.82k    81.15%\n  Latency Distribution\n     50%  590.00us\n     75%  760.00us\n     90%    1.25ms\n     99%    4.25ms\n  126562158 requests in 30.00m, 17.92GB read\nRequests/sec:  70310.93\nTransfer/sec:     10.19MB\n\n\n\n# Test By Yourself\n\nYou can use wrk to perform performance tests on this module.\n\nThis project provides wrk's lua script for testing. The path of the script is test/wrk/rand.lua and its function is to send GET requests using a random URI. You need to provide it with a text file containing a certain number of random strings, one random string per line. Then test it with the following command.\n\nwrk -c 100 -d 1m -t 1 -s test/wrk/rand.lua --latency http://localhost/ -- /path/to/rand-str.txt\n",normalizedContent:"# test\n\n\n# quick test\n\nrun the following command, if the output is 403 then the module is working properly.\n\ncurl -i -o /dev/null --user-agent bench -s -w \"%{http_code}\\\\n\" https://example.com/\n\n\n\n# automated testing\n\nthis project comes with many test cases.\n\nto run it on your side:\n\n## it will take a lot of time, but it only needs to be run once.\ncpan test::nginx\n\n# you need to specify a temporary directory.\n# if the directory does not exist it will be created automatically.\n# if the directory already exists it will be **removed** first and then created.\nexport module_test_path=/path/to/temp/dir\n\n# you need to specify the absolute path to the dynamic module if you have it installed, \n# otherwise you do not need to run this line.\nexport module_path=/path/to/ngx_http_waf_module.so\n\ncd . /test/test-nginx\nsh ./init.sh\nsh ./start.sh ./t/*.t\n\n\nnormally all cases will pass, if not please let us know.\n\n\n# performance test\n\n\n# example test\n\n# test description\n\n * ngx_waf v5.1.1.\n * approximately 210,000 ipv4 whitelist rules were used.\n * about 210,000 ipv4 blacklist rules were used.\n * approximately 48,000 ipv6 whitelist rules were used.\n * approximately 48,000 ipv6 blacklist rules were used.\n * 100,000 url blacklist rules used, obtained by random string generator.\n * 100,000 url whitelist rules were used, obtained by a random string generator.\n * uses 5000 random strings, obtained by a random string generator. one of them is randomly selected as the uri for each request to send a get request.\n * the test lasts 30 minutes.\n * tested twice, once with the firewall on and once with the firewall off.\n\nnote\n\nthe ip for testing is obtained from ipdney.\n\nconfiguration used for testing.\n\nmaster_process on;\nworker_processes  1;\n\nhttp {\n    server {\n        listen 80;\n        server_name  localhost;\n\n        access_log off;\n        \n        waf on;\n        waf_mode dynamic !cc !post;\n        waf_rule_path /usr/local/src/ngx_waf/rules/;\n        waf_cache capacity=6000 interval=1h percent=50;\n\n        location / {\n            default_type text/html;\n            return 200 'hello';\n        }\n    }\n}\n\n\n# test command\n\nwrk -c 100 -d 30m -t 1 -s test/wrk/rand.lua --latency http://localhost/ -- /path/to/rand-str.txt\n\n\n# test results\n\nwith the firewall on, qps(queries per second) is reduced by about 4%.\n\n# waf on;\nwrk -c 100 -d 30m -t 1 -s ngx_waf/test/wrk/rand.lua --timeout 1m --latency http://localhost/ -- /usr/local/src/ngx_waf/txt.txt\n\nrunning 30m test @ http://localhost/\n  1 threads and 100 connections\n  thread stats   avg      stdev     max   +/- stdev\n    latency    78.56ms  340.74ms   3.97s    94.52%\n    req/sec    67.33k    25.42k   95.38k    86.58%\n  latency distribution\n     50%    1.14ms\n     75%    1.48ms\n     90%    4.84ms\n     99%    1.97s\n  120532104 requests in 30.00m, 17.06gb read\nrequests/sec:  66959.26\ntransfer/sec:      9.71mb\n\n\n# waf off;\nwrk -c 100 -d 30m -t 1 -s ngx_waf/test/wrk/rand.lua --timeout 1m --latency http://localhost/ -- /usr/local/src/ngx_waf/txt.txt\n\nrunning 30m test @ http://localhost/\n  1 threads and 100 connections\n  thread stats   avg      stdev     max   +/- stdev\n    latency   803.44us    0.87ms  40.32ms   95.23%\n    req/sec    70.69k    10.46k  105.82k    81.15%\n  latency distribution\n     50%  590.00us\n     75%  760.00us\n     90%    1.25ms\n     99%    4.25ms\n  126562158 requests in 30.00m, 17.92gb read\nrequests/sec:  70310.93\ntransfer/sec:     10.19mb\n\n\n\n# test by yourself\n\nyou can use wrk to perform performance tests on this module.\n\nthis project provides wrk's lua script for testing. the path of the script is test/wrk/rand.lua and its function is to send get requests using a random uri. you need to provide it with a text file containing a certain number of random strings, one random string per line. then test it with the following command.\n\nwrk -c 100 -d 1m -t 1 -s test/wrk/rand.lua --latency http://localhost/ -- /path/to/rand-str.txt\n",charsets:{}},{title:"Version Description",frontmatter:{title:"Version Description",lang:"en"},regularPath:"/guide/version.html",relativePath:"guide/version.md",key:"v-fa492d08",path:"/guide/version.html",headers:[{level:2,title:"Semantic Versioning",slug:"semantic-versioning",normalizedTitle:"semantic versioning",charIndex:26},{level:2,title:"Long-term Support (LTS)",slug:"long-term-support-lts",normalizedTitle:"long-term support (lts)",charIndex:103},{level:2,title:"Current",slug:"current",normalizedTitle:"current",charIndex:499}],lastUpdated:"1/10/2022, 3:38:27 PM",lastUpdatedTimestamp:1641829107e3,headersStr:"Semantic Versioning Long-term Support (LTS) Current",content:"# Version Description\n\n\n# Semantic Versioning\n\nThis project follows the Semantic Versioning 2.0.0.\n\n\n# Long-term Support (LTS)\n\nLTS is maintained for at least one year, and only bugs will be fixed during the maintenance period, especially serious bugs, and some minor bugs may not be fixed.\n\nIn most cases, this version is more stable, but there are no functional updates.\n\ngit clone -b master https://github.com/ADD-SP/ngx_waf.git\n\n# OR\n\ngit clone -b lts https://github.com/ADD-SP/ngx_waf.git\n\n\n\n# Current\n\nBugs are also fixed in the Current version, but the Current version includes all updates, such as new features, feature changes, feature deletions, performance optimizations, etc.\n\nThis version is not as stable as LTS, but includes functional updates.\n\ngit clone -b current https://github.com/ADD-SP/ngx_waf.git\n",normalizedContent:"# version description\n\n\n# semantic versioning\n\nthis project follows the semantic versioning 2.0.0.\n\n\n# long-term support (lts)\n\nlts is maintained for at least one year, and only bugs will be fixed during the maintenance period, especially serious bugs, and some minor bugs may not be fixed.\n\nin most cases, this version is more stable, but there are no functional updates.\n\ngit clone -b master https://github.com/add-sp/ngx_waf.git\n\n# or\n\ngit clone -b lts https://github.com/add-sp/ngx_waf.git\n\n\n\n# current\n\nbugs are also fixed in the current version, but the current version includes all updates, such as new features, feature changes, feature deletions, performance optimizations, etc.\n\nthis version is not as stable as lts, but includes functional updates.\n\ngit clone -b current https://github.com/add-sp/ngx_waf.git\n",charsets:{}},{title:"Enable CAPTCHA when blocking requests",frontmatter:{title:"Enable CAPTCHA when blocking requests",lang:"en"},regularPath:"/practice/enable-captcha-when-blocking-requests.html",relativePath:"practice/enable-captcha-when-blocking-requests.md",key:"v-b2808fb8",path:"/practice/enable-captcha-when-blocking-requests.html",lastUpdated:"1/10/2022, 3:38:27 PM",lastUpdatedTimestamp:1641829107e3,headersStr:null,content:"# Enable CAPTCHA when blocking requests\n\nToday, many attackers use automated tools to attack servers. These automated tools try every vulnerability, some of which are blocked by security measures, and some of which can evade detection. Sometimes attackers will manually attack your service. We do not have a perfect defense against these attacks, but it is simple to increase the cost of the attack.\n\nWhen a request is blocked, ngx_waf will use the CAPTCHA to challenge subsequent requests from this IP until the challenge is successful. This counteracts most automated attack tools, which try every exploit, and we can always identify some obvious attack requests and enable CAPTCHA, which is very difficult for automated tools to challenge successfully. For manual attackers, this greatly increases the cost of their time.\n\nHere is an example.\n\nhttp {\n    waf_zone name=waf size=20m;\n    \n    server {\n        waf_captcha off prov=xxx sitekey=xxx secret=xxx;\n        waf_action blacklist=CAPTCHA zone=waf:action;\n    }\n}\n",normalizedContent:"# enable captcha when blocking requests\n\ntoday, many attackers use automated tools to attack servers. these automated tools try every vulnerability, some of which are blocked by security measures, and some of which can evade detection. sometimes attackers will manually attack your service. we do not have a perfect defense against these attacks, but it is simple to increase the cost of the attack.\n\nwhen a request is blocked, ngx_waf will use the captcha to challenge subsequent requests from this ip until the challenge is successful. this counteracts most automated attack tools, which try every exploit, and we can always identify some obvious attack requests and enable captcha, which is very difficult for automated tools to challenge successfully. for manual attackers, this greatly increases the cost of their time.\n\nhere is an example.\n\nhttp {\n    waf_zone name=waf size=20m;\n    \n    server {\n        waf_captcha off prov=xxx sitekey=xxx secret=xxx;\n        waf_action blacklist=captcha zone=waf:action;\n    }\n}\n",charsets:{}},{title:"Enable CAPTCHA",frontmatter:{title:"Enable CAPTCHA",lang:"en"},regularPath:"/practice/enable-captcha.html",relativePath:"practice/enable-captcha.md",key:"v-6ff320c8",path:"/practice/enable-captcha.html",lastUpdated:"1/10/2022, 3:38:27 PM",lastUpdatedTimestamp:1641829107e3,headersStr:null,content:"# Enable CAPTCHA\n\nWhen your website is under CC attack, it is good to turn on CAPTCHA because CAPTCHA can help you identify the real users.\n\n 1. This module currently supports three CAPTCHAs, hCaptcha, reCAPTCHAv2 and reCAPTCHAv3. You should choose one and get the Sitekey and Secret from their website.\n 2. Go to assets/ in the project's directory and find the corresponding HTML file, then copy it to any path. For example, if you are using hCaptcha, you should copy assets/hCaptcha.html.\n 3. Modify the copied HTML file by changing the string Your Sitekey to the Sitekey you got from the CAPTCHA platform.\n 4. Modify the nginx configuration.\n    * Enable CAPTCHA for entire site.\n      \n      server {\n          waf_captcha on prov=hCaptcha secret=your_secret sitekey=your_sitekey;\n      }\n      \n    \n    * Enable CAPTCHA for a path\n      \n      location {\n          waf_captcha on prov=hCaptcha secret=your_secret sitekey=your_sitekey;\n      }\n      \n    \n    * Enable CAPTCHA when request rate is too high\n      \n      http {\n          waf_zone name=waf size=20m;\n          server {\n              waf_cc_deny on rate=1000r/m duration=1h zone=waf:cc;\n              waf_captcha off prov=hCaptcha secret=your_secret sitekey=your_sitekey;\n              waf_action cc_deny=CAPTCHA zone=waf:action;\n          }\n      }\n      \n\n 5. Restart nginx.\n\nWARNING\n\nIf you have some pseudo-static configuration, or some path rewriting configuration, you need to make sure that the path /captcha is not rewritten. Here is a sample modification.\n\n# BEGIN Before modification\nif (! -e $request_filename) {\n    rewrite ^(.*)$ index.php?s=$1 last break;\n}\n# END   After modification\n\n# BEGIN Before modification\ntry_files $uri $uri/ index.php?s=$1;\n# END   After modification\n\n\nSEO OPTIMIZATION\n\nEnable CAPTCHA will affect search engine crawling, you can use waf_verify_bot to allow certain search engine crawlers.\n\nwaf_verify_bot on;\n",normalizedContent:"# enable captcha\n\nwhen your website is under cc attack, it is good to turn on captcha because captcha can help you identify the real users.\n\n 1. this module currently supports three captchas, hcaptcha, recaptchav2 and recaptchav3. you should choose one and get the sitekey and secret from their website.\n 2. go to assets/ in the project's directory and find the corresponding html file, then copy it to any path. for example, if you are using hcaptcha, you should copy assets/hcaptcha.html.\n 3. modify the copied html file by changing the string your sitekey to the sitekey you got from the captcha platform.\n 4. modify the nginx configuration.\n    * enable captcha for entire site.\n      \n      server {\n          waf_captcha on prov=hcaptcha secret=your_secret sitekey=your_sitekey;\n      }\n      \n    \n    * enable captcha for a path\n      \n      location {\n          waf_captcha on prov=hcaptcha secret=your_secret sitekey=your_sitekey;\n      }\n      \n    \n    * enable captcha when request rate is too high\n      \n      http {\n          waf_zone name=waf size=20m;\n          server {\n              waf_cc_deny on rate=1000r/m duration=1h zone=waf:cc;\n              waf_captcha off prov=hcaptcha secret=your_secret sitekey=your_sitekey;\n              waf_action cc_deny=captcha zone=waf:action;\n          }\n      }\n      \n\n 5. restart nginx.\n\nwarning\n\nif you have some pseudo-static configuration, or some path rewriting configuration, you need to make sure that the path /captcha is not rewritten. here is a sample modification.\n\n# begin before modification\nif (! -e $request_filename) {\n    rewrite ^(.*)$ index.php?s=$1 last break;\n}\n# end   after modification\n\n# begin before modification\ntry_files $uri $uri/ index.php?s=$1;\n# end   after modification\n\n\nseo optimization\n\nenable captcha will affect search engine crawling, you can use waf_verify_bot to allow certain search engine crawlers.\n\nwaf_verify_bot on;\n",charsets:{}},{title:"Enable ModSecurity",frontmatter:{title:"Enable ModSecurity",lang:"en"},regularPath:"/practice/enable-modsecurity.html",relativePath:"practice/enable-modsecurity.md",key:"v-ab312ec8",path:"/practice/enable-modsecurity.html",headers:[{level:2,title:"Step 1: Download the rule set",slug:"step-1-download-the-rule-set",normalizedTitle:"step 1: download the rule set",charIndex:306},{level:2,title:"Step 2: Copy the rules file",slug:"step-2-copy-the-rules-file",normalizedTitle:"step 2: copy the rules file",charIndex:473},{level:2,title:"Step 3: Edit rules",slug:"step-3-edit-rules",normalizedTitle:"step 3: edit rules",charIndex:852},{level:2,title:"Step 4: Load Rules",slug:"step-4-load-rules",normalizedTitle:"step 4: load rules",charIndex:1222},{level:2,title:"Step 5: Optimize performance",slug:"step-5-optimize-performance",normalizedTitle:"step 5: optimize performance",charIndex:1354},{level:2,title:"Step 6: Restart nginx",slug:"step-6-restart-nginx",normalizedTitle:"step 6: restart nginx",charIndex:1810},{level:2,title:"Step 7: Testing",slug:"step-7-testing",normalizedTitle:"step 7: testing",charIndex:2037},{level:2,title:"Step 8: Handling false positives",slug:"step-8-handling-false-positives",normalizedTitle:"step 8: handling false positives",charIndex:2179}],lastUpdated:"1/10/2022, 3:38:27 PM",lastUpdatedTimestamp:1641829107e3,headersStr:"Step 1: Download the rule set Step 2: Copy the rules file Step 3: Edit rules Step 4: Load Rules Step 5: Optimize performance Step 6: Restart nginx Step 7: Testing Step 8: Handling false positives",content:"# Enable ModSecurity\n\nThe default rules provided by this project are very easy to bypass and many users have difficulty maintaining a reliable set of rules.\n\nIn this case, you can enable ModSecurity and load the OWSAP (Open Web Application Security Project) core rule set to strengthen the protection.\n\n\n# Step 1: Download the rule set\n\ncd /usr/local/src\ngit clone https://github.com/SpiderLabs/ModSecurity.git\ngit clone https://github.com/coreruleset/coreruleset.git\n\n\n\n# Step 2: Copy the rules file\n\nmkdir -p /etc/nginx/rules/modsecurity\ncp coreruleset/crs-setup.conf.example /etc/nginx/rules/modsecurity/crs-setup.conf\ncp ModSecurity/modsecurity.conf-recommended /etc/nginx/rules/modsecurity/modsecurity.conf\ncp ModSecurity/unicode.mapping /etc/nginx/rules/modsecurity/unicode.mapping\ncp -r coreruleset/rules /etc/nginx/rules/modsecurity/owasp\n\n\n\n# Step 3: Edit rules\n\n 1. Edit /etc/nginx/rules/modsecurity/modsecurity.conf and change SecRuleEngine DetectionOnly to SecRuleEngine on.\n 2. Edit /etc/nginx/rules/modsecurity/modsecurity.conf and append the following at the end of the file.\n    \n    Include /usr/local/src/ngx_waf/assets/rules/crs-setup.conf\n    Include /etc/nginx/rules/modsecurity/owasp/*.conf\n    \n\n\n# Step 4: Load Rules\n\nEdit the nginx configuration file.\n\nwaf_modsecurity on file=/etc/nginx/rules/modsecurity/modsecurity.conf;\n\n\n\n# Step 5: Optimize performance\n\nEnabling rules causes a significant performance degradation due to the complexity of ModSecurity's rules engine, but this also gives it power.\n\nGenerally we do not need to inspect some static files, so we can optimize performance based on this.\n\nEdit the nginx configuration file.\n\nlocation ~* \\.(gif|jpg|png|jpeg|webp|bmp|swf)$ {\n    waf_modsecurity off;\n}\n\nlocation ~* \\.(html|htm|js|css)$ {\n    waf_modsecurity off;\n}\n\n\n\n# Step 6: Restart nginx\n\nnginx -s stop\nnginx\n\n\nWhy not nginx -s reload ?\n\n * ngin reload memory leak Â· Issue #2552 Â· SpiderLabs/ModSecurity\n * It often leads memory leak on nginx reload Â· Issue #2502 Â· SpiderLabs/ModSecurity\n\n\n# Step 7: Testing\n\nAt this point you should check your website to make sure that no false positives will cause your website to be abnormal.\n\n\n# Step 8: Handling false positives\n\n * Including OWASP ModSecurity Core Rule Set â Welcome to netnea\n * Handling False Positives with the OWASP ModSecurity Core Rule Set â Welcome to netnea\n * Reference Manual (v2.x) Â· SpiderLabs/ModSecurity Wiki",normalizedContent:"# enable modsecurity\n\nthe default rules provided by this project are very easy to bypass and many users have difficulty maintaining a reliable set of rules.\n\nin this case, you can enable modsecurity and load the owsap (open web application security project) core rule set to strengthen the protection.\n\n\n# step 1: download the rule set\n\ncd /usr/local/src\ngit clone https://github.com/spiderlabs/modsecurity.git\ngit clone https://github.com/coreruleset/coreruleset.git\n\n\n\n# step 2: copy the rules file\n\nmkdir -p /etc/nginx/rules/modsecurity\ncp coreruleset/crs-setup.conf.example /etc/nginx/rules/modsecurity/crs-setup.conf\ncp modsecurity/modsecurity.conf-recommended /etc/nginx/rules/modsecurity/modsecurity.conf\ncp modsecurity/unicode.mapping /etc/nginx/rules/modsecurity/unicode.mapping\ncp -r coreruleset/rules /etc/nginx/rules/modsecurity/owasp\n\n\n\n# step 3: edit rules\n\n 1. edit /etc/nginx/rules/modsecurity/modsecurity.conf and change secruleengine detectiononly to secruleengine on.\n 2. edit /etc/nginx/rules/modsecurity/modsecurity.conf and append the following at the end of the file.\n    \n    include /usr/local/src/ngx_waf/assets/rules/crs-setup.conf\n    include /etc/nginx/rules/modsecurity/owasp/*.conf\n    \n\n\n# step 4: load rules\n\nedit the nginx configuration file.\n\nwaf_modsecurity on file=/etc/nginx/rules/modsecurity/modsecurity.conf;\n\n\n\n# step 5: optimize performance\n\nenabling rules causes a significant performance degradation due to the complexity of modsecurity's rules engine, but this also gives it power.\n\ngenerally we do not need to inspect some static files, so we can optimize performance based on this.\n\nedit the nginx configuration file.\n\nlocation ~* \\.(gif|jpg|png|jpeg|webp|bmp|swf)$ {\n    waf_modsecurity off;\n}\n\nlocation ~* \\.(html|htm|js|css)$ {\n    waf_modsecurity off;\n}\n\n\n\n# step 6: restart nginx\n\nnginx -s stop\nnginx\n\n\nwhy not nginx -s reload ?\n\n * ngin reload memory leak Â· issue #2552 Â· spiderlabs/modsecurity\n * it often leads memory leak on nginx reload Â· issue #2502 Â· spiderlabs/modsecurity\n\n\n# step 7: testing\n\nat this point you should check your website to make sure that no false positives will cause your website to be abnormal.\n\n\n# step 8: handling false positives\n\n * including owasp modsecurity core rule set â welcome to netnea\n * handling false positives with the owasp modsecurity core rule set â welcome to netnea\n * reference manual (v2.x) Â· spiderlabs/modsecurity wiki",charsets:{cjk:!0}},{title:"Limit the rate per arbitrary URL",frontmatter:{title:"Limit the rate per arbitrary URL",lang:"en"},regularPath:"/practice/limit-the-rate-per-arbitrary-url.html",relativePath:"practice/limit-the-rate-per-arbitrary-url.md",key:"v-b91d9d08",path:"/practice/limit-the-rate-per-arbitrary-url.html",headers:[{level:2,title:"For LTS version",slug:"for-lts-version",normalizedTitle:"for lts version",charIndex:189},{level:2,title:"For 'Current' version",slug:"for-current-version",normalizedTitle:"for 'current' version",charIndex:496}],lastUpdated:"1/10/2022, 3:38:27 PM",lastUpdatedTimestamp:1641829107e3,headersStr:"For LTS version For 'Current' version",content:"# Limit the rate per arbitrary URL\n\nSometimes you may want to limit the request rate for different paths or files, such as using different rate limits for static and dynamic resources.\n\n\n# For LTS version\n\n# Limit the request rate for static resources to 10,000 requests per minute.\nlocation /static/ {\n    waf_cc_deny rate=10000r/m duration=1h;\n}\n\n# Limit the request rate for dynamic resources to 2,000 requests per minute.\nlocation /dynamic/ {\n    waf_cc_deny rate=2000r/m duration=1h;\n}\n\n\n\n# For 'Current' version\n\nhttp {\n    waf_zone name=waf size=20m;\n    server {\n        # Limit the request rate for static resources to 10,000 requests per minute.\n        location /static/ {\n            waf_cc_deny rate=10000r/m duration=1h zone=waf:cc_static;\n        }\n\n        # Limit the request rate for dynamic resources to 2,000 requests per minute.\n        location /dynamic/ {\n            waf_cc_deny rate=2000r/m duration=1h zone=waf:cc_dynamic;\n        }\n    }\n}\n",normalizedContent:"# limit the rate per arbitrary url\n\nsometimes you may want to limit the request rate for different paths or files, such as using different rate limits for static and dynamic resources.\n\n\n# for lts version\n\n# limit the request rate for static resources to 10,000 requests per minute.\nlocation /static/ {\n    waf_cc_deny rate=10000r/m duration=1h;\n}\n\n# limit the request rate for dynamic resources to 2,000 requests per minute.\nlocation /dynamic/ {\n    waf_cc_deny rate=2000r/m duration=1h;\n}\n\n\n\n# for 'current' version\n\nhttp {\n    waf_zone name=waf size=20m;\n    server {\n        # limit the request rate for static resources to 10,000 requests per minute.\n        location /static/ {\n            waf_cc_deny rate=10000r/m duration=1h zone=waf:cc_static;\n        }\n\n        # limit the request rate for dynamic resources to 2,000 requests per minute.\n        location /dynamic/ {\n            waf_cc_deny rate=2000r/m duration=1h zone=waf:cc_dynamic;\n        }\n    }\n}\n",charsets:{}},{title:"Overview",frontmatter:{title:"Overview",lang:"en"},regularPath:"/practice/overview.html",relativePath:"practice/overview.md",key:"v-52542808",path:"/practice/overview.html",lastUpdated:"1/10/2022, 3:38:27 PM",lastUpdatedTimestamp:1641829107e3,headersStr:null,content:"# Overview\n\nBecause of the complexity of the module's directives, we have listed some common uses here to make it less difficult to use.\n\n * Limit the rate per arbitrary URL\n * Enable CAPTCHA\n * Enable CAPTCHA when blocking requests\n * Reduce bandwidth usage when attacked\n * Protect against distributed CC Attacks (distributed HTTP flooding)\n * Enable ModSecurity",normalizedContent:"# overview\n\nbecause of the complexity of the module's directives, we have listed some common uses here to make it less difficult to use.\n\n * limit the rate per arbitrary url\n * enable captcha\n * enable captcha when blocking requests\n * reduce bandwidth usage when attacked\n * protect against distributed cc attacks (distributed http flooding)\n * enable modsecurity",charsets:{}},{title:"Protect against distributed CC Attacks (distributed HTTP flooding)",frontmatter:{title:"Protect against distributed CC Attacks (distributed HTTP flooding)",lang:"en"},regularPath:"/practice/protect-against-distributed-http-flood.html",relativePath:"practice/protect-against-distributed-http-flood.md",key:"v-f8976a88",path:"/practice/protect-against-distributed-http-flood.html",headers:[{level:2,title:"Enable CAPTCHA",slug:"enable-captcha",normalizedTitle:"enable captcha",charIndex:624},{level:2,title:"Enable Under-Attack-Mode",slug:"enable-under-attack-mode",normalizedTitle:"enable under-attack-mode",charIndex:664},{level:3,title:"LTS version",slug:"lts-version",normalizedTitle:"lts version",charIndex:1307},{level:3,title:"Current version",slug:"current-version",normalizedTitle:"current version",charIndex:1588},{level:2,title:"Reduce bandwidth usage when attacked",slug:"reduce-bandwidth-usage-when-attacked",normalizedTitle:"reduce bandwidth usage when attacked",charIndex:1809}],lastUpdated:"1/10/2022, 3:38:27 PM",lastUpdatedTimestamp:1641829107e3,headersStr:"Enable CAPTCHA Enable Under-Attack-Mode LTS version Current version Reduce bandwidth usage when attacked",content:"# Protect against distributed CC Attacks (distributed HTTP flooding)\n\nCC is an attack that uses a large number of HTTP requests to exhaust the server's resources. This type of attack is known as HTTP flooding.\n\nIf the attacker uses a small number of IP, the protection is simpler because it is only necessary to limit rate of requests per IP. But if the attacker uses a large number of IP to attack, simply limiting the rate of requests per IP will not help. This type of CC attack using a large number of IP is called a distributed CC attack or distributed HTTP flooding.\n\nThis module provides some mitigation methods.\n\n\n# Enable CAPTCHA\n\nSee enable CAPTCHA.\n\n\n# Enable Under-Attack-Mode\n\nYou may have heard of Cloudflare's Under-Attack-Mode, this module's Under-Attack-Mode is completely different from Cloudflare's. Its role is to detect whether the client can correctly support cookies, such as sending cookies and correctly handle the response header Set-Cookie.\n\nYou can enable Under-Attack-Mode by copying the file under-attack.html from the project's directory assets/ and copying it to a path, then modifying the nginx configuration file.\n\nTo enable Under-Attack-Mode, you need to copy the file /path/to/ngx_waf/assets/under-attack.html to a path, and then modify the nginx configuration file.\n\n\n# LTS version\n\n * Enable Under-Attack-Mode for entire site.\n   \n   server {\n       waf_under_attack on file=/path/to/under_attack.html;\n   }\n   \n\n * Enable Under-Attack-Mode for a path.\n   \n   location /path {\n       waf_under_attack on file=/path/to/under_attack.html;\n   }\n   \n\n\n# Current version\n\n * Enable Under-Attack-Mode for entire site.\n   \n   server {\n       waf_under_attack on;\n   }\n   \n\n * Enable Under-Attack-Mode for a path.\n   \n   location /path {\n       waf_under_attack on;\n   }\n   \n\n\n# Reduce bandwidth usage when attacked\n\nSee reduce bandwidth usage when attacked.",normalizedContent:"# protect against distributed cc attacks (distributed http flooding)\n\ncc is an attack that uses a large number of http requests to exhaust the server's resources. this type of attack is known as http flooding.\n\nif the attacker uses a small number of ip, the protection is simpler because it is only necessary to limit rate of requests per ip. but if the attacker uses a large number of ip to attack, simply limiting the rate of requests per ip will not help. this type of cc attack using a large number of ip is called a distributed cc attack or distributed http flooding.\n\nthis module provides some mitigation methods.\n\n\n# enable captcha\n\nsee enable captcha.\n\n\n# enable under-attack-mode\n\nyou may have heard of cloudflare's under-attack-mode, this module's under-attack-mode is completely different from cloudflare's. its role is to detect whether the client can correctly support cookies, such as sending cookies and correctly handle the response header set-cookie.\n\nyou can enable under-attack-mode by copying the file under-attack.html from the project's directory assets/ and copying it to a path, then modifying the nginx configuration file.\n\nto enable under-attack-mode, you need to copy the file /path/to/ngx_waf/assets/under-attack.html to a path, and then modify the nginx configuration file.\n\n\n# lts version\n\n * enable under-attack-mode for entire site.\n   \n   server {\n       waf_under_attack on file=/path/to/under_attack.html;\n   }\n   \n\n * enable under-attack-mode for a path.\n   \n   location /path {\n       waf_under_attack on file=/path/to/under_attack.html;\n   }\n   \n\n\n# current version\n\n * enable under-attack-mode for entire site.\n   \n   server {\n       waf_under_attack on;\n   }\n   \n\n * enable under-attack-mode for a path.\n   \n   location /path {\n       waf_under_attack on;\n   }\n   \n\n\n# reduce bandwidth usage when attacked\n\nsee reduce bandwidth usage when attacked.",charsets:{}},{title:"Reduce bandwidth usage when attacked",frontmatter:{title:"Reduce bandwidth usage when attacked",lang:"en"},regularPath:"/practice/reduce-bandwidth-usage-when-attacked.html",relativePath:"practice/reduce-bandwidth-usage-when-attacked.md",key:"v-a2cc2b88",path:"/practice/reduce-bandwidth-usage-when-attacked.html",headers:[{level:2,title:"For LTS version",slug:"for-lts-version",normalizedTitle:"for lts version",charIndex:358},{level:2,title:"For Current version",slug:"for-current-version",normalizedTitle:"for current version",charIndex:409}],lastUpdated:"1/10/2022, 3:38:27 PM",lastUpdatedTimestamp:1641829107e3,headersStr:"For LTS version For Current version",content:"# Reduce bandwidth usage when attacked\n\nWhen you are under CC attack, the attacker's IP has been banned by the CC protection, but your upstream and downstream bandwidth is still high. This is because the CC protection returns a status code of 503 and therefore hogs your bandwidth.\n\nYou can use the following configuration to reduce the bandwidth usage.\n\n\n# For LTS version\n\nwaf_http_status cc_deny=444;\n\n\n\n# For Current version\n\nwaf_action cc_deny=444;\n\n\nStatus code 444 is a non-standard HTTP status code defined by nginx that serves to close the connection and not send any data.\n\nWARNING\n\nIf you use status code 444, then your site will look like it doesn't exist to the user. This is because web site errors usually have HTTP status codes to indicate errors.\n\nIf you visit a website and not only do you not see the page, but also there is no error message, then the website probably does not exist.",normalizedContent:"# reduce bandwidth usage when attacked\n\nwhen you are under cc attack, the attacker's ip has been banned by the cc protection, but your upstream and downstream bandwidth is still high. this is because the cc protection returns a status code of 503 and therefore hogs your bandwidth.\n\nyou can use the following configuration to reduce the bandwidth usage.\n\n\n# for lts version\n\nwaf_http_status cc_deny=444;\n\n\n\n# for current version\n\nwaf_action cc_deny=444;\n\n\nstatus code 444 is a non-standard http status code defined by nginx that serves to close the connection and not send any data.\n\nwarning\n\nif you use status code 444, then your site will look like it doesn't exist to the user. this is because web site errors usually have http status codes to indicate errors.\n\nif you visit a website and not only do you not see the page, but also there is no error message, then the website probably does not exist.",charsets:{}},{title:"Development Plans",frontmatter:{title:"Development Plans",lang:"en"},regularPath:"/roadmap/overview.html",relativePath:"roadmap/overview.md",key:"v-79e8da30",path:"/roadmap/overview.html",headers:[{level:2,title:"List",slug:"list",normalizedTitle:"list",charIndex:179}],lastUpdated:"1/10/2022, 3:38:27 PM",lastUpdatedTimestamp:1641829107e3,headersStr:"List",content:"# Development Plans\n\nThis page will list the development plan of the project, including but not limited to new features.\n\nLook forward to your feedbacks and suggestions soon!\n\n\n# List",normalizedContent:"# development plans\n\nthis page will list the development plan of the project, including but not limited to new features.\n\nlook forward to your feedbacks and suggestions soon!\n\n\n# list",charsets:{}},{title:"Home",frontmatter:{home:!0,heroImage:"https://cdn.jsdelivr.net/gh/ADD-SP/ngx_waf@master/assets/logo.png",heroText:"ngx_waf",tagline:"æ¹ä¾¿ä¸é«æ§è½ç Nginx é²ç«å¢æ¨¡åã",actionText:"å¿«éä¸æ â",actionLink:"/zh-cn/guide/overview.html",features:[{title:"åºç¡é²æ¤",details:"å¦ IP æ IP ç½æ®µçé»ç½ååãURI é»ç½åååè¯·æ±ä½é»ååç­ã"},{title:"ä½¿ç¨ç®å",details:"éç½®æä»¶åè§åæä»¶ä¹¦åç®åï¼å¯è¯»æ§å¼ºã"},{title:"é«æ§è½",details:"ä½¿ç¨é«æç IP æ£æ¥ç®æ³åç¼å­æºå¶ã"},{title:"é«çº§é²æ¤",details:"å¼å®¹ ModSecurity çè§åï¼ä½ å¯ä»¥ä½¿ç¨ OWASP çæ ¸å¿è§ååºã"},{title:"åå¥½ç¬è«éªè¯",details:"æ¯æéªè¯ GoogleãBingãBaidu å Yandex çç¬è«å¹¶èªå¨æ¾è¡ï¼é¿åéè¯¯æ¦æªã"},{title:"éªè¯ç ",details:"æ¯æä¸ç§éªè¯ç ï¼hCaptchaãreCAPTCHAv2 å reCAPTCHAv3ã"}],footer:"BSD 3-Clause License | Copyright Â© 2020, ADD-SP"},regularPath:"/zh-cn/",relativePath:"zh-cn/README.md",key:"v-6cb04d69",path:"/zh-cn/",lastUpdated:"2022/1/10 ä¸å3:38:27",lastUpdatedTimestamp:1641829107e3,headersStr:null,content:"",normalizedContent:"",charsets:{}},{title:"éç½®è¯­æ³",frontmatter:{title:"éç½®è¯­æ³",lang:"zh-CN"},regularPath:"/zh-cn/advance/directive.html",relativePath:"zh-cn/advance/directive.md",key:"v-793f1988",path:"/zh-cn/advance/directive.html",headers:[{level:2,title:"waf",slug:"waf",normalizedTitle:"waf",charIndex:11},{level:2,title:"waf_zone",slug:"waf-zone",normalizedTitle:"waf_zone",charIndex:172},{level:2,title:"waf_rule_path",slug:"waf-rule-path",normalizedTitle:"waf_rule_path",charIndex:558},{level:2,title:"waf_mode",slug:"waf-mode",normalizedTitle:"waf_mode",charIndex:667},{level:2,title:"waf_cc_deny",slug:"waf-cc-deny",normalizedTitle:"waf_cc_deny",charIndex:322},{level:2,title:"waf_cache",slug:"waf-cache",normalizedTitle:"waf_cache",charIndex:1935},{level:2,title:"waf_modsecurity",slug:"waf-modsecurity",normalizedTitle:"waf_modsecurity",charIndex:3986},{level:2,title:"waf_modsecurity_transaction_id",slug:"waf-modsecurity-transaction-id",normalizedTitle:"waf_modsecurity_transaction_id",charIndex:4946},{level:2,title:"waf_captcha",slug:"waf-captcha",normalizedTitle:"waf_captcha",charIndex:5313},{level:2,title:"waf_verify_bot",slug:"waf-verify-bot",normalizedTitle:"waf_verify_bot",charIndex:6690},{level:2,title:"waf_under_attack",slug:"waf-under-attack",normalizedTitle:"waf_under_attack",charIndex:7377},{level:2,title:"waf_priority",slug:"waf-priority",normalizedTitle:"waf_priority",charIndex:8365},{level:2,title:"waf_http_status",slug:"waf-http-status",normalizedTitle:"waf_http_status",charIndex:9153},{level:2,title:"waf_action",slug:"waf-action",normalizedTitle:"waf_action",charIndex:9488},{level:2,title:"waf_block_page",slug:"waf-block-page",normalizedTitle:"waf_block_page",charIndex:10120}],lastUpdated:"2022/1/10 ä¸å3:38:27",lastUpdatedTimestamp:1641829107e3,headersStr:"waf waf_zone waf_rule_path waf_mode waf_cc_deny waf_cache waf_modsecurity waf_modsecurity_transaction_id waf_captcha waf_verify_bot waf_under_attack waf_priority waf_http_status waf_action waf_block_page",content:'# éç½®è¯­æ³\n\n\n# waf\n\n * éç½®è¯­æ³: waf <on | off | bypass >\n * é»è®¤éç½®ï¼waf off\n * éç½®æ®µ: http, server, location\n\nå¼å¯ãå³é­æä»æ£æµã\n\n * on: å¼å¯é²ç«å¢ã\n * off: å³é­é²ç«å¢ã\n * bypass: ä»æ£æµå¹¶è®°å½æ¥å¿ï¼ä¸æ¦æªä»»ä½è¯·æ±ã\n\n\n# waf_zone\n\n * éç½®è¯­æ³: waf_zone <name=zone_name> [size=5m]\n * é»è®¤éç½®ï¼ââ\n * éç½®æ®µ: http\n\nåå»ºä¸æ®µå±äº«åå­ï¼ç¨äºè®°å½ä¸äºéè¦è·¨è¿ç¨å±äº«çä¿¡æ¯ï¼å ä¸º nginx çå¤è¿ç¨æ¨¡åã\n\nå¨ä½ ä½¿ç¨æäºéç½®æ¶å¯è½éè¦å¡«ååæ° zoneï¼æ¯å¦ waf_cc_denyã å¡«åæ ¼å¼ä¸º name:tagï¼å³åç§°åæ ç­¾ãåç§°åæ ç­¾æ¯ âå¤å¯¹å¤â çå³ç³»ï¼ä½æ¯å¯¹äºåä¸ä¸ª zoneï¼ æ ç­¾åä¸è½éå¤ã\n\nåä¸ä¸ª zone åçå¨é¨æ ç­¾å±ç¨è¯¥ zone çå¨é¨çå±äº«åå­ãåºäºæ§è½èèï¼å»ºè®®ä¸ºæ¯ä¸ª server æ®µåå»ºä¸ä¸ª zoneï¼ æå¥½ä¸è¦å¤ä¸ª server æ®µå±ç¨ä¸ä¸ª zoneï¼å ä¸ºè®¿é®å±äº«åå­éè¦ä¸éï¼è¦å°½éåå°ä¸éçæ¬¡æ°ã\n\nä¼°ç®æéçåå­å¤§å°\n\nç»è¿ä¼°è®¡ï¼1M çåå­è³å°å¯ä»¥è®°å½ 4096 ä¸ª IPã\n\n\n# waf_rule_path\n\n * éç½®è¯­æ³: waf_rule_path <dir>\n * é»è®¤éç½®ï¼ââ\n * éç½®æ®µ: http, server, location\n\nè§åæä»¶æå¨ç®å½ï¼ä¸å¿é¡»ä»¥/ç»å°¾ã\n\n\n# waf_mode\n\n * éç½®è¯­æ³: waf_mode <mode_type> ...\n * é»è®¤éç½®ï¼ââ\n * éç½®æ®µ: http, server, location\n\næå®é²ç«å¢çå·¥ä½æ¨¡å¼ï¼è³å°æå®ä¸ä¸ªæ¨¡å¼ï¼æå¤æå®å«ä¸ªæ¨¡å¼ã\n\nmode_typeå·æä¸ååå¼ï¼ä¸åºåå¤§å°åï¼:\n\n * GET: å½Http.Method=GETæ¶å¯å¨æ£æ¥ã\n * HEAD: å½Http.Method=HEADæ¶å¯å¨æ£æ¥ã\n * POST: å½Http.Method=POSTæ¶å¯å¨æ£æ¥ã\n * PUT: å½Http.Method=PUTæ¶å¯å¨æ£æ¥ã\n * DELETE: å½Http.Method=DELETEæ¶å¯å¨æ£æ¥ã\n * MKCOL: å½Http.Method=MKCOLæ¶å¯å¨æ£æ¥ã\n * COPY: å½Http.Method=COPYæ¶å¯å¨æ£æ¥ã\n * MOVE: å½Http.Method=MOVEæ¶å¯å¨æ£æ¥ã\n * OPTIONS: å½Http.Method=OPTIONSæ¶å¯å¨æ£æ¥ã\n * PROPFIN: å½Http.Method=PROPFINæ¶å¯å¨æ£æ¥ã\n * PROPPATCH: å½Http.Method=PROPPATCHæ¶å¯å¨æ£æ¥ã\n * LOCK: å½Http.Method=LOCKæ¶å¯å¨æ£æ¥ã\n * UNLOCK: å½Http.Method=UNLOCKæ¶å¯å¨æ£æ¥ã\n * PATCH: å½Http.Method=PATCHæ¶å¯å¨æ£æ¥ã\n * TRAC: å½Http.Method=TRACæ¶å¯å¨æ£æ¥ã\n * CMN-METHï¼ç­ä»·äº HEAD GET POSTã\n * ALL-METHï¼ä»»æç HTTP è¯·æ±æ¹æ³é½ä¼å¯å¨æ£æ¥ã\n * IP: å¯ç¨ IP å°åçæ£æ¥è§åã\n * URL: å¯ç¨ url çæ£æ¥è§åã\n * RBODY: å¯ç¨ POST è¯·æ±ä½çæ£æ¥è§åã\n * ARGS: å¯ç¨ args çæ£æ¥è§åã\n * UA: å¯ç¨ user-agent çæ£æ¥è§åã\n * COOKIE: å¯ç¨ cookie çæ£æ¥è§åã\n * REFERER: å¯ç¨ referer çæ£æ¥è§åã\n * CC: å¯ç¨ CC é²å¾¡ãå½ä½ å¯ç¨äºæ­¤æ¨¡å¼ï¼ä½ å¿é¡»è®¾ç½® waf_cc_denyã\n * ADVï¼å¯ç¨é«çº§è§åã\n * LIB-INJECTION-SQLIï¼ä½¿ç¨ libinjection æ£æµ SQL æ³¨å¥ã\n * LIB-INJECTION-XSSï¼ä½¿ç¨ libinjection æ£æµ XSS æ»å»ã\n * LIB-INJECTIONï¼ç­ä»·äº LIB-INJECTION-SQLI LIB-INJECTION-XSSã\n * CACHEï¼å¯ç¨ç¼å­ãå¯ç¨æ­¤æ¨¡å¼åä¼ç¼å­æ£æ¥çç»æï¼ä¸æ¬¡æ£æ¥ç¸åçç®æ æ¶å°±ä¸éè¦éå¤æ£æ¥äºãä¸è¿ä¸ä¼ç¼å­ POST ä½çæ£æ¥ç»æãæ¯å¦ä¸ä¸ª URL ç»è¿æ£æ¥åå¹¶æ²¡æå¨é»ååä¸­ï¼é£ä¹ä¸æ¬¡æ£æ¥ç¸åç URL æ¶å°±æ éåæ¬¡æ£æ¥ URL é»ååäºãå½ä½ å¯ç¨äºæ­¤æ¨¡å¼ï¼ä½ å¿é¡»è®¾ç½® waf_cacheã\n * STDï¼æ åå·¥ä½æ¨¡å¼ï¼ç­ä»·äº HEAD GET POST IP URL RBODY ARGS UA CC CACHE LIB-INJECTION-SQLIã\n * STATICï¼éç¨äºéæç«ç¹çå·¥ä½æ¨¡å¼ï¼ç­ä»·äº HEAD GET IP URL UA CC CACHEã\n * DYNAMICï¼éç¨äºå¨æç«ç¹çå·¥ä½æ¨¡å¼ï¼ç­ä»·äº HEAD GET POST IP URL ARGS UA RBODY COOKIE CC CACHE LIB-INJECTION-SQLIã\n * FULL: å¯ç¨ææçæ¨¡å¼ã\n * [æ°æ®å é¤]: å¯ç¨æ­¤æ¨¡å¼ä¼[æ°æ®å é¤]ã\n\næ¨å¯ä»¥éè¿å¨æä¸ª mode_type åå¢å  ! åç¼æ¥å³é­è¯¥æ¨¡å¼ï¼ä¸é¢æ¯ä¸ä¸ªä¾å­ã è¡¨ç¤ºä½¿ç¨æ åçå·¥ä½æ¨¡å¼ï¼ä½æ¯ä¸æ£æ¥ User-Agentã\n\nwaf_mode STD !UA;\n\n\næ³¨æ\n\nå¦æåæ¶å¯ç¨ä¸¤ä¸ªåä»¥ä¸çå­å¨å²çªçæ¨¡å¼ï¼åé å³çæ¨¡å¼ä¼è¦çå®å·¦è¾¹çæ¨¡å¼ãä¸é¢çä¾å­è¡¨ç¤ºæ£æ¥ User-Agentã\n\nwaf_mode !UA STD;\n\n\næ³¨æ\n\nCCæ¯ç¬ç«äºå¶å®æ¨¡å¼çæ¨¡å¼ï¼å¶çæä¸å¦ä¸åå°å¶å®æ¨¡å¼çå½±åãå¸åæåµå¦URLæ¨¡å¼ä¼åå°GETæ¨¡å¼çå½±åï¼å ä¸ºå¦æä¸ä½¿ç¨GETæ¨¡å¼ï¼é£ä¹å¨æ¶å°GETè¯·æ±æ¶å°±ä¸ä¼å¯å¨æ£æ¥ï¼èªç¶ä¹å°±ä¸ä¼æ£æ¥ URLï¼ä½æ¯CCæ¨¡å¼ä¸ä¼åå°ç±»ä¼¼çå½±åã\n\nææ°ç Current çæ¬ä¸­çåå\n\nåæ° CC å CACHE è¢«å é¤ã\n\n * STDï¼æ åå·¥ä½æ¨¡å¼ï¼ç­ä»·äº HEAD GET POST IP URL RBODY ARGS UAã\n * STATICï¼éç¨äºéæç«ç¹çå·¥ä½æ¨¡å¼ï¼ç­ä»·äº HEAD GET IP URL UAã\n * DYNAMICï¼éç¨äºå¨æç«ç¹çå·¥ä½æ¨¡å¼ï¼ç­ä»·äº HEAD GET POST IP URL ARGS UA RBODY COOKIEã\n * LIBINJECTIONï¼å·²ç§»é¤ã\n * LIBINJECTION-SQLIï¼å·²ç§»é¤ã\n * LIBINJECTION-XSSï¼å·²ç§»é¤ã\n * ADVï¼å·²ç§»é¤ã\n\n\n# waf_cc_deny\n\n * éç½®è¯­æ³: waf_cc_deny <rate=nr/m> [duration=1h] [size=20m]\n * é»è®¤éç½®ï¼ââ\n * éç½®æ®µ: http, server, location\n\nè®¾ç½® CC é²æ¤ç¸å³çåæ°ã\n\n * rateï¼è¡¨ç¤ºä¸æ®µæ¶é´åçè¯·æ±æ¬¡æ°çä¸éï¼å¦ 500r/mãè¶åºéå¶åä¼è¿å 503 ç¶æç ï¼å¹¶éå¸¦ Retry-After ååºå¤´ã\n * durationï¼è¡¨ç¤ºè¶åºç¬¬ä¸ä¸ªåæ° rate çéå¶åæé» IP çæ¶é´ï¼å¦ 60sã60mã60h å 60dï¼å¦ä¸æå®åé»è®¤ä¸º 1hã\n * sizeï¼ç¨äºè®¾ç½®è®°å½ IP è®¿é®æ¬¡æ°çåå­çå¤§å°ï¼å¦ 20mã2048kï¼ä¸å¾å°äº 20mï¼å¦ä¸æå®åé»è®¤ä¸º 20mãå½è¿æ®µåå­èå°½çæ¶åç¨åºä¼æç§ LRU ç­ç¥æ¸çä¸é¨åè®¿é®è®°å½ã\n\nææ°ç Current çæ¬ä¸­çåå\n\n * éç½®è¯­æ³: waf_cc_deny <off | on> <rate=nr/t> <zone=name:tag> [duration=1h]\n * é»è®¤éç½®ï¼waf_cc_deny off\n * éç½®æ®µ: server, location\n\n----------------------------------------\n\n * zoneï¼æå®æä½¿ç¨çå±äº«åå­åæ ç­¾ï¼ç¨äºè®°å½ IP çè®¿é®æ¬¡æ°ãå½è¿æ®µåå­èå°½çæ¶åç¨åºä¼æç§ LRU ç­ç¥æ¸çä¸é¨åè®¿é®è®°å½ã\n * rateï¼è¡¨ç¤ºä¸æ®µæ¶é´åçè¯·æ±æ¬¡æ°çä¸éï¼å¦ 500r/sã500r/60sã500r/mã500r/60mã500r/hã500r/60h å 500r/dãè¶åºéå¶åä¼è¿å 503 ç¶æç ï¼å¹¶éå¸¦ Retry-After ååºå¤´ã\n\n\n# waf_cache\n\n * éç½®è¯­æ³: waf_cache <capacity=n>\n * é»è®¤éç½®ï¼â\n * éç½®æ®µ: http, server, location\n\nè®¾ç½®ç¼å­è§åæ£æ¥ç»æç¸å³çåæ°ã\n\n * capacityï¼å¯¹äºä¸äºå¯ç¨äºç¼å­æºå¶çæ£æµé¡¹ç®ï¼æ¯ä¸ªæ£æµé¡¹ç®æå¤ç¼å­å¤å°ä¸ªæ£æµç®æ çæ£æµç»æã\n\nå¯ç¨äºç¼å­æºå¶çæ£æµé¡¹ç®\n\nå¯ç¨äºç¼å­æºå¶çæ£æµé¡¹ç®æé¤äº CC é²æ¤ãIP é»ç½ååæ£æµå POST æ£æµä¹å¤çææçæ£æµé¡¹ã\n\næ§è½ä¼åå»ºè®®\n\ncapacity è¿å°ä¼å¯¼è´é¢ç¹å°æ·æ±°ç¼å­ï¼å¢å åå­ç¢çï¼éä½æ§è½ãæä»¥è¯·æ ¹æ®å®éåºç¨åºæ¯åçå°è®¾ç½®ã\n\nææ°ç Current çæ¬ä¸­çåå\n\n * éç½®è¯­æ³: waf_cache <off | on> [capacity=50]\n * é»è®¤éç½®ï¼waf_cache off capacity=50\n * éç½®æ®µ: server, location\n\n\n# waf_modsecurity\n\n * éç½®è¯­æ³: waf_modsecurity <on | off> <file=*/path/to/modsecuriy/rules.conf*> <remote_key=key> <remote_url=url>\n * é»è®¤éç½®ï¼waf_modsecurity off\n * éç½®æ®µ: http, server, location\n\nä½¿ç¨ ModSecurity çè§åã\n\n * fileï¼è§åæä»¶çç»å¯¹è·¯å¾ã\n * remote_keyï¼ç¨äºè¯»åè¿ç¨è§åæä»¶çå¯é¥ã\n * remote_urlï¼ç¨äºè¯»åè¿ç¨æä»¶ç URLã\n\nä½ å¯ä»¥åè å¼å¯ ModSecurity | æä½³å®è·µ ä¸­çç¨æ³ã\n\næ³¨æ\n\n * å¦æä½ ä½¿ç¨äºåæ° remote_keyï¼ä½ å¿é¡»åæ¶ä½¿ç¨åæ° remote_urlã\n * å¦æä½ åæ¶ä½¿ç¨äºåæ° fileãremote_key å remote_urlï¼é£ä¹ä¸¤ä»½è§åé½ä¼è¢«å è½½ã\n\nåå­æ³é²\n\nåå­æ³é²ä¼å¯¼è´ç³»ç»çå¯ç¨åå­è¶æ¥è¶å°ï¼æ§è½éæ¸éä½ç´å°ç¨åºæç³»ç»å´©æºã\n\nå½å ModSecurity çææ°ç v3.0.5 å­å¨åå­æ³é²ç bugã\n\n * ngin reload memory leak Â· Issue #2552 Â· SpiderLabs/ModSecurity\n * It often leads memory leak on nginx reload Â· Issue #2502 Â· SpiderLabs/ModSecurity\n\nå¦ææ¨å¼å¯äº ModSecurityï¼éè½½ nginx æ¶ä¼åºç°åå­æ³é²ï¼é¿æ­¤ä»¥å¾å¯è½ä¼é æä¸¥éçåæã\n\næä»¬å¼ºçå»ºè®®æ¨é¿åä½¿ç¨ç±»ä¼¼ä¸é¢çå½ä»¤ã\n\nnginx -s reload\nsystemctl restart nginx\nservice nginx restart\n\n\nå½æ¨éè¦éè½½ nginx æ¶ï¼å¼ºçå»ºè®®åå³é­ nginxï¼ç¶åå¯å¨ nginxã\n\nnginx -s stop && nginx\nsystemctl stop nginx && systemctl start nginx\nservice nginx stop && serivce nginx start\n\n\n\n# waf_modsecurity_transaction_id\n\n * éç½®è¯­æ³: waf_modsecurity_transaction_id <string>\n * é»è®¤éç½®ï¼waf_modsecurity off\n * éç½®æ®µ: http, server, location\n\næå® ModSecurity çäºå¡ IDãä½ å¯ä»¥å¨æ­¤å¤ä½¿ç¨å¸¸éå­ç¬¦ä¸²ååéï¼ä¸é¢æ¯ä¸ä¸ªä¾å­ã\n\nserver {\n    location /file/ {\n        waf_modsecurity_transaction_id "$host-file";\n    }\n\n    location /api/ {\n        waf_modsecurity_transaction_id "$host-api";\n    }\n}\n\n\n\n# waf_captcha\n\n * éç½®è¯­æ³: waf_captcha <on | off> <prov=hCaptcha | reCAPTCHAv2:checkbox | reCAPTCHAv2:invisible | reCAPTCHAv3> [file=/full/path] [sitekey=your_sitekey] <secret=your_secret> [score=0.5] [expire=30m] [api=uri] [verify=/captcha] [max_fails=times:duration] [zone=name:tag]\n * é»è®¤éç½®ï¼waf_captcha off\n * éç½®æ®µ: server, location\n\nä½¿ç¨éªè¯ç å¯¹å®¢æ·ç«¯è¿è¡äººæºè¯å«ã\n\n * provï¼éªè¯ç å¹³å°ï¼åå« hCaptchaãreCAPTCHAv2 å reCAPTCHAv3ã\n * fileï¼ç¨äºæ¥å¥éªè¯ç ç HTML æä»¶çç»å¯¹è·¯å¾ï¼ä½ å¯ä»¥ä» assets/ ä¸æ¾å°å¯¹åºç HTML æä»¶å¹¶å¨æä»¶ä¸­å¡«åä½ ç Sitekeyãå¦æä½ çç¥æ­¤åæ°ï¼åä¼æ ¹æ®åæ° prov çå¼éæ©å¹¶ä½¿ç¨ä¸ä¸ªåç½®ç HTML æä»¶ï¼æ¥èªç®å½ assets/ï¼ï¼æ­¤æ¶ä½ éè¦è®¾ç½®åæ° sitekeyã\n * sitekeyï¼ä½ ä»éªè¯ç å¹³å°è·åçç½ç«å¯é¥ï¼å½ä¸ä»å½åæ° file è¢«çç¥æ¶éè¦è®¾ç½®æ¬åæ°ã\n * secretï¼ç¨äºç¡®è®¤éªè¯ç çè¿è¡ç»æçå¯é¥ï¼ä½ å¯ä»¥ä»å¯¹åºçéªè¯ç å¹³å°è·å¾ã\n * socreï¼å½ prov=reCAPTCHAv3 æ¶ï¼è¿ä¸ªè¡¨ç¤ºéªè¯ç æåç»æçä¸éï¼ä½äºè¿ä¸ªå¼ä¼è¢«è§ä¸ºéªè¯å¤±è´¥ãé»è®¤å¼ä¸º 0.5ã\n * expireï¼éªè¯ç çè¿ææ¶é´ï¼è¿æåéè¦éæ°è¿è¡éªè¯ç ãé»è®¤ä¸º 30 åéã\n * apiï¼éªè¯ç å¹³å°çæä¾ç»æå¡ç«¯ç APIï¼ç¨äºç¡®è®¤éªè¯ç çè¿è¡ç»æã\n   * å¦æ prov=hCaptchaï¼åé»è®¤å¼ä¸º https://hcaptcha.com/siteverifyã\n   * å¦æ prov=reCAPTCHAv2:xxxï¼åé»è®¤å¼ä¸º https://www.recaptcha.net/recaptcha/api/siteverifyã\n   * å¦æ prov=reCAPTCHAv3ï¼åé»è®¤å¼ä¸º https://www.recaptcha.net/recaptcha/api/siteverifyã\n * verifyï¼éªè¯ç ååç«¯æäº¤ token æç¨ç urlï¼é»è®¤ä¸º /captchaã\n * max_failsï¼éªè¯ç æå¤§å·æ°/è¯éæ¬¡æ°ï¼è¶åºè¿ä¸ªæ¬¡æ°æé»å¯¹åºç IP ä¸æ®µæ¶é´ãä¾å¦ max_fails=20:5m è¡¨ç¤ºè¿ç»­å·æ°/è¯éäºåæ¬¡åæé» 5 åéãå½ä½ ä½¿ç¨è®¡è´¹çéªè¯ç æ¶è¿å¾æç¨ãå½ä½ è®¾ç½®äºæ­¤åæ°ï¼ä½ å¿é¡»åæ¶è®¾ç½®åæ° zoneã\n * zoneï¼è®¾ç½®ç¨äºè®°å½éªè¯ç è¯éæ¬¡æ°çå±äº«åå­ï¼å½ä¸ä»å½åæ° max_fails è¢«è®¾ç½®æ¶æéè¦è®¾ç½®æ­¤åæ°ã\n\nä½ å¯ä»¥åèå¼å¯éªè¯ç  | æä½³å®è·µä¸­çç¨ä¾ã\n\nèªå®ä¹éªè¯ç é¡µé¢\n\nä½ å¯ä»¥ä»¥ç®å½ assets/ ä¸ç HTML æä»¶ä¸ºåºç¡ï¼èªå®ä¹éªè¯ç é¡µé¢ï¼ç¶åéè¿åæ° fileå è½½ã\n\nä¸è¦å¿è®°å¨ HTML æä»¶ä¸­å¡«å sitekeyã\n\n\n# waf_verify_bot\n\n * éç½®è¯­æ³: waf_verify_bot <off | on | strict> [who] ...\n * é»è®¤éç½®ï¼waf_verify_bot off GoogleBot BingBot BaiduSpider YandexBot SogouSpider\n * éç½®æ®µ: http, server, location\n\néªè¯åå¥½çç¬è«ï¼æ¯å¦ç¾åº¦èèã\n\nå¦æç¬¬ä¸ä¸ªåæ°æ¯ on åä¼åæ­¢åç»­çæææ£æ¥å¹¶æ¾è¡æ¬æ¬¡è¯·æ±ã\n\nå¦æç¬¬ä¸ä¸ªåæ°æ¯ strictï¼åå¦ææä¸ªè¯·æ±ç User-Agent æ­£ç¡®ï¼ä½æ¯ IP å°åä¸æ­£ç¡®åä¼è¢«æ¦æªï¼æè¯¯æ¥ï¼ã\n\n * whoï¼ç¬è«çåç§°ï¼åå¼åæ¬ GoogleBotãBingBotãBaiduSpiderã YandexBot å SogouSpiderãå¦ä¸æå®åé»è®¤ä¸ºå¨é¨ã\n\nå·¥ä½åç\n\n * Overview of Google crawlers (user agents) | Search Central\n * Googlebot Verification | Google Search Central | Google Developers\n * Which Crawlers Does Bing Use? - Bing Webmaster Tools\n * How to Verify Bingbot\n * ç¾åº¦ç¨æ·æå¡ä¸­å¿-ç«é¿å¹³å°\n * How to check that a robot belongs to Yandex\n * æçèµæºå¹³å°_å¬å¹³å¼æ¾çäº¤æµå¹³å°\n\n\n# waf_under_attack\n\n * éç½®è¯­æ³: waf_under_attack <on | off> [uri=str]\n * é»è®¤éç½®ï¼waf_under_attack off\n * éç½®æ®µ: http, server, location\n\nå¦ææ¨çç«ç¹æ­£å¨åå°æ»å»å¯ä»¥å°è¯ä½¿ç¨æ­¤éç½®ã å¼å¯åæ¯ä¸ªç¨æ·é¦æ¬¡è®¿é®ä¼å¼ºå¶å»¶è¿äºç§ï¼å¹¶èªå¨è·³è½¬å° uri ææåçç½é¡µã\n\nå¦ææ»å»èéç¨æ»å»æ¹å¼ä¸è½å®ç¾æ¯æ Cookieï¼æ¬åè½å¯ä»¥å¤§å¹åº¦ç¼è§£æ­¤ç±»æ»å»é æçå½±åã\n\n * uri: å¯ä»¥æ¯ä¸ä¸ªå®æ´çç½åï¼ä¹å¯ä»¥æ¯ä¸ä¸ªè·¯å¾ãæ¯å¦ https://example.com/attack.html æ /attack.htmlã\n\nä½ å¯ä»¥åèæµå¾¡åå¸å¼ CC æ»å»ï¼HTTP æ´ªæ°´ï¼ | æä½³å®è·µä¸­çç¨ä¾ã\n\nå°æå·§\n\nuri ææåçç½é¡µåºè¯¥å¨äºç§åèªå¨è·³è½¬å°ç¨æ·æ³è¦è®¿é®çé¡µé¢ï¼é¡µé¢çç½åå¯ä»¥éè¿æ¥è¯¢å­ç¬¦ä¸²è·å¾ï¼åæ°åä¸º targetã\n\nassets/under-attack.html æ¯ä¸ä¸ªç¤ºä¾ç½é¡µï¼ä½ åºè¯¥å°è¿ä¸ªæä»¶æ·è´å°ä½ çç½ç«ç®å½ä¸ï¼å¹¶æ­£ç¡®å°éç½® uriã\n\nä½ èªç¶ä¹å¯ä»¥èªå·±ç¼åä¸ä¸ª html æä»¶ï¼ç¶åéè¿ uri æåå®ã\n\nææ°ç Current çæ¬ä¸­çåå\n\nå¨ LTS çæ¬ä¸­æä»¬éè¿éå®åå®ç°äºè¯¥åè½ï¼ä½æ¯è®¸å¤åå ï¼å¦ç¼å­å CDNï¼ä¼å¯¼è´éå®åå¤±è´¥ï¼æèä¸è½æ­£å¸¸éªè¯ Cookieã æä»¥æä»¬ä¿®æ¹äºå®ç°æ¹å¼ï¼æä»¬éè¿ä¿®æ¹ååºä½æ¥è¿åæå®çç½é¡µï¼è¿ç§æ¹å¼ä¸ä¼å¯¼è´ URI çæ¹åã\n\n * éç½®è¯­æ³: waf_under_attack <on | off> [file=full_path]\n * é»è®¤éç½®ï¼waf_under_attack off\n * éç½®æ®µ: http, server, location\n\nåæ¶æä»¬å¢å äºååºå¤´ Cache-Control: no-store ä»¥é¿åç¼å­å¸¦æ¥çå½±åã\n\n * ç§»é¤äºåæ° uriã\n * å¢å äºåæ° fileï¼è¯¥åæ°çå¼åºè¯¥æ¯ä¸ä¸ª HTML æä»¶çç»å¯¹è·¯å¾ï¼å¦ file=/path/to/under-attack.htmlãè¿ä¸ª HTML åªæä¸ä¸ªåè½ï¼å³äºç§åèªå¨å·æ°ãå½ä½ çç¥æ­¤åæ°æ¶ï¼é»è®¤ä½¿ç¨åç½®ç HTML æä»¶ï¼å®æ¥èª assets/under-attack.htmlã\n\n\n# waf_priority\n\n * éç½®è¯­æ³: waf_priority "str"\n * é»è®¤éç½®ï¼waf_priority "W-IP IP CC UNDER-ATTACK W-URL URL ARGS UA W-REFERER REFERER COOKIE ADV"\n * éç½®æ®µ: http, server, location\n\nè®¾ç½®åä¸ªæ£æµé¡¹ç®çä¼åçº§ï¼é¤äº POST æ£æµï¼POST æ£æµçä¼åçº§æ°¸è¿æä½ã\n\n * UNDER-ATTACK: éç½® waf_under_attackã\n * W-IPï¼IP ç½ååæ£æµ\n * IPï¼IP é»ååæ£æµ\n * CCï¼CC é²æ¤\n * W-URLï¼URL ç½ååæ£æµ\n * URLï¼URL é»ååæ£æµ\n * ARGSï¼URL åæ°ï¼æ¥è¯¢å­ç¬¦ä¸²ï¼é»ååæ£æµ\n * UAï¼User-Agent é»ååæ£æµ\n * W-REFERERï¼Referer ç½ååæ£æµ\n * REFERERï¼Referer é»ååæ£æµ\n * COOKIEï¼Cookie é»ååæ£æµ\n * ADVï¼è¡¨ç¤ºé«çº§è§åã\n\nè­¦å\n\nstr å¿é¡»ä½¿ç¨åå¼å·æèåå¼å·åè£¹ï¼ä¸ str å¿é¡»åå«å¨é¨çæ£æµé¡¹ç®ã\n\nææ°ç Current çæ¬ä¸­çåå\n\n * é»è®¤éç½®ï¼waf_priority "W-IP IP VERIFY-BOT CC CAPTCHA UNDER-ATTACK W-URL URL ARGS UA W-REFERER REFERER COOKIE POST MODSECURITY"\n\n----------------------------------------\n\n * VERIFY-BOTï¼åå¥½ç¬è«éªè¯ã\n * CAPTCHAï¼éªè¯ç ã\n * POSTï¼è¯·æ±ä½é»ååã\n * ADVï¼å·²ç»ç§»é¤ã\n * MODSECURITYã\n\n\n# waf_http_status\n\n * éç½®è¯­æ³: waf_http_status [general=http_status_code] [cc_deny=http_status_code]\n * é»è®¤éç½®: waf_http_status general=403 cc_deny=503\n * éç½®æ®µ: http, server, location\n\næ­¤æä»¤ç¨äºè®¾ç½®è¯·æ±è¢«æ¦æªæ¶è¿åç HTTP ç¶æç ã\n\n * general: è¡¨ç¤ºææåºäºé»ååçæ£æµé¡¹ç®è§¦ååè¿åç HTTP ç¶æç ã\n * cc_denyï¼è¡¨ç¤º CC é²æ¤è§¦ååè¿åç HTTP ç¶æç ã\n\nææ°ç Current çæ¬ä¸­çåå\n\næ­¤éç½®ä» v10.0.0 å¼å§è¢«ç§»é¤ï¼ç¸å³çåè½ç§»å¨å°éç½® waf_actionã\n\n\n# waf_action\n\n * éç½®è¯­æ³: waf_action [blacklist=action] [cc_deny=action] [modsecurity=action] [verify_bot=action] [zone=name:tag]\n * é»è®¤éç½®: waf_action blacklist=403 cc_deny=503 modsecurity=follow verify_bot=403\n * éç½®æ®µ: http, server, location\n\næ­¤éç½®ç¨äºè®¾ç½®æ¦æªä¸ä¸ªè¯·æ±æ¶çå¨ä½ï¼action è¡¨ç¤ºå·ä½çå¨ä½ï¼å¯ä»¥æ¯ä»¥ä¸å¼ã\n\n * 4xx | 5xxï¼è¡¨ç¤ºè¿å HTTP ç¶æç ã\n * CAPTCHAï¼è¡¨ç¤ºå¯ç¨éªè¯ç è¿è¡éªè¯ï¼åªæéè¿éªè¯æè§£é¤æé»ãåæ¶ï¼ä½ å¿é¡»è®¾ç½® waf_captchaã\n * followï¼å°é ModSecurity è§åçå¨ä½ï¼ä»å¯ç¨äºåæ° modsecurityã\n\nåæ°è¯´æï¼\n\n * blacklistï¼è¡¨ç¤ºææåºäºé»ååçè§åï¼æ¯å¦ IP é»ååãUser-Agent é»ååãURL é»ååç­ã\n * cc_deny: CC é²æ¤ã\n * modsecurityï¼ModSecurity è§åã\n * verify_botï¼åå¥½ç¬è«éªè¯ã\n * zoneï¼è®¾ç½®ç¨äºè®°å½å¿è¦ä¿¡æ¯çå±äº«åå­ï¼å½ä¸ä»å½æä¸ª action ä¸º CAPTCHA æ¶æéè¦è®¾ç½®ã\n\n\n# waf_block_page\n\n * éç½®è¯­æ³: waf_block_page < default | path/to/file.html >\n * é»è®¤éç½®: ââ\n * éç½®æ®µ: http, server, location\n\nç¨äºè®¾ç½®å½è¯·æ±è¢«æ¦æªæ¶è¿åçé¡µé¢ï¼default ä¸ºä¸ä¸ªåç½®ç HTML æä»¶ï¼å®æ¥èª assets/block.htmlï¼[æ°æ®å é¤] æ¯ [æ°æ®å é¤]ã',normalizedContent:'# éç½®è¯­æ³\n\n\n# waf\n\n * éç½®è¯­æ³: waf <on | off | bypass >\n * é»è®¤éç½®ï¼waf off\n * éç½®æ®µ: http, server, location\n\nå¼å¯ãå³é­æä»æ£æµã\n\n * on: å¼å¯é²ç«å¢ã\n * off: å³é­é²ç«å¢ã\n * bypass: ä»æ£æµå¹¶è®°å½æ¥å¿ï¼ä¸æ¦æªä»»ä½è¯·æ±ã\n\n\n# waf_zone\n\n * éç½®è¯­æ³: waf_zone <name=zone_name> [size=5m]\n * é»è®¤éç½®ï¼ââ\n * éç½®æ®µ: http\n\nåå»ºä¸æ®µå±äº«åå­ï¼ç¨äºè®°å½ä¸äºéè¦è·¨è¿ç¨å±äº«çä¿¡æ¯ï¼å ä¸º nginx çå¤è¿ç¨æ¨¡åã\n\nå¨ä½ ä½¿ç¨æäºéç½®æ¶å¯è½éè¦å¡«ååæ° zoneï¼æ¯å¦ waf_cc_denyã å¡«åæ ¼å¼ä¸º name:tagï¼å³åç§°åæ ç­¾ãåç§°åæ ç­¾æ¯ âå¤å¯¹å¤â çå³ç³»ï¼ä½æ¯å¯¹äºåä¸ä¸ª zoneï¼ æ ç­¾åä¸è½éå¤ã\n\nåä¸ä¸ª zone åçå¨é¨æ ç­¾å±ç¨è¯¥ zone çå¨é¨çå±äº«åå­ãåºäºæ§è½èèï¼å»ºè®®ä¸ºæ¯ä¸ª server æ®µåå»ºä¸ä¸ª zoneï¼ æå¥½ä¸è¦å¤ä¸ª server æ®µå±ç¨ä¸ä¸ª zoneï¼å ä¸ºè®¿é®å±äº«åå­éè¦ä¸éï¼è¦å°½éåå°ä¸éçæ¬¡æ°ã\n\nä¼°ç®æéçåå­å¤§å°\n\nç»è¿ä¼°è®¡ï¼1m çåå­è³å°å¯ä»¥è®°å½ 4096 ä¸ª ipã\n\n\n# waf_rule_path\n\n * éç½®è¯­æ³: waf_rule_path <dir>\n * é»è®¤éç½®ï¼ââ\n * éç½®æ®µ: http, server, location\n\nè§åæä»¶æå¨ç®å½ï¼ä¸å¿é¡»ä»¥/ç»å°¾ã\n\n\n# waf_mode\n\n * éç½®è¯­æ³: waf_mode <mode_type> ...\n * é»è®¤éç½®ï¼ââ\n * éç½®æ®µ: http, server, location\n\næå®é²ç«å¢çå·¥ä½æ¨¡å¼ï¼è³å°æå®ä¸ä¸ªæ¨¡å¼ï¼æå¤æå®å«ä¸ªæ¨¡å¼ã\n\nmode_typeå·æä¸ååå¼ï¼ä¸åºåå¤§å°åï¼:\n\n * get: å½http.method=getæ¶å¯å¨æ£æ¥ã\n * head: å½http.method=headæ¶å¯å¨æ£æ¥ã\n * post: å½http.method=postæ¶å¯å¨æ£æ¥ã\n * put: å½http.method=putæ¶å¯å¨æ£æ¥ã\n * delete: å½http.method=deleteæ¶å¯å¨æ£æ¥ã\n * mkcol: å½http.method=mkcolæ¶å¯å¨æ£æ¥ã\n * copy: å½http.method=copyæ¶å¯å¨æ£æ¥ã\n * move: å½http.method=moveæ¶å¯å¨æ£æ¥ã\n * options: å½http.method=optionsæ¶å¯å¨æ£æ¥ã\n * propfin: å½http.method=propfinæ¶å¯å¨æ£æ¥ã\n * proppatch: å½http.method=proppatchæ¶å¯å¨æ£æ¥ã\n * lock: å½http.method=lockæ¶å¯å¨æ£æ¥ã\n * unlock: å½http.method=unlockæ¶å¯å¨æ£æ¥ã\n * patch: å½http.method=patchæ¶å¯å¨æ£æ¥ã\n * trac: å½http.method=tracæ¶å¯å¨æ£æ¥ã\n * cmn-methï¼ç­ä»·äº head get postã\n * all-methï¼ä»»æç http è¯·æ±æ¹æ³é½ä¼å¯å¨æ£æ¥ã\n * ip: å¯ç¨ ip å°åçæ£æ¥è§åã\n * url: å¯ç¨ url çæ£æ¥è§åã\n * rbody: å¯ç¨ post è¯·æ±ä½çæ£æ¥è§åã\n * args: å¯ç¨ args çæ£æ¥è§åã\n * ua: å¯ç¨ user-agent çæ£æ¥è§åã\n * cookie: å¯ç¨ cookie çæ£æ¥è§åã\n * referer: å¯ç¨ referer çæ£æ¥è§åã\n * cc: å¯ç¨ cc é²å¾¡ãå½ä½ å¯ç¨äºæ­¤æ¨¡å¼ï¼ä½ å¿é¡»è®¾ç½® waf_cc_denyã\n * advï¼å¯ç¨é«çº§è§åã\n * lib-injection-sqliï¼ä½¿ç¨ libinjection æ£æµ sql æ³¨å¥ã\n * lib-injection-xssï¼ä½¿ç¨ libinjection æ£æµ xss æ»å»ã\n * lib-injectionï¼ç­ä»·äº lib-injection-sqli lib-injection-xssã\n * cacheï¼å¯ç¨ç¼å­ãå¯ç¨æ­¤æ¨¡å¼åä¼ç¼å­æ£æ¥çç»æï¼ä¸æ¬¡æ£æ¥ç¸åçç®æ æ¶å°±ä¸éè¦éå¤æ£æ¥äºãä¸è¿ä¸ä¼ç¼å­ post ä½çæ£æ¥ç»æãæ¯å¦ä¸ä¸ª url ç»è¿æ£æ¥åå¹¶æ²¡æå¨é»ååä¸­ï¼é£ä¹ä¸æ¬¡æ£æ¥ç¸åç url æ¶å°±æ éåæ¬¡æ£æ¥ url é»ååäºãå½ä½ å¯ç¨äºæ­¤æ¨¡å¼ï¼ä½ å¿é¡»è®¾ç½® waf_cacheã\n * stdï¼æ åå·¥ä½æ¨¡å¼ï¼ç­ä»·äº head get post ip url rbody args ua cc cache lib-injection-sqliã\n * staticï¼éç¨äºéæç«ç¹çå·¥ä½æ¨¡å¼ï¼ç­ä»·äº head get ip url ua cc cacheã\n * dynamicï¼éç¨äºå¨æç«ç¹çå·¥ä½æ¨¡å¼ï¼ç­ä»·äº head get post ip url args ua rbody cookie cc cache lib-injection-sqliã\n * full: å¯ç¨ææçæ¨¡å¼ã\n * [æ°æ®å é¤]: å¯ç¨æ­¤æ¨¡å¼ä¼[æ°æ®å é¤]ã\n\næ¨å¯ä»¥éè¿å¨æä¸ª mode_type åå¢å  ! åç¼æ¥å³é­è¯¥æ¨¡å¼ï¼ä¸é¢æ¯ä¸ä¸ªä¾å­ã è¡¨ç¤ºä½¿ç¨æ åçå·¥ä½æ¨¡å¼ï¼ä½æ¯ä¸æ£æ¥ user-agentã\n\nwaf_mode std !ua;\n\n\næ³¨æ\n\nå¦æåæ¶å¯ç¨ä¸¤ä¸ªåä»¥ä¸çå­å¨å²çªçæ¨¡å¼ï¼åé å³çæ¨¡å¼ä¼è¦çå®å·¦è¾¹çæ¨¡å¼ãä¸é¢çä¾å­è¡¨ç¤ºæ£æ¥ user-agentã\n\nwaf_mode !ua std;\n\n\næ³¨æ\n\nccæ¯ç¬ç«äºå¶å®æ¨¡å¼çæ¨¡å¼ï¼å¶çæä¸å¦ä¸åå°å¶å®æ¨¡å¼çå½±åãå¸åæåµå¦urlæ¨¡å¼ä¼åå°getæ¨¡å¼çå½±åï¼å ä¸ºå¦æä¸ä½¿ç¨getæ¨¡å¼ï¼é£ä¹å¨æ¶å°getè¯·æ±æ¶å°±ä¸ä¼å¯å¨æ£æ¥ï¼èªç¶ä¹å°±ä¸ä¼æ£æ¥ urlï¼ä½æ¯ccæ¨¡å¼ä¸ä¼åå°ç±»ä¼¼çå½±åã\n\nææ°ç current çæ¬ä¸­çåå\n\nåæ° cc å cache è¢«å é¤ã\n\n * stdï¼æ åå·¥ä½æ¨¡å¼ï¼ç­ä»·äº head get post ip url rbody args uaã\n * staticï¼éç¨äºéæç«ç¹çå·¥ä½æ¨¡å¼ï¼ç­ä»·äº head get ip url uaã\n * dynamicï¼éç¨äºå¨æç«ç¹çå·¥ä½æ¨¡å¼ï¼ç­ä»·äº head get post ip url args ua rbody cookieã\n * libinjectionï¼å·²ç§»é¤ã\n * libinjection-sqliï¼å·²ç§»é¤ã\n * libinjection-xssï¼å·²ç§»é¤ã\n * advï¼å·²ç§»é¤ã\n\n\n# waf_cc_deny\n\n * éç½®è¯­æ³: waf_cc_deny <rate=nr/m> [duration=1h] [size=20m]\n * é»è®¤éç½®ï¼ââ\n * éç½®æ®µ: http, server, location\n\nè®¾ç½® cc é²æ¤ç¸å³çåæ°ã\n\n * rateï¼è¡¨ç¤ºä¸æ®µæ¶é´åçè¯·æ±æ¬¡æ°çä¸éï¼å¦ 500r/mãè¶åºéå¶åä¼è¿å 503 ç¶æç ï¼å¹¶éå¸¦ retry-after ååºå¤´ã\n * durationï¼è¡¨ç¤ºè¶åºç¬¬ä¸ä¸ªåæ° rate çéå¶åæé» ip çæ¶é´ï¼å¦ 60sã60mã60h å 60dï¼å¦ä¸æå®åé»è®¤ä¸º 1hã\n * sizeï¼ç¨äºè®¾ç½®è®°å½ ip è®¿é®æ¬¡æ°çåå­çå¤§å°ï¼å¦ 20mã2048kï¼ä¸å¾å°äº 20mï¼å¦ä¸æå®åé»è®¤ä¸º 20mãå½è¿æ®µåå­èå°½çæ¶åç¨åºä¼æç§ lru ç­ç¥æ¸çä¸é¨åè®¿é®è®°å½ã\n\nææ°ç current çæ¬ä¸­çåå\n\n * éç½®è¯­æ³: waf_cc_deny <off | on> <rate=nr/t> <zone=name:tag> [duration=1h]\n * é»è®¤éç½®ï¼waf_cc_deny off\n * éç½®æ®µ: server, location\n\n----------------------------------------\n\n * zoneï¼æå®æä½¿ç¨çå±äº«åå­åæ ç­¾ï¼ç¨äºè®°å½ ip çè®¿é®æ¬¡æ°ãå½è¿æ®µåå­èå°½çæ¶åç¨åºä¼æç§ lru ç­ç¥æ¸çä¸é¨åè®¿é®è®°å½ã\n * rateï¼è¡¨ç¤ºä¸æ®µæ¶é´åçè¯·æ±æ¬¡æ°çä¸éï¼å¦ 500r/sã500r/60sã500r/mã500r/60mã500r/hã500r/60h å 500r/dãè¶åºéå¶åä¼è¿å 503 ç¶æç ï¼å¹¶éå¸¦ retry-after ååºå¤´ã\n\n\n# waf_cache\n\n * éç½®è¯­æ³: waf_cache <capacity=n>\n * é»è®¤éç½®ï¼â\n * éç½®æ®µ: http, server, location\n\nè®¾ç½®ç¼å­è§åæ£æ¥ç»æç¸å³çåæ°ã\n\n * capacityï¼å¯¹äºä¸äºå¯ç¨äºç¼å­æºå¶çæ£æµé¡¹ç®ï¼æ¯ä¸ªæ£æµé¡¹ç®æå¤ç¼å­å¤å°ä¸ªæ£æµç®æ çæ£æµç»æã\n\nå¯ç¨äºç¼å­æºå¶çæ£æµé¡¹ç®\n\nå¯ç¨äºç¼å­æºå¶çæ£æµé¡¹ç®æé¤äº cc é²æ¤ãip é»ç½ååæ£æµå post æ£æµä¹å¤çææçæ£æµé¡¹ã\n\næ§è½ä¼åå»ºè®®\n\ncapacity è¿å°ä¼å¯¼è´é¢ç¹å°æ·æ±°ç¼å­ï¼å¢å åå­ç¢çï¼éä½æ§è½ãæä»¥è¯·æ ¹æ®å®éåºç¨åºæ¯åçå°è®¾ç½®ã\n\nææ°ç current çæ¬ä¸­çåå\n\n * éç½®è¯­æ³: waf_cache <off | on> [capacity=50]\n * é»è®¤éç½®ï¼waf_cache off capacity=50\n * éç½®æ®µ: server, location\n\n\n# waf_modsecurity\n\n * éç½®è¯­æ³: waf_modsecurity <on | off> <file=*/path/to/modsecuriy/rules.conf*> <remote_key=key> <remote_url=url>\n * é»è®¤éç½®ï¼waf_modsecurity off\n * éç½®æ®µ: http, server, location\n\nä½¿ç¨ modsecurity çè§åã\n\n * fileï¼è§åæä»¶çç»å¯¹è·¯å¾ã\n * remote_keyï¼ç¨äºè¯»åè¿ç¨è§åæä»¶çå¯é¥ã\n * remote_urlï¼ç¨äºè¯»åè¿ç¨æä»¶ç urlã\n\nä½ å¯ä»¥åè å¼å¯ modsecurity | æä½³å®è·µ ä¸­çç¨æ³ã\n\næ³¨æ\n\n * å¦æä½ ä½¿ç¨äºåæ° remote_keyï¼ä½ å¿é¡»åæ¶ä½¿ç¨åæ° remote_urlã\n * å¦æä½ åæ¶ä½¿ç¨äºåæ° fileãremote_key å remote_urlï¼é£ä¹ä¸¤ä»½è§åé½ä¼è¢«å è½½ã\n\nåå­æ³é²\n\nåå­æ³é²ä¼å¯¼è´ç³»ç»çå¯ç¨åå­è¶æ¥è¶å°ï¼æ§è½éæ¸éä½ç´å°ç¨åºæç³»ç»å´©æºã\n\nå½å modsecurity çææ°ç v3.0.5 å­å¨åå­æ³é²ç bugã\n\n * ngin reload memory leak Â· issue #2552 Â· spiderlabs/modsecurity\n * it often leads memory leak on nginx reload Â· issue #2502 Â· spiderlabs/modsecurity\n\nå¦ææ¨å¼å¯äº modsecurityï¼éè½½ nginx æ¶ä¼åºç°åå­æ³é²ï¼é¿æ­¤ä»¥å¾å¯è½ä¼é æä¸¥éçåæã\n\næä»¬å¼ºçå»ºè®®æ¨é¿åä½¿ç¨ç±»ä¼¼ä¸é¢çå½ä»¤ã\n\nnginx -s reload\nsystemctl restart nginx\nservice nginx restart\n\n\nå½æ¨éè¦éè½½ nginx æ¶ï¼å¼ºçå»ºè®®åå³é­ nginxï¼ç¶åå¯å¨ nginxã\n\nnginx -s stop && nginx\nsystemctl stop nginx && systemctl start nginx\nservice nginx stop && serivce nginx start\n\n\n\n# waf_modsecurity_transaction_id\n\n * éç½®è¯­æ³: waf_modsecurity_transaction_id <string>\n * é»è®¤éç½®ï¼waf_modsecurity off\n * éç½®æ®µ: http, server, location\n\næå® modsecurity çäºå¡ idãä½ å¯ä»¥å¨æ­¤å¤ä½¿ç¨å¸¸éå­ç¬¦ä¸²ååéï¼ä¸é¢æ¯ä¸ä¸ªä¾å­ã\n\nserver {\n    location /file/ {\n        waf_modsecurity_transaction_id "$host-file";\n    }\n\n    location /api/ {\n        waf_modsecurity_transaction_id "$host-api";\n    }\n}\n\n\n\n# waf_captcha\n\n * éç½®è¯­æ³: waf_captcha <on | off> <prov=hcaptcha | recaptchav2:checkbox | recaptchav2:invisible | recaptchav3> [file=/full/path] [sitekey=your_sitekey] <secret=your_secret> [score=0.5] [expire=30m] [api=uri] [verify=/captcha] [max_fails=times:duration] [zone=name:tag]\n * é»è®¤éç½®ï¼waf_captcha off\n * éç½®æ®µ: server, location\n\nä½¿ç¨éªè¯ç å¯¹å®¢æ·ç«¯è¿è¡äººæºè¯å«ã\n\n * provï¼éªè¯ç å¹³å°ï¼åå« hcaptchaãrecaptchav2 å recaptchav3ã\n * fileï¼ç¨äºæ¥å¥éªè¯ç ç html æä»¶çç»å¯¹è·¯å¾ï¼ä½ å¯ä»¥ä» assets/ ä¸æ¾å°å¯¹åºç html æä»¶å¹¶å¨æä»¶ä¸­å¡«åä½ ç sitekeyãå¦æä½ çç¥æ­¤åæ°ï¼åä¼æ ¹æ®åæ° prov çå¼éæ©å¹¶ä½¿ç¨ä¸ä¸ªåç½®ç html æä»¶ï¼æ¥èªç®å½ assets/ï¼ï¼æ­¤æ¶ä½ éè¦è®¾ç½®åæ° sitekeyã\n * sitekeyï¼ä½ ä»éªè¯ç å¹³å°è·åçç½ç«å¯é¥ï¼å½ä¸ä»å½åæ° file è¢«çç¥æ¶éè¦è®¾ç½®æ¬åæ°ã\n * secretï¼ç¨äºç¡®è®¤éªè¯ç çè¿è¡ç»æçå¯é¥ï¼ä½ å¯ä»¥ä»å¯¹åºçéªè¯ç å¹³å°è·å¾ã\n * socreï¼å½ prov=recaptchav3 æ¶ï¼è¿ä¸ªè¡¨ç¤ºéªè¯ç æåç»æçä¸éï¼ä½äºè¿ä¸ªå¼ä¼è¢«è§ä¸ºéªè¯å¤±è´¥ãé»è®¤å¼ä¸º 0.5ã\n * expireï¼éªè¯ç çè¿ææ¶é´ï¼è¿æåéè¦éæ°è¿è¡éªè¯ç ãé»è®¤ä¸º 30 åéã\n * apiï¼éªè¯ç å¹³å°çæä¾ç»æå¡ç«¯ç apiï¼ç¨äºç¡®è®¤éªè¯ç çè¿è¡ç»æã\n   * å¦æ prov=hcaptchaï¼åé»è®¤å¼ä¸º https://hcaptcha.com/siteverifyã\n   * å¦æ prov=recaptchav2:xxxï¼åé»è®¤å¼ä¸º https://www.recaptcha.net/recaptcha/api/siteverifyã\n   * å¦æ prov=recaptchav3ï¼åé»è®¤å¼ä¸º https://www.recaptcha.net/recaptcha/api/siteverifyã\n * verifyï¼éªè¯ç ååç«¯æäº¤ token æç¨ç urlï¼é»è®¤ä¸º /captchaã\n * max_failsï¼éªè¯ç æå¤§å·æ°/è¯éæ¬¡æ°ï¼è¶åºè¿ä¸ªæ¬¡æ°æé»å¯¹åºç ip ä¸æ®µæ¶é´ãä¾å¦ max_fails=20:5m è¡¨ç¤ºè¿ç»­å·æ°/è¯éäºåæ¬¡åæé» 5 åéãå½ä½ ä½¿ç¨è®¡è´¹çéªè¯ç æ¶è¿å¾æç¨ãå½ä½ è®¾ç½®äºæ­¤åæ°ï¼ä½ å¿é¡»åæ¶è®¾ç½®åæ° zoneã\n * zoneï¼è®¾ç½®ç¨äºè®°å½éªè¯ç è¯éæ¬¡æ°çå±äº«åå­ï¼å½ä¸ä»å½åæ° max_fails è¢«è®¾ç½®æ¶æéè¦è®¾ç½®æ­¤åæ°ã\n\nä½ å¯ä»¥åèå¼å¯éªè¯ç  | æä½³å®è·µä¸­çç¨ä¾ã\n\nèªå®ä¹éªè¯ç é¡µé¢\n\nä½ å¯ä»¥ä»¥ç®å½ assets/ ä¸ç html æä»¶ä¸ºåºç¡ï¼èªå®ä¹éªè¯ç é¡µé¢ï¼ç¶åéè¿åæ° fileå è½½ã\n\nä¸è¦å¿è®°å¨ html æä»¶ä¸­å¡«å sitekeyã\n\n\n# waf_verify_bot\n\n * éç½®è¯­æ³: waf_verify_bot <off | on | strict> [who] ...\n * é»è®¤éç½®ï¼waf_verify_bot off googlebot bingbot baiduspider yandexbot sogouspider\n * éç½®æ®µ: http, server, location\n\néªè¯åå¥½çç¬è«ï¼æ¯å¦ç¾åº¦èèã\n\nå¦æç¬¬ä¸ä¸ªåæ°æ¯ on åä¼åæ­¢åç»­çæææ£æ¥å¹¶æ¾è¡æ¬æ¬¡è¯·æ±ã\n\nå¦æç¬¬ä¸ä¸ªåæ°æ¯ strictï¼åå¦ææä¸ªè¯·æ±ç user-agent æ­£ç¡®ï¼ä½æ¯ ip å°åä¸æ­£ç¡®åä¼è¢«æ¦æªï¼æè¯¯æ¥ï¼ã\n\n * whoï¼ç¬è«çåç§°ï¼åå¼åæ¬ googlebotãbingbotãbaiduspiderã yandexbot å sogouspiderãå¦ä¸æå®åé»è®¤ä¸ºå¨é¨ã\n\nå·¥ä½åç\n\n * overview of google crawlers (user agents) | search central\n * googlebot verification | google search central | google developers\n * which crawlers does bing use? - bing webmaster tools\n * how to verify bingbot\n * ç¾åº¦ç¨æ·æå¡ä¸­å¿-ç«é¿å¹³å°\n * how to check that a robot belongs to yandex\n * æçèµæºå¹³å°_å¬å¹³å¼æ¾çäº¤æµå¹³å°\n\n\n# waf_under_attack\n\n * éç½®è¯­æ³: waf_under_attack <on | off> [uri=str]\n * é»è®¤éç½®ï¼waf_under_attack off\n * éç½®æ®µ: http, server, location\n\nå¦ææ¨çç«ç¹æ­£å¨åå°æ»å»å¯ä»¥å°è¯ä½¿ç¨æ­¤éç½®ã å¼å¯åæ¯ä¸ªç¨æ·é¦æ¬¡è®¿é®ä¼å¼ºå¶å»¶è¿äºç§ï¼å¹¶èªå¨è·³è½¬å° uri ææåçç½é¡µã\n\nå¦ææ»å»èéç¨æ»å»æ¹å¼ä¸è½å®ç¾æ¯æ cookieï¼æ¬åè½å¯ä»¥å¤§å¹åº¦ç¼è§£æ­¤ç±»æ»å»é æçå½±åã\n\n * uri: å¯ä»¥æ¯ä¸ä¸ªå®æ´çç½åï¼ä¹å¯ä»¥æ¯ä¸ä¸ªè·¯å¾ãæ¯å¦ https://example.com/attack.html æ /attack.htmlã\n\nä½ å¯ä»¥åèæµå¾¡åå¸å¼ cc æ»å»ï¼http æ´ªæ°´ï¼ | æä½³å®è·µä¸­çç¨ä¾ã\n\nå°æå·§\n\nuri ææåçç½é¡µåºè¯¥å¨äºç§åèªå¨è·³è½¬å°ç¨æ·æ³è¦è®¿é®çé¡µé¢ï¼é¡µé¢çç½åå¯ä»¥éè¿æ¥è¯¢å­ç¬¦ä¸²è·å¾ï¼åæ°åä¸º targetã\n\nassets/under-attack.html æ¯ä¸ä¸ªç¤ºä¾ç½é¡µï¼ä½ åºè¯¥å°è¿ä¸ªæä»¶æ·è´å°ä½ çç½ç«ç®å½ä¸ï¼å¹¶æ­£ç¡®å°éç½® uriã\n\nä½ èªç¶ä¹å¯ä»¥èªå·±ç¼åä¸ä¸ª html æä»¶ï¼ç¶åéè¿ uri æåå®ã\n\nææ°ç current çæ¬ä¸­çåå\n\nå¨ lts çæ¬ä¸­æä»¬éè¿éå®åå®ç°äºè¯¥åè½ï¼ä½æ¯è®¸å¤åå ï¼å¦ç¼å­å cdnï¼ä¼å¯¼è´éå®åå¤±è´¥ï¼æèä¸è½æ­£å¸¸éªè¯ cookieã æä»¥æä»¬ä¿®æ¹äºå®ç°æ¹å¼ï¼æä»¬éè¿ä¿®æ¹ååºä½æ¥è¿åæå®çç½é¡µï¼è¿ç§æ¹å¼ä¸ä¼å¯¼è´ uri çæ¹åã\n\n * éç½®è¯­æ³: waf_under_attack <on | off> [file=full_path]\n * é»è®¤éç½®ï¼waf_under_attack off\n * éç½®æ®µ: http, server, location\n\nåæ¶æä»¬å¢å äºååºå¤´ cache-control: no-store ä»¥é¿åç¼å­å¸¦æ¥çå½±åã\n\n * ç§»é¤äºåæ° uriã\n * å¢å äºåæ° fileï¼è¯¥åæ°çå¼åºè¯¥æ¯ä¸ä¸ª html æä»¶çç»å¯¹è·¯å¾ï¼å¦ file=/path/to/under-attack.htmlãè¿ä¸ª html åªæä¸ä¸ªåè½ï¼å³äºç§åèªå¨å·æ°ãå½ä½ çç¥æ­¤åæ°æ¶ï¼é»è®¤ä½¿ç¨åç½®ç html æä»¶ï¼å®æ¥èª assets/under-attack.htmlã\n\n\n# waf_priority\n\n * éç½®è¯­æ³: waf_priority "str"\n * é»è®¤éç½®ï¼waf_priority "w-ip ip cc under-attack w-url url args ua w-referer referer cookie adv"\n * éç½®æ®µ: http, server, location\n\nè®¾ç½®åä¸ªæ£æµé¡¹ç®çä¼åçº§ï¼é¤äº post æ£æµï¼post æ£æµçä¼åçº§æ°¸è¿æä½ã\n\n * under-attack: éç½® waf_under_attackã\n * w-ipï¼ip ç½ååæ£æµ\n * ipï¼ip é»ååæ£æµ\n * ccï¼cc é²æ¤\n * w-urlï¼url ç½ååæ£æµ\n * urlï¼url é»ååæ£æµ\n * argsï¼url åæ°ï¼æ¥è¯¢å­ç¬¦ä¸²ï¼é»ååæ£æµ\n * uaï¼user-agent é»ååæ£æµ\n * w-refererï¼referer ç½ååæ£æµ\n * refererï¼referer é»ååæ£æµ\n * cookieï¼cookie é»ååæ£æµ\n * advï¼è¡¨ç¤ºé«çº§è§åã\n\nè­¦å\n\nstr å¿é¡»ä½¿ç¨åå¼å·æèåå¼å·åè£¹ï¼ä¸ str å¿é¡»åå«å¨é¨çæ£æµé¡¹ç®ã\n\nææ°ç current çæ¬ä¸­çåå\n\n * é»è®¤éç½®ï¼waf_priority "w-ip ip verify-bot cc captcha under-attack w-url url args ua w-referer referer cookie post modsecurity"\n\n----------------------------------------\n\n * verify-botï¼åå¥½ç¬è«éªè¯ã\n * captchaï¼éªè¯ç ã\n * postï¼è¯·æ±ä½é»ååã\n * advï¼å·²ç»ç§»é¤ã\n * modsecurityã\n\n\n# waf_http_status\n\n * éç½®è¯­æ³: waf_http_status [general=http_status_code] [cc_deny=http_status_code]\n * é»è®¤éç½®: waf_http_status general=403 cc_deny=503\n * éç½®æ®µ: http, server, location\n\næ­¤æä»¤ç¨äºè®¾ç½®è¯·æ±è¢«æ¦æªæ¶è¿åç http ç¶æç ã\n\n * general: è¡¨ç¤ºææåºäºé»ååçæ£æµé¡¹ç®è§¦ååè¿åç http ç¶æç ã\n * cc_denyï¼è¡¨ç¤º cc é²æ¤è§¦ååè¿åç http ç¶æç ã\n\nææ°ç current çæ¬ä¸­çåå\n\næ­¤éç½®ä» v10.0.0 å¼å§è¢«ç§»é¤ï¼ç¸å³çåè½ç§»å¨å°éç½® waf_actionã\n\n\n# waf_action\n\n * éç½®è¯­æ³: waf_action [blacklist=action] [cc_deny=action] [modsecurity=action] [verify_bot=action] [zone=name:tag]\n * é»è®¤éç½®: waf_action blacklist=403 cc_deny=503 modsecurity=follow verify_bot=403\n * éç½®æ®µ: http, server, location\n\næ­¤éç½®ç¨äºè®¾ç½®æ¦æªä¸ä¸ªè¯·æ±æ¶çå¨ä½ï¼action è¡¨ç¤ºå·ä½çå¨ä½ï¼å¯ä»¥æ¯ä»¥ä¸å¼ã\n\n * 4xx | 5xxï¼è¡¨ç¤ºè¿å http ç¶æç ã\n * captchaï¼è¡¨ç¤ºå¯ç¨éªè¯ç è¿è¡éªè¯ï¼åªæéè¿éªè¯æè§£é¤æé»ãåæ¶ï¼ä½ å¿é¡»è®¾ç½® waf_captchaã\n * followï¼å°é modsecurity è§åçå¨ä½ï¼ä»å¯ç¨äºåæ° modsecurityã\n\nåæ°è¯´æï¼\n\n * blacklistï¼è¡¨ç¤ºææåºäºé»ååçè§åï¼æ¯å¦ ip é»ååãuser-agent é»ååãurl é»ååç­ã\n * cc_deny: cc é²æ¤ã\n * modsecurityï¼modsecurity è§åã\n * verify_botï¼åå¥½ç¬è«éªè¯ã\n * zoneï¼è®¾ç½®ç¨äºè®°å½å¿è¦ä¿¡æ¯çå±äº«åå­ï¼å½ä¸ä»å½æä¸ª action ä¸º captcha æ¶æéè¦è®¾ç½®ã\n\n\n# waf_block_page\n\n * éç½®è¯­æ³: waf_block_page < default | path/to/file.html >\n * é»è®¤éç½®: ââ\n * éç½®æ®µ: http, server, location\n\nç¨äºè®¾ç½®å½è¯·æ±è¢«æ¦æªæ¶è¿åçé¡µé¢ï¼default ä¸ºä¸ä¸ªåç½®ç html æä»¶ï¼å®æ¥èª assets/block.htmlï¼[æ°æ®å é¤] æ¯ [æ°æ®å é¤]ã',charsets:{cjk:!0}},{title:"å·²ç¥é®é¢",frontmatter:{title:"å·²ç¥é®é¢",lang:"zh-CN"},regularPath:"/zh-cn/advance/issue.html",relativePath:"zh-cn/advance/issue.md",key:"v-0e4e8a08",path:"/zh-cn/advance/issue.html",lastUpdated:"2022/1/10 ä¸å3:38:27",lastUpdatedTimestamp:1641829107e3,headersStr:null,content:"# å·²ç¥é®é¢\n\nè¿éåªä¼ååºå­å¨äºææ°çç¨³å®ççé®é¢ï¼å·²ç»å¨ææ°çç¨³å®çä¸­ä¿®å¤çé®é¢ä¸ä¼ååºã",normalizedContent:"# å·²ç¥é®é¢\n\nè¿éåªä¼ååºå­å¨äºææ°çç¨³å®ççé®é¢ï¼å·²ç»å¨ææ°çç¨³å®çä¸­ä¿®å¤çé®é¢ä¸ä¼ååºã",charsets:{cjk:!0}},{title:"æ¥å¿",frontmatter:{title:"æ¥å¿",lang:"zh-CN"},regularPath:"/zh-cn/advance/log.html",relativePath:"zh-cn/advance/log.md",key:"v-614ab2dc",path:"/zh-cn/advance/log.html",headers:[{level:2,title:"æ¦æªæ¥å¿",slug:"æ¦æªæ¥å¿",normalizedTitle:"æ¦æªæ¥å¿",charIndex:9},{level:2,title:"è°è¯æ¥å¿",slug:"è°è¯æ¥å¿",normalizedTitle:"è°è¯æ¥å¿",charIndex:606},{level:2,title:"èªå®ä¹æ¥å¿æ ¼å¼",slug:"èªå®ä¹æ¥å¿æ ¼å¼",normalizedTitle:"èªå®ä¹æ¥å¿æ ¼å¼",charIndex:1595}],lastUpdated:"2022/1/10 ä¸å3:38:27",lastUpdatedTimestamp:1641829107e3,headersStr:"æ¦æªæ¥å¿ è°è¯æ¥å¿ èªå®ä¹æ¥å¿æ ¼å¼",content:'# æ¥å¿\n\n\n# æ¦æªæ¥å¿\n\næ¦æªæ¥å¿æ¥å¿å­å¨å¨ error.log ä¸­ãæ¦æªè®°å½çæ¥å¿ç­çº§ä¸º ALERTã æ ¼å¼ä¸º ngx_waf: [è§åç±»å][è§¦åçå·ä½è§å]ã\n\næ¨å¯ä»¥ä½¿ç¨ä¸åå½ä»¤å¿«éæ¥çæ¦æªæ¥å¿ã\n\ncat /path/to/error.log | grep ngx_waf:\n\n\nä¸é¢æ¯ä¸¤ä¸ªä¾å­ã\n\n2020/01/20 22:56:30 [alert] 6666#0: *30 ngx_waf: [BLACK-URL][(?i)(?:/\\.env$)], client: 192.168.1.1, server: example.com, request: "GET /v1/.env HTTP/1.1", host: "example.com", referrer: "http:/example.com/v1/.env"\n\n2020/01/20 22:58:40 [alert] 6667#0: *11 ngx_waf: [BLACK-POST][(?i)(?:select.+(?:from|limit))], client: 192.168.1.1, server: example.com, request: "POST /xmlrpc.php HTTP/1.1", host: "example.com", referrer: "https://example.com/"\n\n\n\n# è°è¯æ¥å¿\n\nå½æ¨å¨ nginx çéç½®æä»¶ä¸­å°éè¯¯æ¥å¿çç­çº§è°æ´ä¸º debug æ¶ï¼ä¼å¨ error.log ä¸­è¾åºè°è¯æ¥å¿ï¼ ç¨ä»¥æéãæ ¼å¼ä¸º ngx_waf_debug: è°è¯ä¿¡æ¯ã\n\næ¨å¯ä»¥ä½¿ç¨ä¸åå½ä»¤å¿«éæ¥çè°è¯æ¥å¿ã\n\ncat /path/to/error.log | grep ngx_waf_debug:\n\n\nä¸é¢æ¯ä¸æ®µå¸åçè°å¼æ¥å¿ï¼è¡¨ç¤ºäºä¸æ¬¡ CC é²å¾¡æ£æµçæµç¨ã\n\n2021/02/21 20:35:33 [debug] 6666#0: *1 ngx_waf_debug: Start the CC inspection process.\n2021/02/21 20:35:33 [debug] 6666#0: *1 ngx_waf_debug: The module context has been obtained.\n2021/02/21 20:35:33 [debug] 6666#0: *1 ngx_waf_debug: The configuration of the module has been obtained.\n2021/02/21 20:35:33 [debug] 6666#0: *1 ngx_waf_debug: Detection has begun.\n2021/02/21 20:35:33 [debug] 6666#0: *1 ngx_waf_debug: Shared memory is locked.\n2021/02/21 20:35:33 [debug] 6666#0: *1 ngx_waf_debug: Shared memory is unlocked.\n2021/02/21 20:35:33 [debug] 6666#0: *1 ngx_waf_debug: Detection is over.\n2021/02/21 20:35:33 [debug] 6666#0: *1 ngx_waf_debug: The CC detection process is fully completed.\n\n\nææä¿¡æ¯æ³é²\n\nå¨ææ°ç Current çæ¬ä¸­ï¼è°è¯æ¥å¿å¯è½ä¼åå«ä¸äºææä¿¡æ¯ï¼æ¯å¦æå¡å¨æ¥æ¶ååéçæ°æ®ï¼éªè¯ç çå¯é¥ç­ã æä¾è°è¯æ¥å¿æ¶å»ºè®®éè¿é®ç®±åéç»æä»¬ãä½ å¯ä»¥å¨è¿éæ¾å°æä»¬çé®ç®±ã\n\n\n# èªå®ä¹æ¥å¿æ ¼å¼\n\nnginx åè®¸èªå®ä¹æ¥å¿æ ¼å¼ï¼å¹¶ä¸ä¸ä¸ª server åå¯ä»¥åæ¶åå¥å¤ä¸ªæ¥å¿æä»¶ï¼ è¿å°±ç»ææä»¬èªå®ä¹æ¥å¿æ ¼å¼çæºä¼ãæ¬æ¨¡åæä¾äºå ä¸ªåç½®åéï¼ç¨å å©ç¨å³å¯å®ç°ã ä¸é¢æ¯ä¸ä¸ªä¾å­ã\n\n...\n\nhttp {\n    ...\n\n    log_format  main    \'$remote_addr - $remote_user [$time_local] "$request" \'\n                        \'$status $body_bytes_sent "$http_referer" \'\n                        \'"$http_user_agent" "$http_x_forwarded_for"\';\n\n    log_format yaml     \'- remote_addr: "$remote_addr"\\n\'\n                        \'  remote_user: "$remote_user"\\n\'\n                        \'  time_local: "$time_local"\\n\'\n                        \'  request: "$request"\\n\'\n                        \'  status: "$status"\\n\'\n                        \'  body_bytes_sent: "$body_bytes_sent"\\n\'\n                        \'  http_referer: "$http_referer"\\n\'\n                        \'  http_user_agent: "$http_user_agent"\\n\'\n                        \'  http_x_forwarded_for: "$http_x_forwarded_for"\\n\'\n                        \'  waf_blocked: $waf_blocked\\n\'\n                        \'  waf_spend: $waf_spend\\n\'\n                        \'  waf_rule_type: "$waf_rule_type"\\n\'\n                        \'  waf_rule_details: "$waf_rule_details"\\n\';\n\n\n    server {\n        ...\n\n        access_log  logs/access.log  main;\n        access_log  logs/access.yml  yaml   if=$waf_log;\n        access_log  logs/waf.yml     yaml   if=$waf_blocking_log;\n\n        ...\n    }\n\n    ...\n}\n\n...\n\n\nä¸è¿°éç½®ä¼æå¦ä¸ææï¼\n\n * å¸¸è§çè®¿é®æ¥å¿åå¥ logs/access.log ä¸­ã\n * YAML æ ¼å¼çè®¿é®æ¥å¿åå¥ logs/access.yml ä¸­ã\n * YAML æ ¼å¼çæ¦æªæ¥å¿åå¥ logs/waf.yml ä¸­ã\n\næ¥å¿åæ\n\nä½ å¯ä»¥èªå®ä¹æ¥å¿æ ¼å¼ï¼ç¶åéè¿ç¨åºåæå¹¶å¶ä½ç»è®¡å¾è¡¨ã\n\nå³äº YAML æ ¼å¼\n\nYAML æ¯ä¸ç§å¯è¯»æ§é«çæ°æ®åºååæ ¼å¼ï¼å­¦ä¹ ååç®åï¼åªè¦è½çæ JSONï¼å­¦ä¹  YAML ä¹å°±ä¸ä¼å¿çäºæã å¯ä»¥èªè¡æç´¢ YAML çæ ¼å¼è¯´æã',normalizedContent:'# æ¥å¿\n\n\n# æ¦æªæ¥å¿\n\næ¦æªæ¥å¿æ¥å¿å­å¨å¨ error.log ä¸­ãæ¦æªè®°å½çæ¥å¿ç­çº§ä¸º alertã æ ¼å¼ä¸º ngx_waf: [è§åç±»å][è§¦åçå·ä½è§å]ã\n\næ¨å¯ä»¥ä½¿ç¨ä¸åå½ä»¤å¿«éæ¥çæ¦æªæ¥å¿ã\n\ncat /path/to/error.log | grep ngx_waf:\n\n\nä¸é¢æ¯ä¸¤ä¸ªä¾å­ã\n\n2020/01/20 22:56:30 [alert] 6666#0: *30 ngx_waf: [black-url][(?i)(?:/\\.env$)], client: 192.168.1.1, server: example.com, request: "get /v1/.env http/1.1", host: "example.com", referrer: "http:/example.com/v1/.env"\n\n2020/01/20 22:58:40 [alert] 6667#0: *11 ngx_waf: [black-post][(?i)(?:select.+(?:from|limit))], client: 192.168.1.1, server: example.com, request: "post /xmlrpc.php http/1.1", host: "example.com", referrer: "https://example.com/"\n\n\n\n# è°è¯æ¥å¿\n\nå½æ¨å¨ nginx çéç½®æä»¶ä¸­å°éè¯¯æ¥å¿çç­çº§è°æ´ä¸º debug æ¶ï¼ä¼å¨ error.log ä¸­è¾åºè°è¯æ¥å¿ï¼ ç¨ä»¥æéãæ ¼å¼ä¸º ngx_waf_debug: è°è¯ä¿¡æ¯ã\n\næ¨å¯ä»¥ä½¿ç¨ä¸åå½ä»¤å¿«éæ¥çè°è¯æ¥å¿ã\n\ncat /path/to/error.log | grep ngx_waf_debug:\n\n\nä¸é¢æ¯ä¸æ®µå¸åçè°å¼æ¥å¿ï¼è¡¨ç¤ºäºä¸æ¬¡ cc é²å¾¡æ£æµçæµç¨ã\n\n2021/02/21 20:35:33 [debug] 6666#0: *1 ngx_waf_debug: start the cc inspection process.\n2021/02/21 20:35:33 [debug] 6666#0: *1 ngx_waf_debug: the module context has been obtained.\n2021/02/21 20:35:33 [debug] 6666#0: *1 ngx_waf_debug: the configuration of the module has been obtained.\n2021/02/21 20:35:33 [debug] 6666#0: *1 ngx_waf_debug: detection has begun.\n2021/02/21 20:35:33 [debug] 6666#0: *1 ngx_waf_debug: shared memory is locked.\n2021/02/21 20:35:33 [debug] 6666#0: *1 ngx_waf_debug: shared memory is unlocked.\n2021/02/21 20:35:33 [debug] 6666#0: *1 ngx_waf_debug: detection is over.\n2021/02/21 20:35:33 [debug] 6666#0: *1 ngx_waf_debug: the cc detection process is fully completed.\n\n\nææä¿¡æ¯æ³é²\n\nå¨ææ°ç current çæ¬ä¸­ï¼è°è¯æ¥å¿å¯è½ä¼åå«ä¸äºææä¿¡æ¯ï¼æ¯å¦æå¡å¨æ¥æ¶ååéçæ°æ®ï¼éªè¯ç çå¯é¥ç­ã æä¾è°è¯æ¥å¿æ¶å»ºè®®éè¿é®ç®±åéç»æä»¬ãä½ å¯ä»¥å¨è¿éæ¾å°æä»¬çé®ç®±ã\n\n\n# èªå®ä¹æ¥å¿æ ¼å¼\n\nnginx åè®¸èªå®ä¹æ¥å¿æ ¼å¼ï¼å¹¶ä¸ä¸ä¸ª server åå¯ä»¥åæ¶åå¥å¤ä¸ªæ¥å¿æä»¶ï¼ è¿å°±ç»ææä»¬èªå®ä¹æ¥å¿æ ¼å¼çæºä¼ãæ¬æ¨¡åæä¾äºå ä¸ªåç½®åéï¼ç¨å å©ç¨å³å¯å®ç°ã ä¸é¢æ¯ä¸ä¸ªä¾å­ã\n\n...\n\nhttp {\n    ...\n\n    log_format  main    \'$remote_addr - $remote_user [$time_local] "$request" \'\n                        \'$status $body_bytes_sent "$http_referer" \'\n                        \'"$http_user_agent" "$http_x_forwarded_for"\';\n\n    log_format yaml     \'- remote_addr: "$remote_addr"\\n\'\n                        \'  remote_user: "$remote_user"\\n\'\n                        \'  time_local: "$time_local"\\n\'\n                        \'  request: "$request"\\n\'\n                        \'  status: "$status"\\n\'\n                        \'  body_bytes_sent: "$body_bytes_sent"\\n\'\n                        \'  http_referer: "$http_referer"\\n\'\n                        \'  http_user_agent: "$http_user_agent"\\n\'\n                        \'  http_x_forwarded_for: "$http_x_forwarded_for"\\n\'\n                        \'  waf_blocked: $waf_blocked\\n\'\n                        \'  waf_spend: $waf_spend\\n\'\n                        \'  waf_rule_type: "$waf_rule_type"\\n\'\n                        \'  waf_rule_details: "$waf_rule_details"\\n\';\n\n\n    server {\n        ...\n\n        access_log  logs/access.log  main;\n        access_log  logs/access.yml  yaml   if=$waf_log;\n        access_log  logs/waf.yml     yaml   if=$waf_blocking_log;\n\n        ...\n    }\n\n    ...\n}\n\n...\n\n\nä¸è¿°éç½®ä¼æå¦ä¸ææï¼\n\n * å¸¸è§çè®¿é®æ¥å¿åå¥ logs/access.log ä¸­ã\n * yaml æ ¼å¼çè®¿é®æ¥å¿åå¥ logs/access.yml ä¸­ã\n * yaml æ ¼å¼çæ¦æªæ¥å¿åå¥ logs/waf.yml ä¸­ã\n\næ¥å¿åæ\n\nä½ å¯ä»¥èªå®ä¹æ¥å¿æ ¼å¼ï¼ç¶åéè¿ç¨åºåæå¹¶å¶ä½ç»è®¡å¾è¡¨ã\n\nå³äº yaml æ ¼å¼\n\nyaml æ¯ä¸ç§å¯è¯»æ§é«çæ°æ®åºååæ ¼å¼ï¼å­¦ä¹ ååç®åï¼åªè¦è½çæ jsonï¼å­¦ä¹  yaml ä¹å°±ä¸ä¼å¿çäºæã å¯ä»¥èªè¡æç´¢ yaml çæ ¼å¼è¯´æã',charsets:{cjk:!0}},{title:"è§åä¼åçº§",frontmatter:{title:"è§åä¼åçº§",lang:"zh-CN"},regularPath:"/zh-cn/advance/priority.html",relativePath:"zh-cn/advance/priority.md",key:"v-5866be48",path:"/zh-cn/advance/priority.html",lastUpdated:"2022/1/10 ä¸å3:38:27",lastUpdatedTimestamp:1641829107e3,headersStr:null,content:"# è§åä¼åçº§\n\næ¬æ¨¡åçè¯¸å¤æ£æµé¡¹ç®ï¼é£ä¹ä¸å®è¦è§å®åä¸ªæ£æµé¡¹ç®çæ£æµä¼åçº§ï¼é¿ååºç°ä¸åé»è¾çæ£æµç»æã\n\nä¸é¢å°æç§ä¼åçº§ä»é«å°åºå°ååºææçæ£æµé¡¹ç®ã\n\n 1.  IP ç½ååæ£æµ\n 2.  IP é»ååæ£æµ\n 3.  åå¥½ç¬è«éªè¯\n 4.  CC é²å¾¡æ£æµ\n 5.  éªè¯ç ï¼CAPTCHAï¼\n 6.  Under-Attack æ¨¡å¼\n 7.  Url ç½ååæ£æµ\n 8.  Url é»ååæ£æµ\n 9.  Get åæ°é»ååæ£æµ\n 10. User-Agent é»ååæ£æµ\n 11. Referer ç½ååæ£æµ\n 12. Referer é»ååæ£æµ\n 13. Cookie é»ååæ£æµ\n 14. Post è¯·æ±ä½é»åå\n 15. ModSecurity çè§å\n\nä¿®æ¹ä¼åçº§\n\næ¨å¯ä»¥éè¿éç½®æä»¶ä¿®æ¹ä¼åçº§ï¼ä½æ¯ POST è¯·æ±ä½æ£æµçä¼åçº§ä¸åè®¸ä¿®æ¹ï¼å®çä¼åçº§æ°¸è¿æ¯æä½çãè¯¦è§ waf_priorityã\n\nææ°ç Current çæ¬ä¸­çåå\n\nåè®¸éè¿æä»¤ waf_priority ä¿®æ¹ POST æ£æ¥ä¼åçº§ã",normalizedContent:"# è§åä¼åçº§\n\næ¬æ¨¡åçè¯¸å¤æ£æµé¡¹ç®ï¼é£ä¹ä¸å®è¦è§å®åä¸ªæ£æµé¡¹ç®çæ£æµä¼åçº§ï¼é¿ååºç°ä¸åé»è¾çæ£æµç»æã\n\nä¸é¢å°æç§ä¼åçº§ä»é«å°åºå°ååºææçæ£æµé¡¹ç®ã\n\n 1.  ip ç½ååæ£æµ\n 2.  ip é»ååæ£æµ\n 3.  åå¥½ç¬è«éªè¯\n 4.  cc é²å¾¡æ£æµ\n 5.  éªè¯ç ï¼captchaï¼\n 6.  under-attack æ¨¡å¼\n 7.  url ç½ååæ£æµ\n 8.  url é»ååæ£æµ\n 9.  get åæ°é»ååæ£æµ\n 10. user-agent é»ååæ£æµ\n 11. referer ç½ååæ£æµ\n 12. referer é»ååæ£æµ\n 13. cookie é»ååæ£æµ\n 14. post è¯·æ±ä½é»åå\n 15. modsecurity çè§å\n\nä¿®æ¹ä¼åçº§\n\næ¨å¯ä»¥éè¿éç½®æä»¶ä¿®æ¹ä¼åçº§ï¼ä½æ¯ post è¯·æ±ä½æ£æµçä¼åçº§ä¸åè®¸ä¿®æ¹ï¼å®çä¼åçº§æ°¸è¿æ¯æä½çãè¯¦è§ waf_priorityã\n\nææ°ç current çæ¬ä¸­çåå\n\nåè®¸éè¿æä»¤ waf_priority ä¿®æ¹ post æ£æ¥ä¼åçº§ã",charsets:{cjk:!0}},{title:"è§åè¯´æ",frontmatter:{title:"è§åè¯´æ",lang:"zh-CN"},regularPath:"/zh-cn/advance/rule.html",relativePath:"zh-cn/advance/rule.md",key:"v-4782cd2c",path:"/zh-cn/advance/rule.html",headers:[{level:2,title:"ipç½åå",slug:"ipç½åå",normalizedTitle:"ipç½åå",charIndex:423},{level:2,title:"IPé»åå",slug:"ipé»åå",normalizedTitle:"ipé»åå",charIndex:709},{level:2,title:"urlç½åå",slug:"urlç½åå",normalizedTitle:"urlç½åå",charIndex:796},{level:2,title:"urlé»åå",slug:"urlé»åå",normalizedTitle:"urlé»åå",charIndex:883},{level:2,title:"getåæ°é»åå",slug:"getåæ°é»åå",normalizedTitle:"getåæ°é»åå",charIndex:965},{level:2,title:"postè¯·æ±ä½é»åå",slug:"postè¯·æ±ä½é»åå",normalizedTitle:"postè¯·æ±ä½é»åå",charIndex:1054},{level:2,title:"user-agenté»åå",slug:"user-agenté»åå",normalizedTitle:"user-agenté»åå",charIndex:1190},{level:2,title:"cookieé»åå",slug:"cookieé»åå",normalizedTitle:"cookieé»åå",charIndex:1298},{level:2,title:"refererç½åå",slug:"refererç½åå",normalizedTitle:"refererç½åå",charIndex:1392},{level:2,title:"refereré»åå",slug:"refereré»åå",normalizedTitle:"refereré»åå",charIndex:1495}],lastUpdated:"2022/1/10 ä¸å3:38:27",lastUpdatedTimestamp:1641829107e3,headersStr:"ipç½åå IPé»åå urlç½åå urlé»åå getåæ°é»åå postè¯·æ±ä½é»åå user-agenté»åå cookieé»åå refererç½åå refereré»åå",content:"# è§åè¯´æ\n\næ¬æ¨¡åä½¿ç¨ä¸åå ç§éç½®æä»¶ï¼ææçéç½®æä»¶å¿é¡»å¨åä¸ç®å½ä¸å¹¶ä¿è¯ nginx å¯¹å¶æè¯»åæéã\n\n * IP ç½ååï¼æä»¶åä¸º white-ipv4 å white-ipv6ã\n * IP é»ååï¼æä»¶åä¸º ipv4 å ipv6ã\n * Url ç½ååï¼æä»¶åä¸º white-urlã\n * Url é»ååï¼æä»¶åä¸º urlã\n * Get åæ°é»ååï¼æä»¶åä¸º argsã\n * Post è¯·æ±ä½é»ååï¼æä»¶åä¸º postã\n * UserAgent é»ååï¼æä»¶åä¸º user-agentã\n * Cookie é»ååï¼æä»¶åä¸º cookieã\n * Referer ç½ååï¼æä»¶åä¸º white-refererã\n * Referer é»ååï¼æä»¶åä¸º refererã\n\næ³¨æ\n\næäºè§åæä»¶éè¦ä¹¦åæ­£åè¡¨è¾¾å¼ï¼ä¹¦åæ¶æ¯è¡ä¸ä¸ªæ­£åè¡¨è¾¾å¼ï¼ æ­£åè¡¨è¾¾å¼éµå¾ª PCRE æ åã\n\næ³¨æ\n\né«çº§è§åä»å¨å¼åçä¸­å¯ç¨ã\n\n\n# ipç½åå\n\nip ç½åååæ¬ä¸é¢ä¸¤ä¸ªæä»¶ã\n\n * ipv4 ç½ååï¼æä»¶åä¸º white-ipv4ã\n * ipv6 ç½ååï¼æä»¶åä¸º white-ipv6ã\n\nä¹¦åæ¶ä¸è¡æå®ä¸ä¸ª IP å°åæè IP å°ååãipv4 å°åå¿é¡»ä½¿ç¨ãç¹ååè¿å¶è¡¨ç¤ºæ³ãï¼ ipv6 å°åå¿é¡»ä½¿ç¨ ãåå·åå­è¿å¶è¡¨ç¤ºæ³ããä¸é¢ä¸¾ä¸äºä¾å­ã\n\næå®åä¸ª ipv4 å°åã\n\n192.168.2.1\n\n\næå®ä¸ä¸ª ipv4 å°ååã\n\n192.168.2.0/24\n\n\næå®åä¸ª ipv6 å°åã\n\nFE80::1000\n\n\næå®ä¸ä¸ª ipv6 å°ååã\n\nFE80::/10\n\n\n\n# IPé»åå\n\nIP é»åååæ¬ä¸é¢ä¸¤ä¸ªæä»¶ã\n\n * ipv4 é»ååï¼æä»¶åä¸º ipv4ã\n * ipv6 é»ååï¼æä»¶åä¸º ipv6ã\n\nåæ³å ip ç½ååã\n\n\n# urlç½åå\n\nUrl ç½ååçæä»¶åä¸º white-urlï¼ä¹¦åè§åæ¶æ¯è¡æå®ä¸ä¸ªæ­£åè¡¨è¾¾å¼ï¼ Url è¢«ä»»ä½ä¸ä¸ªæ­£åè¡¨è¾¾å¼å¹éå°å°±ä¼ç´æ¥æ¾è¡ï¼ä¸è¿è¡åç»­çæ£æ¥ã\n\n\n# urlé»åå\n\nUrl é»ååçæä»¶åä¸º urlï¼ä¹¦åè§åæ¶æ¯è¡æå®ä¸ä¸ªæ­£åè¡¨è¾¾å¼ï¼ Url è¢«ä»»ä½ä¸ä¸ªæ­£åè¡¨è¾¾å¼å¹éå°å°±ä¼è¢«æ¦æªï¼è¿å 403 ç¶æç ã\n\n\n# getåæ°é»åå\n\nGet åæ°é»ååçæä»¶åä¸º argsï¼ä¹¦åè§åæ¶æ¯è¡æå®ä¸ä¸ªæ­£åè¡¨è¾¾å¼ï¼ Get åæ°è¢«ä»»ä½ä¸ä¸ªæ­£åè¡¨è¾¾å¼å¹éå°å°±ä¼è¢«æ¦æªï¼è¿å 403 ç¶æç ã\n\n\n# postè¯·æ±ä½é»åå\n\nPost è¯·æ±ä½é»ååçæä»¶åä¸º postï¼ä¹¦åè§åæ¶æ¯è¡æå®ä¸ä¸ªæ­£åè¡¨è¾¾å¼ï¼ Post è¯·æ±ä½åçåå®¹è¢«ä»»ä½ä¸ä¸ªæ­£åè¡¨è¾¾å¼å¹éå°å°±ä¼è¢«æ¦æªï¼è¿å 403 ç¶æç ã\n\nè­¦å\n\nææ¶æ¬æ¨¡åä¸ä¼æ§è¡ Post è¯·æ±ä½æ£æ¥ï¼è¯¦è§å¸¸è§é®é¢ä¸è§£ç­ã\n\n\n# user-agenté»åå\n\nUserAgent é»ååçæä»¶åä¸º user-agentï¼ä¹¦åè§åæ¶æ¯è¡æå®ä¸ä¸ªæ­£åè¡¨è¾¾å¼ï¼ UserAgent è¢«ä»»ä½ä¸ä¸ªæ­£åè¡¨è¾¾å¼å¹éå°å°±ä¼è¢«æ¦æªï¼è¿å 403 ç¶æç ã\n\n\n# cookieé»åå\n\nCookie é»ååçæä»¶åä¸º cookieï¼ä¹¦åè§åæ¶æ¯è¡æå®ä¸ä¸ªæ­£åè¡¨è¾¾å¼ï¼ Cookie è¢«ä»»ä½ä¸ä¸ªæ­£åè¡¨è¾¾å¼å¹éå°å°±ä¼è¢«æ¦æªï¼è¿å 403 ç¶æç ã\n\n\n# refererç½åå\n\nReferer ç½ååçæä»¶åä¸º white-refererï¼ä¹¦åè§åæ¶æ¯è¡æå®ä¸ä¸ªæ­£åè¡¨è¾¾å¼ï¼ Referer è¢«ä»»ä½ä¸ä¸ªæ­£åè¡¨è¾¾å¼å¹éå°å°±ä¼ç´æ¥æ¾è¡ï¼ä¸è¿è¡åç»­çæ£æ¥ã\n\n\n# refereré»åå\n\nReferer é»ååçæä»¶åä¸º refererï¼ä¹¦åè§åæ¶æ¯è¡æå®ä¸ä¸ªæ­£åè¡¨è¾¾å¼ï¼ Referer è¢«ä»»ä½ä¸ä¸ªæ­£åè¡¨è¾¾å¼å¹éå°å°±ä¼è¢«æ¦æªï¼è¿å 403 ç¶æç ã",normalizedContent:"# è§åè¯´æ\n\næ¬æ¨¡åä½¿ç¨ä¸åå ç§éç½®æä»¶ï¼ææçéç½®æä»¶å¿é¡»å¨åä¸ç®å½ä¸å¹¶ä¿è¯ nginx å¯¹å¶æè¯»åæéã\n\n * ip ç½ååï¼æä»¶åä¸º white-ipv4 å white-ipv6ã\n * ip é»ååï¼æä»¶åä¸º ipv4 å ipv6ã\n * url ç½ååï¼æä»¶åä¸º white-urlã\n * url é»ååï¼æä»¶åä¸º urlã\n * get åæ°é»ååï¼æä»¶åä¸º argsã\n * post è¯·æ±ä½é»ååï¼æä»¶åä¸º postã\n * useragent é»ååï¼æä»¶åä¸º user-agentã\n * cookie é»ååï¼æä»¶åä¸º cookieã\n * referer ç½ååï¼æä»¶åä¸º white-refererã\n * referer é»ååï¼æä»¶åä¸º refererã\n\næ³¨æ\n\næäºè§åæä»¶éè¦ä¹¦åæ­£åè¡¨è¾¾å¼ï¼ä¹¦åæ¶æ¯è¡ä¸ä¸ªæ­£åè¡¨è¾¾å¼ï¼ æ­£åè¡¨è¾¾å¼éµå¾ª pcre æ åã\n\næ³¨æ\n\né«çº§è§åä»å¨å¼åçä¸­å¯ç¨ã\n\n\n# ipç½åå\n\nip ç½åååæ¬ä¸é¢ä¸¤ä¸ªæä»¶ã\n\n * ipv4 ç½ååï¼æä»¶åä¸º white-ipv4ã\n * ipv6 ç½ååï¼æä»¶åä¸º white-ipv6ã\n\nä¹¦åæ¶ä¸è¡æå®ä¸ä¸ª ip å°åæè ip å°ååãipv4 å°åå¿é¡»ä½¿ç¨ãç¹ååè¿å¶è¡¨ç¤ºæ³ãï¼ ipv6 å°åå¿é¡»ä½¿ç¨ ãåå·åå­è¿å¶è¡¨ç¤ºæ³ããä¸é¢ä¸¾ä¸äºä¾å­ã\n\næå®åä¸ª ipv4 å°åã\n\n192.168.2.1\n\n\næå®ä¸ä¸ª ipv4 å°ååã\n\n192.168.2.0/24\n\n\næå®åä¸ª ipv6 å°åã\n\nfe80::1000\n\n\næå®ä¸ä¸ª ipv6 å°ååã\n\nfe80::/10\n\n\n\n# ipé»åå\n\nip é»åååæ¬ä¸é¢ä¸¤ä¸ªæä»¶ã\n\n * ipv4 é»ååï¼æä»¶åä¸º ipv4ã\n * ipv6 é»ååï¼æä»¶åä¸º ipv6ã\n\nåæ³å ip ç½ååã\n\n\n# urlç½åå\n\nurl ç½ååçæä»¶åä¸º white-urlï¼ä¹¦åè§åæ¶æ¯è¡æå®ä¸ä¸ªæ­£åè¡¨è¾¾å¼ï¼ url è¢«ä»»ä½ä¸ä¸ªæ­£åè¡¨è¾¾å¼å¹éå°å°±ä¼ç´æ¥æ¾è¡ï¼ä¸è¿è¡åç»­çæ£æ¥ã\n\n\n# urlé»åå\n\nurl é»ååçæä»¶åä¸º urlï¼ä¹¦åè§åæ¶æ¯è¡æå®ä¸ä¸ªæ­£åè¡¨è¾¾å¼ï¼ url è¢«ä»»ä½ä¸ä¸ªæ­£åè¡¨è¾¾å¼å¹éå°å°±ä¼è¢«æ¦æªï¼è¿å 403 ç¶æç ã\n\n\n# getåæ°é»åå\n\nget åæ°é»ååçæä»¶åä¸º argsï¼ä¹¦åè§åæ¶æ¯è¡æå®ä¸ä¸ªæ­£åè¡¨è¾¾å¼ï¼ get åæ°è¢«ä»»ä½ä¸ä¸ªæ­£åè¡¨è¾¾å¼å¹éå°å°±ä¼è¢«æ¦æªï¼è¿å 403 ç¶æç ã\n\n\n# postè¯·æ±ä½é»åå\n\npost è¯·æ±ä½é»ååçæä»¶åä¸º postï¼ä¹¦åè§åæ¶æ¯è¡æå®ä¸ä¸ªæ­£åè¡¨è¾¾å¼ï¼ post è¯·æ±ä½åçåå®¹è¢«ä»»ä½ä¸ä¸ªæ­£åè¡¨è¾¾å¼å¹éå°å°±ä¼è¢«æ¦æªï¼è¿å 403 ç¶æç ã\n\nè­¦å\n\nææ¶æ¬æ¨¡åä¸ä¼æ§è¡ post è¯·æ±ä½æ£æ¥ï¼è¯¦è§å¸¸è§é®é¢ä¸è§£ç­ã\n\n\n# user-agenté»åå\n\nuseragent é»ååçæä»¶åä¸º user-agentï¼ä¹¦åè§åæ¶æ¯è¡æå®ä¸ä¸ªæ­£åè¡¨è¾¾å¼ï¼ useragent è¢«ä»»ä½ä¸ä¸ªæ­£åè¡¨è¾¾å¼å¹éå°å°±ä¼è¢«æ¦æªï¼è¿å 403 ç¶æç ã\n\n\n# cookieé»åå\n\ncookie é»ååçæä»¶åä¸º cookieï¼ä¹¦åè§åæ¶æ¯è¡æå®ä¸ä¸ªæ­£åè¡¨è¾¾å¼ï¼ cookie è¢«ä»»ä½ä¸ä¸ªæ­£åè¡¨è¾¾å¼å¹éå°å°±ä¼è¢«æ¦æªï¼è¿å 403 ç¶æç ã\n\n\n# refererç½åå\n\nreferer ç½ååçæä»¶åä¸º white-refererï¼ä¹¦åè§åæ¶æ¯è¡æå®ä¸ä¸ªæ­£åè¡¨è¾¾å¼ï¼ referer è¢«ä»»ä½ä¸ä¸ªæ­£åè¡¨è¾¾å¼å¹éå°å°±ä¼ç´æ¥æ¾è¡ï¼ä¸è¿è¡åç»­çæ£æ¥ã\n\n\n# refereré»åå\n\nreferer é»ååçæä»¶åä¸º refererï¼ä¹¦åè§åæ¶æ¯è¡æå®ä¸ä¸ªæ­£åè¡¨è¾¾å¼ï¼ referer è¢«ä»»ä½ä¸ä¸ªæ­£åè¡¨è¾¾å¼å¹éå°å°±ä¼è¢«æ¦æªï¼è¿å 403 ç¶æç ã",charsets:{cjk:!0}},{title:"è·¨çæ¬åçº§",frontmatter:{title:"è·¨çæ¬åçº§",lang:"zh-CN"},regularPath:"/zh-cn/advance/upgrade.html",relativePath:"zh-cn/advance/upgrade.md",key:"v-f2d7ce48",path:"/zh-cn/advance/upgrade.html",headers:[{level:2,title:"ä» 9.x.x åçº§å° 10.x.x",slug:"ä»-9-x-x-åçº§å°-10-x-x",normalizedTitle:"ä» 9.x.x åçº§å° 10.x.x",charIndex:36},{level:2,title:"ä» 8.x.x åçº§å° 9.x.x",slug:"ä»-8-x-x-åçº§å°-9-x-x",normalizedTitle:"ä» 8.x.x åçº§å° 9.x.x",charIndex:235},{level:2,title:"ä» 7.x.x åçº§å° 8.x.x",slug:"ä»-7-x-x-åçº§å°-8-x-x",normalizedTitle:"ä» 7.x.x åçº§å° 8.x.x",charIndex:633},{level:2,title:"ä» 6.x.x åçº§å° 7.x.x",slug:"ä»-6-x-x-åçº§å°-7-x-x",normalizedTitle:"ä» 6.x.x åçº§å° 7.x.x",charIndex:1355},{level:2,title:"ä» 5.x.x åçº§å° 6.x.x",slug:"ä»-5-x-x-åçº§å°-6-x-x",normalizedTitle:"ä» 5.x.x åçº§å° 6.x.x",charIndex:1426}],lastUpdated:"2022/1/10 ä¸å3:38:27",lastUpdatedTimestamp:1641829107e3,headersStr:"ä» 9.x.x åçº§å° 10.x.x ä» 8.x.x åçº§å° 9.x.x ä» 7.x.x åçº§å° 8.x.x ä» 6.x.x åçº§å° 7.x.x ä» 5.x.x åçº§å° 6.x.x",content:"# è·¨çæ¬åçº§\n\nåçº§æ¨¡ååéè¦æç§å®è£æåä¸­çè¯´æéæ°å®è£ã\n\n\n# ä» 9.x.x åçº§å° 10.x.x\n\n 1. å¦æä½ ä½¿ç¨äºæä»¤ waf_http_statusï¼è¯·æ ¹æ®ææ¡£å°å¶æ¿æ¢ä¸ºæä»¤ waf_actionã\n 2. å¦æä½ è®¾ç½®äºæä»¤ waf_cc_deny çåæ° sizeï¼ä½ åºè¯¥æ ¹æ®ææ¡£ä½¿ç¨åæ° zone æ¥æ¿ä»£ã\n 3. å¦æä½ ä½¿ç¨äºæä»¤ waf_cc_deny çåæ° CAPTCHAï¼ä½ åºè¯¥æ ¹æ®ææ¡£ä½¿ç¨æä»¤ waf_action æ¥æ¿ä»£ã\n\n\n# ä» 8.x.x åçº§å° 9.x.x\n\n 1. å®è£ libmodsecurity çå¨æé¾æ¥åºåå¤´æä»¶ã\n 2. å¨é¡¹ç®æ ¹ç®å½ä¸è¿è¡å½ä»¤ git clone -b v2.3.0 https://github.com/troydhanson/uthash.git lib/uthashã\n 3. æä»¤ waf_mode çä¸äºåæ°è¢«å é¤ï¼å¦æä½ ä½¿ç¨äºè¿äºåæ°è¯·å é¤ã\n    * LIBINJECTION\n    * LIBINJECTION-SQLI\n    * LIBINJECTION-XSS\n    * ADV\n 4. å é¤é«çº§è§åçæä»¶ advancedã\n 5. æä»¤ waf_priority çåæ° ADV è¢«å é¤ï¼å¦æä½ ä½¿ç¨äºæ­¤åæ°è¯·å é¤ã\n 6. ä¸ºæä»¤ waf_priority æ°å¢äºä¸ä¸ªåæ° MODSECURITYï¼å¦æä½ ä½¿ç¨äºæ­¤æä»¤è¯·å°æ¹åæ°å¡«åå°åéçä½ç½®ã\n\n\n# ä» 7.x.x åçº§å° 8.x.x\n\n 1. å®è£ libcurl çå¨æé¾æ¥åºåå¤´æä»¶ã\n 2. å¨é¡¹ç®æ ¹ç®å½ä¸è¿è¡å½ä»¤ git clone https://github.com/DaveGamble/cJSON.git lib/cjsonã\n 3. å¨é¡¹ç®æ ¹ç®å½ä¸è¿è¡å½ä»¤ git clone https://github.com/libinjection/libinjection.git lib/libinjectionã\n 4. å¦æä½ ä½¿ç¨äºæä»¤ waf_mode å¹¶ä¸ä½¿ç¨äºè¯¥æä»¤çåæ° CC æ CACHEï¼è¯·å é¤è¿ä¸¤ä¸ªåæ°ãè¿ä¸¤ä¸ªåæ°çåè½å·²ç»åå«ç§»å¨è¿äºæä»¤ waf_cc_deny å waf_cacheã\n 5. å¦æä½ æ³å¼å¯ CC é²æ¤ï¼è¯·ä¿®æ¹æä»¤ waf_cc_deny çåæ°ï¼ä¾å¦å° waf_cc_deny rate=2000r/m duration=1h æ¹ä¸º waf_cc_deny on rate=2000r/m duration=1hã\n 6. å¦æä½ æ³å¼å¯ç¼å­ï¼è¯·ä¿®æ¹æä»¤ waf_cache çåæ°ï¼ä¾å¦å° waf_cache capacity=50 æ¹ä¸º waf_cache on capacity=50ã\n 7. å¦æä½ å¨ http åä¸­ä½¿ç¨äºæä»¤ waf_cc_deny æ waf_cacheï¼è¯·å°è¿ä¸¤ä¸ªæä»¤ç§»å¨å°æ´åå±ã\n 8. å¦æä½ ä½¿ç¨äºæä»¤ waf_cache å¹¶ä¸ä½¿ç¨äºè¯¥æä»¤çåæ° interval æ percentï¼è¯·å é¤è¿ä¸¤ä¸ªåæ°ï¼è¿ä¸¤ä¸ªåæ°å·²ç»è¢«ç§»é¤ã\n 9. å¦æä½ ä½¿ç¨äºæä»¤ waf_priorityï¼è¯·å° VERIFY-BOT å CAPTCHA æ·»å è¿å»ã\n\n\n# ä» 6.x.x åçº§å° 7.x.x\n\n 1. å¦æä½ å¨ http åä¸­ä½¿ç¨äºæä»¤ waf_cc_denyï¼è¯·å°è¿ä¸ªæä»¤ç§»å¨å°æ´åå±ã\n\n\n# ä» 5.x.x åçº§å° 6.x.x\n\n 1. å¨è§åç®å½ä¸æ°å»ºä¸ä¸ªåä¸º advanced çç©ºæä»¶ã\n 2. å¦æä½¿ç¨äºéç½®é¡¹ waf_priorityï¼å¯ä»¥å°å¶å é¤æèæç§ææ¡£ä¸­å¯¹è¯¥éç½®é¡¹çè¯´æè¿è¡ä¿®æ¹ã",normalizedContent:"# è·¨çæ¬åçº§\n\nåçº§æ¨¡ååéè¦æç§å®è£æåä¸­çè¯´æéæ°å®è£ã\n\n\n# ä» 9.x.x åçº§å° 10.x.x\n\n 1. å¦æä½ ä½¿ç¨äºæä»¤ waf_http_statusï¼è¯·æ ¹æ®ææ¡£å°å¶æ¿æ¢ä¸ºæä»¤ waf_actionã\n 2. å¦æä½ è®¾ç½®äºæä»¤ waf_cc_deny çåæ° sizeï¼ä½ åºè¯¥æ ¹æ®ææ¡£ä½¿ç¨åæ° zone æ¥æ¿ä»£ã\n 3. å¦æä½ ä½¿ç¨äºæä»¤ waf_cc_deny çåæ° captchaï¼ä½ åºè¯¥æ ¹æ®ææ¡£ä½¿ç¨æä»¤ waf_action æ¥æ¿ä»£ã\n\n\n# ä» 8.x.x åçº§å° 9.x.x\n\n 1. å®è£ libmodsecurity çå¨æé¾æ¥åºåå¤´æä»¶ã\n 2. å¨é¡¹ç®æ ¹ç®å½ä¸è¿è¡å½ä»¤ git clone -b v2.3.0 https://github.com/troydhanson/uthash.git lib/uthashã\n 3. æä»¤ waf_mode çä¸äºåæ°è¢«å é¤ï¼å¦æä½ ä½¿ç¨äºè¿äºåæ°è¯·å é¤ã\n    * libinjection\n    * libinjection-sqli\n    * libinjection-xss\n    * adv\n 4. å é¤é«çº§è§åçæä»¶ advancedã\n 5. æä»¤ waf_priority çåæ° adv è¢«å é¤ï¼å¦æä½ ä½¿ç¨äºæ­¤åæ°è¯·å é¤ã\n 6. ä¸ºæä»¤ waf_priority æ°å¢äºä¸ä¸ªåæ° modsecurityï¼å¦æä½ ä½¿ç¨äºæ­¤æä»¤è¯·å°æ¹åæ°å¡«åå°åéçä½ç½®ã\n\n\n# ä» 7.x.x åçº§å° 8.x.x\n\n 1. å®è£ libcurl çå¨æé¾æ¥åºåå¤´æä»¶ã\n 2. å¨é¡¹ç®æ ¹ç®å½ä¸è¿è¡å½ä»¤ git clone https://github.com/davegamble/cjson.git lib/cjsonã\n 3. å¨é¡¹ç®æ ¹ç®å½ä¸è¿è¡å½ä»¤ git clone https://github.com/libinjection/libinjection.git lib/libinjectionã\n 4. å¦æä½ ä½¿ç¨äºæä»¤ waf_mode å¹¶ä¸ä½¿ç¨äºè¯¥æä»¤çåæ° cc æ cacheï¼è¯·å é¤è¿ä¸¤ä¸ªåæ°ãè¿ä¸¤ä¸ªåæ°çåè½å·²ç»åå«ç§»å¨è¿äºæä»¤ waf_cc_deny å waf_cacheã\n 5. å¦æä½ æ³å¼å¯ cc é²æ¤ï¼è¯·ä¿®æ¹æä»¤ waf_cc_deny çåæ°ï¼ä¾å¦å° waf_cc_deny rate=2000r/m duration=1h æ¹ä¸º waf_cc_deny on rate=2000r/m duration=1hã\n 6. å¦æä½ æ³å¼å¯ç¼å­ï¼è¯·ä¿®æ¹æä»¤ waf_cache çåæ°ï¼ä¾å¦å° waf_cache capacity=50 æ¹ä¸º waf_cache on capacity=50ã\n 7. å¦æä½ å¨ http åä¸­ä½¿ç¨äºæä»¤ waf_cc_deny æ waf_cacheï¼è¯·å°è¿ä¸¤ä¸ªæä»¤ç§»å¨å°æ´åå±ã\n 8. å¦æä½ ä½¿ç¨äºæä»¤ waf_cache å¹¶ä¸ä½¿ç¨äºè¯¥æä»¤çåæ° interval æ percentï¼è¯·å é¤è¿ä¸¤ä¸ªåæ°ï¼è¿ä¸¤ä¸ªåæ°å·²ç»è¢«ç§»é¤ã\n 9. å¦æä½ ä½¿ç¨äºæä»¤ waf_priorityï¼è¯·å° verify-bot å captcha æ·»å è¿å»ã\n\n\n# ä» 6.x.x åçº§å° 7.x.x\n\n 1. å¦æä½ å¨ http åä¸­ä½¿ç¨äºæä»¤ waf_cc_denyï¼è¯·å°è¿ä¸ªæä»¤ç§»å¨å°æ´åå±ã\n\n\n# ä» 5.x.x åçº§å° 6.x.x\n\n 1. å¨è§åç®å½ä¸æ°å»ºä¸ä¸ªåä¸º advanced çç©ºæä»¶ã\n 2. å¦æä½¿ç¨äºéç½®é¡¹ waf_priorityï¼å¯ä»¥å°å¶å é¤æèæç§ææ¡£ä¸­å¯¹è¯¥éç½®é¡¹çè¯´æè¿è¡ä¿®æ¹ã",charsets:{cjk:!0}},{title:"åç½®åé",frontmatter:{title:"åç½®åé",lang:"zh-CN"},regularPath:"/zh-cn/advance/variable.html",relativePath:"zh-cn/advance/variable.md",key:"v-158c9b2c",path:"/zh-cn/advance/variable.html",headers:[{level:2,title:"$waf_log",slug:"waf-log",normalizedTitle:"$waf_log",charIndex:119},{level:2,title:"$waf_blocking_log",slug:"waf-blocking-log",normalizedTitle:"$waf_blocking_log",charIndex:198},{level:2,title:"$waf_blocked",slug:"waf-blocked",normalizedTitle:"$waf_blocked",charIndex:284},{level:2,title:"$waf_spend",slug:"waf-spend",normalizedTitle:"$waf_spend",charIndex:347},{level:2,title:"$waf_rule_type",slug:"waf-rule-type",normalizedTitle:"$waf_rule_type",charIndex:410},{level:2,title:"$waf_rule_details",slug:"waf-rule-details",normalizedTitle:"$waf_rule_details",charIndex:748},{level:2,title:"$waf_rate",slug:"waf-rate",normalizedTitle:"$waf_rate",charIndex:813}],lastUpdated:"2022/1/10 ä¸å3:38:27",lastUpdatedTimestamp:1641829107e3,headersStr:"$waf_log $waf_blocking_log $waf_blocked $waf_spend $waf_rule_type $waf_rule_details $waf_rate",content:"# åç½®åé\n\nå¨ä¹¦å nginx.conf æä»¶çæ¶åä¸å¯é¿åå°éè¦ç¨å°ä¸äºåéï¼å¦$remote_addrå¯ä»¥ç¨æ¥è·åå®¢æ·ç«¯ IP å°åã\n\næ¬æ¨¡åå¢å äºå¤ä¸ªå¯ç¨çåéã\n\nä¸è½åæä»¤ `if` å±ç¨\n\nè¯¦è§å¸¸è§é®é¢ä¸è§£ç­ã\n\n\n# $waf_log\n\nå¦ææ¬æ¬¡è¯·æ±ä¸­é²ç«å¢è¿è¡äºæ£æ¥åä¸ä¸ºç©ºå­ç¬¦ä¸²ï¼åä¹ä¸ºç©ºå­ç¬¦ä¸²ãæ¬åéä¸»è¦ç¨äº access_log æä»¤ï¼è¯¦è§ èªå®ä¹æ¥å¿æ ¼å¼ã\n\n\n# $waf_blocking_log\n\nå¦ææ¬æ¬¡è¯·æ±æ¬è¢«æ¨¡åæ¦æªåä¸ä¸ºç©ºå­ç¬¦ä¸²ï¼åä¹åä¸ºç©ºå­ç¬¦ä¸²ãæ¬åéä¸»è¦ç¨äº access_log æä»¤ï¼è¯¦è§ èªå®ä¹æ¥å¿æ ¼å¼ã\n\n\n# $waf_blocked\n\nè¡¨ç¤ºæ¬æ¬¡è¯·æ±æ¯å¦è¢«æ¬æ¨¡åæ¦æªï¼å¦ææ¦æªäºåå¶çå¼ä¸º'true',åä¹åä¸º'false'ã\n\n\n# $waf_spend\n\nè¡¨ç¤ºæ¬æ¬¡æ£æ¥è±è´¹äºå¤å°æ¶é´ï¼æ¯«ç§ï¼ï¼ä¿ç 5 ä½å°æ°ï¼èå¥è§ååå³äºå·ä½ C æ ååºçå®ç°ã\n\n\n# $waf_rule_type\n\nå¦ææ¬æ¬¡è¯·æ±å½ä¸­é»ç½ååè§åï¼åå¶å¼ä¸ºè§¦åçè§åç±»åãä¸é¢æ¯å¯è½çåå¼ãè¥æ²¡æå½ä¸­é»ç½ååè§ååå¶å¼ä¸º''ã\n\n * 'CC-DENY'\n * 'WHITE-IPV4'\n * 'WHITE-IPV6'\n * 'BLACK-IPV4'\n * 'BLACK-IPV6'\n * 'WHITE-URL'\n * 'BLACK-URL'\n * 'BLACK-ARGS'\n * 'BLACK-USER-AGENT'\n * 'WHITE-REFERER'\n * 'BLACK-REFERER'\n * 'BLACK-COOKIE'\n * 'BLACK-POST'\n * 'UNDER-ATTACK'\n * 'FAKE-BOT'\n * 'CAPTCHA'\n\n\n# $waf_rule_details\n\nå¦ææ¬æ¬¡è¯·æ±è¢«æ¬æ¨¡åæ¦æªï¼åå¶å¼ä¸ºè§¦åçå·ä½çè§åçåå®¹ãè¥æ²¡æçæåå¶å¼ä¸º''ã\n\n\n# $waf_rate\n\nä¸ä¸ªæ´æ°ï¼è¡¨ç¤ºä¸ä¸ªç»è®¡å¨æåå½å IP çè®¿é®æ¬¡æ°ã",normalizedContent:"# åç½®åé\n\nå¨ä¹¦å nginx.conf æä»¶çæ¶åä¸å¯é¿åå°éè¦ç¨å°ä¸äºåéï¼å¦$remote_addrå¯ä»¥ç¨æ¥è·åå®¢æ·ç«¯ ip å°åã\n\næ¬æ¨¡åå¢å äºå¤ä¸ªå¯ç¨çåéã\n\nä¸è½åæä»¤ `if` å±ç¨\n\nè¯¦è§å¸¸è§é®é¢ä¸è§£ç­ã\n\n\n# $waf_log\n\nå¦ææ¬æ¬¡è¯·æ±ä¸­é²ç«å¢è¿è¡äºæ£æ¥åä¸ä¸ºç©ºå­ç¬¦ä¸²ï¼åä¹ä¸ºç©ºå­ç¬¦ä¸²ãæ¬åéä¸»è¦ç¨äº access_log æä»¤ï¼è¯¦è§ èªå®ä¹æ¥å¿æ ¼å¼ã\n\n\n# $waf_blocking_log\n\nå¦ææ¬æ¬¡è¯·æ±æ¬è¢«æ¨¡åæ¦æªåä¸ä¸ºç©ºå­ç¬¦ä¸²ï¼åä¹åä¸ºç©ºå­ç¬¦ä¸²ãæ¬åéä¸»è¦ç¨äº access_log æä»¤ï¼è¯¦è§ èªå®ä¹æ¥å¿æ ¼å¼ã\n\n\n# $waf_blocked\n\nè¡¨ç¤ºæ¬æ¬¡è¯·æ±æ¯å¦è¢«æ¬æ¨¡åæ¦æªï¼å¦ææ¦æªäºåå¶çå¼ä¸º'true',åä¹åä¸º'false'ã\n\n\n# $waf_spend\n\nè¡¨ç¤ºæ¬æ¬¡æ£æ¥è±è´¹äºå¤å°æ¶é´ï¼æ¯«ç§ï¼ï¼ä¿ç 5 ä½å°æ°ï¼èå¥è§ååå³äºå·ä½ c æ ååºçå®ç°ã\n\n\n# $waf_rule_type\n\nå¦ææ¬æ¬¡è¯·æ±å½ä¸­é»ç½ååè§åï¼åå¶å¼ä¸ºè§¦åçè§åç±»åãä¸é¢æ¯å¯è½çåå¼ãè¥æ²¡æå½ä¸­é»ç½ååè§ååå¶å¼ä¸º''ã\n\n * 'cc-deny'\n * 'white-ipv4'\n * 'white-ipv6'\n * 'black-ipv4'\n * 'black-ipv6'\n * 'white-url'\n * 'black-url'\n * 'black-args'\n * 'black-user-agent'\n * 'white-referer'\n * 'black-referer'\n * 'black-cookie'\n * 'black-post'\n * 'under-attack'\n * 'fake-bot'\n * 'captcha'\n\n\n# $waf_rule_details\n\nå¦ææ¬æ¬¡è¯·æ±è¢«æ¬æ¨¡åæ¦æªï¼åå¶å¼ä¸ºè§¦åçå·ä½çè§åçåå®¹ãè¥æ²¡æçæåå¶å¼ä¸º''ã\n\n\n# $waf_rate\n\nä¸ä¸ªæ´æ°ï¼è¡¨ç¤ºä¸ä¸ªç»è®¡å¨æåå½å ip çè®¿é®æ¬¡æ°ã",charsets:{cjk:!0}},{title:"2.x.x",frontmatter:{title:"2.x.x",lang:"zh-CN"},regularPath:"/zh-cn/changes/2_x_x.html",relativePath:"zh-cn/changes/2_x_x.md",key:"v-2083487c",path:"/zh-cn/changes/2_x_x.html",headers:[{level:2,title:"[2.1.1] - 2020-12-10",slug:"_2-1-1-2020-12-10",normalizedTitle:"[2.1.1] - 2020-12-10",charIndex:123},{level:3,title:"æ°å¢",slug:"æ°å¢",normalizedTitle:"æ°å¢",charIndex:148},{level:3,title:"æ¹å¨",slug:"æ¹å¨",normalizedTitle:"æ¹å¨",charIndex:155},{level:3,title:"ä¿®å¤",slug:"ä¿®å¤",normalizedTitle:"ä¿®å¤",charIndex:162},{level:2,title:"[2.1.0] - 2020-12-09",slug:"_2-1-0-2020-12-09",normalizedTitle:"[2.1.0] - 2020-12-09",charIndex:371},{level:3,title:"æ°å¢",slug:"æ°å¢-2",normalizedTitle:"æ°å¢",charIndex:148},{level:3,title:"æ¹å¨",slug:"æ¹å¨-2",normalizedTitle:"æ¹å¨",charIndex:155},{level:3,title:"ä¿®å¤",slug:"ä¿®å¤-2",normalizedTitle:"ä¿®å¤",charIndex:162},{level:2,title:"[2.0.2] - 2020-12-07",slug:"_2-0-2-2020-12-07",normalizedTitle:"[2.0.2] - 2020-12-07",charIndex:464},{level:3,title:"æ°å¢",slug:"æ°å¢-3",normalizedTitle:"æ°å¢",charIndex:148},{level:3,title:"æ¹å¨",slug:"æ¹å¨-3",normalizedTitle:"æ¹å¨",charIndex:155},{level:3,title:"ä¿®å¤",slug:"ä¿®å¤-3",normalizedTitle:"ä¿®å¤",charIndex:162},{level:2,title:"[2.0.1] - 2020-12-03",slug:"_2-0-1-2020-12-03",normalizedTitle:"[2.0.1] - 2020-12-03",charIndex:673},{level:3,title:"æ°å¢",slug:"æ°å¢-4",normalizedTitle:"æ°å¢",charIndex:148},{level:3,title:"æ¹å¨",slug:"æ¹å¨-4",normalizedTitle:"æ¹å¨",charIndex:155},{level:3,title:"ä¿®å¤",slug:"ä¿®å¤-4",normalizedTitle:"ä¿®å¤",charIndex:162},{level:2,title:"[2.0.0] - 2020-09-29",slug:"_2-0-0-2020-09-29",normalizedTitle:"[2.0.0] - 2020-09-29",charIndex:954},{level:3,title:"æ°å¢",slug:"æ°å¢-5",normalizedTitle:"æ°å¢",charIndex:148},{level:3,title:"æ¹å¨",slug:"æ¹å¨-5",normalizedTitle:"æ¹å¨",charIndex:155},{level:3,title:"ä¿®å¤",slug:"ä¿®å¤-5",normalizedTitle:"ä¿®å¤",charIndex:162},{level:2,title:"[1.0.1] - 2020-08-22",slug:"_1-0-1-2020-08-22",normalizedTitle:"[1.0.1] - 2020-08-22",charIndex:1434},{level:3,title:"æ°å¢",slug:"æ°å¢-6",normalizedTitle:"æ°å¢",charIndex:148},{level:3,title:"æ¹å¨",slug:"æ¹å¨-6",normalizedTitle:"æ¹å¨",charIndex:155},{level:3,title:"ä¿®å¤",slug:"ä¿®å¤-6",normalizedTitle:"ä¿®å¤",charIndex:162},{level:2,title:"[1.0.0] - 2020-08-18",slug:"_1-0-0-2020-08-18",normalizedTitle:"[1.0.0] - 2020-08-18",charIndex:3348},{level:3,title:"æ°å¢",slug:"æ°å¢-7",normalizedTitle:"æ°å¢",charIndex:148},{level:3,title:"æ¹å¨",slug:"æ¹å¨-7",normalizedTitle:"æ¹å¨",charIndex:155},{level:3,title:"ä¿®å¤",slug:"ä¿®å¤-7",normalizedTitle:"ä¿®å¤",charIndex:162}],lastUpdated:"2022/1/10 ä¸å3:38:27",lastUpdatedTimestamp:1641829107e3,headersStr:"[2.1.1] - 2020-12-10 æ°å¢ æ¹å¨ ä¿®å¤ [2.1.0] - 2020-12-09 æ°å¢ æ¹å¨ ä¿®å¤ [2.0.2] - 2020-12-07 æ°å¢ æ¹å¨ ä¿®å¤ [2.0.1] - 2020-12-03 æ°å¢ æ¹å¨ ä¿®å¤ [2.0.0] - 2020-09-29 æ°å¢ æ¹å¨ ä¿®å¤ [1.0.1] - 2020-08-22 æ°å¢ æ¹å¨ ä¿®å¤ [1.0.0] - 2020-08-18 æ°å¢ æ¹å¨ ä¿®å¤",content:"# æ´æ°æ¥å¿ï¼2.x.xï¼\n\næ¬æä»¶çæ ¼å¼åºäºå¦ä½ç»´æ¤æ´æ°æ¥å¿ï¼ å¹¶ä¸æ¬é¡¹ç®éµå®è¯­ä¹åçæ¬ã\n\nä½ä¸ºãä¸å¼å®¹çä¿®æ¹ãï¼\n\n * åæçéç½®æä»¶å¯è½æ æ³ä½¿ç¨ï¼æ¯å¦å é¤æèéå½åäºæä¸ªéç½®é¡¹ã\n * å¯è½éè¦æ´æ°ç¼è¯ç¯å¢ï¼æ¯å¦å®è£æ°çä¾èµã\n\n\n# [2.1.1] - 2020-12-10\n\n\n# æ°å¢\n\n\n# æ¹å¨\n\n\n# ä¿®å¤\n\n * ä¿®å¤äºæ¨¡åå¯å¨å¤±è´¥ç bugãæ­¤ bug çæ¥éä¿¡æ¯ä¸º nginx: [alert] could not open error log file: open() \"ngx_waf: /logs/error.log\" failed (2: No such file or directory)ï¼0dfc46fï¼ã\n\n----------------------------------------\n\n\n# [2.1.0] - 2020-12-09\n\n\n# æ°å¢\n\n * å¼å®¹äº Mainline çæ¬ç nginxï¼f31f906 & 65277d1ï¼ã\n\n\n# æ¹å¨\n\n\n# ä¿®å¤\n\n\n# [2.0.2] - 2020-12-07\n\n\n# æ°å¢\n\n\n# æ¹å¨\n\n\n# ä¿®å¤\n\n * ä¿®å¤äºä¸ä¸ª CC é²å¾¡å¤±æç bugãæ­¤ bug ä¼å¯¼è´å½ waf_mult_mount æªå¯ç¨æ¶ï¼CC é²å¾¡ä¼å¤±æï¼048fe5cï¼ã\n\n * ä¿®å¤äºä¸ä¸ªå éè¯¯ç #include æä»¤èå¯¼è´ç¼è¯å¤±è´¥ç bugï¼3fa298cï¼ã\n\n----------------------------------------\n\n\n# [2.0.1] - 2020-12-03\n\n\n# æ°å¢\n\n\n# æ¹å¨\n\n * ä¸åæå¨ä¸è½½ uthash ä¾èµï¼æ¹ç¨ system libraryãå¯ä»¥ä½¿ç¨ yum install uthash-devel æ apt-get install uthash-dev å®è£ system libraryï¼7cfc94bï¼ã\n\n\n# ä¿®å¤\n\n * ä¿®å¤äºå ä¸ºå®çéå®ä¹å¯¼è´çå¨ CentOS/RHEL 6 or 7 ä¸ç¼è¯å¤±è´¥çéè¯¯ï¼28e1c8a & 566ae4aï¼ã\n\n----------------------------------------\n\n\n# [2.0.0] - 2020-09-29\n\n\n# æ°å¢\n\n * æ¯æä»¥å¨ææ¨¡åå®è£å° nginx ä¸ï¼æè°¢ dvershininç PRï¼https://github.com/ADD-SP/ngx_waf/pull/4ï¼ã\n\n\n# æ¹å¨\n\n * éç½®æä»¤åå¹¶ (ba92cfd)ãè¿äºéç½®æä»¤å°è¢«åå¹¶ï¼waf_check_ipv4ï¼waf_check_urlï¼waf_check_argsï¼waf_check_uaï¼waf_check_refererï¼waf_check_cookieï¼waf_check_postï¼waf_check_cookieï¼waf_cc_denyãåå¹¶åçæ°æä»¤ä¸ºwaf_modeï¼è¯¦æè§READMEã\n\n\n# ä¿®å¤\n\n * å é¤ä¸ä¸ªé»è®¤ç User-Agent è§åï¼è§ååå®¹ä¸º(?i)(?:Sogou web spider)ï¼åå æ¯ä¼æ¦æªéæ¶æçç½ç»ç¬è«ï¼827d4e5ï¼ã\n * ç°å¨å¯ä»¥æ­£ç¡®å¤çè§åæä»¶ä¸­çç©ºè¡äºï¼955cf2dï¼ã\n\n----------------------------------------\n\n\n# [1.0.1] - 2020-08-22\n\n\n# æ°å¢\n\n * å¢å äºæ°çéç½®é¡¹ï¼3214fc8ï¼\n   * waf_check_ipv4:\n     * éç½®è¯­æ³: waf_check_ipv4 [ on | off ];\n     * é»è®¤å¼ï¼on\n     * éç½®æ®µ: server\n     * ä½ç¨ï¼æ¯å¦å¯ç¨ IPV4 æ£æ¥ã\n   * waf_check_url:\n     * éç½®è¯­æ³: waf_check_url [ on | off ];\n     * é»è®¤å¼ï¼on\n     * éç½®æ®µ: server\n     * ä½ç¨ï¼æ¯å¦å¯ç¨ URL æ£æ¥ã\n   * waf_check_args:\n     * éç½®è¯­æ³: waf_check_args [ on | off ];\n     * é»è®¤å¼ï¼on\n     * éç½®æ®µ: server\n     * ä½ç¨ï¼æ¯å¦å¯ç¨ Args æ£æ¥ã\n   * waf_check_ua:\n     * éç½®è¯­æ³: waf_check_ua [ on | off ];\n     * é»è®¤å¼ï¼on\n     * éç½®æ®µ: server\n     * ä½ç¨ï¼æ¯å¦å¯ç¨ User-Agent æ£æ¥ã\n   * waf_check_referer:\n     * éç½®è¯­æ³: waf_check_referer [ on | off ];\n     * é»è®¤å¼ï¼on\n     * éç½®æ®µ: server\n     * ä½ç¨ï¼æ¯å¦å¯ç¨ Referer æ£æ¥ã\n   * waf_check_cookie:\n     * éç½®è¯­æ³: waf_check_cookie [ on | off ];\n     * é»è®¤å¼ï¼on\n     * éç½®æ®µ: server\n     * ä½ç¨ï¼æ¯å¦å¯ç¨ Cookie æ£æ¥ã\n   * waf_check_post:\n     * éç½®è¯­æ³: waf_check_post [ on | off ];\n     * é»è®¤å¼ï¼off\n     * éç½®æ®µ: server\n     * ä½ç¨ï¼æ¯å¦å¯ç¨ POST æ£æ¥ã\n   * waf_cc_deny:\n     * éç½®è¯­æ³: waf_cc_deny [ on | off ];\n     * é»è®¤å¼ï¼off\n     * éç½®æ®µ: server\n     * ä½ç¨ï¼æ¯å¦å¯ç¨ CC é²å¾¡ã\n\n\n# æ¹å¨\n\n * waf_mult_mountç°å¨åªåè®¸åå¨serveræ®µä¸­ï¼3214fc8ï¼ã\n   * waf_mult_mount:\n     * éç½®è¯­æ³: waf_mult_mount [ on | off ];\n     * é»è®¤å¼ï¼off\n     * éç½®æ®µ: server\n     * ä½ç¨ï¼è¿è¡å¤é¶æ®µæ£æ¥ï¼å½nginx.confå­å¨å°åéåçæåµä¸ï¼å¦rewriteéç½®ï¼å»ºè®®å¯ç¨ï¼åä¹å»ºè®®å³é­ã\n * æ´æ¹ç°æçéç½®é¡¹å³é®å­ï¼å é¤äºngx_åç¼ï¼8b3e416ï¼ã\n   * waf:\n     * éç½®è¯­æ³: waf [ on | off ];\n     * é»è®¤å¼ï¼off\n     * éç½®æ®µ: server\n     * ä½ç¨ï¼æ¯å¦å¯ç¨æ¬æ¨¡åã\n   * waf_rule_path:\n     * éç½®è¯­æ³: waf_rule_path dir;\n     * é»è®¤å¼ï¼æ \n     * éç½®æ®µ: server\n     * ä½ç¨ï¼è§åæä»¶æå¨ç®å½ï¼ä¸å¿é¡»ä»¥/ç»å°¾ã\n   * waf_mult_mount:\n     * éç½®è¯­æ³: waf_mult_mount [ on | off ];\n     * é»è®¤å¼ï¼off\n     * éç½®æ®µ: http\n     * ä½ç¨ï¼è¿è¡å¤é¶æ®µæ£æ¥ï¼å½nginx.confå­å¨å°åéåçæåµä¸ï¼å¦rewriteéç½®ï¼å»ºè®®å¯ç¨ï¼åä¹å»ºè®®å³é­ã\n * æ´æ° referer çé»è®¤è§åï¼å·ä½ä¸ç¹å°±æ¯æ·è´rules/urlçåå®¹å°rules/refererä¸­ï¼55f5e26ï¼ã\n\n\n# ä¿®å¤\n\n * ä¿®å¤ CC é²å¾¡åè½æ£æµé»è¾çéè¯¯ï¼è¯¥éè¯¯ä¼å¯¼è´å®éçé¢çéå¶è¦è¿å°äºç¨æ·æå®çéå¶ï¼å®¹æå°æ­£å¸¸è®¿é®è¯å«ä¸º CC æ»å»ï¼9cb51bbï¼ï¼171721cï¼ã\n * ç°å¨ä¼æ£æ¥ rules/ipv4 å rules/white-ipv4 è¿ä¸¤ä¸ªæä»¶ä¸­ç IPV4 å°åæå°ååæ¯å¦åæ³ï¼fc09f04ï¼ï¼2e7f624ï¼ã\n\n----------------------------------------\n\n\n# [1.0.0] - 2020-08-18\n\n\n# æ°å¢\n\n * æ¹è¿æ¥å¿æ ¼å¼ï¼bd112ecï¼ãåºæ¬æ ¼å¼ä¸ºxxxxx, ngx_waf: [æ¦æªç±»å][å¯¹åºè§å], xxxxxï¼å·ä½å¯çä¸é¢çä¾å­ã\n   \n   2020/01/20 22:56:30 [alert] 24289#0: *30 ngx_waf: [BLACK-URL][(?i)(?:/\\.env$)], client: 192.168.1.1, server: example.com, request: \"GET /v1/.env HTTP/1.1\", host: \"example.com\", referrer: \"http:/example.com/v1/.env\"\n   \n   2020/01/20 22:58:40 [alert] 24678#0: *11 ngx_waf: [BLACK-POST][(?i)(?:select.*(?:from|limit))], client: 192.168.1.1, server: example.com, request: \"POST /xmlrpc.php HTTP/1.1\", host: \"example.com\", referrer: \"https://example.com/\"\n   \n\n * æ°å¢ä¸ä¸ªåç½®åéï¼92d6d84ï¼\n   * $waf_blocked: æ¬æ¬¡è¯·æ±æ¯å¦è¢«æ¬æ¨¡åæ¦æªï¼å¦ææ¦æªäºåå¶çå¼ä¸º'true',åä¹åä¸º'false'ã\n   * $waf_rule_typeï¼å¦ææ¬æ¬¡è¯·æ±è¢«æ¬æ¨¡åæ¦æªï¼åå¶å¼ä¸ºè§¦åçè§åç±»åãä¸é¢æ¯å¯è½çåå¼ãè¥æ²¡æçæåå¶å¼ä¸º'null'ã\n     * 'BLACK-IPV4'\n     * 'BLACK-URL'\n     * 'BLACK-ARGS'\n     * 'BLACK-USER-AGENT'\n     * 'BLACK-REFERER'\n     * 'BLACK-COOKIE'\n     * 'BLACK-POST'\n   * '$waf_rule_details'ï¼å¦ææ¬æ¬¡è¯·æ±è¢«æ¬æ¨¡åæ¦æªï¼åå¶å¼ä¸ºè§¦åçå·ä½çè§åçåå®¹ãè¥æ²¡æçæåå¶å¼ä¸º'null'ã\n * æ¯æè¿æ»¤ POST è¯·æ±ï¼b46641eï¼ã\n * æ°éç½®é¡¹ngx_waf_mult_mountç¨äºå¢å æ¦æªé¢ï¼e1b500dï¼ï¼å¸åçåºç¨åºæ¯æ¯å­å¨rewriteçæåµä¸éååååä¼å¯¹ URL è¿è¡ä¸æ¬¡æ£æµã\n * æ¯æ CC é²å¾¡åè½ï¼3a93e19ï¼ã\n\n\n# æ¹å¨\n\n * å¢å é»è®¤ç POST è¿æ»¤è§åï¼68dd102ï¼\n * æ´æ°é»è®¤è§åï¼55f0a48ï¼ã\n * ä¿®æ¹è§åä¼åçº§ï¼3c388c8ï¼ï¼248958dï¼ï¼b46641eï¼ï¼(92447a3)[https://github.com/ADD-SP/ngx_waf/commit/92447a39d6a36ab027b0ead0daa0fe2b3b74ff29]ï¼ï¼ç°å¨çä¼åçº§ä¸ºï¼é ä¸çä¼åçæï¼ï¼\n   1.  IP ç½åå\n   2.  IP é»åå\n   3.  CC é²å¾¡\n   4.  URL ç½åå\n   5.  URL é»åå\n   6.  Args é»åå\n   7.  UserAgent é»åå\n   8.  Referer ç½åå\n   9.  Referer é»åå\n   10. Cookie é»åå\n   11. POST é»åå\n\n\n# ä¿®å¤\n\n * IPV4 é»ç½åååè½å¤±æï¼231f94aï¼ã\n * å½ User-agent ä¸ºç©ºæ¶ä¼è§¦å segmentation faultï¼bf33b36ï¼ã\n * å¯ç¨ CC é²å¾¡åä¼æåå­æ³æ¼ï¼be58d18ï¼ã",normalizedContent:"# æ´æ°æ¥å¿ï¼2.x.xï¼\n\næ¬æä»¶çæ ¼å¼åºäºå¦ä½ç»´æ¤æ´æ°æ¥å¿ï¼ å¹¶ä¸æ¬é¡¹ç®éµå®è¯­ä¹åçæ¬ã\n\nä½ä¸ºãä¸å¼å®¹çä¿®æ¹ãï¼\n\n * åæçéç½®æä»¶å¯è½æ æ³ä½¿ç¨ï¼æ¯å¦å é¤æèéå½åäºæä¸ªéç½®é¡¹ã\n * å¯è½éè¦æ´æ°ç¼è¯ç¯å¢ï¼æ¯å¦å®è£æ°çä¾èµã\n\n\n# [2.1.1] - 2020-12-10\n\n\n# æ°å¢\n\n\n# æ¹å¨\n\n\n# ä¿®å¤\n\n * ä¿®å¤äºæ¨¡åå¯å¨å¤±è´¥ç bugãæ­¤ bug çæ¥éä¿¡æ¯ä¸º nginx: [alert] could not open error log file: open() \"ngx_waf: /logs/error.log\" failed (2: no such file or directory)ï¼0dfc46fï¼ã\n\n----------------------------------------\n\n\n# [2.1.0] - 2020-12-09\n\n\n# æ°å¢\n\n * å¼å®¹äº mainline çæ¬ç nginxï¼f31f906 & 65277d1ï¼ã\n\n\n# æ¹å¨\n\n\n# ä¿®å¤\n\n\n# [2.0.2] - 2020-12-07\n\n\n# æ°å¢\n\n\n# æ¹å¨\n\n\n# ä¿®å¤\n\n * ä¿®å¤äºä¸ä¸ª cc é²å¾¡å¤±æç bugãæ­¤ bug ä¼å¯¼è´å½ waf_mult_mount æªå¯ç¨æ¶ï¼cc é²å¾¡ä¼å¤±æï¼048fe5cï¼ã\n\n * ä¿®å¤äºä¸ä¸ªå éè¯¯ç #include æä»¤èå¯¼è´ç¼è¯å¤±è´¥ç bugï¼3fa298cï¼ã\n\n----------------------------------------\n\n\n# [2.0.1] - 2020-12-03\n\n\n# æ°å¢\n\n\n# æ¹å¨\n\n * ä¸åæå¨ä¸è½½ uthash ä¾èµï¼æ¹ç¨ system libraryãå¯ä»¥ä½¿ç¨ yum install uthash-devel æ apt-get install uthash-dev å®è£ system libraryï¼7cfc94bï¼ã\n\n\n# ä¿®å¤\n\n * ä¿®å¤äºå ä¸ºå®çéå®ä¹å¯¼è´çå¨ centos/rhel 6 or 7 ä¸ç¼è¯å¤±è´¥çéè¯¯ï¼28e1c8a & 566ae4aï¼ã\n\n----------------------------------------\n\n\n# [2.0.0] - 2020-09-29\n\n\n# æ°å¢\n\n * æ¯æä»¥å¨ææ¨¡åå®è£å° nginx ä¸ï¼æè°¢ dvershininç prï¼https://github.com/add-sp/ngx_waf/pull/4ï¼ã\n\n\n# æ¹å¨\n\n * éç½®æä»¤åå¹¶ (ba92cfd)ãè¿äºéç½®æä»¤å°è¢«åå¹¶ï¼waf_check_ipv4ï¼waf_check_urlï¼waf_check_argsï¼waf_check_uaï¼waf_check_refererï¼waf_check_cookieï¼waf_check_postï¼waf_check_cookieï¼waf_cc_denyãåå¹¶åçæ°æä»¤ä¸ºwaf_modeï¼è¯¦æè§readmeã\n\n\n# ä¿®å¤\n\n * å é¤ä¸ä¸ªé»è®¤ç user-agent è§åï¼è§ååå®¹ä¸º(?i)(?:sogou web spider)ï¼åå æ¯ä¼æ¦æªéæ¶æçç½ç»ç¬è«ï¼827d4e5ï¼ã\n * ç°å¨å¯ä»¥æ­£ç¡®å¤çè§åæä»¶ä¸­çç©ºè¡äºï¼955cf2dï¼ã\n\n----------------------------------------\n\n\n# [1.0.1] - 2020-08-22\n\n\n# æ°å¢\n\n * å¢å äºæ°çéç½®é¡¹ï¼3214fc8ï¼\n   * waf_check_ipv4:\n     * éç½®è¯­æ³: waf_check_ipv4 [ on | off ];\n     * é»è®¤å¼ï¼on\n     * éç½®æ®µ: server\n     * ä½ç¨ï¼æ¯å¦å¯ç¨ ipv4 æ£æ¥ã\n   * waf_check_url:\n     * éç½®è¯­æ³: waf_check_url [ on | off ];\n     * é»è®¤å¼ï¼on\n     * éç½®æ®µ: server\n     * ä½ç¨ï¼æ¯å¦å¯ç¨ url æ£æ¥ã\n   * waf_check_args:\n     * éç½®è¯­æ³: waf_check_args [ on | off ];\n     * é»è®¤å¼ï¼on\n     * éç½®æ®µ: server\n     * ä½ç¨ï¼æ¯å¦å¯ç¨ args æ£æ¥ã\n   * waf_check_ua:\n     * éç½®è¯­æ³: waf_check_ua [ on | off ];\n     * é»è®¤å¼ï¼on\n     * éç½®æ®µ: server\n     * ä½ç¨ï¼æ¯å¦å¯ç¨ user-agent æ£æ¥ã\n   * waf_check_referer:\n     * éç½®è¯­æ³: waf_check_referer [ on | off ];\n     * é»è®¤å¼ï¼on\n     * éç½®æ®µ: server\n     * ä½ç¨ï¼æ¯å¦å¯ç¨ referer æ£æ¥ã\n   * waf_check_cookie:\n     * éç½®è¯­æ³: waf_check_cookie [ on | off ];\n     * é»è®¤å¼ï¼on\n     * éç½®æ®µ: server\n     * ä½ç¨ï¼æ¯å¦å¯ç¨ cookie æ£æ¥ã\n   * waf_check_post:\n     * éç½®è¯­æ³: waf_check_post [ on | off ];\n     * é»è®¤å¼ï¼off\n     * éç½®æ®µ: server\n     * ä½ç¨ï¼æ¯å¦å¯ç¨ post æ£æ¥ã\n   * waf_cc_deny:\n     * éç½®è¯­æ³: waf_cc_deny [ on | off ];\n     * é»è®¤å¼ï¼off\n     * éç½®æ®µ: server\n     * ä½ç¨ï¼æ¯å¦å¯ç¨ cc é²å¾¡ã\n\n\n# æ¹å¨\n\n * waf_mult_mountç°å¨åªåè®¸åå¨serveræ®µä¸­ï¼3214fc8ï¼ã\n   * waf_mult_mount:\n     * éç½®è¯­æ³: waf_mult_mount [ on | off ];\n     * é»è®¤å¼ï¼off\n     * éç½®æ®µ: server\n     * ä½ç¨ï¼è¿è¡å¤é¶æ®µæ£æ¥ï¼å½nginx.confå­å¨å°åéåçæåµä¸ï¼å¦rewriteéç½®ï¼å»ºè®®å¯ç¨ï¼åä¹å»ºè®®å³é­ã\n * æ´æ¹ç°æçéç½®é¡¹å³é®å­ï¼å é¤äºngx_åç¼ï¼8b3e416ï¼ã\n   * waf:\n     * éç½®è¯­æ³: waf [ on | off ];\n     * é»è®¤å¼ï¼off\n     * éç½®æ®µ: server\n     * ä½ç¨ï¼æ¯å¦å¯ç¨æ¬æ¨¡åã\n   * waf_rule_path:\n     * éç½®è¯­æ³: waf_rule_path dir;\n     * é»è®¤å¼ï¼æ \n     * éç½®æ®µ: server\n     * ä½ç¨ï¼è§åæä»¶æå¨ç®å½ï¼ä¸å¿é¡»ä»¥/ç»å°¾ã\n   * waf_mult_mount:\n     * éç½®è¯­æ³: waf_mult_mount [ on | off ];\n     * é»è®¤å¼ï¼off\n     * éç½®æ®µ: http\n     * ä½ç¨ï¼è¿è¡å¤é¶æ®µæ£æ¥ï¼å½nginx.confå­å¨å°åéåçæåµä¸ï¼å¦rewriteéç½®ï¼å»ºè®®å¯ç¨ï¼åä¹å»ºè®®å³é­ã\n * æ´æ° referer çé»è®¤è§åï¼å·ä½ä¸ç¹å°±æ¯æ·è´rules/urlçåå®¹å°rules/refererä¸­ï¼55f5e26ï¼ã\n\n\n# ä¿®å¤\n\n * ä¿®å¤ cc é²å¾¡åè½æ£æµé»è¾çéè¯¯ï¼è¯¥éè¯¯ä¼å¯¼è´å®éçé¢çéå¶è¦è¿å°äºç¨æ·æå®çéå¶ï¼å®¹æå°æ­£å¸¸è®¿é®è¯å«ä¸º cc æ»å»ï¼9cb51bbï¼ï¼171721cï¼ã\n * ç°å¨ä¼æ£æ¥ rules/ipv4 å rules/white-ipv4 è¿ä¸¤ä¸ªæä»¶ä¸­ç ipv4 å°åæå°ååæ¯å¦åæ³ï¼fc09f04ï¼ï¼2e7f624ï¼ã\n\n----------------------------------------\n\n\n# [1.0.0] - 2020-08-18\n\n\n# æ°å¢\n\n * æ¹è¿æ¥å¿æ ¼å¼ï¼bd112ecï¼ãåºæ¬æ ¼å¼ä¸ºxxxxx, ngx_waf: [æ¦æªç±»å][å¯¹åºè§å], xxxxxï¼å·ä½å¯çä¸é¢çä¾å­ã\n   \n   2020/01/20 22:56:30 [alert] 24289#0: *30 ngx_waf: [black-url][(?i)(?:/\\.env$)], client: 192.168.1.1, server: example.com, request: \"get /v1/.env http/1.1\", host: \"example.com\", referrer: \"http:/example.com/v1/.env\"\n   \n   2020/01/20 22:58:40 [alert] 24678#0: *11 ngx_waf: [black-post][(?i)(?:select.*(?:from|limit))], client: 192.168.1.1, server: example.com, request: \"post /xmlrpc.php http/1.1\", host: \"example.com\", referrer: \"https://example.com/\"\n   \n\n * æ°å¢ä¸ä¸ªåç½®åéï¼92d6d84ï¼\n   * $waf_blocked: æ¬æ¬¡è¯·æ±æ¯å¦è¢«æ¬æ¨¡åæ¦æªï¼å¦ææ¦æªäºåå¶çå¼ä¸º'true',åä¹åä¸º'false'ã\n   * $waf_rule_typeï¼å¦ææ¬æ¬¡è¯·æ±è¢«æ¬æ¨¡åæ¦æªï¼åå¶å¼ä¸ºè§¦åçè§åç±»åãä¸é¢æ¯å¯è½çåå¼ãè¥æ²¡æçæåå¶å¼ä¸º'null'ã\n     * 'black-ipv4'\n     * 'black-url'\n     * 'black-args'\n     * 'black-user-agent'\n     * 'black-referer'\n     * 'black-cookie'\n     * 'black-post'\n   * '$waf_rule_details'ï¼å¦ææ¬æ¬¡è¯·æ±è¢«æ¬æ¨¡åæ¦æªï¼åå¶å¼ä¸ºè§¦åçå·ä½çè§åçåå®¹ãè¥æ²¡æçæåå¶å¼ä¸º'null'ã\n * æ¯æè¿æ»¤ post è¯·æ±ï¼b46641eï¼ã\n * æ°éç½®é¡¹ngx_waf_mult_mountç¨äºå¢å æ¦æªé¢ï¼e1b500dï¼ï¼å¸åçåºç¨åºæ¯æ¯å­å¨rewriteçæåµä¸éååååä¼å¯¹ url è¿è¡ä¸æ¬¡æ£æµã\n * æ¯æ cc é²å¾¡åè½ï¼3a93e19ï¼ã\n\n\n# æ¹å¨\n\n * å¢å é»è®¤ç post è¿æ»¤è§åï¼68dd102ï¼\n * æ´æ°é»è®¤è§åï¼55f0a48ï¼ã\n * ä¿®æ¹è§åä¼åçº§ï¼3c388c8ï¼ï¼248958dï¼ï¼b46641eï¼ï¼(92447a3)[https://github.com/add-sp/ngx_waf/commit/92447a39d6a36ab027b0ead0daa0fe2b3b74ff29]ï¼ï¼ç°å¨çä¼åçº§ä¸ºï¼é ä¸çä¼åçæï¼ï¼\n   1.  ip ç½åå\n   2.  ip é»åå\n   3.  cc é²å¾¡\n   4.  url ç½åå\n   5.  url é»åå\n   6.  args é»åå\n   7.  useragent é»åå\n   8.  referer ç½åå\n   9.  referer é»åå\n   10. cookie é»åå\n   11. post é»åå\n\n\n# ä¿®å¤\n\n * ipv4 é»ç½åååè½å¤±æï¼231f94aï¼ã\n * å½ user-agent ä¸ºç©ºæ¶ä¼è§¦å segmentation faultï¼bf33b36ï¼ã\n * å¯ç¨ cc é²å¾¡åä¼æåå­æ³æ¼ï¼be58d18ï¼ã",charsets:{cjk:!0}},{title:"3.x.x",frontmatter:{title:"3.x.x",lang:"zh-CN"},regularPath:"/zh-cn/changes/3_x_x.html",relativePath:"zh-cn/changes/3_x_x.md",key:"v-dab714c8",path:"/zh-cn/changes/3_x_x.html",headers:[{level:2,title:"[3.1.6] - 2021-03-07",slug:"_3-1-6-2021-03-07",normalizedTitle:"[3.1.6] - 2021-03-07",charIndex:123},{level:3,title:"ä¿®å¤",slug:"ä¿®å¤",normalizedTitle:"ä¿®å¤",charIndex:148},{level:2,title:"[3.1.5] - 2021-03-03",slug:"_3-1-5-2021-03-03",normalizedTitle:"[3.1.5] - 2021-03-03",charIndex:221},{level:3,title:"ä¿®å¤",slug:"ä¿®å¤-2",normalizedTitle:"ä¿®å¤",charIndex:148},{level:2,title:"[3.1.4] - 2021-03-02",slug:"_3-1-4-2021-03-02",normalizedTitle:"[3.1.4] - 2021-03-02",charIndex:346},{level:3,title:"æ¹å¨",slug:"æ¹å¨",normalizedTitle:"æ¹å¨",charIndex:371},{level:2,title:"[3.1.3] - 2021-02-23",slug:"_3-1-3-2021-02-23",normalizedTitle:"[3.1.3] - 2021-02-23",charIndex:464},{level:3,title:"ä¿®å¤",slug:"ä¿®å¤-3",normalizedTitle:"ä¿®å¤",charIndex:148},{level:2,title:"[3.1.2] - 2021-02-17",slug:"_3-1-2-2021-02-17",normalizedTitle:"[3.1.2] - 2021-02-17",charIndex:562},{level:3,title:"ä¿®å¤",slug:"ä¿®å¤-4",normalizedTitle:"ä¿®å¤",charIndex:148},{level:2,title:"[3.1.1] - 2021-01-18",slug:"_3-1-1-2021-01-18",normalizedTitle:"[3.1.1] - 2021-01-18",charIndex:689},{level:3,title:"ä¿®å¤",slug:"ä¿®å¤-5",normalizedTitle:"ä¿®å¤",charIndex:148},{level:2,title:"[3.1.0] - 2021-01-17",slug:"_3-1-0-2021-01-17",normalizedTitle:"[3.1.0] - 2021-01-17",charIndex:789},{level:3,title:"æ³¨æ",slug:"æ³¨æ",normalizedTitle:"æ³¨æ",charIndex:814},{level:3,title:"æ°å¢",slug:"æ°å¢",normalizedTitle:"æ°å¢",charIndex:837},{level:3,title:"ä¿®å¤",slug:"ä¿®å¤-6",normalizedTitle:"ä¿®å¤",charIndex:148},{level:2,title:"[3.0.2] - 2021-01-10",slug:"_3-0-2-2021-01-10",normalizedTitle:"[3.0.2] - 2021-01-10",charIndex:996},{level:3,title:"æ³¨æ",slug:"æ³¨æ-2",normalizedTitle:"æ³¨æ",charIndex:814},{level:3,title:"ä¿®å¤",slug:"ä¿®å¤-7",normalizedTitle:"ä¿®å¤",charIndex:148},{level:2,title:"[3.0.1] - 2020-12-28",slug:"_3-0-1-2020-12-28",normalizedTitle:"[3.0.1] - 2020-12-28",charIndex:1170},{level:3,title:"ä¿®å¤",slug:"ä¿®å¤-8",normalizedTitle:"ä¿®å¤",charIndex:148},{level:2,title:"[3.0.0] - 2020-12-25",slug:"_3-0-0-2020-12-25",normalizedTitle:"[3.0.0] - 2020-12-25",charIndex:1280},{level:3,title:"æ°å¢",slug:"æ°å¢-2",normalizedTitle:"æ°å¢",charIndex:837},{level:3,title:"æ¹å¨",slug:"æ¹å¨-2",normalizedTitle:"æ¹å¨",charIndex:371},{level:3,title:"ä¿®å¤",slug:"ä¿®å¤-9",normalizedTitle:"ä¿®å¤",charIndex:148}],lastUpdated:"2022/1/10 ä¸å3:38:27",lastUpdatedTimestamp:1641829107e3,headersStr:"[3.1.6] - 2021-03-07 ä¿®å¤ [3.1.5] - 2021-03-03 ä¿®å¤ [3.1.4] - 2021-03-02 æ¹å¨ [3.1.3] - 2021-02-23 ä¿®å¤ [3.1.2] - 2021-02-17 ä¿®å¤ [3.1.1] - 2021-01-18 ä¿®å¤ [3.1.0] - 2021-01-17 æ³¨æ æ°å¢ ä¿®å¤ [3.0.2] - 2021-01-10 æ³¨æ ä¿®å¤ [3.0.1] - 2020-12-28 ä¿®å¤ [3.0.0] - 2020-12-25 æ°å¢ æ¹å¨ ä¿®å¤",content:"# æ´æ°æ¥å¿ï¼3.x.xï¼\n\næ¬æä»¶çæ ¼å¼åºäºå¦ä½ç»´æ¤æ´æ°æ¥å¿ï¼ å¹¶ä¸æ¬é¡¹ç®éµå®è¯­ä¹åçæ¬ã\n\nä½ä¸ºãä¸å¼å®¹çä¿®æ¹ãï¼\n\n * åæçéç½®æä»¶å¯è½æ æ³ä½¿ç¨ï¼æ¯å¦å é¤æèéå½åäºæä¸ªéç½®é¡¹ã\n * å¯è½éè¦æ´æ°ç¼è¯ç¯å¢ï¼æ¯å¦å®è£æ°çä¾èµã\n\n\n# [3.1.6] - 2021-03-07\n\n\n# ä¿®å¤\n\n * æ´æ­£è§åççæé¡ºåºï¼51c7824ï¼ã\n\n----------------------------------------\n\n\n# [3.1.5] - 2021-03-03\n\n\n# ä¿®å¤\n\n * ä¿®å¤äº config èæ¬çä¸ä¸ªéè¯¯ï¼è¿ä¸ªéè¯¯ä¼å¯¼è´ä¸è½æ­£ç¡®å°æ£æ¥ä¾èµé¡¹ï¼075a27eï¼ã\n\n----------------------------------------\n\n\n# [3.1.4] - 2021-03-02\n\n\n# æ¹å¨\n\n * æ¡ä»¶åè®¸çæåµä¸ä½¿ç¨æ´å®å¨çå­ç¬¦ä¸²å¤çå½æ°ä»¥é¿åç¼å²åºæº¢åºï¼177ae68ï¼ã\n\n----------------------------------------\n\n\n# [3.1.3] - 2021-02-23\n\n\n# ä¿®å¤\n\n * æ¹æ­£è§åççæé¡ºåºï¼857ec84ï¼ã\n\n----------------------------------------\n\n\n# [3.1.2] - 2021-02-17\n\n\n# ä¿®å¤\n\n * ä¿®å¤äºä¸ä¸ª bugï¼è¿ä¸ª bug ä¼å¯¼è´å½è§åæä»¶ä¸å·æå¯åæéæ¶åå§åå¤±è´¥ï¼20acd27ï¼ã\n\n----------------------------------------\n\n\n# [3.1.1] - 2021-01-18\n\n\n# ä¿®å¤\n\n * å¼å®¹è¾ä½çæ¬ç GCCï¼becbbe0ï¼ã\n\n----------------------------------------\n\n\n# [3.1.0] - 2021-01-17\n\n\n# æ³¨æ\n\n * å ä¸ºå¨ v3.0.3 æµè¯è¿ç¨ä¸­æ°å¢äºåä¸å¼å®¹çåè½ï¼æä»¥ v3.0.3 è¢«è·³è¿ã\n\n\n# æ°å¢\n\n * å¢å è°è¯æ¥å¿ä¾¿äºæéï¼bac1d02ï¼ã\n\n\n# ä¿®å¤\n\n * ä¿®å¤äºä¸ä¸ªæ®µéè¯¯ï¼57d7719ï¼ã\n\n * æ´ç²¾ç¡®çè®¿é®é¢æ¬¡ç»è®¡ï¼53d3b14ï¼ã\n\n----------------------------------------\n\n\n# [3.0.2] - 2021-01-10\n\n\n# æ³¨æ\n\n * å ä¸ºå¨ v3.0.1ä¸æç­ä¿®å¤ï¼æä»¥ v3.0.2 çä¸åæµè¯çæ¬ä½åºï¼è¯·ä¸è¦ä½¿ç¨è¿äºæµè¯çã\n\n\n# ä¿®å¤\n\n * ä¿®å¤ä¸ä¸ªäºå¨ Alpine Linux ä¸çç¼è¯éè¯¯ï¼e989aa3ï¼ã\n\n----------------------------------------\n\n\n# [3.0.1] - 2020-12-28\n\n\n# ä¿®å¤\n\n * ä¿®å¤äºä¸ä¸ªå¨æ£æ¥ Cookie æ¶çæ®µéè¯¯ï¼8dc2b56ï¼ã\n\n----------------------------------------\n\n\n# [3.0.0] - 2020-12-25\n\n\n# æ°å¢\n\n * CC é²å¾¡ç°å¨ä¹æ¯æäº IPV6ï¼00fbc1cï¼ã\n\n * IP é»ç½ååæ¯æäº IPV6ãå¯ä»¥è¯å«å½¢å¦ fe80::/10 ç IPV6 å­ç¬¦ä¸²ï¼8519b26ï¼ã\n\n\n# æ¹å¨\n\n * å é¤äºä¸äºæ ç¨çæ¥å¿ï¼bd279e7ï¼ã\n\n * åå¥½çéè¯¯æç¤ºï¼d1185b2 & f2b617dï¼ãå½è§åæä»¶ä¸­ IP å°åæ ææè IP å°ååéå çæ¶åè­¦åæèæ¥éï¼å¹¶ä¸è½æ£æµææçéå æåµï¼ã\n\n * æ´å¿«ç IP å°åæ£æ¥éåº¦ï¼2b9e774ï¼ãæ¹ç¨åç¼æ æ£æ¥ IPï¼ç°å¨å¨å¸¸æ°æ¶é´åå³å¯å®æ IP çå¹éï¼ä¹åæ¯ä¸ä¸ªä¸ä¸ªå°å¹éï¼æ¯çº¿æ§æ¶é´ã\n\n\n# ä¿®å¤\n\n * ä¿®å¤äº Cookie æ£æ¥çå¤±æç bugï¼87beed1ï¼ã\n\n * ä¿®æ¹ config æä»¶ä»¥ç¡®ä¿æ§è¡ make æ make modules æ¶ææ°çæ¨¡åä»£ç è½å¤è¢«ç¼è¯ï¼25f97f5ï¼ãå¨ä¿®å¤ä¹åï¼å¦æä»ä» inc/ ä¸çæä»¶åçååï¼ç¼è¯æ¶ä¸ä¼å°ææ°çä»£ç ç¼è¯è¿å»ï¼å ä¸ºæ²¡ææ£æ¥ inc/ ä¸çæä»¶æ¯å¦åçååã\n\n * ä¿®å¤äº IPV4 ç½æ®µè¯å«éè¯¯ç bugï¼73a22ebï¼ãè¿ä¸ª bug å¯è½ä¼å¯¼è´å½è§åä¸­åºç°ç±»ä¼¼ 192.168.0.0/10ï¼å³åç¼ä¸æ¯ 8 çåæ°çæ¶åæ æ³æ­£ç¡®çæå­ç½æ©ç ã",normalizedContent:"# æ´æ°æ¥å¿ï¼3.x.xï¼\n\næ¬æä»¶çæ ¼å¼åºäºå¦ä½ç»´æ¤æ´æ°æ¥å¿ï¼ å¹¶ä¸æ¬é¡¹ç®éµå®è¯­ä¹åçæ¬ã\n\nä½ä¸ºãä¸å¼å®¹çä¿®æ¹ãï¼\n\n * åæçéç½®æä»¶å¯è½æ æ³ä½¿ç¨ï¼æ¯å¦å é¤æèéå½åäºæä¸ªéç½®é¡¹ã\n * å¯è½éè¦æ´æ°ç¼è¯ç¯å¢ï¼æ¯å¦å®è£æ°çä¾èµã\n\n\n# [3.1.6] - 2021-03-07\n\n\n# ä¿®å¤\n\n * æ´æ­£è§åççæé¡ºåºï¼51c7824ï¼ã\n\n----------------------------------------\n\n\n# [3.1.5] - 2021-03-03\n\n\n# ä¿®å¤\n\n * ä¿®å¤äº config èæ¬çä¸ä¸ªéè¯¯ï¼è¿ä¸ªéè¯¯ä¼å¯¼è´ä¸è½æ­£ç¡®å°æ£æ¥ä¾èµé¡¹ï¼075a27eï¼ã\n\n----------------------------------------\n\n\n# [3.1.4] - 2021-03-02\n\n\n# æ¹å¨\n\n * æ¡ä»¶åè®¸çæåµä¸ä½¿ç¨æ´å®å¨çå­ç¬¦ä¸²å¤çå½æ°ä»¥é¿åç¼å²åºæº¢åºï¼177ae68ï¼ã\n\n----------------------------------------\n\n\n# [3.1.3] - 2021-02-23\n\n\n# ä¿®å¤\n\n * æ¹æ­£è§åççæé¡ºåºï¼857ec84ï¼ã\n\n----------------------------------------\n\n\n# [3.1.2] - 2021-02-17\n\n\n# ä¿®å¤\n\n * ä¿®å¤äºä¸ä¸ª bugï¼è¿ä¸ª bug ä¼å¯¼è´å½è§åæä»¶ä¸å·æå¯åæéæ¶åå§åå¤±è´¥ï¼20acd27ï¼ã\n\n----------------------------------------\n\n\n# [3.1.1] - 2021-01-18\n\n\n# ä¿®å¤\n\n * å¼å®¹è¾ä½çæ¬ç gccï¼becbbe0ï¼ã\n\n----------------------------------------\n\n\n# [3.1.0] - 2021-01-17\n\n\n# æ³¨æ\n\n * å ä¸ºå¨ v3.0.3 æµè¯è¿ç¨ä¸­æ°å¢äºåä¸å¼å®¹çåè½ï¼æä»¥ v3.0.3 è¢«è·³è¿ã\n\n\n# æ°å¢\n\n * å¢å è°è¯æ¥å¿ä¾¿äºæéï¼bac1d02ï¼ã\n\n\n# ä¿®å¤\n\n * ä¿®å¤äºä¸ä¸ªæ®µéè¯¯ï¼57d7719ï¼ã\n\n * æ´ç²¾ç¡®çè®¿é®é¢æ¬¡ç»è®¡ï¼53d3b14ï¼ã\n\n----------------------------------------\n\n\n# [3.0.2] - 2021-01-10\n\n\n# æ³¨æ\n\n * å ä¸ºå¨ v3.0.1ä¸æç­ä¿®å¤ï¼æä»¥ v3.0.2 çä¸åæµè¯çæ¬ä½åºï¼è¯·ä¸è¦ä½¿ç¨è¿äºæµè¯çã\n\n\n# ä¿®å¤\n\n * ä¿®å¤ä¸ä¸ªäºå¨ alpine linux ä¸çç¼è¯éè¯¯ï¼e989aa3ï¼ã\n\n----------------------------------------\n\n\n# [3.0.1] - 2020-12-28\n\n\n# ä¿®å¤\n\n * ä¿®å¤äºä¸ä¸ªå¨æ£æ¥ cookie æ¶çæ®µéè¯¯ï¼8dc2b56ï¼ã\n\n----------------------------------------\n\n\n# [3.0.0] - 2020-12-25\n\n\n# æ°å¢\n\n * cc é²å¾¡ç°å¨ä¹æ¯æäº ipv6ï¼00fbc1cï¼ã\n\n * ip é»ç½ååæ¯æäº ipv6ãå¯ä»¥è¯å«å½¢å¦ fe80::/10 ç ipv6 å­ç¬¦ä¸²ï¼8519b26ï¼ã\n\n\n# æ¹å¨\n\n * å é¤äºä¸äºæ ç¨çæ¥å¿ï¼bd279e7ï¼ã\n\n * åå¥½çéè¯¯æç¤ºï¼d1185b2 & f2b617dï¼ãå½è§åæä»¶ä¸­ ip å°åæ ææè ip å°ååéå çæ¶åè­¦åæèæ¥éï¼å¹¶ä¸è½æ£æµææçéå æåµï¼ã\n\n * æ´å¿«ç ip å°åæ£æ¥éåº¦ï¼2b9e774ï¼ãæ¹ç¨åç¼æ æ£æ¥ ipï¼ç°å¨å¨å¸¸æ°æ¶é´åå³å¯å®æ ip çå¹éï¼ä¹åæ¯ä¸ä¸ªä¸ä¸ªå°å¹éï¼æ¯çº¿æ§æ¶é´ã\n\n\n# ä¿®å¤\n\n * ä¿®å¤äº cookie æ£æ¥çå¤±æç bugï¼87beed1ï¼ã\n\n * ä¿®æ¹ config æä»¶ä»¥ç¡®ä¿æ§è¡ make æ make modules æ¶ææ°çæ¨¡åä»£ç è½å¤è¢«ç¼è¯ï¼25f97f5ï¼ãå¨ä¿®å¤ä¹åï¼å¦æä»ä» inc/ ä¸çæä»¶åçååï¼ç¼è¯æ¶ä¸ä¼å°ææ°çä»£ç ç¼è¯è¿å»ï¼å ä¸ºæ²¡ææ£æ¥ inc/ ä¸çæä»¶æ¯å¦åçååã\n\n * ä¿®å¤äº ipv4 ç½æ®µè¯å«éè¯¯ç bugï¼73a22ebï¼ãè¿ä¸ª bug å¯è½ä¼å¯¼è´å½è§åä¸­åºç°ç±»ä¼¼ 192.168.0.0/10ï¼å³åç¼ä¸æ¯ 8 çåæ°çæ¶åæ æ³æ­£ç¡®çæå­ç½æ©ç ã",charsets:{cjk:!0}},{title:"4.x.x",frontmatter:{title:"4.x.x",lang:"zh-CN"},regularPath:"/zh-cn/changes/4_x_x.html",relativePath:"zh-cn/changes/4_x_x.md",key:"v-04c5a2bc",path:"/zh-cn/changes/4_x_x.html",headers:[{level:2,title:"[4.0.0] - 2021-03-22 GMT+0800",slug:"_4-0-0-2021-03-22-gmt-0800",normalizedTitle:"[4.0.0] - 2021-03-22 gmt+0800",charIndex:123},{level:3,title:"è­¦å",slug:"è­¦å",normalizedTitle:"è­¦å",charIndex:157},{level:3,title:"æ°å¢",slug:"æ°å¢",normalizedTitle:"æ°å¢",charIndex:196},{level:3,title:"ç§»é¤",slug:"ç§»é¤",normalizedTitle:"ç§»é¤",charIndex:256},{level:3,title:"åå¨",slug:"åå¨",normalizedTitle:"åå¨",charIndex:316},{level:3,title:"ä¿®å¤",slug:"ä¿®å¤",normalizedTitle:"ä¿®å¤",charIndex:347}],lastUpdated:"2022/1/10 ä¸å3:38:27",lastUpdatedTimestamp:1641829107e3,headersStr:"[4.0.0] - 2021-03-22 GMT+0800 è­¦å æ°å¢ ç§»é¤ åå¨ ä¿®å¤",content:"# æ´æ°æ¥å¿ï¼4.x.xï¼\n\næ¬æä»¶çæ ¼å¼åºäºå¦ä½ç»´æ¤æ´æ°æ¥å¿ï¼ å¹¶ä¸æ¬é¡¹ç®éµå®è¯­ä¹åçæ¬ã\n\nä½ä¸ºãä¸å¼å®¹çä¿®æ¹ãï¼\n\n * åæçéç½®æä»¶å¯è½æ æ³ä½¿ç¨ï¼æ¯å¦å é¤æèéå½åäºæä¸ªéç½®é¡¹ã\n * å¯è½éè¦æ´æ°ç¼è¯ç¯å¢ï¼æ¯å¦å®è£æ°çä¾èµã\n\n\n# [4.0.0] - 2021-03-22 GMT+0800\n\n\n# è­¦å\n\næ­¤çæ¬åå«ä¸å¼å®¹çæ´æ°ï¼breaking changesï¼ã\n\n\n# æ°å¢\n\n * ä¸º waf_mode å waf_cc_deny_limit å¢å äºä¸äºåæ°ï¼368db2bï¼ã\n\n\n# ç§»é¤\n\n * åºå¼éç½®é¡¹ waf_mult_mountï¼è¯¥éç½®çåè½å·²ç»åå¹¶å°äºéç½®é¡¹ waf_mode ä¸­ã\n\n\n# åå¨\n\n * ç» waf_mode å¢å äºä¸äºåæ°ã\n\n\n# ä¿®å¤\n\n * æ´æ­£äºåç½®åé waf_rule_details çåç§°éè¯¯ï¼è¯¥åéçåç§°å¨ä¹åççæ¬ä»£ç ä¸­è¢«è®¾ç½®ä¸º waf_rule_deatailsã\n\n * ä¸åè¿è¡åä½çæ£æµã\n\n * å½»åºè§£å³äºä¸ ngx_http_rewrite_module çå¼å®¹æ§é®é¢ã",normalizedContent:"# æ´æ°æ¥å¿ï¼4.x.xï¼\n\næ¬æä»¶çæ ¼å¼åºäºå¦ä½ç»´æ¤æ´æ°æ¥å¿ï¼ å¹¶ä¸æ¬é¡¹ç®éµå®è¯­ä¹åçæ¬ã\n\nä½ä¸ºãä¸å¼å®¹çä¿®æ¹ãï¼\n\n * åæçéç½®æä»¶å¯è½æ æ³ä½¿ç¨ï¼æ¯å¦å é¤æèéå½åäºæä¸ªéç½®é¡¹ã\n * å¯è½éè¦æ´æ°ç¼è¯ç¯å¢ï¼æ¯å¦å®è£æ°çä¾èµã\n\n\n# [4.0.0] - 2021-03-22 gmt+0800\n\n\n# è­¦å\n\næ­¤çæ¬åå«ä¸å¼å®¹çæ´æ°ï¼breaking changesï¼ã\n\n\n# æ°å¢\n\n * ä¸º waf_mode å waf_cc_deny_limit å¢å äºä¸äºåæ°ï¼368db2bï¼ã\n\n\n# ç§»é¤\n\n * åºå¼éç½®é¡¹ waf_mult_mountï¼è¯¥éç½®çåè½å·²ç»åå¹¶å°äºéç½®é¡¹ waf_mode ä¸­ã\n\n\n# åå¨\n\n * ç» waf_mode å¢å äºä¸äºåæ°ã\n\n\n# ä¿®å¤\n\n * æ´æ­£äºåç½®åé waf_rule_details çåç§°éè¯¯ï¼è¯¥åéçåç§°å¨ä¹åççæ¬ä»£ç ä¸­è¢«è®¾ç½®ä¸º waf_rule_deatailsã\n\n * ä¸åè¿è¡åä½çæ£æµã\n\n * å½»åºè§£å³äºä¸ ngx_http_rewrite_module çå¼å®¹æ§é®é¢ã",charsets:{cjk:!0}},{title:"5.x.x",frontmatter:{title:"5.x.x",lang:"zh-CN"},regularPath:"/zh-cn/changes/5_x_x.html",relativePath:"zh-cn/changes/5_x_x.md",key:"v-76e6cfdc",path:"/zh-cn/changes/5_x_x.html",headers:[{level:2,title:"[5.5.1] - 2021-07-16 UTC+0800",slug:"_5-5-1-2021-07-16-utc-0800",normalizedTitle:"[5.5.1] - 2021-07-16 utc+0800",charIndex:123},{level:3,title:"ä¿®å¤",slug:"ä¿®å¤",normalizedTitle:"ä¿®å¤",charIndex:157},{level:2,title:"[5.5.0] - 2021-06-25 UTC+0800",slug:"_5-5-0-2021-06-25-utc-0800",normalizedTitle:"[5.5.0] - 2021-06-25 utc+0800",charIndex:225},{level:3,title:"åå¨",slug:"åå¨",normalizedTitle:"åå¨",charIndex:259},{level:2,title:"[5.4.2] - 2021-06-15 UTC+0800",slug:"_5-4-2-2021-06-15-utc-0800",normalizedTitle:"[5.4.2] - 2021-06-15 utc+0800",charIndex:377},{level:3,title:"ä¿®å¤",slug:"ä¿®å¤-2",normalizedTitle:"ä¿®å¤",charIndex:157},{level:2,title:"[5.4.1] - 2021-06-09 UTC+0800",slug:"_5-4-1-2021-06-09-utc-0800",normalizedTitle:"[5.4.1] - 2021-06-09 utc+0800",charIndex:528},{level:3,title:"ä¿®å¤",slug:"ä¿®å¤-3",normalizedTitle:"ä¿®å¤",charIndex:157},{level:2,title:"[5.4.0] - 2021-06-03 UTC+0800",slug:"_5-4-0-2021-06-03-utc-0800",normalizedTitle:"[5.4.0] - 2021-06-03 utc+0800",charIndex:648},{level:3,title:"æ³¨æ",slug:"æ³¨æ",normalizedTitle:"æ³¨æ",charIndex:682},{level:3,title:"æ°å¢",slug:"æ°å¢",normalizedTitle:"æ°å¢",charIndex:778},{level:3,title:"åå¨",slug:"åå¨-2",normalizedTitle:"åå¨",charIndex:259},{level:3,title:"ä¿®å¤",slug:"ä¿®å¤-4",normalizedTitle:"ä¿®å¤",charIndex:157},{level:2,title:"[5.3.2] - 2021-05-28 UTC+0800",slug:"_5-3-2-2021-05-28-utc-0800",normalizedTitle:"[5.3.2] - 2021-05-28 utc+0800",charIndex:916},{level:3,title:"ä¿®å¤",slug:"ä¿®å¤-5",normalizedTitle:"ä¿®å¤",charIndex:157},{level:2,title:"[5.3.1] - 2021-05-26 GMT+0800",slug:"_5-3-1-2021-05-26-gmt-0800",normalizedTitle:"[5.3.1] - 2021-05-26 gmt+0800",charIndex:1009},{level:3,title:"ä¿®å¤",slug:"ä¿®å¤-6",normalizedTitle:"ä¿®å¤",charIndex:157},{level:2,title:"[5.3.0] - 2021-05-16 GMT+0800",slug:"_5-3-0-2021-05-16-gmt-0800",normalizedTitle:"[5.3.0] - 2021-05-16 gmt+0800",charIndex:1116},{level:3,title:"æ°å¢",slug:"æ°å¢-2",normalizedTitle:"æ°å¢",charIndex:778},{level:3,title:"åå¨",slug:"åå¨-3",normalizedTitle:"åå¨",charIndex:259},{level:3,title:"ä¿®å¤",slug:"ä¿®å¤-7",normalizedTitle:"ä¿®å¤",charIndex:157},{level:2,title:"[5.1.2] - 2021-04-30 GMT+0800",slug:"_5-1-2-2021-04-30-gmt-0800",normalizedTitle:"[5.1.2] - 2021-04-30 gmt+0800",charIndex:1397},{level:3,title:"æ°å¢",slug:"æ°å¢-3",normalizedTitle:"æ°å¢",charIndex:778},{level:2,title:"[5.1.1] - 2021-04-23 GMT+0800",slug:"_5-1-1-2021-04-23-gmt-0800",normalizedTitle:"[5.1.1] - 2021-04-23 gmt+0800",charIndex:1559},{level:3,title:"ä¿®å¤",slug:"ä¿®å¤-8",normalizedTitle:"ä¿®å¤",charIndex:157},{level:2,title:"[5.1.0] - 2021-04-20 GMT+0800",slug:"_5-1-0-2021-04-20-gmt-0800",normalizedTitle:"[5.1.0] - 2021-04-20 gmt+0800",charIndex:1669},{level:3,title:"æ°å¢",slug:"æ°å¢-4",normalizedTitle:"æ°å¢",charIndex:778},{level:2,title:"[5.0.0] - 2021-04-07 GMT+0800",slug:"_5-0-0-2021-04-07-gmt-0800",normalizedTitle:"[5.0.0] - 2021-04-07 gmt+0800",charIndex:1858},{level:3,title:"è­¦å",slug:"è­¦å",normalizedTitle:"è­¦å",charIndex:1892},{level:3,title:"æ°å¢",slug:"æ°å¢-5",normalizedTitle:"æ°å¢",charIndex:778},{level:3,title:"ç§»é¤",slug:"ç§»é¤",normalizedTitle:"ç§»é¤",charIndex:2144},{level:3,title:"åå¨",slug:"åå¨-4",normalizedTitle:"åå¨",charIndex:259},{level:3,title:"ä¿®å¤",slug:"ä¿®å¤-9",normalizedTitle:"ä¿®å¤",charIndex:157}],lastUpdated:"2022/1/10 ä¸å3:38:27",lastUpdatedTimestamp:1641829107e3,headersStr:"[5.5.1] - 2021-07-16 UTC+0800 ä¿®å¤ [5.5.0] - 2021-06-25 UTC+0800 åå¨ [5.4.2] - 2021-06-15 UTC+0800 ä¿®å¤ [5.4.1] - 2021-06-09 UTC+0800 ä¿®å¤ [5.4.0] - 2021-06-03 UTC+0800 æ³¨æ æ°å¢ åå¨ ä¿®å¤ [5.3.2] - 2021-05-28 UTC+0800 ä¿®å¤ [5.3.1] - 2021-05-26 GMT+0800 ä¿®å¤ [5.3.0] - 2021-05-16 GMT+0800 æ°å¢ åå¨ ä¿®å¤ [5.1.2] - 2021-04-30 GMT+0800 æ°å¢ [5.1.1] - 2021-04-23 GMT+0800 ä¿®å¤ [5.1.0] - 2021-04-20 GMT+0800 æ°å¢ [5.0.0] - 2021-04-07 GMT+0800 è­¦å æ°å¢ ç§»é¤ åå¨ ä¿®å¤",content:"# æ´æ°æ¥å¿ï¼5.x.xï¼\n\næ¬æä»¶çæ ¼å¼åºäºå¦ä½ç»´æ¤æ´æ°æ¥å¿ï¼ å¹¶ä¸æ¬é¡¹ç®éµå®è¯­ä¹åçæ¬ã\n\nä½ä¸ºãä¸å¼å®¹çä¿®æ¹ãï¼\n\n * åæçéç½®æä»¶å¯è½æ æ³ä½¿ç¨ï¼æ¯å¦å é¤æèéå½åäºæä¸ªéç½®é¡¹ã\n * å¯è½éè¦æ´æ°ç¼è¯ç¯å¢ï¼æ¯å¦å®è£æ°çä¾èµã\n\n\n# [5.5.1] - 2021-07-16 UTC+0800\n\n\n# ä¿®å¤\n\n * æ®µéè¯¯ã\n\n * åå­æ³æ¼ã\n\n----------------------------------------\n\n\n# [5.5.0] - 2021-06-25 UTC+0800\n\n\n# åå¨\n\n * å¨å·¥ä½æ¨¡å¼ STD å DYNAMIC ä¸­ç¦ç¨äºåºäº libinjection ç XSS æ»å»æ£æµï¼å ä¸ºæç¨æ·åæ è¯¯æ¥æ¯è¾é«ã\n\n----------------------------------------\n\n\n# [5.4.2] - 2021-06-15 UTC+0800\n\n\n# ä¿®å¤\n\n * å¦æå¯ç¨äº POST æ£æµï¼åè®¿é®æ¥å¿ï¼access_logï¼ä¸­ä¸ä¼è®°å½ POST è¯·æ±ï¼å³ä¸¢å¤±ææç POST è¯·æ±çæ¥å¿ã\n\n----------------------------------------\n\n\n# [5.4.1] - 2021-06-09 UTC+0800\n\n\n# ä¿®å¤\n\n * å½ä½¿ç¨äº error_page éç½®æ¶ï¼åç½®åéçå¼å¯è½ä¼åºéã\n\n----------------------------------------\n\n\n# [5.4.0] - 2021-06-03 UTC+0800\n\n\n# æ³¨æ\n\næ¬æ¬¡æ´æ°æ´æ¢äº libinjection ç clone é¾æ¥ï¼æ°çé¾æ¥ä¸º https://github.com/libinjection/libinjection.gitã\n\n\n# æ°å¢\n\n * XSS æ»å»é²å¾¡ï¼Powered By libinjectionï¼ã\n\n\n# åå¨\n\n * å¢å åç½®åéè®¡ç®ç¸å³çè°è¯æ¥å¿ã\n\n\n# ä¿®å¤\n\n * POST æ£æµå¤±æã\n\n----------------------------------------\n\n\n# [5.3.2] - 2021-05-28 UTC+0800\n\n\n# ä¿®å¤\n\n * åå­æåã\n\n----------------------------------------\n\n\n# [5.3.1] - 2021-05-26 GMT+0800\n\n\n# ä¿®å¤\n\n * ææ¶å³ä½¿æ­£ç¡®å®è£äºä¾èµä¹ä¸è½ç¼è¯æ¨¡åã\n\n----------------------------------------\n\n\n# [5.3.0] - 2021-05-16 GMT+0800\n\n\n# æ°å¢\n\n * æ°çéç½®ï¼waf_under_attackï¼å½ç½ç«åå°æ»å»æ¶å¯ä»¥ä½¿ç¨ã\n\n * æ°çéç½®ï¼waf_http_statusï¼ç¨äºè®¾ç½®è¯·æ±è¢«æ¦æªåè¿åç HTTP ç¶æç ã\n\n * æ°çåç½®åéï¼$waf_blocking_logï¼å½è¯·æ±è¢«æ¦æªå¶å¼æ¶ä¸ä¸ºç©ºå­ç¬¦ä¸²ã\n\n\n# åå¨\n\n * æ´æ°äºé»è®¤è§åã\n\n\n# ä¿®å¤\n\n * CC é²æ¤ææ¶ä¼å¤±æã\n\n * Cookie é²æ¤ææ¶ä¼å¤±æã\n\n----------------------------------------\n\n\n# [5.1.2] - 2021-04-30 GMT+0800\n\n\n# æ°å¢\n\n * æ¯ææ£æµ SQL æ³¨å¥ï¼Powered By libinjectionï¼ãä½ å¯ä»¥éè¿å¯ç¨ LIB-INJECTION æ¨¡å¼å¼å¯è¯¥åè½ï¼è¯¦è§ä½¿ç¨ææ¡£ã\n\n----------------------------------------\n\n\n# [5.1.1] - 2021-04-23 GMT+0800\n\n\n# ä¿®å¤\n\n * URL å Referer ç½ååè§åå¤±æã\n\n----------------------------------------\n\n\n# [5.1.0] - 2021-04-20 GMT+0800\n\n\n# æ°å¢\n\n * æ°çåç½®åé waf_logï¼å½æ¬æ¨¡åè¿è¡äºæ£æ¥æ¶ä¸ä¸ºç©ºå­ç¬¦ä¸²ï¼åä¹åä¸ºç©ºå­ç¬¦ä¸²ï¼ä¸»è¦ç¨äº access_log æä»¤ã\n\n * æ°çåç½®åé waf_spendï¼è®°å½æ¬æ¨¡åæ§è¡æ£æ¥è±è´¹çæ¶é´ï¼æ¯«ç§ï¼ã\n\n----------------------------------------\n\n\n# [5.0.0] - 2021-04-07 GMT+0800\n\n\n# è­¦å\n\næ­¤çæ¬åå«ä¸å¼å®¹çæ´æ°ï¼breaking changesï¼ã\n\n\n# æ°å¢\n\n * æ°å¢äºæ¨¡å¼ CACHEï¼å¯ç¨æ­¤æ¨¡å¼åä¼ç¼å­æ¯æ¬¡æ£æ¥çç»æï¼æé«æ§è½ã\n\n * æ°å¢äºéç½® waf_cache ç¨äºè®¾ç½®ç¼å­ç¸å³çåæ°ã\n\n * æ°å¢äºéç½® waf_cc_denyï¼ç¨äºè®¾ç½® CC é²æ¤ç¸å³çåæ°ã\n\n * æ°å¢äºéç½® waf_priorityï¼ç¨æ¥è®¾ç½®é¤äº POST æ£æ¥ä»¥å¤ææçæ£æ¥é¡¹ç®çä¼åçº§ã\n\n * å½ CC é²æ¤è¿å 503 ç¶æç æ¶ä¼éä¸ Retry-After ååºå¤´ã\n\n\n# ç§»é¤\n\n * åºå¼äºéç½® waf_cc_deny_limitï¼ä½¿ç¨æ°çéç½® waf_cc_deny æ¿ä»£ã\n\n\n# åå¨\n\n * äºæ¢äº CC é²æ¤å IP ç½ååæ£æ¥çé»è®¤ä¼åçº§ã\n\n\n# ä¿®å¤\n\n * ä¿®å¤äºå½ worker è¿ç¨æ°éå¤§äºä¸æ¶çæ®µéè¯¯ã\n\n * ä¿®å¤äº CC é²æ¤ç»è®¡ææ¶ä¸åçéè¯¯ã",normalizedContent:"# æ´æ°æ¥å¿ï¼5.x.xï¼\n\næ¬æä»¶çæ ¼å¼åºäºå¦ä½ç»´æ¤æ´æ°æ¥å¿ï¼ å¹¶ä¸æ¬é¡¹ç®éµå®è¯­ä¹åçæ¬ã\n\nä½ä¸ºãä¸å¼å®¹çä¿®æ¹ãï¼\n\n * åæçéç½®æä»¶å¯è½æ æ³ä½¿ç¨ï¼æ¯å¦å é¤æèéå½åäºæä¸ªéç½®é¡¹ã\n * å¯è½éè¦æ´æ°ç¼è¯ç¯å¢ï¼æ¯å¦å®è£æ°çä¾èµã\n\n\n# [5.5.1] - 2021-07-16 utc+0800\n\n\n# ä¿®å¤\n\n * æ®µéè¯¯ã\n\n * åå­æ³æ¼ã\n\n----------------------------------------\n\n\n# [5.5.0] - 2021-06-25 utc+0800\n\n\n# åå¨\n\n * å¨å·¥ä½æ¨¡å¼ std å dynamic ä¸­ç¦ç¨äºåºäº libinjection ç xss æ»å»æ£æµï¼å ä¸ºæç¨æ·åæ è¯¯æ¥æ¯è¾é«ã\n\n----------------------------------------\n\n\n# [5.4.2] - 2021-06-15 utc+0800\n\n\n# ä¿®å¤\n\n * å¦æå¯ç¨äº post æ£æµï¼åè®¿é®æ¥å¿ï¼access_logï¼ä¸­ä¸ä¼è®°å½ post è¯·æ±ï¼å³ä¸¢å¤±ææç post è¯·æ±çæ¥å¿ã\n\n----------------------------------------\n\n\n# [5.4.1] - 2021-06-09 utc+0800\n\n\n# ä¿®å¤\n\n * å½ä½¿ç¨äº error_page éç½®æ¶ï¼åç½®åéçå¼å¯è½ä¼åºéã\n\n----------------------------------------\n\n\n# [5.4.0] - 2021-06-03 utc+0800\n\n\n# æ³¨æ\n\næ¬æ¬¡æ´æ°æ´æ¢äº libinjection ç clone é¾æ¥ï¼æ°çé¾æ¥ä¸º https://github.com/libinjection/libinjection.gitã\n\n\n# æ°å¢\n\n * xss æ»å»é²å¾¡ï¼powered by libinjectionï¼ã\n\n\n# åå¨\n\n * å¢å åç½®åéè®¡ç®ç¸å³çè°è¯æ¥å¿ã\n\n\n# ä¿®å¤\n\n * post æ£æµå¤±æã\n\n----------------------------------------\n\n\n# [5.3.2] - 2021-05-28 utc+0800\n\n\n# ä¿®å¤\n\n * åå­æåã\n\n----------------------------------------\n\n\n# [5.3.1] - 2021-05-26 gmt+0800\n\n\n# ä¿®å¤\n\n * ææ¶å³ä½¿æ­£ç¡®å®è£äºä¾èµä¹ä¸è½ç¼è¯æ¨¡åã\n\n----------------------------------------\n\n\n# [5.3.0] - 2021-05-16 gmt+0800\n\n\n# æ°å¢\n\n * æ°çéç½®ï¼waf_under_attackï¼å½ç½ç«åå°æ»å»æ¶å¯ä»¥ä½¿ç¨ã\n\n * æ°çéç½®ï¼waf_http_statusï¼ç¨äºè®¾ç½®è¯·æ±è¢«æ¦æªåè¿åç http ç¶æç ã\n\n * æ°çåç½®åéï¼$waf_blocking_logï¼å½è¯·æ±è¢«æ¦æªå¶å¼æ¶ä¸ä¸ºç©ºå­ç¬¦ä¸²ã\n\n\n# åå¨\n\n * æ´æ°äºé»è®¤è§åã\n\n\n# ä¿®å¤\n\n * cc é²æ¤ææ¶ä¼å¤±æã\n\n * cookie é²æ¤ææ¶ä¼å¤±æã\n\n----------------------------------------\n\n\n# [5.1.2] - 2021-04-30 gmt+0800\n\n\n# æ°å¢\n\n * æ¯ææ£æµ sql æ³¨å¥ï¼powered by libinjectionï¼ãä½ å¯ä»¥éè¿å¯ç¨ lib-injection æ¨¡å¼å¼å¯è¯¥åè½ï¼è¯¦è§ä½¿ç¨ææ¡£ã\n\n----------------------------------------\n\n\n# [5.1.1] - 2021-04-23 gmt+0800\n\n\n# ä¿®å¤\n\n * url å referer ç½ååè§åå¤±æã\n\n----------------------------------------\n\n\n# [5.1.0] - 2021-04-20 gmt+0800\n\n\n# æ°å¢\n\n * æ°çåç½®åé waf_logï¼å½æ¬æ¨¡åè¿è¡äºæ£æ¥æ¶ä¸ä¸ºç©ºå­ç¬¦ä¸²ï¼åä¹åä¸ºç©ºå­ç¬¦ä¸²ï¼ä¸»è¦ç¨äº access_log æä»¤ã\n\n * æ°çåç½®åé waf_spendï¼è®°å½æ¬æ¨¡åæ§è¡æ£æ¥è±è´¹çæ¶é´ï¼æ¯«ç§ï¼ã\n\n----------------------------------------\n\n\n# [5.0.0] - 2021-04-07 gmt+0800\n\n\n# è­¦å\n\næ­¤çæ¬åå«ä¸å¼å®¹çæ´æ°ï¼breaking changesï¼ã\n\n\n# æ°å¢\n\n * æ°å¢äºæ¨¡å¼ cacheï¼å¯ç¨æ­¤æ¨¡å¼åä¼ç¼å­æ¯æ¬¡æ£æ¥çç»æï¼æé«æ§è½ã\n\n * æ°å¢äºéç½® waf_cache ç¨äºè®¾ç½®ç¼å­ç¸å³çåæ°ã\n\n * æ°å¢äºéç½® waf_cc_denyï¼ç¨äºè®¾ç½® cc é²æ¤ç¸å³çåæ°ã\n\n * æ°å¢äºéç½® waf_priorityï¼ç¨æ¥è®¾ç½®é¤äº post æ£æ¥ä»¥å¤ææçæ£æ¥é¡¹ç®çä¼åçº§ã\n\n * å½ cc é²æ¤è¿å 503 ç¶æç æ¶ä¼éä¸ retry-after ååºå¤´ã\n\n\n# ç§»é¤\n\n * åºå¼äºéç½® waf_cc_deny_limitï¼ä½¿ç¨æ°çéç½® waf_cc_deny æ¿ä»£ã\n\n\n# åå¨\n\n * äºæ¢äº cc é²æ¤å ip ç½ååæ£æ¥çé»è®¤ä¼åçº§ã\n\n\n# ä¿®å¤\n\n * ä¿®å¤äºå½ worker è¿ç¨æ°éå¤§äºä¸æ¶çæ®µéè¯¯ã\n\n * ä¿®å¤äº cc é²æ¤ç»è®¡ææ¶ä¸åçéè¯¯ã",charsets:{cjk:!0}},{title:"6.0.x",frontmatter:{title:"6.0.x",lang:"zh-CN"},regularPath:"/zh-cn/changes/6_0_x.html",relativePath:"zh-cn/changes/6_0_x.md",key:"v-5f89e808",path:"/zh-cn/changes/6_0_x.html",headers:[{level:2,title:"[6.0.3] - 2021-08-02 UTC+0800",slug:"_6-0-3-2021-08-02-utc-0800",normalizedTitle:"[6.0.3] - 2021-08-02 utc+0800",charIndex:123},{level:3,title:"ä¿®å¤",slug:"ä¿®å¤",normalizedTitle:"ä¿®å¤",charIndex:157},{level:2,title:"[6.0.2] - 2021-08-01 UTC+0800",slug:"_6-0-2-2021-08-01-utc-0800",normalizedTitle:"[6.0.2] - 2021-08-01 utc+0800",charIndex:228},{level:3,title:"ä¿®å¤",slug:"ä¿®å¤-2",normalizedTitle:"ä¿®å¤",charIndex:157},{level:2,title:"[6.0.1] - 2021-07-30 UTC+0800",slug:"_6-0-1-2021-07-30-utc-0800",normalizedTitle:"[6.0.1] - 2021-07-30 utc+0800",charIndex:348},{level:3,title:"å¼ç¨",slug:"å¼ç¨",normalizedTitle:"å¼ç¨",charIndex:382},{level:3,title:"åå¨",slug:"åå¨",normalizedTitle:"åå¨",charIndex:472},{level:3,title:"ä¿®å¤",slug:"ä¿®å¤-3",normalizedTitle:"ä¿®å¤",charIndex:157},{level:2,title:"[6.0.0] - 2021-07-21 UTC+0800",slug:"_6-0-0-2021-07-21-utc-0800",normalizedTitle:"[6.0.0] - 2021-07-21 utc+0800",charIndex:582},{level:3,title:"æ³¨æ",slug:"æ³¨æ",normalizedTitle:"æ³¨æ",charIndex:616},{level:3,title:"é¢æå»ºæ¨¡å",slug:"é¢æå»ºæ¨¡å",normalizedTitle:"é¢æå»ºæ¨¡å",charIndex:688},{level:3,title:"ä» 5.x.x åçº§å° 6.x.x",slug:"ä»-5-x-x-åçº§å°-6-x-x",normalizedTitle:"ä» 5.x.x åçº§å° 6.x.x",charIndex:1211},{level:3,title:"æ°å¢",slug:"æ°å¢",normalizedTitle:"æ°å¢",charIndex:1319},{level:3,title:"ç§»é¤",slug:"ç§»é¤",normalizedTitle:"ç§»é¤",charIndex:1345},{level:3,title:"åå¨",slug:"åå¨-2",normalizedTitle:"åå¨",charIndex:472}],lastUpdated:"2022/1/10 ä¸å3:38:27",lastUpdatedTimestamp:1641829107e3,headersStr:"[6.0.3] - 2021-08-02 UTC+0800 ä¿®å¤ [6.0.2] - 2021-08-01 UTC+0800 ä¿®å¤ [6.0.1] - 2021-07-30 UTC+0800 å¼ç¨ åå¨ ä¿®å¤ [6.0.0] - 2021-07-21 UTC+0800 æ³¨æ é¢æå»ºæ¨¡å ä» 5.x.x åçº§å° 6.x.x æ°å¢ ç§»é¤ åå¨",content:"# æ´æ°æ¥å¿ï¼6.0.xï¼\n\næ¬æä»¶çæ ¼å¼åºäºå¦ä½ç»´æ¤æ´æ°æ¥å¿ï¼ å¹¶ä¸æ¬é¡¹ç®éµå®è¯­ä¹åçæ¬ã\n\nä½ä¸ºãä¸å¼å®¹çä¿®æ¹ãï¼\n\n * åæçéç½®æä»¶å¯è½æ æ³ä½¿ç¨ï¼æ¯å¦å é¤æèéå½åäºæä¸ªéç½®é¡¹ã\n * å¯è½éè¦æ´æ°ç¼è¯ç¯å¢ï¼æ¯å¦å®è£æ°çä¾èµã\n\n\n# [6.0.3] - 2021-08-02 UTC+0800\n\n\n# ä¿®å¤\n\n * éæ¾èææºèµæºæ¶å¯è½ä¼å¼èµ·æ®µéè¯¯ã\n\n----------------------------------------\n\n\n# [6.0.2] - 2021-08-01 UTC+0800\n\n\n# ä¿®å¤\n\n * æªè½æ­£ç¡®ç»§æ¿ä¸å±éç½®ä¸­ç URL å Referer çç½ååã\n\n----------------------------------------\n\n\n# [6.0.1] - 2021-07-30 UTC+0800\n\n\n# å¼ç¨\n\n * å¼ç¨äº waf_cache éç½®ç interval å percent åæ°ï¼ä½å¹¶æªå°å®ä»¬å é¤ï¼åªæ¯å®ä»¬ä¸åæä»»ä½ä½ç¨ãè¿ä¸¤ä¸ªåæ°ä¼å¨åç»­çæä¸ªçæ¬å é¤ã\n\n\n# åå¨\n\n * æåäº CC é²æ¤çæ§è½ã\n\n\n# ä¿®å¤\n\n * æç«¯æåµä¸å¯è½ä¼é æå¤§éçåå­æµªè´¹ï¼æè°¢ @RekGRpthã\n\n----------------------------------------\n\n\n# [6.0.0] - 2021-07-21 UTC+0800\n\n\n# æ³¨æ\n\n * æ¬æ¬¡æ´æ°æä¸äºä¸åä¸å¼å®¹çæ¹å¨ã\n\n * é«çº§è§åçæ§è¡éåº¦è¾æ¢ï¼å ä¸ºå¶åçæ¯å°è§åç¼è¯æä¸ç³»åæä»¤ï¼ç¶åç±èææºæ§è¡ã\n\n\n# é¢æå»ºæ¨¡å\n\nç°å¨æä»¬æä¾äºæåç¼è¯å¥½çæ¨¡åï¼åªè¦æ»¡è¶³äºä¸åè¦æ±å³å¯ä½¿ç¨ã\n\n 1. nginx ççæ¬å¿é¡»æ¯ææ°ç stable æ mainline çæ¬ã\n 2. æ¨ä½¿ç¨ç C è¯­è¨çæ ååºå®ç°å¿é¡»æ¯ GNU å®ç°æè musl å®ç°ã\n\n> ä¸è½½èæ¬ä¼èªå¨æ£æ¥æ¯å¦æ»¡è¶³ç¬¬äºä¸ªæ¡ä»¶ã\n\næ¨å¯ä»¥æ§è¡ assets/download.sh æ¥ä¸è½½å¯¹åºçæ¬çæ¨¡åå¹¶ä¿å­å°å½åç®å½ãä¸é¢æ¯ç¨ä¾ã\n\n# nginx-stable ngx_waf-stable\nsh assets/download stable stable\n\n# nginx-mainline ngx_waf-stable\nsh assets/download mainline stable\n\n# nginx-stable ngx_waf-beta\nsh assets/download stable beta\n\n# nginx-mainline ngx_waf-beta\nsh assets/download mainline beta\n\n\n> æ¯æ¬¡æ´æ°é½éè¦è±è´¹çº¦ä¸ä¸ªåå°æ¶çæ¶é´æ¥ç¼è¯æ¨¡åï¼æä»¥æ¨èå¨æ´æ°è¶è¿ä¸¤ä¸ªå°æ¶ååä¸è½½æ´æ°åçæ¨¡åï¼å¦åå¯è½ä¼ä¸è½½å°æ§çæ¨¡åã\n\n\n# ä» 5.x.x åçº§å° 6.x.x\n\n 1. å¨è§åç®å½ä¸æ°å»ºä¸ä¸ªåä¸º advanced çç©ºæä»¶ã\n 2. å¦æä½¿ç¨äºéç½®é¡¹ waf_priorityï¼å¯ä»¥å°å¶å é¤æèæç§ææ¡£ä¸­å¯¹è¯¥éç½®é¡¹çè¯´æè¿è¡ä¿®æ¹ã\n\n\n# æ°å¢\n\n * æ¯æäºé«çº§è§åï¼è¯¦æè§ææ¡£ã\n\n\n# ç§»é¤\n\n * ç§»é¤ COMPAT æ¨¡å¼ï¼ä¸åå®å¨å¼å®¹ ngx_http_rewrite_moduleã\n\n\n# åå¨\n\n * æ´æ°äºéç½®é¡¹ waf_priorityï¼è¯¦æè§ææ¡£ã\n\n * ç°å¨ä½ å¯ä»¥å¨ httpãserver å location åä¸­ä½¿ç¨æ¬æ¨¡åçææéç½®é¡¹ã",normalizedContent:"# æ´æ°æ¥å¿ï¼6.0.xï¼\n\næ¬æä»¶çæ ¼å¼åºäºå¦ä½ç»´æ¤æ´æ°æ¥å¿ï¼ å¹¶ä¸æ¬é¡¹ç®éµå®è¯­ä¹åçæ¬ã\n\nä½ä¸ºãä¸å¼å®¹çä¿®æ¹ãï¼\n\n * åæçéç½®æä»¶å¯è½æ æ³ä½¿ç¨ï¼æ¯å¦å é¤æèéå½åäºæä¸ªéç½®é¡¹ã\n * å¯è½éè¦æ´æ°ç¼è¯ç¯å¢ï¼æ¯å¦å®è£æ°çä¾èµã\n\n\n# [6.0.3] - 2021-08-02 utc+0800\n\n\n# ä¿®å¤\n\n * éæ¾èææºèµæºæ¶å¯è½ä¼å¼èµ·æ®µéè¯¯ã\n\n----------------------------------------\n\n\n# [6.0.2] - 2021-08-01 utc+0800\n\n\n# ä¿®å¤\n\n * æªè½æ­£ç¡®ç»§æ¿ä¸å±éç½®ä¸­ç url å referer çç½ååã\n\n----------------------------------------\n\n\n# [6.0.1] - 2021-07-30 utc+0800\n\n\n# å¼ç¨\n\n * å¼ç¨äº waf_cache éç½®ç interval å percent åæ°ï¼ä½å¹¶æªå°å®ä»¬å é¤ï¼åªæ¯å®ä»¬ä¸åæä»»ä½ä½ç¨ãè¿ä¸¤ä¸ªåæ°ä¼å¨åç»­çæä¸ªçæ¬å é¤ã\n\n\n# åå¨\n\n * æåäº cc é²æ¤çæ§è½ã\n\n\n# ä¿®å¤\n\n * æç«¯æåµä¸å¯è½ä¼é æå¤§éçåå­æµªè´¹ï¼æè°¢ @rekgrpthã\n\n----------------------------------------\n\n\n# [6.0.0] - 2021-07-21 utc+0800\n\n\n# æ³¨æ\n\n * æ¬æ¬¡æ´æ°æä¸äºä¸åä¸å¼å®¹çæ¹å¨ã\n\n * é«çº§è§åçæ§è¡éåº¦è¾æ¢ï¼å ä¸ºå¶åçæ¯å°è§åç¼è¯æä¸ç³»åæä»¤ï¼ç¶åç±èææºæ§è¡ã\n\n\n# é¢æå»ºæ¨¡å\n\nç°å¨æä»¬æä¾äºæåç¼è¯å¥½çæ¨¡åï¼åªè¦æ»¡è¶³äºä¸åè¦æ±å³å¯ä½¿ç¨ã\n\n 1. nginx ççæ¬å¿é¡»æ¯ææ°ç stable æ mainline çæ¬ã\n 2. æ¨ä½¿ç¨ç c è¯­è¨çæ ååºå®ç°å¿é¡»æ¯ gnu å®ç°æè musl å®ç°ã\n\n> ä¸è½½èæ¬ä¼èªå¨æ£æ¥æ¯å¦æ»¡è¶³ç¬¬äºä¸ªæ¡ä»¶ã\n\næ¨å¯ä»¥æ§è¡ assets/download.sh æ¥ä¸è½½å¯¹åºçæ¬çæ¨¡åå¹¶ä¿å­å°å½åç®å½ãä¸é¢æ¯ç¨ä¾ã\n\n# nginx-stable ngx_waf-stable\nsh assets/download stable stable\n\n# nginx-mainline ngx_waf-stable\nsh assets/download mainline stable\n\n# nginx-stable ngx_waf-beta\nsh assets/download stable beta\n\n# nginx-mainline ngx_waf-beta\nsh assets/download mainline beta\n\n\n> æ¯æ¬¡æ´æ°é½éè¦è±è´¹çº¦ä¸ä¸ªåå°æ¶çæ¶é´æ¥ç¼è¯æ¨¡åï¼æä»¥æ¨èå¨æ´æ°è¶è¿ä¸¤ä¸ªå°æ¶ååä¸è½½æ´æ°åçæ¨¡åï¼å¦åå¯è½ä¼ä¸è½½å°æ§çæ¨¡åã\n\n\n# ä» 5.x.x åçº§å° 6.x.x\n\n 1. å¨è§åç®å½ä¸æ°å»ºä¸ä¸ªåä¸º advanced çç©ºæä»¶ã\n 2. å¦æä½¿ç¨äºéç½®é¡¹ waf_priorityï¼å¯ä»¥å°å¶å é¤æèæç§ææ¡£ä¸­å¯¹è¯¥éç½®é¡¹çè¯´æè¿è¡ä¿®æ¹ã\n\n\n# æ°å¢\n\n * æ¯æäºé«çº§è§åï¼è¯¦æè§ææ¡£ã\n\n\n# ç§»é¤\n\n * ç§»é¤ compat æ¨¡å¼ï¼ä¸åå®å¨å¼å®¹ ngx_http_rewrite_moduleã\n\n\n# åå¨\n\n * æ´æ°äºéç½®é¡¹ waf_priorityï¼è¯¦æè§ææ¡£ã\n\n * ç°å¨ä½ å¯ä»¥å¨ httpãserver å location åä¸­ä½¿ç¨æ¬æ¨¡åçææéç½®é¡¹ã",charsets:{cjk:!0}},{title:"ææ°çï¼Currentï¼",frontmatter:{title:"ææ°çï¼Currentï¼",lang:"zh-CN"},regularPath:"/zh-cn/changes/current.html",relativePath:"zh-cn/changes/current.md",key:"v-f0f039c8",path:"/zh-cn/changes/current.html",headers:[{level:2,title:"[æªåå¸]",slug:"æªåå¸",normalizedTitle:"[æªåå¸]",charIndex:125},{level:3,title:"æ°å¢",slug:"æ°å¢",normalizedTitle:"æ°å¢",charIndex:135},{level:3,title:"ç§»é¤",slug:"ç§»é¤",normalizedTitle:"ç§»é¤",charIndex:142},{level:3,title:"åå¨",slug:"åå¨",normalizedTitle:"åå¨",charIndex:149},{level:3,title:"ä¿®å¤",slug:"ä¿®å¤",normalizedTitle:"ä¿®å¤",charIndex:156},{level:2,title:"[10.1.1] - 2022-01-07 UTC+0800",slug:"_10-1-1-2022-01-07-utc-0800",normalizedTitle:"[10.1.1] - 2022-01-07 utc+0800",charIndex:205},{level:3,title:"æ°å¢",slug:"æ°å¢-2",normalizedTitle:"æ°å¢",charIndex:135},{level:3,title:"ä¿®å¤",slug:"ä¿®å¤-2",normalizedTitle:"ä¿®å¤",charIndex:156},{level:2,title:"[10.1.0] - 2021-12-14 UTC+0800",slug:"_10-1-0-2021-12-14-utc-0800",normalizedTitle:"[10.1.0] - 2021-12-14 utc+0800",charIndex:360},{level:3,title:"æ°å¢",slug:"æ°å¢-3",normalizedTitle:"æ°å¢",charIndex:135},{level:3,title:"ä¿®å¤",slug:"ä¿®å¤-3",normalizedTitle:"ä¿®å¤",charIndex:156},{level:2,title:"[10.0.1] - 2021-12-05 UTC+0800",slug:"_10-0-1-2021-12-05-utc-0800",normalizedTitle:"[10.0.1] - 2021-12-05 utc+0800",charIndex:627},{level:3,title:"æ°å¢",slug:"æ°å¢-4",normalizedTitle:"æ°å¢",charIndex:135},{level:3,title:"ä¿®å¤",slug:"ä¿®å¤-4",normalizedTitle:"ä¿®å¤",charIndex:156},{level:2,title:"[10.0.0] - 2021-11-30 UTC+0800",slug:"_10-0-0-2021-11-30-utc-0800",normalizedTitle:"[10.0.0] - 2021-11-30 utc+0800",charIndex:803},{level:3,title:"æ°å¢",slug:"æ°å¢-5",normalizedTitle:"æ°å¢",charIndex:135},{level:3,title:"ç§»é¤",slug:"ç§»é¤-2",normalizedTitle:"ç§»é¤",charIndex:142},{level:3,title:"åå¨",slug:"åå¨-2",normalizedTitle:"åå¨",charIndex:149},{level:2,title:"[9.0.6] - 2021-10-10 UTC+0800",slug:"_9-0-6-2021-10-10-utc-0800",normalizedTitle:"[9.0.6] - 2021-10-10 utc+0800",charIndex:1696},{level:3,title:"ä¿®å¤",slug:"ä¿®å¤-5",normalizedTitle:"ä¿®å¤",charIndex:156},{level:2,title:"[9.0.5] - 2021-10-09 UTC+0800",slug:"_9-0-5-2021-10-09-utc-0800",normalizedTitle:"[9.0.5] - 2021-10-09 utc+0800",charIndex:1818},{level:3,title:"æ°çæµè¯å¥ä»¶",slug:"æ°çæµè¯å¥ä»¶",normalizedTitle:"æ°çæµè¯å¥ä»¶",charIndex:1852},{level:3,title:"åå¨",slug:"åå¨-3",normalizedTitle:"åå¨",charIndex:149},{level:3,title:"ä¿®å¤",slug:"ä¿®å¤-6",normalizedTitle:"ä¿®å¤",charIndex:156},{level:2,title:"[9.0.4] - 2021-09-29 UTC+0800",slug:"_9-0-4-2021-09-29-utc-0800",normalizedTitle:"[9.0.4] - 2021-09-29 utc+0800",charIndex:2421},{level:3,title:"ä¿®å¤",slug:"ä¿®å¤-7",normalizedTitle:"ä¿®å¤",charIndex:156},{level:2,title:"[9.0.3] - 2021-09-28 UTC+0800",slug:"_9-0-3-2021-09-28-utc-0800",normalizedTitle:"[9.0.3] - 2021-09-28 utc+0800",charIndex:2540},{level:3,title:"åå¨",slug:"åå¨-4",normalizedTitle:"åå¨",charIndex:149},{level:3,title:"ä¿®å¤",slug:"ä¿®å¤-8",normalizedTitle:"ä¿®å¤",charIndex:156},{level:2,title:"[9.0.2] - 2021-09-25 UTC+0800",slug:"_9-0-2-2021-09-25-utc-0800",normalizedTitle:"[9.0.2] - 2021-09-25 utc+0800",charIndex:2660},{level:3,title:"ä¿®å¤",slug:"ä¿®å¤-9",normalizedTitle:"ä¿®å¤",charIndex:156},{level:2,title:"[9.0.1] - 2021-09-24 UTC+0800",slug:"_9-0-1-2021-09-24-utc-0800",normalizedTitle:"[9.0.1] - 2021-09-24 utc+0800",charIndex:2779},{level:3,title:"ä¿®å¤",slug:"ä¿®å¤-10",normalizedTitle:"ä¿®å¤",charIndex:156},{level:2,title:"[9.0.0] - 2021-09-23 UTC+0800",slug:"_9-0-0-2021-09-23-utc-0800",normalizedTitle:"[9.0.0] - 2021-09-23 utc+0800",charIndex:2890},{level:3,title:"æ³¨æ",slug:"æ³¨æ",normalizedTitle:"æ³¨æ",charIndex:2924},{level:3,title:"æ°å¢",slug:"æ°å¢-6",normalizedTitle:"æ°å¢",charIndex:135},{level:3,title:"ç§»é¤",slug:"ç§»é¤-3",normalizedTitle:"ç§»é¤",charIndex:142},{level:3,title:"ä¿®å¤",slug:"ä¿®å¤-11",normalizedTitle:"ä¿®å¤",charIndex:156},{level:2,title:"[8.0.3] - 2021-08-27 UTC+0800",slug:"_8-0-3-2021-08-27-utc-0800",normalizedTitle:"[8.0.3] - 2021-08-27 utc+0800",charIndex:3342},{level:3,title:"ä¿®å¤",slug:"ä¿®å¤-12",normalizedTitle:"ä¿®å¤",charIndex:156},{level:2,title:"[8.0.2] - 2021-08-27 UTC+0800",slug:"_8-0-2-2021-08-27-utc-0800",normalizedTitle:"[8.0.2] - 2021-08-27 utc+0800",charIndex:3507},{level:3,title:"ä¿®å¤",slug:"ä¿®å¤-13",normalizedTitle:"ä¿®å¤",charIndex:156},{level:2,title:"[8.0.1] - 2021-08-23 UTC+0800",slug:"_8-0-1-2021-08-23-utc-0800",normalizedTitle:"[8.0.1] - 2021-08-23 utc+0800",charIndex:3746},{level:3,title:"æ°å¢",slug:"æ°å¢-7",normalizedTitle:"æ°å¢",charIndex:135},{level:3,title:"ä¿®å¤",slug:"ä¿®å¤-14",normalizedTitle:"ä¿®å¤",charIndex:156},{level:2,title:"[8.0.0] - 2021-08-21 UTC+0800",slug:"_8-0-0-2021-08-21-utc-0800",normalizedTitle:"[8.0.0] - 2021-08-21 utc+0800",charIndex:3928},{level:3,title:"æ³¨æ",slug:"æ³¨æ-2",normalizedTitle:"æ³¨æ",charIndex:2924},{level:3,title:"æ°å¢",slug:"æ°å¢-8",normalizedTitle:"æ°å¢",charIndex:135},{level:3,title:"åå¨",slug:"åå¨-5",normalizedTitle:"åå¨",charIndex:149},{level:3,title:"ç§»é¤",slug:"ç§»é¤-4",normalizedTitle:"ç§»é¤",charIndex:142},{level:2,title:"[7.1.0] - 2021-08-16 UTC+0800",slug:"_7-1-0-2021-08-16-utc-0800",normalizedTitle:"[7.1.0] - 2021-08-16 utc+0800",charIndex:4491},{level:3,title:"æ°å¢",slug:"æ°å¢-9",normalizedTitle:"æ°å¢",charIndex:135},{level:2,title:"[7.0.1] - 2021-08-11 UTC+0800",slug:"_7-0-1-2021-08-11-utc-0800",normalizedTitle:"[7.0.1] - 2021-08-11 utc+0800",charIndex:4671},{level:3,title:"ä¿®å¤",slug:"ä¿®å¤-15",normalizedTitle:"ä¿®å¤",charIndex:156},{level:2,title:"[7.0.0] - 2021-08-04 UTC+0800",slug:"_7-0-0-2021-08-04-utc-0800",normalizedTitle:"[7.0.0] - 2021-08-04 utc+0800",charIndex:4808},{level:3,title:"åå¨",slug:"åå¨-6",normalizedTitle:"åå¨",charIndex:149}],lastUpdated:"2022/1/10 ä¸å3:38:27",lastUpdatedTimestamp:1641829107e3,headersStr:"[æªåå¸] æ°å¢ ç§»é¤ åå¨ ä¿®å¤ [10.1.1] - 2022-01-07 UTC+0800 æ°å¢ ä¿®å¤ [10.1.0] - 2021-12-14 UTC+0800 æ°å¢ ä¿®å¤ [10.0.1] - 2021-12-05 UTC+0800 æ°å¢ ä¿®å¤ [10.0.0] - 2021-11-30 UTC+0800 æ°å¢ ç§»é¤ åå¨ [9.0.6] - 2021-10-10 UTC+0800 ä¿®å¤ [9.0.5] - 2021-10-09 UTC+0800 æ°çæµè¯å¥ä»¶ åå¨ ä¿®å¤ [9.0.4] - 2021-09-29 UTC+0800 ä¿®å¤ [9.0.3] - 2021-09-28 UTC+0800 åå¨ ä¿®å¤ [9.0.2] - 2021-09-25 UTC+0800 ä¿®å¤ [9.0.1] - 2021-09-24 UTC+0800 ä¿®å¤ [9.0.0] - 2021-09-23 UTC+0800 æ³¨æ æ°å¢ ç§»é¤ ä¿®å¤ [8.0.3] - 2021-08-27 UTC+0800 ä¿®å¤ [8.0.2] - 2021-08-27 UTC+0800 ä¿®å¤ [8.0.1] - 2021-08-23 UTC+0800 æ°å¢ ä¿®å¤ [8.0.0] - 2021-08-21 UTC+0800 æ³¨æ æ°å¢ åå¨ ç§»é¤ [7.1.0] - 2021-08-16 UTC+0800 æ°å¢ [7.0.1] - 2021-08-11 UTC+0800 ä¿®å¤ [7.0.0] - 2021-08-04 UTC+0800 åå¨",content:"# æ´æ°æ¥å¿ï¼Currentï¼\n\næ¬æä»¶çæ ¼å¼åºäºå¦ä½ç»´æ¤æ´æ°æ¥å¿ï¼ å¹¶ä¸æ¬é¡¹ç®éµå®è¯­ä¹åçæ¬ã\n\nä½ä¸ºãä¸å¼å®¹çä¿®æ¹ãï¼\n\n * åæçéç½®æä»¶å¯è½æ æ³ä½¿ç¨ï¼æ¯å¦å é¤æèéå½åäºæä¸ªéç½®é¡¹ã\n * å¯è½éè¦æ´æ°ç¼è¯ç¯å¢ï¼æ¯å¦å®è£æ°çä¾èµã\n\n\n# [æªåå¸]\n\n\n# æ°å¢\n\n\n# ç§»é¤\n\n\n# åå¨\n\n\n# ä¿®å¤\n\n----------------------------------------\n\n\n# [10.1.1] - 2022-01-07 UTC+0800\n\n\n# æ°å¢\n\n * æ¯æ PCRE2ã\n\n\n# ä¿®å¤\n\n * åå­æ³æ¼ã\n\n * éªè¯ç å Under Attack Modeï¼äºç§ç¾ï¼ææ¶ä¼æ éå·æ°ã\n\n----------------------------------------\n\n\n# [10.1.0] - 2021-12-14 UTC+0800\n\n\n# æ°å¢\n\n * æä»¤ waf å¯ä»¥è®¾ç½®ä¸º bypass æ¨¡å¼ï¼å³ä»æ£æµå¹¶è®°å½æ¥å¿ï¼ä½ä¸ä¼æ¦æªä»»ä½è¯·æ±ã\n\n * æä»¤ waf_verify_bot æ°å¢äºåæ° SogouSpiderï¼ç¨äºéªè¯æ¯å¦ä¸ºæçç¬è«ã\n\n\n# ä¿®å¤\n\n * åå­åæ¶æºå¶å¹¶æªæ­£å¸¸è¿è¡ï¼è¿è½ç¶ä¸ä¼é æåå­æ³æ¼ï¼ä½ä¼å¯¼è´åå­å ç¨å±é«ä¸ä¸ï¼å¹¶å¼åæ§è½é®é¢ã\n\n * åå¥½ç¬è«éªè¯åè½ä¼éè¯¯å°æå°æ¦æªæ¥å¿ã\n\n----------------------------------------\n\n\n# [10.0.1] - 2021-12-05 UTC+0800\n\n\n# æ°å¢\n\n * æ·»å äºä¸¤ä¸ªå½©èï¼ä½ å¯ä»¥å¨ææ¡£ä¸­æ¾å°ç¸å³ççº¿ç´¢ãè¿ä¸¤ä¸ªå½©èä¸ä¼èªå¨è§¦åï¼æä»¥ä¸ä¼å½±åæ­£å¸¸ä½¿ç¨ã\n\n\n# ä¿®å¤\n\n * æä»¤ waf_mode ä¸­ææä¸è¯·æ±æ¹æ³å¯¹åºçåæ°åå¤±æã\n\n----------------------------------------\n\n\n# [10.0.0] - 2021-11-30 UTC+0800\n\n\n# æ°å¢\n\n * æ°æä»¤ waf_zoneï¼ç¨æ¥å£°æä¸åå±äº«åå­ï¼è¿ååå­å°è¢«ç¨äºå¶ä»çæä»¤ï¼æ¯å¦ waf_cc_denyã\n\n * æ°æä»¤ waf_actionï¼ç¨äºè®¾ç½®æ¦æªè¯·æ±åçå¨ä½ï¼æ¯å¦è¿åç¹å®çç¶æç æèä½¿ç¨éªè¯ç å¯¹å®¢æ·ç«¯åäººæºè®¤è¯ã\n\n * æ°æä»¤ waf_block_pageï¼ç¨äºè®¾ç½®æ¦æªé¡µé¢ï¼å½è¯·æ±è¢«æ¦æªåå°æå®ç HTML æä»¶è¿åã\n\n * æ°åç½®åé $waf_rateï¼ç¨æ¥è¡¨ç¤ºä¸ä¸ªç»è®¡å¨æåå½å IP çè®¿é®æ¬¡æ°ãç»è®¡å¨æç±æä»¤ waf_cc_deny çåæ° rate å³å®ï¼å¦æ IP å·²ç»è¢«æé»ï¼åç±åæ° duration å³å®ã\n\n * æä»¤ waf_captcha å¢å äºä¸ä¸ªåæ° max_failsï¼ç¨æ¥è®¾ç½®éªè¯ç æå¤§è¯éæ¬¡æ°åè¶åºåçæé»æ¶é´ã\n\n * æä»¤ waf_captcha å¢å äºä¸ä¸ªåæ° zoneï¼ç¨æ¥æå®ä¸åå±äº«åå­ï¼å½ä¸ä»å½è®¾ç½®äºåæ° max_fails æ¶æéè¦è®¾ç½®ã\n\n * æä»¤ waf_captcha å¢å äºä¸ä¸ªåæ° sitekeyï¼å½ä¸ä»å½çç¥äºåæ° file æ¶æéè¦è®¾ç½®ã\n\n * å½ä½ éè½½ nginx æ¶ï¼æ¨¡åä¼å°½å¯è½å°ä¿çå±äº«åå­ä¸­çä¿¡æ¯ï¼ä½¿å¶ä¸è¢«æ¸ç©ºï¼æ¯å¦ CC é²æ¤çæé»åè¡¨ã\n\n\n# ç§»é¤\n\n * ç§»é¤äºæä»¤ waf_http_statusï¼ç¸å³çåè½åå¹¶å°æä»¤ waf_actionã\n\n * ç§»é¤äºæä»¤ waf_cc_deny çåæ° sizeï¼ç°å¨ä½¿ç¨ zone ä»£æ¿ã\n\n\n# åå¨\n\n * åè®¸çç¥æä»¤ waf_under_attack çåæ° fileï¼çç¥æ­¤åæ°æ¶å°ä½¿ç¨ä¸ä¸ªåç½®çæä»¶ï¼å®æ¥èª assets/under_attack.htmlã\n\n * åè®¸çç¥æä»¤ waf_captcha çåæ° fileï¼çç¥æ­¤åæ°æ¶å°æ ¹æ®åæ° prov çå¼ä½¿ç¨ä¸ä¸ªåç½®çæä»¶ï¼è¿äºæä»¶æ¥èªç®å½ assets/ã\n\n * æ´å¤çè°è¯æ¥å¿ã\n\n----------------------------------------\n\n\n# [9.0.6] - 2021-10-10 UTC+0800\n\n\n# ä¿®å¤\n\n * å½æä»¤ try_files çææ¶æ æ³å®æ CAPTCHA çéªè¯ã\n\n----------------------------------------\n\n\n# [9.0.5] - 2021-10-09 UTC+0800\n\n\n# æ°çæµè¯å¥ä»¶\n\nå¶ç¶é´çå°äºä¸ä¸ªæµè¯å¥ä»¶ï¼test-nginxã çå®ä¹åæè§å¾å¥½ä¾¿æ¿æ¥æµè¯ï¼ç¼äºä¸å°æµè¯ç¨ä¾ï¼æä¸å¶ç¶åç°äºä¸å¤§å  Bugï¼ä¸æ§æ¯æã\n\n\n# åå¨\n\n * å é¤äºæ ç¨çè°è¯æ¥å¿ã\n\n * æ´å¤çè°è¯æ¥å¿ã\n\n\n# ä¿®å¤\n\n * ææ¶è¿æ¥ä¼è¢«è¿æ©å°å³é­ã\n\n * å¯ç¨ CAPTCHA åè¯·æ±ä½çæ£æµç»æå¯è½ä¼åºéã\n\n * CAPTCHA å¯è½ä¼å ä¸º HTTP ç¼å­èå¤±è´¥ã\n\n * éè½½ nginx æ¶å­å¨åå­æ³é²ã\n\n * æªè½æ­£ç¡®åå¹¶ä¸å±éç½®åç waf_cache æä»¤ã\n\n * æªè½æ­£ç¡®åå¹¶ä¸å±éç½®åç waf_cc_deny æä»¤ã\n\n * æªè½æ­£ç¡®ç»§æ¿ä¸å±éç½®åç Referer é»ååã\n\n * æªè½æ­£ç¡®è¯å«ä¸äºéè¯¯çéç½®ã\n\n * ä¿®å¤äºä¸æ¡é»è®¤ç URL é»ååè§åã\n\n * ä¿®å¤äºä¸åæä»¶ï¼ä½¿å¾éªè¯ç å®æåå¯ä»¥èªå¨å·æ°ç½é¡µã\n   \n   * assets/hCaptcha.html\n   * assets/reCAPTCHAv2_Checkbox.html\n   * assets/reCAPTCHAv2_Invisible.html\n   * assets/reCAPTCHAv3.html\n\n----------------------------------------\n\n\n# [9.0.4] - 2021-09-29 UTC+0800\n\n\n# ä¿®å¤\n\n * å½æä»¤ rewrite é æåé¨éå®åæ¶ä¼éè¯¯å°è·³è¿æææ£æµã\n\n----------------------------------------\n\n\n# [9.0.3] - 2021-09-28 UTC+0800\n\n\n# åå¨\n\n * æ´å¤çè°è¯æ¥å¿ã\n\n\n# ä¿®å¤\n\n * éªè¯ç é¡µé¢ä¸è½æ­£å¸¸æ¾ç¤ºã\n\n----------------------------------------\n\n\n# [9.0.2] - 2021-09-25 UTC+0800\n\n\n# ä¿®å¤\n\n * åç½®åé $waf_blocking_log çå¼ææ¶ä¼åºéã\n\n----------------------------------------\n\n\n# [9.0.1] - 2021-09-24 UTC+0800\n\n\n# ä¿®å¤\n\n * æªè½æ­£ç¡®è¯»å ModSecurity çè§åã\n\n----------------------------------------\n\n\n# [9.0.0] - 2021-09-23 UTC+0800\n\n\n# æ³¨æ\n\nå¦ææ¨æ³è¦åçº§å°æ­¤çæ¬ï¼è¯·æ¥çææ¡£ä¸­çè·¨çæ¬åçº§çæåã\n\n\n# æ°å¢\n\n * å¼å®¹äºModSecurity çè§åã\n\n * å¢å äºä¸¤ä¸ªæä»¤ï¼waf_modsecurity å waf_modsecurity_transaction_idã\n\n * ä¸ºæä»¤ waf_priority å¢å äºåæ° MODSECURITYã\n\n\n# ç§»é¤\n\n * å é¤äºæä»¤ waf_mode çä¸äºåæ°ï¼LIBINJECTIONãLIBINJECTION-SQLIãLIBINJECTION-XSS å ADVã\n\n * å é¤äºæä»¤ waf_priority çåæ° ADVã\n\n * å é¤äºä¾èµ libinjectionã\n\n\n# ä¿®å¤\n\n * å½éªè¯ç éè¿æ¶ä¸åè¿å 404 ç¶æç ï¼èæ¯è¿å 204 ç¶æç ã\n\n * ææ¶ä¸ä¼å®æ´å°æ£æ¥è¯·æ±ä½ã\n\n----------------------------------------\n\n\n# [8.0.3] - 2021-08-27 UTC+0800\n\n\n# ä¿®å¤\n\n * åå­æ³é²\n\n * ä¸ä¸ªæ²¡æåå§åçç»æä½å­æ®µï¼ä¼å¯¼è´éè¯¯æ¥å¿ä¸­åºç°å¤§éç malloc(size) failed (12: Out of memory)ã\n\n----------------------------------------\n\n\n# [8.0.2] - 2021-08-27 UTC+0800\n\n\n# ä¿®å¤\n\n * å¼å¯éªè¯ç å nginx å´©æºï¼æ®µéè¯¯ï¼ï¼åå æ¯æªè½æ­£ç¡®åå¹¶ä¸åçº§å«ç waf_captcha æä»¤ã\n\n * ä¸è½æ¾ç¤ºéªè¯ç é¡µé¢ï¼åå æ¯æªè½æ­£ç¡®åå¹¶ä¸åçº§å«ç waf_captcha æä»¤ã\n\n * å¦æä½¿ç¨äº proxy_pass æä»¤ï¼Under-Attack-Mode åéªè¯ç åä¸è½æ­£å¸¸å·¥ä½ã\n\n----------------------------------------\n\n\n# [8.0.1] - 2021-08-23 UTC+0800\n\n\n# æ°å¢\n\n * å½ CC é²æ¤è¿å 444 ç¶æç æ¶ä¸åçæé¢å¤çååºå¤´ã\n\n\n# ä¿®å¤\n\n * å½ User-Agent ä¸ºç©ºæ¶ä¼å¼åæ®µéè¯¯ã\n\n * ä¸è½æ­£ç¡®åå¹¶æä»¤ waf_http_statusã\n\n----------------------------------------\n\n\n# [8.0.0] - 2021-08-21 UTC+0800\n\n\n# æ³¨æ\n\nå¦ææ¨æ³è¦åçº§å°æ­¤çæ¬ï¼è¯·æ¥çææ¡£ä¸­çè·¨çæ¬åçº§çæåã\n\n\n# æ°å¢\n\n * å¼å¥äºç¬¬ä¸æ¹å¹³å°çéªè¯ç ï¼æ¯æ hCaptchaãreCAPTCHAv2 å reCAPTCHAv3ï¼ç¸å³çæä»¤ä¸º waf_captchaã\n\n * æ¯æè¯å«åå¥½ç¬è«ï¼åæ¬ GooleBotãBingBotãBaiduSpider å YandexBotï¼è¯å«æååèªå¨æ¾è¡ï¼ç¸å³çæä»¤ä¸º waf_verify_botã\n\n * CC é²æ¤æ¯æå¼å¯éªè¯ç æ¨¡å¼ï¼å¼å¯åå½è¯·æ±é¢çè¶åºéå¶åä¼å¯ç¨éªè¯ç ï¼å¦æè¿ç»­ä¸æ¬¡éªè¯å¤±è´¥åæé» IPï¼åä¹åéæ°ç»è®¡è¯·æ±é¢çã\n\n\n# åå¨\n\n * æä»¤ waf_mode çè¯­æ³ææååï¼è¯¦è§ææ¡£ä¸­çè·¨çæ¬åçº§çæåã\n\n * æä»¤ waf_cc_deny çè¯­æ³ææååï¼è¯¦è§ææ¡£ä¸­çè·¨çæ¬åçº§çæåã\n\n * æä»¤ waf_cache çè¯­æ³ææååï¼è¯¦è§ææ¡£ä¸­çè·¨çæ¬åçº§çæåã\n\n * æ¯æä¿®æ¹ãè¯·æ±ä½æ£æ¥ãçä¼åçº§ã\n\n\n# ç§»é¤\n\n * ç§»é¤äºæä»¤ waf_cache çä¸¤ä¸ªåæ°ï¼åå«æ¯ interval å percentã\n\n----------------------------------------\n\n\n# [7.1.0] - 2021-08-16 UTC+0800\n\n\n# æ°å¢\n\n * éç½®é¡¹ waf_cc_deny çåæ° rate åè®¸æ´å¤ä¸ªæ ¼å¼ï¼å¦ 500r/sã500r/60sã500r/mã500r/60mã500r/hã500r/60h å 500r/dã\n\n----------------------------------------\n\n\n# [7.0.1] - 2021-08-11 UTC+0800\n\n\n# ä¿®å¤\n\n * ä¸è½æ­£ç¡®è§£æ IP é»ç½ååä¸­ç 0.0.0.0/0ã\n\n * å¼å®¹ä¸æ¯æ IPV6 çè¿è¡ç¯å¢ã\n\n----------------------------------------\n\n\n# [7.0.0] - 2021-08-04 UTC+0800\n\n\n# åå¨\n\n * æ¹åäº Under Attack Mode çå®ç°æ¹å¼ãä¸åä½¿ç¨éå®åå®ç°ï¼èæ¯éè¿ä¿®æ¹ååºä½å®ç°ã\n\n * å é¤äºéç½®é¡¹ waf_under_attack çåæ° uriï¼è¯¦æè§ææ¡£ã\n\n * ä¸ºéç½®é¡¹ waf_under_attack å¢å äºä¸ä¸ªåæ° fileï¼è¯¥åæ°çå¼åºè¯¥æ¯ä¸ä¸ª HTML æä»¶çç»å¯¹è·¯å¾ï¼è¯¦æè§ææ¡£ã\n\n * ä¸åè®¸å¨ http è¿ä¸çº§ä¸­ä½¿ç¨éç½®é¡¹ waf_cc_denyã",normalizedContent:"# æ´æ°æ¥å¿ï¼currentï¼\n\næ¬æä»¶çæ ¼å¼åºäºå¦ä½ç»´æ¤æ´æ°æ¥å¿ï¼ å¹¶ä¸æ¬é¡¹ç®éµå®è¯­ä¹åçæ¬ã\n\nä½ä¸ºãä¸å¼å®¹çä¿®æ¹ãï¼\n\n * åæçéç½®æä»¶å¯è½æ æ³ä½¿ç¨ï¼æ¯å¦å é¤æèéå½åäºæä¸ªéç½®é¡¹ã\n * å¯è½éè¦æ´æ°ç¼è¯ç¯å¢ï¼æ¯å¦å®è£æ°çä¾èµã\n\n\n# [æªåå¸]\n\n\n# æ°å¢\n\n\n# ç§»é¤\n\n\n# åå¨\n\n\n# ä¿®å¤\n\n----------------------------------------\n\n\n# [10.1.1] - 2022-01-07 utc+0800\n\n\n# æ°å¢\n\n * æ¯æ pcre2ã\n\n\n# ä¿®å¤\n\n * åå­æ³æ¼ã\n\n * éªè¯ç å under attack modeï¼äºç§ç¾ï¼ææ¶ä¼æ éå·æ°ã\n\n----------------------------------------\n\n\n# [10.1.0] - 2021-12-14 utc+0800\n\n\n# æ°å¢\n\n * æä»¤ waf å¯ä»¥è®¾ç½®ä¸º bypass æ¨¡å¼ï¼å³ä»æ£æµå¹¶è®°å½æ¥å¿ï¼ä½ä¸ä¼æ¦æªä»»ä½è¯·æ±ã\n\n * æä»¤ waf_verify_bot æ°å¢äºåæ° sogouspiderï¼ç¨äºéªè¯æ¯å¦ä¸ºæçç¬è«ã\n\n\n# ä¿®å¤\n\n * åå­åæ¶æºå¶å¹¶æªæ­£å¸¸è¿è¡ï¼è¿è½ç¶ä¸ä¼é æåå­æ³æ¼ï¼ä½ä¼å¯¼è´åå­å ç¨å±é«ä¸ä¸ï¼å¹¶å¼åæ§è½é®é¢ã\n\n * åå¥½ç¬è«éªè¯åè½ä¼éè¯¯å°æå°æ¦æªæ¥å¿ã\n\n----------------------------------------\n\n\n# [10.0.1] - 2021-12-05 utc+0800\n\n\n# æ°å¢\n\n * æ·»å äºä¸¤ä¸ªå½©èï¼ä½ å¯ä»¥å¨ææ¡£ä¸­æ¾å°ç¸å³ççº¿ç´¢ãè¿ä¸¤ä¸ªå½©èä¸ä¼èªå¨è§¦åï¼æä»¥ä¸ä¼å½±åæ­£å¸¸ä½¿ç¨ã\n\n\n# ä¿®å¤\n\n * æä»¤ waf_mode ä¸­ææä¸è¯·æ±æ¹æ³å¯¹åºçåæ°åå¤±æã\n\n----------------------------------------\n\n\n# [10.0.0] - 2021-11-30 utc+0800\n\n\n# æ°å¢\n\n * æ°æä»¤ waf_zoneï¼ç¨æ¥å£°æä¸åå±äº«åå­ï¼è¿ååå­å°è¢«ç¨äºå¶ä»çæä»¤ï¼æ¯å¦ waf_cc_denyã\n\n * æ°æä»¤ waf_actionï¼ç¨äºè®¾ç½®æ¦æªè¯·æ±åçå¨ä½ï¼æ¯å¦è¿åç¹å®çç¶æç æèä½¿ç¨éªè¯ç å¯¹å®¢æ·ç«¯åäººæºè®¤è¯ã\n\n * æ°æä»¤ waf_block_pageï¼ç¨äºè®¾ç½®æ¦æªé¡µé¢ï¼å½è¯·æ±è¢«æ¦æªåå°æå®ç html æä»¶è¿åã\n\n * æ°åç½®åé $waf_rateï¼ç¨æ¥è¡¨ç¤ºä¸ä¸ªç»è®¡å¨æåå½å ip çè®¿é®æ¬¡æ°ãç»è®¡å¨æç±æä»¤ waf_cc_deny çåæ° rate å³å®ï¼å¦æ ip å·²ç»è¢«æé»ï¼åç±åæ° duration å³å®ã\n\n * æä»¤ waf_captcha å¢å äºä¸ä¸ªåæ° max_failsï¼ç¨æ¥è®¾ç½®éªè¯ç æå¤§è¯éæ¬¡æ°åè¶åºåçæé»æ¶é´ã\n\n * æä»¤ waf_captcha å¢å äºä¸ä¸ªåæ° zoneï¼ç¨æ¥æå®ä¸åå±äº«åå­ï¼å½ä¸ä»å½è®¾ç½®äºåæ° max_fails æ¶æéè¦è®¾ç½®ã\n\n * æä»¤ waf_captcha å¢å äºä¸ä¸ªåæ° sitekeyï¼å½ä¸ä»å½çç¥äºåæ° file æ¶æéè¦è®¾ç½®ã\n\n * å½ä½ éè½½ nginx æ¶ï¼æ¨¡åä¼å°½å¯è½å°ä¿çå±äº«åå­ä¸­çä¿¡æ¯ï¼ä½¿å¶ä¸è¢«æ¸ç©ºï¼æ¯å¦ cc é²æ¤çæé»åè¡¨ã\n\n\n# ç§»é¤\n\n * ç§»é¤äºæä»¤ waf_http_statusï¼ç¸å³çåè½åå¹¶å°æä»¤ waf_actionã\n\n * ç§»é¤äºæä»¤ waf_cc_deny çåæ° sizeï¼ç°å¨ä½¿ç¨ zone ä»£æ¿ã\n\n\n# åå¨\n\n * åè®¸çç¥æä»¤ waf_under_attack çåæ° fileï¼çç¥æ­¤åæ°æ¶å°ä½¿ç¨ä¸ä¸ªåç½®çæä»¶ï¼å®æ¥èª assets/under_attack.htmlã\n\n * åè®¸çç¥æä»¤ waf_captcha çåæ° fileï¼çç¥æ­¤åæ°æ¶å°æ ¹æ®åæ° prov çå¼ä½¿ç¨ä¸ä¸ªåç½®çæä»¶ï¼è¿äºæä»¶æ¥èªç®å½ assets/ã\n\n * æ´å¤çè°è¯æ¥å¿ã\n\n----------------------------------------\n\n\n# [9.0.6] - 2021-10-10 utc+0800\n\n\n# ä¿®å¤\n\n * å½æä»¤ try_files çææ¶æ æ³å®æ captcha çéªè¯ã\n\n----------------------------------------\n\n\n# [9.0.5] - 2021-10-09 utc+0800\n\n\n# æ°çæµè¯å¥ä»¶\n\nå¶ç¶é´çå°äºä¸ä¸ªæµè¯å¥ä»¶ï¼test-nginxã çå®ä¹åæè§å¾å¥½ä¾¿æ¿æ¥æµè¯ï¼ç¼äºä¸å°æµè¯ç¨ä¾ï¼æä¸å¶ç¶åç°äºä¸å¤§å  bugï¼ä¸æ§æ¯æã\n\n\n# åå¨\n\n * å é¤äºæ ç¨çè°è¯æ¥å¿ã\n\n * æ´å¤çè°è¯æ¥å¿ã\n\n\n# ä¿®å¤\n\n * ææ¶è¿æ¥ä¼è¢«è¿æ©å°å³é­ã\n\n * å¯ç¨ captcha åè¯·æ±ä½çæ£æµç»æå¯è½ä¼åºéã\n\n * captcha å¯è½ä¼å ä¸º http ç¼å­èå¤±è´¥ã\n\n * éè½½ nginx æ¶å­å¨åå­æ³é²ã\n\n * æªè½æ­£ç¡®åå¹¶ä¸å±éç½®åç waf_cache æä»¤ã\n\n * æªè½æ­£ç¡®åå¹¶ä¸å±éç½®åç waf_cc_deny æä»¤ã\n\n * æªè½æ­£ç¡®ç»§æ¿ä¸å±éç½®åç referer é»ååã\n\n * æªè½æ­£ç¡®è¯å«ä¸äºéè¯¯çéç½®ã\n\n * ä¿®å¤äºä¸æ¡é»è®¤ç url é»ååè§åã\n\n * ä¿®å¤äºä¸åæä»¶ï¼ä½¿å¾éªè¯ç å®æåå¯ä»¥èªå¨å·æ°ç½é¡µã\n   \n   * assets/hcaptcha.html\n   * assets/recaptchav2_checkbox.html\n   * assets/recaptchav2_invisible.html\n   * assets/recaptchav3.html\n\n----------------------------------------\n\n\n# [9.0.4] - 2021-09-29 utc+0800\n\n\n# ä¿®å¤\n\n * å½æä»¤ rewrite é æåé¨éå®åæ¶ä¼éè¯¯å°è·³è¿æææ£æµã\n\n----------------------------------------\n\n\n# [9.0.3] - 2021-09-28 utc+0800\n\n\n# åå¨\n\n * æ´å¤çè°è¯æ¥å¿ã\n\n\n# ä¿®å¤\n\n * éªè¯ç é¡µé¢ä¸è½æ­£å¸¸æ¾ç¤ºã\n\n----------------------------------------\n\n\n# [9.0.2] - 2021-09-25 utc+0800\n\n\n# ä¿®å¤\n\n * åç½®åé $waf_blocking_log çå¼ææ¶ä¼åºéã\n\n----------------------------------------\n\n\n# [9.0.1] - 2021-09-24 utc+0800\n\n\n# ä¿®å¤\n\n * æªè½æ­£ç¡®è¯»å modsecurity çè§åã\n\n----------------------------------------\n\n\n# [9.0.0] - 2021-09-23 utc+0800\n\n\n# æ³¨æ\n\nå¦ææ¨æ³è¦åçº§å°æ­¤çæ¬ï¼è¯·æ¥çææ¡£ä¸­çè·¨çæ¬åçº§çæåã\n\n\n# æ°å¢\n\n * å¼å®¹äºmodsecurity çè§åã\n\n * å¢å äºä¸¤ä¸ªæä»¤ï¼waf_modsecurity å waf_modsecurity_transaction_idã\n\n * ä¸ºæä»¤ waf_priority å¢å äºåæ° modsecurityã\n\n\n# ç§»é¤\n\n * å é¤äºæä»¤ waf_mode çä¸äºåæ°ï¼libinjectionãlibinjection-sqliãlibinjection-xss å advã\n\n * å é¤äºæä»¤ waf_priority çåæ° advã\n\n * å é¤äºä¾èµ libinjectionã\n\n\n# ä¿®å¤\n\n * å½éªè¯ç éè¿æ¶ä¸åè¿å 404 ç¶æç ï¼èæ¯è¿å 204 ç¶æç ã\n\n * ææ¶ä¸ä¼å®æ´å°æ£æ¥è¯·æ±ä½ã\n\n----------------------------------------\n\n\n# [8.0.3] - 2021-08-27 utc+0800\n\n\n# ä¿®å¤\n\n * åå­æ³é²\n\n * ä¸ä¸ªæ²¡æåå§åçç»æä½å­æ®µï¼ä¼å¯¼è´éè¯¯æ¥å¿ä¸­åºç°å¤§éç malloc(size) failed (12: out of memory)ã\n\n----------------------------------------\n\n\n# [8.0.2] - 2021-08-27 utc+0800\n\n\n# ä¿®å¤\n\n * å¼å¯éªè¯ç å nginx å´©æºï¼æ®µéè¯¯ï¼ï¼åå æ¯æªè½æ­£ç¡®åå¹¶ä¸åçº§å«ç waf_captcha æä»¤ã\n\n * ä¸è½æ¾ç¤ºéªè¯ç é¡µé¢ï¼åå æ¯æªè½æ­£ç¡®åå¹¶ä¸åçº§å«ç waf_captcha æä»¤ã\n\n * å¦æä½¿ç¨äº proxy_pass æä»¤ï¼under-attack-mode åéªè¯ç åä¸è½æ­£å¸¸å·¥ä½ã\n\n----------------------------------------\n\n\n# [8.0.1] - 2021-08-23 utc+0800\n\n\n# æ°å¢\n\n * å½ cc é²æ¤è¿å 444 ç¶æç æ¶ä¸åçæé¢å¤çååºå¤´ã\n\n\n# ä¿®å¤\n\n * å½ user-agent ä¸ºç©ºæ¶ä¼å¼åæ®µéè¯¯ã\n\n * ä¸è½æ­£ç¡®åå¹¶æä»¤ waf_http_statusã\n\n----------------------------------------\n\n\n# [8.0.0] - 2021-08-21 utc+0800\n\n\n# æ³¨æ\n\nå¦ææ¨æ³è¦åçº§å°æ­¤çæ¬ï¼è¯·æ¥çææ¡£ä¸­çè·¨çæ¬åçº§çæåã\n\n\n# æ°å¢\n\n * å¼å¥äºç¬¬ä¸æ¹å¹³å°çéªè¯ç ï¼æ¯æ hcaptchaãrecaptchav2 å recaptchav3ï¼ç¸å³çæä»¤ä¸º waf_captchaã\n\n * æ¯æè¯å«åå¥½ç¬è«ï¼åæ¬ goolebotãbingbotãbaiduspider å yandexbotï¼è¯å«æååèªå¨æ¾è¡ï¼ç¸å³çæä»¤ä¸º waf_verify_botã\n\n * cc é²æ¤æ¯æå¼å¯éªè¯ç æ¨¡å¼ï¼å¼å¯åå½è¯·æ±é¢çè¶åºéå¶åä¼å¯ç¨éªè¯ç ï¼å¦æè¿ç»­ä¸æ¬¡éªè¯å¤±è´¥åæé» ipï¼åä¹åéæ°ç»è®¡è¯·æ±é¢çã\n\n\n# åå¨\n\n * æä»¤ waf_mode çè¯­æ³ææååï¼è¯¦è§ææ¡£ä¸­çè·¨çæ¬åçº§çæåã\n\n * æä»¤ waf_cc_deny çè¯­æ³ææååï¼è¯¦è§ææ¡£ä¸­çè·¨çæ¬åçº§çæåã\n\n * æä»¤ waf_cache çè¯­æ³ææååï¼è¯¦è§ææ¡£ä¸­çè·¨çæ¬åçº§çæåã\n\n * æ¯æä¿®æ¹ãè¯·æ±ä½æ£æ¥ãçä¼åçº§ã\n\n\n# ç§»é¤\n\n * ç§»é¤äºæä»¤ waf_cache çä¸¤ä¸ªåæ°ï¼åå«æ¯ interval å percentã\n\n----------------------------------------\n\n\n# [7.1.0] - 2021-08-16 utc+0800\n\n\n# æ°å¢\n\n * éç½®é¡¹ waf_cc_deny çåæ° rate åè®¸æ´å¤ä¸ªæ ¼å¼ï¼å¦ 500r/sã500r/60sã500r/mã500r/60mã500r/hã500r/60h å 500r/dã\n\n----------------------------------------\n\n\n# [7.0.1] - 2021-08-11 utc+0800\n\n\n# ä¿®å¤\n\n * ä¸è½æ­£ç¡®è§£æ ip é»ç½ååä¸­ç 0.0.0.0/0ã\n\n * å¼å®¹ä¸æ¯æ ipv6 çè¿è¡ç¯å¢ã\n\n----------------------------------------\n\n\n# [7.0.0] - 2021-08-04 utc+0800\n\n\n# åå¨\n\n * æ¹åäº under attack mode çå®ç°æ¹å¼ãä¸åä½¿ç¨éå®åå®ç°ï¼èæ¯éè¿ä¿®æ¹ååºä½å®ç°ã\n\n * å é¤äºéç½®é¡¹ waf_under_attack çåæ° uriï¼è¯¦æè§ææ¡£ã\n\n * ä¸ºéç½®é¡¹ waf_under_attack å¢å äºä¸ä¸ªåæ° fileï¼è¯¥åæ°çå¼åºè¯¥æ¯ä¸ä¸ª html æä»¶çç»å¯¹è·¯å¾ï¼è¯¦æè§ææ¡£ã\n\n * ä¸åè®¸å¨ http è¿ä¸çº§ä¸­ä½¿ç¨éç½®é¡¹ waf_cc_denyã",charsets:{cjk:!0}},{title:"é¿æç»´æ¤çï¼LTSï¼",frontmatter:{title:"é¿æç»´æ¤çï¼LTSï¼",lang:"zh-CN"},regularPath:"/zh-cn/changes/lts.html",relativePath:"zh-cn/changes/lts.md",key:"v-597641dc",path:"/zh-cn/changes/lts.html",headers:[{level:2,title:"[æªåå¸]",slug:"æªåå¸",normalizedTitle:"[æªåå¸]",charIndex:121},{level:3,title:"æ°å¢",slug:"æ°å¢",normalizedTitle:"æ°å¢",charIndex:131},{level:3,title:"ç§»é¤",slug:"ç§»é¤",normalizedTitle:"ç§»é¤",charIndex:138},{level:3,title:"åå¨",slug:"åå¨",normalizedTitle:"åå¨",charIndex:145},{level:3,title:"ä¿®å¤",slug:"ä¿®å¤",normalizedTitle:"ä¿®å¤",charIndex:152},{level:2,title:"[6.1.8] - 2022-01-07 UTC+0800",slug:"_6-1-8-2022-01-07-utc-0800",normalizedTitle:"[6.1.8] - 2022-01-07 utc+0800",charIndex:201},{level:3,title:"ä¿®å¤",slug:"ä¿®å¤-2",normalizedTitle:"ä¿®å¤",charIndex:152},{level:2,title:"[6.1.7] - 2021-12-05 UTC+0800",slug:"_6-1-7-2021-12-05-utc-0800",normalizedTitle:"[6.1.7] - 2021-12-05 utc+0800",charIndex:294},{level:3,title:"ä¿®å¤",slug:"ä¿®å¤-3",normalizedTitle:"ä¿®å¤",charIndex:152},{level:2,title:"[6.1.6] - 2021-10-10 UTC+0800",slug:"_6-1-6-2021-10-10-utc-0800",normalizedTitle:"[6.1.6] - 2021-10-10 utc+0800",charIndex:411},{level:3,title:"ä¿®å¤",slug:"ä¿®å¤-4",normalizedTitle:"ä¿®å¤",charIndex:152},{level:2,title:"[6.1.5] - 2021-09-29 UTC+0800",slug:"_6-1-5-2021-09-29-utc-0800",normalizedTitle:"[6.1.5] - 2021-09-29 utc+0800",charIndex:583},{level:3,title:"ä¿®å¤",slug:"ä¿®å¤-5",normalizedTitle:"ä¿®å¤",charIndex:152},{level:2,title:"[6.1.4] - 2021-08-27 UTC+0800",slug:"_6-1-4-2021-08-27-utc-0800",normalizedTitle:"[6.1.4] - 2021-08-27 utc+0800",charIndex:702},{level:3,title:"ä¿®å¤",slug:"ä¿®å¤-6",normalizedTitle:"ä¿®å¤",charIndex:152},{level:2,title:"[6.1.3] - 2021-08-23 UTC+0800",slug:"_6-1-3-2021-08-23-utc-0800",normalizedTitle:"[6.1.3] - 2021-08-23 utc+0800",charIndex:795},{level:3,title:"æ°å¢",slug:"æ°å¢-2",normalizedTitle:"æ°å¢",charIndex:131},{level:3,title:"ä¿®å¤",slug:"ä¿®å¤-7",normalizedTitle:"ä¿®å¤",charIndex:152},{level:2,title:"[6.1.2] - 2021-08-11 UTC+0800",slug:"_6-1-2-2021-08-11-utc-0800",normalizedTitle:"[6.1.2] - 2021-08-11 utc+0800",charIndex:949},{level:3,title:"ä¿®å¤",slug:"ä¿®å¤-8",normalizedTitle:"ä¿®å¤",charIndex:152},{level:2,title:"[6.1.1] - 2021-08-04 UTC+0800",slug:"_6-1-1-2021-08-04-utc-0800",normalizedTitle:"[6.1.1] - 2021-08-04 utc+0800",charIndex:1086},{level:3,title:"ä¿®å¤",slug:"ä¿®å¤-9",normalizedTitle:"ä¿®å¤",charIndex:152},{level:2,title:"[6.1.0] - 2021-08-03 UTC+0800",slug:"_6-1-0-2021-08-03-utc-0800",normalizedTitle:"[6.1.0] - 2021-08-03 utc+0800",charIndex:1204},{level:3,title:"æ°å¢",slug:"æ°å¢-3",normalizedTitle:"æ°å¢",charIndex:131}],lastUpdated:"2022/1/10 ä¸å3:38:27",lastUpdatedTimestamp:1641829107e3,headersStr:"[æªåå¸] æ°å¢ ç§»é¤ åå¨ ä¿®å¤ [6.1.8] - 2022-01-07 UTC+0800 ä¿®å¤ [6.1.7] - 2021-12-05 UTC+0800 ä¿®å¤ [6.1.6] - 2021-10-10 UTC+0800 ä¿®å¤ [6.1.5] - 2021-09-29 UTC+0800 ä¿®å¤ [6.1.4] - 2021-08-27 UTC+0800 ä¿®å¤ [6.1.3] - 2021-08-23 UTC+0800 æ°å¢ ä¿®å¤ [6.1.2] - 2021-08-11 UTC+0800 ä¿®å¤ [6.1.1] - 2021-08-04 UTC+0800 ä¿®å¤ [6.1.0] - 2021-08-03 UTC+0800 æ°å¢",content:"# æ´æ°æ¥å¿ï¼LTSï¼\n\næ¬æä»¶çæ ¼å¼åºäºå¦ä½ç»´æ¤æ´æ°æ¥å¿ï¼ å¹¶ä¸æ¬é¡¹ç®éµå®è¯­ä¹åçæ¬ã\n\nä½ä¸ºãä¸å¼å®¹çä¿®æ¹ãï¼\n\n * åæçéç½®æä»¶å¯è½æ æ³ä½¿ç¨ï¼æ¯å¦å é¤æèéå½åäºæä¸ªéç½®é¡¹ã\n * å¯è½éè¦æ´æ°ç¼è¯ç¯å¢ï¼æ¯å¦å®è£æ°çä¾èµã\n\n\n# [æªåå¸]\n\n\n# æ°å¢\n\n\n# ç§»é¤\n\n\n# åå¨\n\n\n# ä¿®å¤\n\n----------------------------------------\n\n\n# [6.1.8] - 2022-01-07 UTC+0800\n\n\n# ä¿®å¤\n\n * åå­æ³æ¼ã\n\n----------------------------------------\n\n\n# [6.1.7] - 2021-12-05 UTC+0800\n\n\n# ä¿®å¤\n\n * æä»¤ waf_mode ä¸­ææä¸è¯·æ±æ¹æ³å¯¹åºçåæ°åå¤±æã\n\n----------------------------------------\n\n\n# [6.1.6] - 2021-10-10 UTC+0800\n\n\n# ä¿®å¤\n\n * ææ¶è¿æ¥ä¼è¢«è¿æ©å°å³é­ã\n\n * ææ¶æ²¡æè¯»åå®æ´çè¯·æ±ä½ã\n\n * æªè½æ­£ç¡®ç»§æ¿ä¸å±éç½®åç Referer é»ååã\n\n * ä¿®å¤äºä¸æ¡é»è®¤ç URL é»ååè§åã\n\n----------------------------------------\n\n\n# [6.1.5] - 2021-09-29 UTC+0800\n\n\n# ä¿®å¤\n\n * å½æä»¤ rewrite é æåé¨éå®åæ¶ä¼éè¯¯å°è·³è¿æææ£æµã\n\n----------------------------------------\n\n\n# [6.1.4] - 2021-08-27 UTC+0800\n\n\n# ä¿®å¤\n\n * åå­æ³é²ã\n\n----------------------------------------\n\n\n# [6.1.3] - 2021-08-23 UTC+0800\n\n\n# æ°å¢\n\n * å½ CC é²æ¤è¿å 444 ç¶æç æ¶ä¸åçæé¢å¤çååºå¤´ã\n\n\n# ä¿®å¤\n\n * ä¸è½æ­£ç¡®åå¹¶æä»¤ waf_http_statusã\n\n----------------------------------------\n\n\n# [6.1.2] - 2021-08-11 UTC+0800\n\n\n# ä¿®å¤\n\n * ä¸è½æ­£ç¡®è§£æ IP é»ç½ååä¸­ç 0.0.0.0/0ã\n\n * å¼å®¹ä¸æ¯æ IPV6 çè¿è¡ç¯å¢ã\n\n----------------------------------------\n\n\n# [6.1.1] - 2021-08-04 UTC+0800\n\n\n# ä¿®å¤\n\n * Under Attack Mode (UAM) ææ¶ä¼åºéã\n\n----------------------------------------\n\n\n# [6.1.0] - 2021-08-03 UTC+0800\n\n\n# æ°å¢\n\n * ä¸ºéç½®é¡¹ waf_mode å¢å äºä¸ä¸ªéé¡¹ã\n   * ADVï¼æ§å¶å¼å³é«çº§è§åã\n   * CMN-METHï¼ç­ä»·äº HEAD GET POSTã\n   * ALL-METHï¼ä»»æç HTTP è¯·æ±æ¹æ³é½ä¼å¯å¨æ£æ¥ã",normalizedContent:"# æ´æ°æ¥å¿ï¼ltsï¼\n\næ¬æä»¶çæ ¼å¼åºäºå¦ä½ç»´æ¤æ´æ°æ¥å¿ï¼ å¹¶ä¸æ¬é¡¹ç®éµå®è¯­ä¹åçæ¬ã\n\nä½ä¸ºãä¸å¼å®¹çä¿®æ¹ãï¼\n\n * åæçéç½®æä»¶å¯è½æ æ³ä½¿ç¨ï¼æ¯å¦å é¤æèéå½åäºæä¸ªéç½®é¡¹ã\n * å¯è½éè¦æ´æ°ç¼è¯ç¯å¢ï¼æ¯å¦å®è£æ°çä¾èµã\n\n\n# [æªåå¸]\n\n\n# æ°å¢\n\n\n# ç§»é¤\n\n\n# åå¨\n\n\n# ä¿®å¤\n\n----------------------------------------\n\n\n# [6.1.8] - 2022-01-07 utc+0800\n\n\n# ä¿®å¤\n\n * åå­æ³æ¼ã\n\n----------------------------------------\n\n\n# [6.1.7] - 2021-12-05 utc+0800\n\n\n# ä¿®å¤\n\n * æä»¤ waf_mode ä¸­ææä¸è¯·æ±æ¹æ³å¯¹åºçåæ°åå¤±æã\n\n----------------------------------------\n\n\n# [6.1.6] - 2021-10-10 utc+0800\n\n\n# ä¿®å¤\n\n * ææ¶è¿æ¥ä¼è¢«è¿æ©å°å³é­ã\n\n * ææ¶æ²¡æè¯»åå®æ´çè¯·æ±ä½ã\n\n * æªè½æ­£ç¡®ç»§æ¿ä¸å±éç½®åç referer é»ååã\n\n * ä¿®å¤äºä¸æ¡é»è®¤ç url é»ååè§åã\n\n----------------------------------------\n\n\n# [6.1.5] - 2021-09-29 utc+0800\n\n\n# ä¿®å¤\n\n * å½æä»¤ rewrite é æåé¨éå®åæ¶ä¼éè¯¯å°è·³è¿æææ£æµã\n\n----------------------------------------\n\n\n# [6.1.4] - 2021-08-27 utc+0800\n\n\n# ä¿®å¤\n\n * åå­æ³é²ã\n\n----------------------------------------\n\n\n# [6.1.3] - 2021-08-23 utc+0800\n\n\n# æ°å¢\n\n * å½ cc é²æ¤è¿å 444 ç¶æç æ¶ä¸åçæé¢å¤çååºå¤´ã\n\n\n# ä¿®å¤\n\n * ä¸è½æ­£ç¡®åå¹¶æä»¤ waf_http_statusã\n\n----------------------------------------\n\n\n# [6.1.2] - 2021-08-11 utc+0800\n\n\n# ä¿®å¤\n\n * ä¸è½æ­£ç¡®è§£æ ip é»ç½ååä¸­ç 0.0.0.0/0ã\n\n * å¼å®¹ä¸æ¯æ ipv6 çè¿è¡ç¯å¢ã\n\n----------------------------------------\n\n\n# [6.1.1] - 2021-08-04 utc+0800\n\n\n# ä¿®å¤\n\n * under attack mode (uam) ææ¶ä¼åºéã\n\n----------------------------------------\n\n\n# [6.1.0] - 2021-08-03 utc+0800\n\n\n# æ°å¢\n\n * ä¸ºéç½®é¡¹ waf_mode å¢å äºä¸ä¸ªéé¡¹ã\n   * advï¼æ§å¶å¼å³é«çº§è§åã\n   * cmn-methï¼ç­ä»·äº head get postã\n   * all-methï¼ä»»æç http è¯·æ±æ¹æ³é½ä¼å¯å¨æ£æ¥ã",charsets:{cjk:!0}},{title:"å®è£",frontmatter:{title:"å®è£",lang:"zh-CN",sidebarDepth:3},regularPath:"/zh-cn/guide/installation.html",relativePath:"zh-cn/guide/installation.md",key:"v-160d9024",path:"/zh-cn/guide/installation.html",headers:[{level:2,title:"éææ¨¡å",slug:"éææ¨¡å",normalizedTitle:"éææ¨¡å",charIndex:75},{level:2,title:"å¨ææ¨¡å",slug:"å¨ææ¨¡å",normalizedTitle:"å¨ææ¨¡å",charIndex:82},{level:3,title:"ä¸è½½é¢æå»ºçæ¨¡å",slug:"ä¸è½½é¢æå»ºçæ¨¡å",normalizedTitle:"ä¸è½½é¢æå»ºçæ¨¡å",charIndex:2435},{level:3,title:"ç¼è¯å¨ææ¨¡å",slug:"ç¼è¯å¨ææ¨¡å",normalizedTitle:"ç¼è¯å¨ææ¨¡å",charIndex:3215},{level:2,title:"å®å¡é¢æ¿",slug:"å®å¡é¢æ¿",normalizedTitle:"å®å¡é¢æ¿",charIndex:3718},{level:2,title:"åå¥ LNMP",slug:"åå¥-lnmp",normalizedTitle:"åå¥ lnmp",charIndex:6511}],lastUpdated:"2022/1/10 ä¸å3:38:27",lastUpdatedTimestamp:1641829107e3,headersStr:"éææ¨¡å å¨ææ¨¡å ä¸è½½é¢æå»ºçæ¨¡å ç¼è¯å¨ææ¨¡å å®å¡é¢æ¿ åå¥ LNMP",content:"# å®è£\n\nè¯·åéè¯»çæ¬è¯´ææ¥æéåéççæ¬ã\n\nnginx æä¾ä¸¤ç§å®è£æ¨¡åçæ¹å¼ï¼å³ãéæé¾æ¥ãåãå¨æå è½½ãï¼éè¿ä¸¤ç§æ¹å¼å®è£çæ¨¡åä¹åå«ç§°ä¸ºãéææ¨¡åãåãå¨ææ¨¡åãã\n\nä½ å¯ä»¥éè¿è¿è¡èæ¬ assets/guide.sh æ¥éæ©ä½¿ç¨éææ¨¡åè¿æ¯å¨ææ¨¡åã\n\nsh assets/guide.sh\n\n# It is recommended that you use dynamic modules.\n# å¦æè¾åºä¸é¢è¿è¡åå»ºè®®ä½¿ç¨å¨ææ¨¡åã\n\n# It is recommended that you use static modules.\n# å¦æè¾åºä¸é¢è¿è¡åå»ºè®®ä½¿ç¨éææ¨¡åã\n\n\n\n# éææ¨¡å\n\næ³¨æ\n\nç¼è¯å®è£æ¨¡åå¯è½éè¦ä¸äºä¾èµï¼æ¯å¦ gccï¼è¯·èªè¡è§£å³ä¾èµé®é¢ï¼æ¬æä¸æä¾è¿ç±»ä¿¡æ¯ã\n\néè¦ä¿¡æ¯\n\nç¼è¯å®è£ä¸ä¸ªæ°çæ¨¡åéè¦ç¥éå½åç nginx ç configure èæ¬çåæ°ï¼æ¨å¯ä»¥éè¿è¿è¡ nginx -V æ¥è·åã ä¸é¢æ¯ä¸ä¸ªä¾å­ã\n\nnginx version: nginx/1.19.6\nbuilt by gcc 9.3.0 (Ubuntu 9.3.0-17ubuntu1~20.04)\nbuilt with OpenSSL 1.1.1i  8 Dec 2020\nTLS SNI support enabled\nconfigure arguments: --with-mail=dynamic --with-openssl=/usr/local/src/openssl-OpenSSL_1_1_1i --prefix=/usr/local/nginx --user=nginx --group=nginx --with-file-aio --with-http_ssl_module --with-http_geoip_module --with-http_v2_module --with-http_realip_module --with-stream_ssl_preread_module --with-http_addition_module --with-http_xslt_module=dynamic --with-http_image_filter_module=dynamic --with-http_sub_module --with-http_dav_module --with-http_flv_module --with-http_mp4_module --with-http_gunzip_module --with-http_gzip_static_module --with-http_random_index_module --with-http_secure_link_module --with-http_degradation_module --with-http_slice_module --with-http_perl_module --with-http_stub_status_module --with-http_auth_request_module --with-mail=dynamic --with-mail_ssl_module --with-pcre --with-pcre-jit --with-stream=dynamic --with-stream_ssl_module --with-debug --with-cc-opt='-O3 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector-strong --param=ssp-buffer-size=4 -grecord-gcc-switches -m64 -mtune=generic'\n\n\nå¡å¿è®°ä½ configure arguments: åé¢çåå®¹ï¼ä¸æä¸­å°ä½¿ç¨ ARG æ¥ä»£æ¿è¿ååå®¹ã\n\nå®è£éææ¨¡åéè¦éæ°ç¼è¯æ´ä¸ª nginxï¼è±è´¹çæ¶é´ç¸å¯¹äºå®è£å¨ææ¨¡åæ¯è¾é¿ã\n\né¦åä¸è½½å¯¹åºçæ¬ç nginxï¼ä¸è½½é¡µé¢ã ä¸é¢å°ä»¥ nginx-1.20.1 ä¸ºä¾ã\n\ncd /usr/local/src\nwget https://nginx.org/download/nginx-1.20.1.tar.gz\ntar -zxf nginx-1.20.1.tar.gz\n\n\nç¶åä¸è½½æ¬æ¨¡åçæºç ï¼ä¸æå°ä½¿ç¨ç¨³å®ççæºç ã\n\ncd /usr/local/src\ngit clone -b lts https://github.com/ADD-SP/ngx_waf.git\n\n\næ¥ä¸æ¥åºè¯¥è¿è¡éç½®èæ¬ã\n\ncd /usr/local/src/nginx-1.20.1\n./configure ARG --add-module=/usr/local/src/ngx_waf\nsed -i 's/^\\(CFLAGS.*\\)/\\1 -fstack-protector-strong -Wno-sign-compare/' objs/Makefile\n\n\næ¥çæ¨å¼å§ç¼è¯äº\n\n# ä¸ä½¿ç¨å¹¶è¡ç¼è¯\nmake\n\n# ä½¿ç¨å¹¶è¡ç¼è¯\nmake -j$(nproc)\n\n\næ³¨æ\n\nå¹¶è¡ä¼æåç¼è¯éåº¦ï¼ä½æ¯ææ¦çåºç°è«åå¥å¦çéè¯¯ï¼å¦æå¹¶è¡ç¼è¯åºéï¼å¯ä»¥ç¦ç¨å¹¶è¡ç¼è¯ã\n\næåæ¨åºè¯¥å³é­ nginxï¼ç¶åæ¿æ¢ nginx çäºè¿å¶æä»¶ï¼ æ­¤å¤åè®¾ nginx çäºè¿å¶æä»¶çç»å¯¹è·¯å¾ä¸º /usr/local/nginx/sbin/nginxã\n\ncp objs/nginx /usr/local/nginx/sbin/nginx\n\n\nç­é¨ç½²\n\nå¦ææ¨ä¸æ³å¨æ¿æ¢äºè¿å¶æä»¶æ¶å³é­ nginxï¼å¯ä»¥åèå®æ¹ææ¡£çç­é¨ç½²æ¹æ¡ã\n\n\n# å¨ææ¨¡å\n\n\n# ä¸è½½é¢æå»ºçæ¨¡å\n\næ¨å¯ä»¥éè¿æ§è¡èæ¬ assets/download.sh æ¥ä¸è½½å¨ææ¨¡åãä¸é¢æ¯ä¸äºç¨ä¾ã\n\n# ç¨äº nginx-1.20.1 ç LTS ççæ¨¡å\nsh assets/download.sh 1.20.1 lts\n\n# ç¨äº nginx-1.21.1 ç LTS ççæ¨¡å\nsh assets/download.sh 1.21.1 lts\n\n# ç¨äº nginx-1.20.1 çææ°ççæ¨¡å\nsh assets/download.sh 1.20.1 current\n\n# ç¨äº nginx-1.21.1 çææ°ççæ¨¡å\nsh assets/download.sh 1.21.1 current\n\n\næ§è¡èæ¬åä½ ä¼çå°ç±»ä¼¼ä¸é¢è¿æ ·çè¾åºã\n\nchecking for command ... yes\nchecking for libc implementation ... yes\n + GNU C libary\nPulling remote image addsp/ngx_waf-prebuild:ngx-1.21.1-module-beta-glibc\n......\n......\n......\nDownload complete!\n\n\nå¦æä½ çå° Download complete! åè¯´æä¸è½½æåï¼æ¨¡åä¼è¢«ä¿å­å¨å½åç®å½ä¸ã ä½ å¯ä»¥å°å¶æ·è´å°ä¸ä¸ªç®å½ä¸ï¼ç¶åå¨ nginx.conf çé¡¶é¨æ·»å ä¸è¡ã\n\nload_module \"/path/to/ngx_http_waf_module.so\";\n\n\nç¶åå³é­ nginx å¹¶è¿è¡ nginx -tãå¦ææ²¡æåºéåè¯´ææ¨¡åè¢«æ­£å¸¸å è½½ï¼åä¹åè¯´ææ¨ç nginx ä¸æ¯æé¢æå»ºçæ¨¡åï¼è¯·ç¼è¯å®è£æ¨¡åã\n\næ³¨æ\n\nå½æä»¬æ´æ°äºæ¨¡ååï¼å¤§çº¦éè¦ä¸¤ä¸ªå°æ¶æ¥ç¼è¯åä¸ä¼ æ¨¡åã\n\n\n# ç¼è¯å¨ææ¨¡å\n\nç¼è¯å®è£å¨ææ¨¡åå¹¶ä¸éè¦éæ°ç¼è¯æ´ä¸ª nginxï¼åªéè¦éæ°ç¼è¯ææçæ¨¡åï¼æä»¥ éåº¦ç¸å¯¹éææ¨¡åå¿«ä¸äºï¼è¿ä¹æ¯æ¬ææ¡£æ¨èçæ¹å¼ã\n\nä¸è½½ nginx æºç åæ¨¡åæºç çè¿ç¨åéææ¨¡åï¼ä¸åèµè¿°ã\n\nè¿è¡éç½®èæ¬\n\n./configure --add-dynamic-module=/usr/local/src/ngx_waf --with-compat\nsed -i 's/^\\(CFLAGS.*\\)/\\1 -fstack-protector-strong -Wno-sign-compare/' objs/Makefile\n\n\nç¶åå¼å§ç¼è¯å¨ææ¨¡å\n\nmake modules\n\n\næ¥çæ¨åºè¯¥å³é­ nginxï¼ç¶åå°å¨ææ¨¡åæ·è´å°æ¨¡åç®å½ï¼ æ­¤å¤åè®¾æ¨¡åç®å½çç»å¯¹è·¯å¾ä¸º /usr/local/nginx/modulesã\n\ncp objs/*.so /usr/local/nginx/modules\n\n\næåå¨ nginx çéç½®æä»¶é¡¶é¨æ·»å ä¸è¡\n\nload_module \"/usr/local/nginx/modules/ngx_http_waf_module.so\";\n\n\n\n# å®å¡é¢æ¿\n\n 1. å¨ shell ä¸­è¿è¡å½ä»¤\n    \n    # Centos7\n    yum update\n    yum install libtool\n    yum install https://archives.fedoraproject.org/pub/archive/fedora/linux/updates/23/x86_64/b/bison-3.0.4-3.fc23.x86_64.rpm\n    yum install gcc-c++ flex bison yajl yajl-devel curl-devel curl GeoIP-devel doxygen zlib-devel pcre-devel git libcurl libcurl-devel\n    cd /usr/local/src\n    git clone https://github.com/jedisct1/libsodium.git --branch stable\n    cd libsodium\n    ./configure --prefix=/usr/local/libsodium --with-pic\n    make -j$(nproc)\n    make install\n    \n    # å¦æä½ ä½¿ç¨ Current çæ¬è¯·æ·»å è¿äºä»£ç \n    # å®è£ ModSecurity v3\n    cd /usr/local/src\n    git clone -b v3.0.6 https://github.com/SpiderLabs/ModSecurity.git\n    cd ModSecurity\n    chmod +x build.sh\n    ./build.sh\n    git submodule init\n    git submodule update\n    ./configure --prefix=/usr/local/modsecurity\n    make -j$(nproc)\n    make install\n    \n    # ======== åå²çº¿ ========\n    \n    # Ubuntu\n    apt update\n    apt install -y libsodium23  \\\n        libsodium-dev           \\\n        libcurl4-openssl-dev    \\\n        git                     \\\n        libmodsecurity-dev      \\\n        libmodsecurity3\n    \n\n 2. å¨è½¯ä»¶ååºä¸­å¸è½½ nginxã\n\n 3. ç¼è¾æä»¶ /etc/profileï¼å¨æ«å°¾è¿½å ä¸ååå®¹ã\n    \n    export LIB_UTHASH=/www/server/nginx/src/uthash\n    \n    # å¦ææä½ç³»ç»ç Ubuntu åä¸ç¨åä¸é¢è¿ä¸¤è¡\n    export LIB_SODIUM=/usr/local/libsodium\n    export LIB_MODSECURITY=/usr/local/modsecurity\n    \n\n 4. å¨ shell ä¸­è¿è¡ä¸åå½ä»¤\n    \n    source /etc/profile\n    \n\n 5. æ¸ç©ºå®å¡é¢æ¿ç¼å­ï¼éå¯å®å¡é¢æ¿ï¼éæ°ç»å½å®å¡é¢æ¿ã\n\n 6. å¨è½¯ä»¶ååºä¸­éæ°å®è£ nginxï¼å®è£æ¹å¼éæ©ãç¼è¯å®è£ãã\n\n 7. éæ©ãæ·»å èªå®ä¹æ¨¡åãï¼å¡«åå¥½ä¹åç¹å»ãæäº¤ã\n    \n    * æ¨¡ååç§°ï¼ngx_waf\n    * æ¨¡åæè¿°ï¼æ¹ä¾¿ä¸é«æ§è½ç Nginx é²ç«å¢æ¨¡å\n    * æ¨¡ååæ°ï¼\n      \n      --add-module=/www/server/nginx/src/ngx_waf --with-cc-opt=-std=gnu99\n      \n    \n    * åç½®èæ¬ï¼LTS çï¼ï¼\n      \n      mkdir -p /www/server/nginx/src\n      cd /www/server/nginx/src\n      git clone -b lts https://github.com/ADD-SP/ngx_waf.git\n      rm -rf /usr/local/src/ngx_waf\n      cp -r ngx_waf /usr/local/src/ngx_waf\n      cd ngx_waf\n      make\n      git clone https://github.com/libinjection/libinjection.git inc/libinjection\n      cd /www/server/nginx/src\n      git clone https://github.com/troydhanson/uthash.git inc/uthash\n      \n    \n    * åç½®èæ¬ï¼Current çï¼ï¼\n      \n      mkdir -p /www/server/nginx/src\n      cd /www/server/nginx/src\n      git clone -b current https://github.com/ADD-SP/ngx_waf.git\n      rm -rf /usr/local/src/ngx_waf\n      cp -r ngx_waf /usr/local/src/ngx_waf\n      cd ngx_waf\n      git clone -b v1.7.15 https://github.com/DaveGamble/cJSON.git lib/cjson\n      git clone -b v2.3.0 https://github.com/troydhanson/uthash.git lib/uthash\n      cd /www/server/nginx/src\n      \n      \n\n 8. è¿æ¶ä½ ä¼çå° ngx_waf å·²ç»æ·»å è¿å»äºï¼å¨æ¨¡ååè¡¨ä¸­æä¸å¾ä¹åç¹å»ãæäº¤ãç­å¾å®è£å®æã\n\n 9. å®è£æååå é¤ç¬¬ä¸æ­¥ä¸­åæä»¶ /etc/profile ä¸­æ·»å çåå®¹ã\n\næ¥éäºæä¹åï¼\n\nä½ å¯ä»¥éæ©å» Github æ issue æèèªå·±è§£å³ï¼ç¼è¯å®è£ç¬¬ä¸æ¹ nginx æ¨¡åå°±è¦æèªå·±è§£å³é®é¢çå°±è§æã\n\n\n# åå¥ LNMP\n\nåè ngx_wafï¼ä¸æ¬¾é«å¤§å¨ç Nginx ç½ç«é²ç«å¢æ¨¡å - åµæ¯åºé¨è½ã",normalizedContent:"# å®è£\n\nè¯·åéè¯»çæ¬è¯´ææ¥æéåéççæ¬ã\n\nnginx æä¾ä¸¤ç§å®è£æ¨¡åçæ¹å¼ï¼å³ãéæé¾æ¥ãåãå¨æå è½½ãï¼éè¿ä¸¤ç§æ¹å¼å®è£çæ¨¡åä¹åå«ç§°ä¸ºãéææ¨¡åãåãå¨ææ¨¡åãã\n\nä½ å¯ä»¥éè¿è¿è¡èæ¬ assets/guide.sh æ¥éæ©ä½¿ç¨éææ¨¡åè¿æ¯å¨ææ¨¡åã\n\nsh assets/guide.sh\n\n# it is recommended that you use dynamic modules.\n# å¦æè¾åºä¸é¢è¿è¡åå»ºè®®ä½¿ç¨å¨ææ¨¡åã\n\n# it is recommended that you use static modules.\n# å¦æè¾åºä¸é¢è¿è¡åå»ºè®®ä½¿ç¨éææ¨¡åã\n\n\n\n# éææ¨¡å\n\næ³¨æ\n\nç¼è¯å®è£æ¨¡åå¯è½éè¦ä¸äºä¾èµï¼æ¯å¦ gccï¼è¯·èªè¡è§£å³ä¾èµé®é¢ï¼æ¬æä¸æä¾è¿ç±»ä¿¡æ¯ã\n\néè¦ä¿¡æ¯\n\nç¼è¯å®è£ä¸ä¸ªæ°çæ¨¡åéè¦ç¥éå½åç nginx ç configure èæ¬çåæ°ï¼æ¨å¯ä»¥éè¿è¿è¡ nginx -v æ¥è·åã ä¸é¢æ¯ä¸ä¸ªä¾å­ã\n\nnginx version: nginx/1.19.6\nbuilt by gcc 9.3.0 (ubuntu 9.3.0-17ubuntu1~20.04)\nbuilt with openssl 1.1.1i  8 dec 2020\ntls sni support enabled\nconfigure arguments: --with-mail=dynamic --with-openssl=/usr/local/src/openssl-openssl_1_1_1i --prefix=/usr/local/nginx --user=nginx --group=nginx --with-file-aio --with-http_ssl_module --with-http_geoip_module --with-http_v2_module --with-http_realip_module --with-stream_ssl_preread_module --with-http_addition_module --with-http_xslt_module=dynamic --with-http_image_filter_module=dynamic --with-http_sub_module --with-http_dav_module --with-http_flv_module --with-http_mp4_module --with-http_gunzip_module --with-http_gzip_static_module --with-http_random_index_module --with-http_secure_link_module --with-http_degradation_module --with-http_slice_module --with-http_perl_module --with-http_stub_status_module --with-http_auth_request_module --with-mail=dynamic --with-mail_ssl_module --with-pcre --with-pcre-jit --with-stream=dynamic --with-stream_ssl_module --with-debug --with-cc-opt='-o3 -g -pipe -wall -wp,-d_fortify_source=2 -fexceptions -fstack-protector-strong --param=ssp-buffer-size=4 -grecord-gcc-switches -m64 -mtune=generic'\n\n\nå¡å¿è®°ä½ configure arguments: åé¢çåå®¹ï¼ä¸æä¸­å°ä½¿ç¨ arg æ¥ä»£æ¿è¿ååå®¹ã\n\nå®è£éææ¨¡åéè¦éæ°ç¼è¯æ´ä¸ª nginxï¼è±è´¹çæ¶é´ç¸å¯¹äºå®è£å¨ææ¨¡åæ¯è¾é¿ã\n\né¦åä¸è½½å¯¹åºçæ¬ç nginxï¼ä¸è½½é¡µé¢ã ä¸é¢å°ä»¥ nginx-1.20.1 ä¸ºä¾ã\n\ncd /usr/local/src\nwget https://nginx.org/download/nginx-1.20.1.tar.gz\ntar -zxf nginx-1.20.1.tar.gz\n\n\nç¶åä¸è½½æ¬æ¨¡åçæºç ï¼ä¸æå°ä½¿ç¨ç¨³å®ççæºç ã\n\ncd /usr/local/src\ngit clone -b lts https://github.com/add-sp/ngx_waf.git\n\n\næ¥ä¸æ¥åºè¯¥è¿è¡éç½®èæ¬ã\n\ncd /usr/local/src/nginx-1.20.1\n./configure arg --add-module=/usr/local/src/ngx_waf\nsed -i 's/^\\(cflags.*\\)/\\1 -fstack-protector-strong -wno-sign-compare/' objs/makefile\n\n\næ¥çæ¨å¼å§ç¼è¯äº\n\n# ä¸ä½¿ç¨å¹¶è¡ç¼è¯\nmake\n\n# ä½¿ç¨å¹¶è¡ç¼è¯\nmake -j$(nproc)\n\n\næ³¨æ\n\nå¹¶è¡ä¼æåç¼è¯éåº¦ï¼ä½æ¯ææ¦çåºç°è«åå¥å¦çéè¯¯ï¼å¦æå¹¶è¡ç¼è¯åºéï¼å¯ä»¥ç¦ç¨å¹¶è¡ç¼è¯ã\n\næåæ¨åºè¯¥å³é­ nginxï¼ç¶åæ¿æ¢ nginx çäºè¿å¶æä»¶ï¼ æ­¤å¤åè®¾ nginx çäºè¿å¶æä»¶çç»å¯¹è·¯å¾ä¸º /usr/local/nginx/sbin/nginxã\n\ncp objs/nginx /usr/local/nginx/sbin/nginx\n\n\nç­é¨ç½²\n\nå¦ææ¨ä¸æ³å¨æ¿æ¢äºè¿å¶æä»¶æ¶å³é­ nginxï¼å¯ä»¥åèå®æ¹ææ¡£çç­é¨ç½²æ¹æ¡ã\n\n\n# å¨ææ¨¡å\n\n\n# ä¸è½½é¢æå»ºçæ¨¡å\n\næ¨å¯ä»¥éè¿æ§è¡èæ¬ assets/download.sh æ¥ä¸è½½å¨ææ¨¡åãä¸é¢æ¯ä¸äºç¨ä¾ã\n\n# ç¨äº nginx-1.20.1 ç lts ççæ¨¡å\nsh assets/download.sh 1.20.1 lts\n\n# ç¨äº nginx-1.21.1 ç lts ççæ¨¡å\nsh assets/download.sh 1.21.1 lts\n\n# ç¨äº nginx-1.20.1 çææ°ççæ¨¡å\nsh assets/download.sh 1.20.1 current\n\n# ç¨äº nginx-1.21.1 çææ°ççæ¨¡å\nsh assets/download.sh 1.21.1 current\n\n\næ§è¡èæ¬åä½ ä¼çå°ç±»ä¼¼ä¸é¢è¿æ ·çè¾åºã\n\nchecking for command ... yes\nchecking for libc implementation ... yes\n + gnu c libary\npulling remote image addsp/ngx_waf-prebuild:ngx-1.21.1-module-beta-glibc\n......\n......\n......\ndownload complete!\n\n\nå¦æä½ çå° download complete! åè¯´æä¸è½½æåï¼æ¨¡åä¼è¢«ä¿å­å¨å½åç®å½ä¸ã ä½ å¯ä»¥å°å¶æ·è´å°ä¸ä¸ªç®å½ä¸ï¼ç¶åå¨ nginx.conf çé¡¶é¨æ·»å ä¸è¡ã\n\nload_module \"/path/to/ngx_http_waf_module.so\";\n\n\nç¶åå³é­ nginx å¹¶è¿è¡ nginx -tãå¦ææ²¡æåºéåè¯´ææ¨¡åè¢«æ­£å¸¸å è½½ï¼åä¹åè¯´ææ¨ç nginx ä¸æ¯æé¢æå»ºçæ¨¡åï¼è¯·ç¼è¯å®è£æ¨¡åã\n\næ³¨æ\n\nå½æä»¬æ´æ°äºæ¨¡ååï¼å¤§çº¦éè¦ä¸¤ä¸ªå°æ¶æ¥ç¼è¯åä¸ä¼ æ¨¡åã\n\n\n# ç¼è¯å¨ææ¨¡å\n\nç¼è¯å®è£å¨ææ¨¡åå¹¶ä¸éè¦éæ°ç¼è¯æ´ä¸ª nginxï¼åªéè¦éæ°ç¼è¯ææçæ¨¡åï¼æä»¥ éåº¦ç¸å¯¹éææ¨¡åå¿«ä¸äºï¼è¿ä¹æ¯æ¬ææ¡£æ¨èçæ¹å¼ã\n\nä¸è½½ nginx æºç åæ¨¡åæºç çè¿ç¨åéææ¨¡åï¼ä¸åèµè¿°ã\n\nè¿è¡éç½®èæ¬\n\n./configure --add-dynamic-module=/usr/local/src/ngx_waf --with-compat\nsed -i 's/^\\(cflags.*\\)/\\1 -fstack-protector-strong -wno-sign-compare/' objs/makefile\n\n\nç¶åå¼å§ç¼è¯å¨ææ¨¡å\n\nmake modules\n\n\næ¥çæ¨åºè¯¥å³é­ nginxï¼ç¶åå°å¨ææ¨¡åæ·è´å°æ¨¡åç®å½ï¼ æ­¤å¤åè®¾æ¨¡åç®å½çç»å¯¹è·¯å¾ä¸º /usr/local/nginx/modulesã\n\ncp objs/*.so /usr/local/nginx/modules\n\n\næåå¨ nginx çéç½®æä»¶é¡¶é¨æ·»å ä¸è¡\n\nload_module \"/usr/local/nginx/modules/ngx_http_waf_module.so\";\n\n\n\n# å®å¡é¢æ¿\n\n 1. å¨ shell ä¸­è¿è¡å½ä»¤\n    \n    # centos7\n    yum update\n    yum install libtool\n    yum install https://archives.fedoraproject.org/pub/archive/fedora/linux/updates/23/x86_64/b/bison-3.0.4-3.fc23.x86_64.rpm\n    yum install gcc-c++ flex bison yajl yajl-devel curl-devel curl geoip-devel doxygen zlib-devel pcre-devel git libcurl libcurl-devel\n    cd /usr/local/src\n    git clone https://github.com/jedisct1/libsodium.git --branch stable\n    cd libsodium\n    ./configure --prefix=/usr/local/libsodium --with-pic\n    make -j$(nproc)\n    make install\n    \n    # å¦æä½ ä½¿ç¨ current çæ¬è¯·æ·»å è¿äºä»£ç \n    # å®è£ modsecurity v3\n    cd /usr/local/src\n    git clone -b v3.0.6 https://github.com/spiderlabs/modsecurity.git\n    cd modsecurity\n    chmod +x build.sh\n    ./build.sh\n    git submodule init\n    git submodule update\n    ./configure --prefix=/usr/local/modsecurity\n    make -j$(nproc)\n    make install\n    \n    # ======== åå²çº¿ ========\n    \n    # ubuntu\n    apt update\n    apt install -y libsodium23  \\\n        libsodium-dev           \\\n        libcurl4-openssl-dev    \\\n        git                     \\\n        libmodsecurity-dev      \\\n        libmodsecurity3\n    \n\n 2. å¨è½¯ä»¶ååºä¸­å¸è½½ nginxã\n\n 3. ç¼è¾æä»¶ /etc/profileï¼å¨æ«å°¾è¿½å ä¸ååå®¹ã\n    \n    export lib_uthash=/www/server/nginx/src/uthash\n    \n    # å¦ææä½ç³»ç»ç ubuntu åä¸ç¨åä¸é¢è¿ä¸¤è¡\n    export lib_sodium=/usr/local/libsodium\n    export lib_modsecurity=/usr/local/modsecurity\n    \n\n 4. å¨ shell ä¸­è¿è¡ä¸åå½ä»¤\n    \n    source /etc/profile\n    \n\n 5. æ¸ç©ºå®å¡é¢æ¿ç¼å­ï¼éå¯å®å¡é¢æ¿ï¼éæ°ç»å½å®å¡é¢æ¿ã\n\n 6. å¨è½¯ä»¶ååºä¸­éæ°å®è£ nginxï¼å®è£æ¹å¼éæ©ãç¼è¯å®è£ãã\n\n 7. éæ©ãæ·»å èªå®ä¹æ¨¡åãï¼å¡«åå¥½ä¹åç¹å»ãæäº¤ã\n    \n    * æ¨¡ååç§°ï¼ngx_waf\n    * æ¨¡åæè¿°ï¼æ¹ä¾¿ä¸é«æ§è½ç nginx é²ç«å¢æ¨¡å\n    * æ¨¡ååæ°ï¼\n      \n      --add-module=/www/server/nginx/src/ngx_waf --with-cc-opt=-std=gnu99\n      \n    \n    * åç½®èæ¬ï¼lts çï¼ï¼\n      \n      mkdir -p /www/server/nginx/src\n      cd /www/server/nginx/src\n      git clone -b lts https://github.com/add-sp/ngx_waf.git\n      rm -rf /usr/local/src/ngx_waf\n      cp -r ngx_waf /usr/local/src/ngx_waf\n      cd ngx_waf\n      make\n      git clone https://github.com/libinjection/libinjection.git inc/libinjection\n      cd /www/server/nginx/src\n      git clone https://github.com/troydhanson/uthash.git inc/uthash\n      \n    \n    * åç½®èæ¬ï¼current çï¼ï¼\n      \n      mkdir -p /www/server/nginx/src\n      cd /www/server/nginx/src\n      git clone -b current https://github.com/add-sp/ngx_waf.git\n      rm -rf /usr/local/src/ngx_waf\n      cp -r ngx_waf /usr/local/src/ngx_waf\n      cd ngx_waf\n      git clone -b v1.7.15 https://github.com/davegamble/cjson.git lib/cjson\n      git clone -b v2.3.0 https://github.com/troydhanson/uthash.git lib/uthash\n      cd /www/server/nginx/src\n      \n      \n\n 8. è¿æ¶ä½ ä¼çå° ngx_waf å·²ç»æ·»å è¿å»äºï¼å¨æ¨¡ååè¡¨ä¸­æä¸å¾ä¹åç¹å»ãæäº¤ãç­å¾å®è£å®æã\n\n 9. å®è£æååå é¤ç¬¬ä¸æ­¥ä¸­åæä»¶ /etc/profile ä¸­æ·»å çåå®¹ã\n\næ¥éäºæä¹åï¼\n\nä½ å¯ä»¥éæ©å» github æ issue æèèªå·±è§£å³ï¼ç¼è¯å®è£ç¬¬ä¸æ¹ nginx æ¨¡åå°±è¦æèªå·±è§£å³é®é¢çå°±è§æã\n\n\n# åå¥ lnmp\n\nåè ngx_wafï¼ä¸æ¬¾é«å¤§å¨ç nginx ç½ç«é²ç«å¢æ¨¡å - åµæ¯åºé¨è½ã",charsets:{cjk:!0}},{title:"æ¦è¿°",frontmatter:{title:"æ¦è¿°",lang:"zh-CN"},regularPath:"/zh-cn/changes/overview.html",relativePath:"zh-cn/changes/overview.md",key:"v-f3511518",path:"/zh-cn/changes/overview.html",headers:[{level:2,title:"é¿æç»´æ¤çï¼LTSï¼",slug:"é¿æç»´æ¤ç-lts",normalizedTitle:"é¿æç»´æ¤çï¼ltsï¼",charIndex:22},{level:2,title:"ææ°çï¼Currentï¼",slug:"ææ°ç-current",normalizedTitle:"ææ°çï¼currentï¼",charIndex:35},{level:2,title:"æ§çæ¬",slug:"æ§çæ¬",normalizedTitle:"æ§çæ¬",charIndex:198}],lastUpdated:"2022/1/10 ä¸å3:38:27",lastUpdatedTimestamp:1641829107e3,headersStr:"é¿æç»´æ¤çï¼LTSï¼ ææ°çï¼Currentï¼ æ§çæ¬",content:"# æ¦è¿°\n\næ¬é¡¹ç®ç»´æ¤ä¸¤ä¸ªåå¸æµç¨ï¼åå«æ¯ãé¿æç»´æ¤çï¼LTSï¼ãåãææ°çï¼Currentï¼ãã\n\n\n# é¿æç»´æ¤çï¼LTSï¼\n\né¿æç»´æ¤çè³å°ç»´æ¤ä¸å¹´ï¼å¹¶ä¸ç»´æ¤æé´åªä¼ä¿®å¤ bugï¼ç¹å«çæ¯ä¸¥éç bugï¼ä¸äºæ¯è¾è½»ç bug å¯è½ä¸ä¼ä¿®å¤ã\n\n\n# ææ°çï¼Currentï¼\n\nææ°çç bug ä¹ä¼è¢«ä¿®å¤ï¼ä½æ¯ææ°çåå«äºå¨é¨çæ´æ°ï¼æ¯å¦æ°åè½ãåè½åå¨ãåè½å é¤ãæ§è½ä¼åç­ã\n\n\n# æ§çæ¬\n\n * 6.0.x\n * 5.x.x\n * 4.x.x\n * 3.x.x\n * 2.x.x",normalizedContent:"# æ¦è¿°\n\næ¬é¡¹ç®ç»´æ¤ä¸¤ä¸ªåå¸æµç¨ï¼åå«æ¯ãé¿æç»´æ¤çï¼ltsï¼ãåãææ°çï¼currentï¼ãã\n\n\n# é¿æç»´æ¤çï¼ltsï¼\n\né¿æç»´æ¤çè³å°ç»´æ¤ä¸å¹´ï¼å¹¶ä¸ç»´æ¤æé´åªä¼ä¿®å¤ bugï¼ç¹å«çæ¯ä¸¥éç bugï¼ä¸äºæ¯è¾è½»ç bug å¯è½ä¸ä¼ä¿®å¤ã\n\n\n# ææ°çï¼currentï¼\n\nææ°çç bug ä¹ä¼è¢«ä¿®å¤ï¼ä½æ¯ææ°çåå«äºå¨é¨çæ´æ°ï¼æ¯å¦æ°åè½ãåè½åå¨ãåè½å é¤ãæ§è½ä¼åç­ã\n\n\n# æ§çæ¬\n\n * 6.0.x\n * 5.x.x\n * 4.x.x\n * 3.x.x\n * 2.x.x",charsets:{cjk:!0}},{title:"ç®ä»",frontmatter:{title:"ç®ä»",lang:"zh-CN"},regularPath:"/zh-cn/guide/overview.html",relativePath:"zh-cn/guide/overview.md",key:"v-2cb65f34",path:"/zh-cn/guide/overview.html",headers:[{level:2,title:"ä¸ºä»ä¹éæ© ngx_waf",slug:"ä¸ºä»ä¹éæ©-ngx-waf",normalizedTitle:"ä¸ºä»ä¹éæ© ngx_waf",charIndex:31},{level:2,title:"åè½",slug:"åè½",normalizedTitle:"åè½",charIndex:317},{level:2,title:"èç³»æ¹å¼",slug:"èç³»æ¹å¼",normalizedTitle:"èç³»æ¹å¼",charIndex:809},{level:2,title:"æèµ",slug:"æèµ",normalizedTitle:"æèµ",charIndex:952},{level:2,title:"æµè¯å¥ä»¶",slug:"æµè¯å¥ä»¶",normalizedTitle:"æµè¯å¥ä»¶",charIndex:1024},{level:2,title:"æ§è½æµè¯",slug:"æ§è½æµè¯",normalizedTitle:"æ§è½æµè¯",charIndex:1410},{level:2,title:"é²è°",slug:"é²è°",normalizedTitle:"é²è°",charIndex:1425},{level:2,title:"æè°¢",slug:"æè°¢",normalizedTitle:"æè°¢",charIndex:1062}],lastUpdated:"2022/1/10 ä¸å3:38:27",lastUpdatedTimestamp:1641829107e3,headersStr:"ä¸ºä»ä¹éæ© ngx_waf åè½ èç³»æ¹å¼ æèµ æµè¯å¥ä»¶ æ§è½æµè¯ é²è° æè°¢",content:"# ç®ä»\n\næ¹ä¾¿åé«æ§è½ç Nginx é²ç«å¢æ¨¡åã\n\n\n# ä¸ºä»ä¹éæ© ngx_waf\n\n * åºç¡é²æ¤ï¼å¦ IP æ IP ç½æ®µçé»ç½ååãURI é»ç½åååè¯·æ±ä½é»ååç­ã\n * ä½¿ç¨ç®åï¼éç½®æä»¶åè§åæä»¶ä¹¦åç®åï¼å¯è¯»æ§å¼ºã\n * é«æ§è½ï¼ä½¿ç¨é«æç IP æ£æ¥ç®æ³åç¼å­æºå¶ã\n * é«çº§é²æ¤ï¼å¼å®¹ ModSecurityï¼å æ­¤ä½ å¯ä»¥ä½¿ç¨å¼æ¾å¼ç½ç»åºç¨å®å¨é¡¹ç®ï¼OWASPï¼Â® çæ ¸å¿è§ååºã\n * åå¥½ç¬è«éªè¯ï¼æ¯æéªè¯ GoogleãBingãBaidu å Yandex çç¬è«å¹¶èªå¨æ¾è¡ï¼é¿åéè¯¯æ¦æªã\n * éªè¯ç ï¼æ¯æä¸ç§éªè¯ç ï¼hCaptchaãreCAPTCHAv2 å reCAPTCHAv3ã\n\n\n# åè½\n\n * å¼å®¹ ModSecurityãæ­¤åè½ä»éææ°ç Current çæ¬ã\n * SQL æ³¨å¥é²æ¤ï¼Powered By libinjectionï¼ã\n * XSS æ»å»é²æ¤ï¼Powered By libinjectionï¼ã\n * æ¯æ IPV4 å IPV6ã\n * æ¯æå¼å¯éªè¯ç ï¼CAPTCHA)ï¼æ¯æ hCaptchaãreCAPTCHAv2 å reCAPTCHAv3ã\n * æ¯æè¯å«åå¥½ç¬è«ï¼å¦ BaiduSpiderï¼å¹¶èªå¨æ¾è¡ï¼åºäº User-Agent å IP çè¯å«ï¼ãæ­¤åè½ä»éææ°ç Current çæ¬ã\n * CC é²å¾¡ï¼è¶åºéå¶åèªå¨æé»å¯¹åº IP ä¸æ®µæ¶é´æèä½¿ç¨éªè¯ç åäººæºè¯å«ã\n * IP é»ç½ååï¼åæ¶æ¯æç±»ä¼¼ 192.168.0.0/16 å fe80::/10ï¼å³æ¯æç¹ååè¿å¶ååå·åå­è¿å¶è¡¨ç¤ºæ³åç½æ®µååã\n * POST é»ååã\n * URL é»ç½åå\n * æ¥è¯¢å­ç¬¦ä¸²ï¼Query Stringï¼é»ååã\n * UserAgent é»ååã\n * Cookie é»ååã\n * Referer é»ç½ååã\n\n\n# èç³»æ¹å¼\n\n * Telegram é¢é: https://t.me/ngx_waf\n * Telegram ç¾¤ç»ï¼è±æï¼: https://t.me/group_ngx_waf\n * Telegram ç¾¤ä¸»ï¼ä¸­æï¼ï¼https://t.me/group_ngx_waf_cn\n\n\n# æèµ\n\næèµå°±ç®äºï¼å¦ææ¨æ¿æï¼æ¨å¯ä»¥å¸®å©å®£ä¼ ä¸ä¸æ¬é¡¹ç®ãæ¯å¦åä¸ªè´´ï¼æ¨èç»èº«è¾¹æéæ±çäººä»ä¹çã\n\næä»æ¥æ²¡ç¢°è¿é±ï¼æå¯¹é±æ²¡æå´è¶£ã\n\n\n# æµè¯å¥ä»¶\n\næ¬é¡¹ç®ä½¿ç¨ä¸ä¸ª Perl å¼åçæ°æ®é©±å¨åçæµè¯å¥ä»¶è¿è¡æµè¯ã æè°¢é¡¹ç® Test::Nginx åå¶å¼åèä»¬ã\n\nä½ å¯ä»¥éè¿ä¸åå½ä»¤æ¥è¿è¡æµè¯ã\n\n# è¿è¡å½ä»¤çæ§è¡æ¶é´æ¯è¾é¿ï¼ä½æ¯ä»¥ååæµè¯çæ¶åå°±ä¸éè¦è¿è¡äºã\ncpan Test::Nginx\n\n# ä½ éè¦æå®ä¸ä¸ªä¸´æ¶ç®å½ã\n# å¦æç®å½ä¸å­å¨ä¼èªå¨åå»ºã\n# å¦æç®å½å·²ç»ä¼è¢«å­å¨åä¼å**å é¤**ååå»ºã\nexport MODULE_TEST_PATH=/path/to/temp/dir\n\n# å¦æä½ å®è£äºå¨ææ¨¡ååéè¦æå®å¨ææ¨¡åçç»å¯¹è·¯å¾ï¼åä¹åæ éæ§è¡è¿è¡å½ä»¤ã\nexport MODULE_PATH=/path/to/ngx_http_waf_module.so\n\ncd ./test/test-nginx\nsh ./init.sh\nsh ./start.sh ./t/*.t\n\n\n\n# æ§è½æµè¯\n\næ§è½æµè¯\n\n\n# é²è°\n\nnginx é²ç«å¢æ¨¡åå¼åæ»ç»\n\næ¬¢è¿è®¿é®æçåå®¢ï¼https://www.addesp.com/ã\n\n\n# æè°¢\n\n * ModSecurityï¼å¼æºä¸è·¨å¹³å°ç WAF å¼æã\n * uthashï¼C è¯­è¨çåå¸è¡¨ãæ°ç»ãé¾è¡¨ç­å®¹å¨åºã\n * libcurlï¼æ¯æå¤ç§åè®®æä»¶ä¼ è¾åºã\n * cJSONï¼C è¯­è¨çè½»éçº§ JSON è§£æåºã\n * libinjectionï¼SQL æ³¨å¥æ£æµåºã\n * libsodiumï¼C è¯­è¨å¯ç å½æ°åºã\n * test-nginx: æ°æ®é©±å¨ç nginx æµè¯å¥ä»¶ï¼å¯ç¨äº nginx C æ¨¡åçå¼åå OpenResty Lua åºçå¼åã\n * lastversionï¼ä¸ä¸ªè½»å·§çå½ä»¤è¡å·¥å·ï¼å¸®å©ä½ ä¸è½½æå®è£ä¸ä¸ªé¡¹ç®çç¹å®çæ¬ã\n * ngx_lua_wafï¼ä¸ä¸ªåºäº lua-nginx-module (openresty) ç web åºç¨é²ç«å¢ã\n * nginx-bookï¼Nginxå¼åä»å¥é¨å°ç²¾é\n * nginx-development-guideï¼Nginx å¼åæåã",normalizedContent:"# ç®ä»\n\næ¹ä¾¿åé«æ§è½ç nginx é²ç«å¢æ¨¡åã\n\n\n# ä¸ºä»ä¹éæ© ngx_waf\n\n * åºç¡é²æ¤ï¼å¦ ip æ ip ç½æ®µçé»ç½ååãuri é»ç½åååè¯·æ±ä½é»ååç­ã\n * ä½¿ç¨ç®åï¼éç½®æä»¶åè§åæä»¶ä¹¦åç®åï¼å¯è¯»æ§å¼ºã\n * é«æ§è½ï¼ä½¿ç¨é«æç ip æ£æ¥ç®æ³åç¼å­æºå¶ã\n * é«çº§é²æ¤ï¼å¼å®¹ modsecurityï¼å æ­¤ä½ å¯ä»¥ä½¿ç¨å¼æ¾å¼ç½ç»åºç¨å®å¨é¡¹ç®ï¼owaspï¼Â® çæ ¸å¿è§ååºã\n * åå¥½ç¬è«éªè¯ï¼æ¯æéªè¯ googleãbingãbaidu å yandex çç¬è«å¹¶èªå¨æ¾è¡ï¼é¿åéè¯¯æ¦æªã\n * éªè¯ç ï¼æ¯æä¸ç§éªè¯ç ï¼hcaptchaãrecaptchav2 å recaptchav3ã\n\n\n# åè½\n\n * å¼å®¹ modsecurityãæ­¤åè½ä»éææ°ç current çæ¬ã\n * sql æ³¨å¥é²æ¤ï¼powered by libinjectionï¼ã\n * xss æ»å»é²æ¤ï¼powered by libinjectionï¼ã\n * æ¯æ ipv4 å ipv6ã\n * æ¯æå¼å¯éªè¯ç ï¼captcha)ï¼æ¯æ hcaptchaãrecaptchav2 å recaptchav3ã\n * æ¯æè¯å«åå¥½ç¬è«ï¼å¦ baiduspiderï¼å¹¶èªå¨æ¾è¡ï¼åºäº user-agent å ip çè¯å«ï¼ãæ­¤åè½ä»éææ°ç current çæ¬ã\n * cc é²å¾¡ï¼è¶åºéå¶åèªå¨æé»å¯¹åº ip ä¸æ®µæ¶é´æèä½¿ç¨éªè¯ç åäººæºè¯å«ã\n * ip é»ç½ååï¼åæ¶æ¯æç±»ä¼¼ 192.168.0.0/16 å fe80::/10ï¼å³æ¯æç¹ååè¿å¶ååå·åå­è¿å¶è¡¨ç¤ºæ³åç½æ®µååã\n * post é»ååã\n * url é»ç½åå\n * æ¥è¯¢å­ç¬¦ä¸²ï¼query stringï¼é»ååã\n * useragent é»ååã\n * cookie é»ååã\n * referer é»ç½ååã\n\n\n# èç³»æ¹å¼\n\n * telegram é¢é: https://t.me/ngx_waf\n * telegram ç¾¤ç»ï¼è±æï¼: https://t.me/group_ngx_waf\n * telegram ç¾¤ä¸»ï¼ä¸­æï¼ï¼https://t.me/group_ngx_waf_cn\n\n\n# æèµ\n\næèµå°±ç®äºï¼å¦ææ¨æ¿æï¼æ¨å¯ä»¥å¸®å©å®£ä¼ ä¸ä¸æ¬é¡¹ç®ãæ¯å¦åä¸ªè´´ï¼æ¨èç»èº«è¾¹æéæ±çäººä»ä¹çã\n\næä»æ¥æ²¡ç¢°è¿é±ï¼æå¯¹é±æ²¡æå´è¶£ã\n\n\n# æµè¯å¥ä»¶\n\næ¬é¡¹ç®ä½¿ç¨ä¸ä¸ª perl å¼åçæ°æ®é©±å¨åçæµè¯å¥ä»¶è¿è¡æµè¯ã æè°¢é¡¹ç® test::nginx åå¶å¼åèä»¬ã\n\nä½ å¯ä»¥éè¿ä¸åå½ä»¤æ¥è¿è¡æµè¯ã\n\n# è¿è¡å½ä»¤çæ§è¡æ¶é´æ¯è¾é¿ï¼ä½æ¯ä»¥ååæµè¯çæ¶åå°±ä¸éè¦è¿è¡äºã\ncpan test::nginx\n\n# ä½ éè¦æå®ä¸ä¸ªä¸´æ¶ç®å½ã\n# å¦æç®å½ä¸å­å¨ä¼èªå¨åå»ºã\n# å¦æç®å½å·²ç»ä¼è¢«å­å¨åä¼å**å é¤**ååå»ºã\nexport module_test_path=/path/to/temp/dir\n\n# å¦æä½ å®è£äºå¨ææ¨¡ååéè¦æå®å¨ææ¨¡åçç»å¯¹è·¯å¾ï¼åä¹åæ éæ§è¡è¿è¡å½ä»¤ã\nexport module_path=/path/to/ngx_http_waf_module.so\n\ncd ./test/test-nginx\nsh ./init.sh\nsh ./start.sh ./t/*.t\n\n\n\n# æ§è½æµè¯\n\næ§è½æµè¯\n\n\n# é²è°\n\nnginx é²ç«å¢æ¨¡åå¼åæ»ç»\n\næ¬¢è¿è®¿é®æçåå®¢ï¼https://www.addesp.com/ã\n\n\n# æè°¢\n\n * modsecurityï¼å¼æºä¸è·¨å¹³å°ç waf å¼æã\n * uthashï¼c è¯­è¨çåå¸è¡¨ãæ°ç»ãé¾è¡¨ç­å®¹å¨åºã\n * libcurlï¼æ¯æå¤ç§åè®®æä»¶ä¼ è¾åºã\n * cjsonï¼c è¯­è¨çè½»éçº§ json è§£æåºã\n * libinjectionï¼sql æ³¨å¥æ£æµåºã\n * libsodiumï¼c è¯­è¨å¯ç å½æ°åºã\n * test-nginx: æ°æ®é©±å¨ç nginx æµè¯å¥ä»¶ï¼å¯ç¨äº nginx c æ¨¡åçå¼åå openresty lua åºçå¼åã\n * lastversionï¼ä¸ä¸ªè½»å·§çå½ä»¤è¡å·¥å·ï¼å¸®å©ä½ ä¸è½½æå®è£ä¸ä¸ªé¡¹ç®çç¹å®çæ¬ã\n * ngx_lua_wafï¼ä¸ä¸ªåºäº lua-nginx-module (openresty) ç web åºç¨é²ç«å¢ã\n * nginx-bookï¼nginxå¼åä»å¥é¨å°ç²¾é\n * nginx-development-guideï¼nginx å¼åæåã",charsets:{cjk:!0}},{title:"å¸¸è§é®é¢ä¸è§£ç­",frontmatter:{title:"å¸¸è§é®é¢ä¸è§£ç­",lang:"zh-CN"},regularPath:"/zh-cn/guide/faq.html",relativePath:"zh-cn/guide/faq.md",key:"v-313b9c48",path:"/zh-cn/guide/faq.html",headers:[{level:2,title:"æ¬æ¨¡åçæ§è½å¦ä½ï¼",slug:"æ¬æ¨¡åçæ§è½å¦ä½",normalizedTitle:"æ¬æ¨¡åçæ§è½å¦ä½ï¼",charIndex:14},{level:2,title:"ç¼å­ç­ç¥",slug:"ç¼å­ç­ç¥",normalizedTitle:"ç¼å­ç­ç¥",charIndex:165},{level:2,title:"æ¨¡åçåç½®åéä¸æä»¤ if",slug:"æ¨¡åçåç½®åéä¸æä»¤-if",normalizedTitle:"æ¨¡åçåç½®åéä¸æä»¤ if",charIndex:179},{level:2,title:"ngx_http_access_module",slug:"ngx-http-access-module",normalizedTitle:"ngx_http_access_module",charIndex:286},{level:2,title:"å¯ä»¥å¨è¿è¡æ¶ä¿®æ¹è§åä¹ï¼",slug:"å¯ä»¥å¨è¿è¡æ¶ä¿®æ¹è§åä¹",normalizedTitle:"å¯ä»¥å¨è¿è¡æ¶ä¿®æ¹è§åä¹ï¼",charIndex:613},{level:2,title:"CDN å¯¹ IP æ£æ¥çå½±å",slug:"cdn-å¯¹-ip-æ£æ¥çå½±å",normalizedTitle:"cdn å¯¹ ip æ£æ¥çå½±å",charIndex:684},{level:2,title:"æ­£åè¡¨è¾¾å¼æç»æå¡æ»å»ï¼ReDoSï¼",slug:"æ­£åè¡¨è¾¾å¼æç»æå¡æ»å»-redos",normalizedTitle:"æ­£åè¡¨è¾¾å¼æç»æå¡æ»å»ï¼redosï¼",charIndex:768},{level:2,title:'fork() failed while spawning "worker process" (12: Cannot allocate memory)',slug:"fork-failed-while-spawning-worker-process-12-cannot-allocate-memory",normalizedTitle:"fork() failed while spawning &quot;worker process&quot; (12: cannot allocate memory)",charIndex:null},{level:2,title:"PANIC: unprotected error in call to Lua API (attempt to index a nil value)",slug:"panic-unprotected-error-in-call-to-lua-api-attempt-to-index-a-nil-value",normalizedTitle:"panic: unprotected error in call to lua api (attempt to index a nil value)",charIndex:1265}],lastUpdated:"2022/1/10 ä¸å3:38:27",lastUpdatedTimestamp:1641829107e3,headersStr:'æ¬æ¨¡åçæ§è½å¦ä½ï¼ ç¼å­ç­ç¥ æ¨¡åçåç½®åéä¸æä»¤ if ngx_http_access_module å¯ä»¥å¨è¿è¡æ¶ä¿®æ¹è§åä¹ï¼ CDN å¯¹ IP æ£æ¥çå½±å æ­£åè¡¨è¾¾å¼æç»æå¡æ»å»ï¼ReDoSï¼ fork() failed while spawning "worker process" (12: Cannot allocate memory) PANIC: unprotected error in call to Lua API (attempt to index a nil value)',content:'# å¸¸è§é®é¢ä¸è§£ç­\n\n\n# æ¬æ¨¡åçæ§è½å¦ä½ï¼\n\nIP æ£æ¥å CC é²å¾¡è±è´¹å¸¸æ°æ¶é´ï¼å¶å®çæ£æ¥è±è´¹ O(nm) çæ¶é´ï¼å¶ä¸­ n æ¯ç¸å³è§åçæ¡æ°ï¼m ä¸ºæ§è¡æ­£åå¹éçæ¶é´å¤æåº¦ï¼ä½æ¯æ¯æ¬¡æ£æ¥è¿åä¼èªå¨ç¼å­æ¬æ¬¡æ£æ¥çç»æï¼ä¸æ¬¡æ£æ¥ç¸åçç®æ æ¶å°±å¯ä»¥ä½¿ç¨ç¼å­èä¸æ¯æ£æ¥å¨é¨çè§åãä¸ä¼ç¼å­ POST è¯·æ±ä½çæ£æ¥ç»æã\n\n\n# ç¼å­ç­ç¥\n\nLRU\n\n\n# æ¨¡åçåç½®åéä¸æä»¤ if\n\nç®èè¨ä¹ï¼ç±äº NGINX çç¶ææºæ¨¡åï¼ä½ æ æ³å°æ¬æ¨¡åçä»»ä½åç½®åéï¼å¦ $waf_rule_typeï¼ç¨äºæä»¤ ifï¼ä½æ¯æä»¤ access_log çåæ° if é¤å¤ã\n\n\n# ngx_http_access_module\n\nå½æ¬æ¨¡åä¸ ngx_http_access_module ä¸èµ·ä½¿ç¨æ¶ï¼ngx_http_access_module ä¼åäºæ¬æ¨¡åè¿è¡ã\n\n\n# postæ£æµå¤±æ\n\næ¬æ¨¡ååºäºæ§è½èèåªä¼å¨ Post è¯·æ±ä½å¨åå­ä¸­æ¶æ£æ¥ï¼è¥ä¸å¨åå­ä¸­åè·³è¿æ£æ¥ã æ¨å¯ä»¥éè¿ä¿®æ¹éç½®æä»¶æ¥è§£å³è¿ä¸ªé®é¢ã\n\nhttp {\n    ...\n    client_body_buffer_size 10M;\n    client_body_in_file_only off;\n    ...\n}\n\n\nclient_body_buffer_size çè¯´æ å client_body_in_file_only çè¯´æã\n\n\n# å¯ä»¥å¨è¿è¡æ¶ä¿®æ¹è§åä¹ï¼\n\nä¸å¯ä»¥ï¼æ¬æ¨¡ååªä¼å¨ nginx è¯»åéç½®æ¶è¯»åè§åãnginx ä¼å¨å¯å¨å reload æ¶è¯»åéç½®ã\n\n\n# CDN å¯¹ IP æ£æ¥çå½±å\n\nå¦æä½ ä½¿ç¨ ngx_http_realip_module è·åçå® IP çè¯ï¼åæ¬æ¨¡åå¨æ£æ¥ IP æ¶å°±ä¼ä½¿ç¨çå®ç IPã\n\n\n# æ­£åè¡¨è¾¾å¼æç»æå¡æ»å»ï¼ReDoSï¼\n\nReDoS æ¯æä½¿ç¨çæ­£åè¡¨è¾¾å¼å­å¨ç¼ºé·æ¶ï¼æ»å»èå¯ä»¥ä½¿ç¨ä¸ä¸ªç²¾å¿æé çå­ç¬¦ä¸²æ¥å¤§éå°æ¶èæå¡å¨çèµæºï¼æ¯å¦å¯¼è´æ­£åå¼æçç¾é¾æ§çåæº¯ã\n\næ¬æ¨¡åæä¸¤ç§æªæ½å¯ä»¥ç¨æ¥ç¼è§£æ­¤ç±»æ»å»ã\n\n * æ¬æ¨¡åä½¿ç¨ç PCRE åºæ§è¡æ­£åè¡¨è¾¾å¼ï¼PCRE å¨ç¼è¯æ¶å³å¯æå®ä¸»å¾ªç¯çè®¡æ°å¨ä¸éï¼è¶åºä¸éèªå¨åæ­¢ãé»è®¤ä¸éä¸º 500000ãä½ ä¹å¯ä»¥å¨ç¼è¯æ¶æå¨è°æ´ï¼è¯¦è§ pcre2 build man pageã\n\n * æ¬æ¨¡åä¼ç¼å­æææ­£åçæ£æ¥ç»æï¼POST æ£æ¥é¤å¤ï¼ï¼è¿æ ·å¨ä¸è§¦åç¼å­æ·æ±°æµç¨çæåµä¸ï¼ä¸æ¬¡éå°ç¨äºæ»å»çå­ç¬¦ä¸²ä¹æ éåæ¬¡æ§è¡æ­£åè¡¨è¾¾å¼ã\n\n\n# fork() failed while spawning "worker process" (12: Cannot allocate memory)\n\nå¯è½æ¯è¿å¤å°ä½¿ç¨ nginx -s reload å¯¼è´çï¼æ¬æ¨¡åä¼å¨è¯»åéç½®çæ¶åç³è¯·ä¸äºåå­ï¼ä½æ¯ä¸ç¥ä¸ºä½ nginx -s reload ä¹åè¿äºåå­ä¸ä¼ç«å³éæ¾ï¼æä»¥ç­æ¶é´åé¢ç¹ nginx -s reload å°±æå¯è½å¯¼è´è¿ä¸ªéè¯¯ã\n\n\n# PANIC: unprotected error in call to Lua API (attempt to index a nil value)\n\nè¯·æ£æ¥ä½ ç libmodsecurity ççæ¬ï¼å¨æµè¯ä¸­ libmodsecurity v3.0.3 å­å¨è¿ä¸ª Bugï¼è¯·åçº§å° libmodsecurity v3.0.5ã',normalizedContent:'# å¸¸è§é®é¢ä¸è§£ç­\n\n\n# æ¬æ¨¡åçæ§è½å¦ä½ï¼\n\nip æ£æ¥å cc é²å¾¡è±è´¹å¸¸æ°æ¶é´ï¼å¶å®çæ£æ¥è±è´¹ o(nm) çæ¶é´ï¼å¶ä¸­ n æ¯ç¸å³è§åçæ¡æ°ï¼m ä¸ºæ§è¡æ­£åå¹éçæ¶é´å¤æåº¦ï¼ä½æ¯æ¯æ¬¡æ£æ¥è¿åä¼èªå¨ç¼å­æ¬æ¬¡æ£æ¥çç»æï¼ä¸æ¬¡æ£æ¥ç¸åçç®æ æ¶å°±å¯ä»¥ä½¿ç¨ç¼å­èä¸æ¯æ£æ¥å¨é¨çè§åãä¸ä¼ç¼å­ post è¯·æ±ä½çæ£æ¥ç»æã\n\n\n# ç¼å­ç­ç¥\n\nlru\n\n\n# æ¨¡åçåç½®åéä¸æä»¤ if\n\nç®èè¨ä¹ï¼ç±äº nginx çç¶ææºæ¨¡åï¼ä½ æ æ³å°æ¬æ¨¡åçä»»ä½åç½®åéï¼å¦ $waf_rule_typeï¼ç¨äºæä»¤ ifï¼ä½æ¯æä»¤ access_log çåæ° if é¤å¤ã\n\n\n# ngx_http_access_module\n\nå½æ¬æ¨¡åä¸ ngx_http_access_module ä¸èµ·ä½¿ç¨æ¶ï¼ngx_http_access_module ä¼åäºæ¬æ¨¡åè¿è¡ã\n\n\n# postæ£æµå¤±æ\n\næ¬æ¨¡ååºäºæ§è½èèåªä¼å¨ post è¯·æ±ä½å¨åå­ä¸­æ¶æ£æ¥ï¼è¥ä¸å¨åå­ä¸­åè·³è¿æ£æ¥ã æ¨å¯ä»¥éè¿ä¿®æ¹éç½®æä»¶æ¥è§£å³è¿ä¸ªé®é¢ã\n\nhttp {\n    ...\n    client_body_buffer_size 10m;\n    client_body_in_file_only off;\n    ...\n}\n\n\nclient_body_buffer_size çè¯´æ å client_body_in_file_only çè¯´æã\n\n\n# å¯ä»¥å¨è¿è¡æ¶ä¿®æ¹è§åä¹ï¼\n\nä¸å¯ä»¥ï¼æ¬æ¨¡ååªä¼å¨ nginx è¯»åéç½®æ¶è¯»åè§åãnginx ä¼å¨å¯å¨å reload æ¶è¯»åéç½®ã\n\n\n# cdn å¯¹ ip æ£æ¥çå½±å\n\nå¦æä½ ä½¿ç¨ ngx_http_realip_module è·åçå® ip çè¯ï¼åæ¬æ¨¡åå¨æ£æ¥ ip æ¶å°±ä¼ä½¿ç¨çå®ç ipã\n\n\n# æ­£åè¡¨è¾¾å¼æç»æå¡æ»å»ï¼redosï¼\n\nredos æ¯æä½¿ç¨çæ­£åè¡¨è¾¾å¼å­å¨ç¼ºé·æ¶ï¼æ»å»èå¯ä»¥ä½¿ç¨ä¸ä¸ªç²¾å¿æé çå­ç¬¦ä¸²æ¥å¤§éå°æ¶èæå¡å¨çèµæºï¼æ¯å¦å¯¼è´æ­£åå¼æçç¾é¾æ§çåæº¯ã\n\næ¬æ¨¡åæä¸¤ç§æªæ½å¯ä»¥ç¨æ¥ç¼è§£æ­¤ç±»æ»å»ã\n\n * æ¬æ¨¡åä½¿ç¨ç pcre åºæ§è¡æ­£åè¡¨è¾¾å¼ï¼pcre å¨ç¼è¯æ¶å³å¯æå®ä¸»å¾ªç¯çè®¡æ°å¨ä¸éï¼è¶åºä¸éèªå¨åæ­¢ãé»è®¤ä¸éä¸º 500000ãä½ ä¹å¯ä»¥å¨ç¼è¯æ¶æå¨è°æ´ï¼è¯¦è§ pcre2 build man pageã\n\n * æ¬æ¨¡åä¼ç¼å­æææ­£åçæ£æ¥ç»æï¼post æ£æ¥é¤å¤ï¼ï¼è¿æ ·å¨ä¸è§¦åç¼å­æ·æ±°æµç¨çæåµä¸ï¼ä¸æ¬¡éå°ç¨äºæ»å»çå­ç¬¦ä¸²ä¹æ éåæ¬¡æ§è¡æ­£åè¡¨è¾¾å¼ã\n\n\n# fork() failed while spawning "worker process" (12: cannot allocate memory)\n\nå¯è½æ¯è¿å¤å°ä½¿ç¨ nginx -s reload å¯¼è´çï¼æ¬æ¨¡åä¼å¨è¯»åéç½®çæ¶åç³è¯·ä¸äºåå­ï¼ä½æ¯ä¸ç¥ä¸ºä½ nginx -s reload ä¹åè¿äºåå­ä¸ä¼ç«å³éæ¾ï¼æä»¥ç­æ¶é´åé¢ç¹ nginx -s reload å°±æå¯è½å¯¼è´è¿ä¸ªéè¯¯ã\n\n\n# panic: unprotected error in call to lua api (attempt to index a nil value)\n\nè¯·æ£æ¥ä½ ç libmodsecurity ççæ¬ï¼å¨æµè¯ä¸­ libmodsecurity v3.0.3 å­å¨è¿ä¸ª bugï¼è¯·åçº§å° libmodsecurity v3.0.5ã',charsets:{cjk:!0}},{title:"æµè¯",frontmatter:{title:"æµè¯",lang:"zh-CN"},regularPath:"/zh-cn/guide/test.html",relativePath:"zh-cn/guide/test.md",key:"v-7a397374",path:"/zh-cn/guide/test.html",headers:[{level:2,title:"ç®ææµè¯",slug:"ç®ææµè¯",normalizedTitle:"ç®ææµè¯",charIndex:9},{level:2,title:"èªå¨æµè¯",slug:"èªå¨æµè¯",normalizedTitle:"èªå¨æµè¯",charIndex:133},{level:2,title:"æ§è½æµè¯",slug:"æ§è½æµè¯",normalizedTitle:"æ§è½æµè¯",charIndex:507},{level:3,title:"ç¤ºä¾æµè¯",slug:"ç¤ºä¾æµè¯",normalizedTitle:"ç¤ºä¾æµè¯",charIndex:516},{level:3,title:"èªè¡æµè¯",slug:"èªè¡æµè¯",normalizedTitle:"èªè¡æµè¯",charIndex:2544}],lastUpdated:"2022/1/10 ä¸å3:38:27",lastUpdatedTimestamp:1641829107e3,headersStr:"ç®ææµè¯ èªå¨æµè¯ æ§è½æµè¯ ç¤ºä¾æµè¯ èªè¡æµè¯",content:"# æµè¯\n\n\n# ç®ææµè¯\n\nè¿è¡ä¸åå½ä»¤ï¼å¦æè¾åº 403 åè¡¨ç¤ºæ¨¡åæ­£å¸¸å·¥ä½ã\n\ncurl -I -o /dev/null --user-agent bench -s -w \"%{http_code}\\\\n\" https://example.com/\n\n\n\n# èªå¨æµè¯\n\næ¬é¡¹ç®éå¸¦äºè®¸å¤æµè¯ç¨ä¾ï¼ä½ å¯ä»¥éè¿ä¸é¢çæä»¤æ¥è¿è¡å¨é¨çç¨ä¾ã\n\n# è¿è¡å½ä»¤çæ§è¡æ¶é´æ¯è¾é¿ï¼ä½æ¯ä»¥ååæµè¯çæ¶åå°±ä¸éè¦è¿è¡äºã\ncpan Test::Nginx\n\n# ä½ éè¦æå®ä¸ä¸ªä¸´æ¶ç®å½ã\n# å¦æç®å½ä¸å­å¨ä¼èªå¨åå»ºã\n# å¦æç®å½å·²ç»ä¼è¢«å­å¨åä¼å**å é¤**ååå»ºã\nexport MODULE_TEST_PATH=/path/to/temp/dir\n\n# å¦æä½ å®è£äºå¨ææ¨¡ååéè¦æå®å¨ææ¨¡åçç»å¯¹è·¯å¾ï¼åä¹åæ éæ§è¡è¿è¡å½ä»¤ã\nexport MODULE_PATH=/path/to/ngx_http_waf_module.so\n\ncd ./test/test-nginx\nsh ./init.sh\nsh ./start.sh ./t/*.t\n\n\næ­£å¸¸æåµä¸ææçç¨ä¾é½ä¼éè¿ï¼å¦ææ²¡æéè¿è¯·åè¯æä»¬ã\n\n\n# æ§è½æµè¯\n\n\n# ç¤ºä¾æµè¯\n\n# æµè¯è¯´æ\n\n * ngx_waf v5.1.1ã\n * ä½¿ç¨äºçº¦ 21 ä¸æ¡ IPV4 ç½ååè§åã\n * ä½¿ç¨äºçº¦ 21 ä¸æ¡ IPV4 é»ååè§åã\n * ä½¿ç¨äºçº¦ 48000 æ¡ IPV6 ç½ååè§åã\n * ä½¿ç¨äºçº¦ 48000 æ¡ IPV6 é»ååè§åã\n * ä½¿ç¨äºåä¸æ¡ URL é»ååè§åï¼éè¿éæºå­ç¬¦ä¸²çæå¨è·å¾ã\n * ä½¿ç¨äºåä¸æ¡ URL ç½ååè§åï¼éè¿éæºå­ç¬¦ä¸²çæå¨è·å¾ã\n * ä½¿ç¨äº 5000 ä¸ªéæºå­ç¬¦ä¸²ï¼éè¿éæºå­ç¬¦ä¸²çæå¨è·å¾ãæ¯æ¬¡è¯·æ±æ¶ä»ä¸­éæºæéä¸ä¸ªä½ä¸º URI åé GET è¯·æ±ã\n * æµè¯æç»­ 30 åéã\n * ä¸å±æµè¯ä¸¤æ¬¡ï¼ä¸æ¬¡å¼å¯é²ç«å¢ï¼ä¸æ¬¡å³é­é²ç«å¢ã\n\næ³¨æ\n\næµè¯ç¨ç IP æ¯ä» IPdney è·å¾çã\n\næµè¯æ¶çéç½®\n\nmaster_process on;\nworker_processes  1;\n\nhttp {\n    server {\n        listen 80;\n        server_name  localhost;\n\n        access_log off;\n        \n        waf on;\n        waf_mode DYNAMIC !CC !POST;\n        waf_rule_path /usr/local/src/ngx_waf/rules/;\n        waf_cache capacity=6000 interval=1h percent=50;\n\n        location / {\n            default_type text/html;\n            return 200 'hello';\n        }\n    }\n}\n\n\n# æµè¯å½ä»¤\n\nwrk -c 100 -d 30m -t 1 -s test/wrk/rand.lua --latency http://localhost/ -- /path/to/rand-str.txt\n\n\n# æµè¯ç»æ\n\nå¼å¯é²ç«å¢å RPSï¼æ¯ç§è¯·æ±æ°ï¼ éä½äºçº¦ 4%ã\n\n# waf on;\nwrk -c 100 -d 30m -t 1 -s ngx_waf/test/wrk/rand.lua --timeout 1m --latency http://localhost/ -- /usr/local/src/ngx_waf/txt.txt\n\nRunning 30m test @ http://localhost/\n  1 threads and 100 connections\n  Thread Stats   Avg      Stdev     Max   +/- Stdev\n    Latency    78.56ms  340.74ms   3.97s    94.52%\n    Req/Sec    67.33k    25.42k   95.38k    86.58%\n  Latency Distribution\n     50%    1.14ms\n     75%    1.48ms\n     90%    4.84ms\n     99%    1.97s\n  120532104 requests in 30.00m, 17.06GB read\nRequests/sec:  66959.26\nTransfer/sec:      9.71MB\n\n\n# waf off;\nwrk -c 100 -d 30m -t 1 -s ngx_waf/test/wrk/rand.lua --timeout 1m --latency http://localhost/ -- /usr/local/src/ngx_waf/txt.txt\n\nRunning 30m test @ http://localhost/\n  1 threads and 100 connections\n  Thread Stats   Avg      Stdev     Max   +/- Stdev\n    Latency   803.44us    0.87ms  40.32ms   95.23%\n    Req/Sec    70.69k    10.46k  105.82k    81.15%\n  Latency Distribution\n     50%  590.00us\n     75%  760.00us\n     90%    1.25ms\n     99%    4.25ms\n  126562158 requests in 30.00m, 17.92GB read\nRequests/sec:  70310.93\nTransfer/sec:     10.19MB\n\n\n\n# èªè¡æµè¯\n\nä½ å¯ä»¥ä½¿ç¨ wrk å¯¹æ¬æ¨¡åè¿è¡æ§è½æµè¯ã\n\næ¬é¡¹ç®æä¾äº wrk ç lua èæ¬ç¨æ¥è¾å©æµè¯ï¼èæ¬çè·¯å¾ä¸º test/wrk/rand.luaï¼å¶åè½æ¯ä½¿ç¨éæºç URI åé GET è¯·æ±ãä½ éè¦ä¸ºå¶æä¾ä¸ä¸ªå«æä¸å®æ°éçéæºå­ç¬¦ä¸²çææ¬æä»¶ï¼æ¯è¡ä¸ä¸ªéæºå­ç¬¦ä¸²ãç¶åéè¿ä¸é¢çå½ä»¤è¿è¡æµè¯ã\n\nwrk -c 100 -d 1m -t 1 -s test/wrk/rand.lua --latency http://localhost/ -- /path/to/rand-str.txt\n",normalizedContent:"# æµè¯\n\n\n# ç®ææµè¯\n\nè¿è¡ä¸åå½ä»¤ï¼å¦æè¾åº 403 åè¡¨ç¤ºæ¨¡åæ­£å¸¸å·¥ä½ã\n\ncurl -i -o /dev/null --user-agent bench -s -w \"%{http_code}\\\\n\" https://example.com/\n\n\n\n# èªå¨æµè¯\n\næ¬é¡¹ç®éå¸¦äºè®¸å¤æµè¯ç¨ä¾ï¼ä½ å¯ä»¥éè¿ä¸é¢çæä»¤æ¥è¿è¡å¨é¨çç¨ä¾ã\n\n# è¿è¡å½ä»¤çæ§è¡æ¶é´æ¯è¾é¿ï¼ä½æ¯ä»¥ååæµè¯çæ¶åå°±ä¸éè¦è¿è¡äºã\ncpan test::nginx\n\n# ä½ éè¦æå®ä¸ä¸ªä¸´æ¶ç®å½ã\n# å¦æç®å½ä¸å­å¨ä¼èªå¨åå»ºã\n# å¦æç®å½å·²ç»ä¼è¢«å­å¨åä¼å**å é¤**ååå»ºã\nexport module_test_path=/path/to/temp/dir\n\n# å¦æä½ å®è£äºå¨ææ¨¡ååéè¦æå®å¨ææ¨¡åçç»å¯¹è·¯å¾ï¼åä¹åæ éæ§è¡è¿è¡å½ä»¤ã\nexport module_path=/path/to/ngx_http_waf_module.so\n\ncd ./test/test-nginx\nsh ./init.sh\nsh ./start.sh ./t/*.t\n\n\næ­£å¸¸æåµä¸ææçç¨ä¾é½ä¼éè¿ï¼å¦ææ²¡æéè¿è¯·åè¯æä»¬ã\n\n\n# æ§è½æµè¯\n\n\n# ç¤ºä¾æµè¯\n\n# æµè¯è¯´æ\n\n * ngx_waf v5.1.1ã\n * ä½¿ç¨äºçº¦ 21 ä¸æ¡ ipv4 ç½ååè§åã\n * ä½¿ç¨äºçº¦ 21 ä¸æ¡ ipv4 é»ååè§åã\n * ä½¿ç¨äºçº¦ 48000 æ¡ ipv6 ç½ååè§åã\n * ä½¿ç¨äºçº¦ 48000 æ¡ ipv6 é»ååè§åã\n * ä½¿ç¨äºåä¸æ¡ url é»ååè§åï¼éè¿éæºå­ç¬¦ä¸²çæå¨è·å¾ã\n * ä½¿ç¨äºåä¸æ¡ url ç½ååè§åï¼éè¿éæºå­ç¬¦ä¸²çæå¨è·å¾ã\n * ä½¿ç¨äº 5000 ä¸ªéæºå­ç¬¦ä¸²ï¼éè¿éæºå­ç¬¦ä¸²çæå¨è·å¾ãæ¯æ¬¡è¯·æ±æ¶ä»ä¸­éæºæéä¸ä¸ªä½ä¸º uri åé get è¯·æ±ã\n * æµè¯æç»­ 30 åéã\n * ä¸å±æµè¯ä¸¤æ¬¡ï¼ä¸æ¬¡å¼å¯é²ç«å¢ï¼ä¸æ¬¡å³é­é²ç«å¢ã\n\næ³¨æ\n\næµè¯ç¨ç ip æ¯ä» ipdney è·å¾çã\n\næµè¯æ¶çéç½®\n\nmaster_process on;\nworker_processes  1;\n\nhttp {\n    server {\n        listen 80;\n        server_name  localhost;\n\n        access_log off;\n        \n        waf on;\n        waf_mode dynamic !cc !post;\n        waf_rule_path /usr/local/src/ngx_waf/rules/;\n        waf_cache capacity=6000 interval=1h percent=50;\n\n        location / {\n            default_type text/html;\n            return 200 'hello';\n        }\n    }\n}\n\n\n# æµè¯å½ä»¤\n\nwrk -c 100 -d 30m -t 1 -s test/wrk/rand.lua --latency http://localhost/ -- /path/to/rand-str.txt\n\n\n# æµè¯ç»æ\n\nå¼å¯é²ç«å¢å rpsï¼æ¯ç§è¯·æ±æ°ï¼ éä½äºçº¦ 4%ã\n\n# waf on;\nwrk -c 100 -d 30m -t 1 -s ngx_waf/test/wrk/rand.lua --timeout 1m --latency http://localhost/ -- /usr/local/src/ngx_waf/txt.txt\n\nrunning 30m test @ http://localhost/\n  1 threads and 100 connections\n  thread stats   avg      stdev     max   +/- stdev\n    latency    78.56ms  340.74ms   3.97s    94.52%\n    req/sec    67.33k    25.42k   95.38k    86.58%\n  latency distribution\n     50%    1.14ms\n     75%    1.48ms\n     90%    4.84ms\n     99%    1.97s\n  120532104 requests in 30.00m, 17.06gb read\nrequests/sec:  66959.26\ntransfer/sec:      9.71mb\n\n\n# waf off;\nwrk -c 100 -d 30m -t 1 -s ngx_waf/test/wrk/rand.lua --timeout 1m --latency http://localhost/ -- /usr/local/src/ngx_waf/txt.txt\n\nrunning 30m test @ http://localhost/\n  1 threads and 100 connections\n  thread stats   avg      stdev     max   +/- stdev\n    latency   803.44us    0.87ms  40.32ms   95.23%\n    req/sec    70.69k    10.46k  105.82k    81.15%\n  latency distribution\n     50%  590.00us\n     75%  760.00us\n     90%    1.25ms\n     99%    4.25ms\n  126562158 requests in 30.00m, 17.92gb read\nrequests/sec:  70310.93\ntransfer/sec:     10.19mb\n\n\n\n# èªè¡æµè¯\n\nä½ å¯ä»¥ä½¿ç¨ wrk å¯¹æ¬æ¨¡åè¿è¡æ§è½æµè¯ã\n\næ¬é¡¹ç®æä¾äº wrk ç lua èæ¬ç¨æ¥è¾å©æµè¯ï¼èæ¬çè·¯å¾ä¸º test/wrk/rand.luaï¼å¶åè½æ¯ä½¿ç¨éæºç uri åé get è¯·æ±ãä½ éè¦ä¸ºå¶æä¾ä¸ä¸ªå«æä¸å®æ°éçéæºå­ç¬¦ä¸²çææ¬æä»¶ï¼æ¯è¡ä¸ä¸ªéæºå­ç¬¦ä¸²ãç¶åéè¿ä¸é¢çå½ä»¤è¿è¡æµè¯ã\n\nwrk -c 100 -d 1m -t 1 -s test/wrk/rand.lua --latency http://localhost/ -- /path/to/rand-str.txt\n",charsets:{cjk:!0}},{title:"æ¦æªè¯·æ±æ¶å¯ç¨éªè¯ç ",frontmatter:{title:"æ¦æªè¯·æ±æ¶å¯ç¨éªè¯ç ",lang:"zh-CN"},regularPath:"/zh-cn/practice/enable-captcha-when-blocking-requests.html",relativePath:"zh-cn/practice/enable-captcha-when-blocking-requests.md",key:"v-1b51365a",path:"/zh-cn/practice/enable-captcha-when-blocking-requests.html",lastUpdated:"2022/1/10 ä¸å3:38:27",lastUpdatedTimestamp:1641829107e3,headersStr:null,content:"# æ¦æªè¯·æ±æ¶å¯ç¨éªè¯ç \n\nå¦ä»ï¼è®¸å¤æ»å»èé½ä¼ä½¿ç¨èªå¨å·¥å·æ»å»æå¡å¨ï¼è¿äºèªå¨å·¥å·ä¼å°è¯æ¯ä¸ä¸ªæ¼æ´ï¼æçä¼è¢«å®å¨æªæ½ææ¦æªï¼æçåå¯ä»¥èº²é¿æ£æµã å¦ææ»å»èè§å¾ä½ çä»·å¼æ¯è¾é«ï¼å¯è½ä¼æå¨æ»å»ä½ çæå¡ãæä»¬å¹¶ä¸è½å®ç¾å°é²å¾¡è¿äºæ»å»ï¼ä½å´è½å¾ç®åå°æé«æ»å»çææ¬ã\n\nå½ä¸ä¸ªè¯·æ±è¢«æ¦æªæ¶ï¼ngx_waf ä¼å¯¹è¯¥ IP å¯ç¨éªè¯ç ï¼æ­¤æ¶è¯¥ IP æ³è¦ç»§ç»­è®¿é®å°±å¿é¡»å®æéªè¯ç ãè¿åºæ¬å¯ä»¥åºæå¤æ°çèªå¨æ»å»å·¥å·ï¼å ä¸ºè¿äºå·¥å·ä¼å°è¯æ¯ä¸ä¸ªæ¼æ´ï¼èæä»¬æ»è½è¯å«ä¸äºææ¾çæ»å»è¯·æ±å¹¶å¯ç¨éªè¯ç ï¼èèªå¨å·¥å·æ¶é¾ä»¥éè¿éªè¯çãå¯¹äºæå¨æ»å»èï¼è¿ä¹è½æé«ä»ä»¬çæ¶é´ææ¬ã\n\nä¸é¢æ¯ä¸ä¸ªç¤ºä¾éç½®ã\n\nhttp {\n    waf_zone name=waf size=20m;\n    \n    server {\n        waf_captcha off prov=xxx sitekey=xxx secret=xxx;\n        waf_action blacklist=CAPTCHA zone=waf:action;\n    }\n}\n",normalizedContent:"# æ¦æªè¯·æ±æ¶å¯ç¨éªè¯ç \n\nå¦ä»ï¼è®¸å¤æ»å»èé½ä¼ä½¿ç¨èªå¨å·¥å·æ»å»æå¡å¨ï¼è¿äºèªå¨å·¥å·ä¼å°è¯æ¯ä¸ä¸ªæ¼æ´ï¼æçä¼è¢«å®å¨æªæ½ææ¦æªï¼æçåå¯ä»¥èº²é¿æ£æµã å¦ææ»å»èè§å¾ä½ çä»·å¼æ¯è¾é«ï¼å¯è½ä¼æå¨æ»å»ä½ çæå¡ãæä»¬å¹¶ä¸è½å®ç¾å°é²å¾¡è¿äºæ»å»ï¼ä½å´è½å¾ç®åå°æé«æ»å»çææ¬ã\n\nå½ä¸ä¸ªè¯·æ±è¢«æ¦æªæ¶ï¼ngx_waf ä¼å¯¹è¯¥ ip å¯ç¨éªè¯ç ï¼æ­¤æ¶è¯¥ ip æ³è¦ç»§ç»­è®¿é®å°±å¿é¡»å®æéªè¯ç ãè¿åºæ¬å¯ä»¥åºæå¤æ°çèªå¨æ»å»å·¥å·ï¼å ä¸ºè¿äºå·¥å·ä¼å°è¯æ¯ä¸ä¸ªæ¼æ´ï¼èæä»¬æ»è½è¯å«ä¸äºææ¾çæ»å»è¯·æ±å¹¶å¯ç¨éªè¯ç ï¼èèªå¨å·¥å·æ¶é¾ä»¥éè¿éªè¯çãå¯¹äºæå¨æ»å»èï¼è¿ä¹è½æé«ä»ä»¬çæ¶é´ææ¬ã\n\nä¸é¢æ¯ä¸ä¸ªç¤ºä¾éç½®ã\n\nhttp {\n    waf_zone name=waf size=20m;\n    \n    server {\n        waf_captcha off prov=xxx sitekey=xxx secret=xxx;\n        waf_action blacklist=captcha zone=waf:action;\n    }\n}\n",charsets:{cjk:!0}},{title:"çæ¬è¯´æ",frontmatter:{title:"çæ¬è¯´æ",lang:"zh-CN"},regularPath:"/zh-cn/guide/version.html",relativePath:"zh-cn/guide/version.md",key:"v-374c71c8",path:"/zh-cn/guide/version.html",headers:[{level:2,title:"è¯­ä¹åçæ¬",slug:"è¯­ä¹åçæ¬",normalizedTitle:"è¯­ä¹åçæ¬",charIndex:11},{level:2,title:"é¿æç»´æ¤çï¼LTSï¼",slug:"é¿æç»´æ¤ç-lts",normalizedTitle:"é¿æç»´æ¤çï¼ltsï¼",charIndex:40},{level:2,title:"ææ°çï¼Currentï¼",slug:"ææ°ç-current",normalizedTitle:"ææ°çï¼currentï¼",charIndex:263}],lastUpdated:"2022/1/10 ä¸å3:38:27",lastUpdatedTimestamp:1641829107e3,headersStr:"è¯­ä¹åçæ¬ é¿æç»´æ¤çï¼LTSï¼ ææ°çï¼Currentï¼",content:"# çæ¬è¯´æ\n\n\n# è¯­ä¹åçæ¬\n\næ¬é¡¹ç®éµå¾ªè¯­ä¹åçæ¬ 2.0.0ã\n\n\n# é¿æç»´æ¤çï¼LTSï¼\n\né¿æç»´æ¤çè³å°ç»´æ¤ä¸å¹´ï¼å¹¶ä¸ç»´æ¤æé´åªä¼ä¿®å¤ bugï¼ç¹å«çæ¯ä¸¥éç bugï¼ä¸äºæ¯è¾è½»ç bug å¯è½ä¸ä¼ä¿®å¤ã\n\nè¿ä¸ªçæ¬å¨å¤§å¤æ°æåµä¸æ¯ç¨³å®çï¼ä½æ¯æ²¡æåè½æ§æ´æ°ã\n\ngit clone -b master https://github.com/ADD-SP/ngx_waf.git\n\n# æ\n\ngit clone -b lts https://github.com/ADD-SP/ngx_waf.git\n\n\n\n# ææ°çï¼Currentï¼\n\nææ°çç bug ä¹ä¼è¢«ä¿®å¤ï¼ä½æ¯ææ°çåå«äºå¨é¨çæ´æ°ï¼æ¯å¦æ°åè½ãåè½åå¨ãåè½å é¤ãæ§è½ä¼åç­ã\n\nè¿ä¸ªçæ¬ä¸å¦ LTS çç¨³å®ï¼ä½æ¯ä¼æåè½æ§æ´æ°ã\n\ngit clone -b current https://github.com/ADD-SP/ngx_waf.git\n",normalizedContent:"# çæ¬è¯´æ\n\n\n# è¯­ä¹åçæ¬\n\næ¬é¡¹ç®éµå¾ªè¯­ä¹åçæ¬ 2.0.0ã\n\n\n# é¿æç»´æ¤çï¼ltsï¼\n\né¿æç»´æ¤çè³å°ç»´æ¤ä¸å¹´ï¼å¹¶ä¸ç»´æ¤æé´åªä¼ä¿®å¤ bugï¼ç¹å«çæ¯ä¸¥éç bugï¼ä¸äºæ¯è¾è½»ç bug å¯è½ä¸ä¼ä¿®å¤ã\n\nè¿ä¸ªçæ¬å¨å¤§å¤æ°æåµä¸æ¯ç¨³å®çï¼ä½æ¯æ²¡æåè½æ§æ´æ°ã\n\ngit clone -b master https://github.com/add-sp/ngx_waf.git\n\n# æ\n\ngit clone -b lts https://github.com/add-sp/ngx_waf.git\n\n\n\n# ææ°çï¼currentï¼\n\nææ°çç bug ä¹ä¼è¢«ä¿®å¤ï¼ä½æ¯ææ°çåå«äºå¨é¨çæ´æ°ï¼æ¯å¦æ°åè½ãåè½åå¨ãåè½å é¤ãæ§è½ä¼åç­ã\n\nè¿ä¸ªçæ¬ä¸å¦ lts çç¨³å®ï¼ä½æ¯ä¼æåè½æ§æ´æ°ã\n\ngit clone -b current https://github.com/add-sp/ngx_waf.git\n",charsets:{cjk:!0}},{title:"å¼å¯éªè¯ç ",frontmatter:{title:"å¼å¯éªè¯ç ",lang:"zh-CN"},regularPath:"/zh-cn/practice/enable-captcha.html",relativePath:"zh-cn/practice/enable-captcha.md",key:"v-6408f788",path:"/zh-cn/practice/enable-captcha.html",lastUpdated:"2022/1/10 ä¸å3:38:27",lastUpdatedTimestamp:1641829107e3,headersStr:null,content:"# å¼å¯éªè¯ç \n\nå½ä½ çç«ç¹åå° CC æ»å»æ¶å¼å¯éªè¯ç æ¯ä¸éçéæ©ï¼å ä¸ºéªè¯ç å¯ä»¥å¸®å©ä½ è¿è¡äººæºè¯å«ã\n\n 1. æ¬æ¨¡åç®åæ¯æä¸ç§éªè¯ç ï¼åå«æ¯ hCaptchaãreCAPTCHAv2 å reCAPTCHAv3ãä½ åºè¯¥éæ©ä¸ä¸ªå¹¶ä»å¶ç½ç«ä¸ç³è¯·å° Sitekey å Secretã\n 2. ä¿®æ¹ nginx çéç½®æä»¶\n    * ä¸ºæ´ä¸ªç«ç¹å¼å¯éªè¯ç ã\n      \n      server {\n          waf_captcha on prov=hCaptcha secret=your_secret sitekey=your_sitekey;\n      }\n      \n    \n    * ä¸ºæä¸ªè·¯å¾å¼å¯éªè¯ç \n      \n      location {\n          waf_captcha on prov=hCaptcha secret=your_secret sitekey=your_sitekey;\n      }\n      \n    \n    * å½è®¿é®é¢çè¿é«æ¶å¼å¯éªè¯ç \n      \n      http {\n          waf_zone name=waf size=20m;\n          server {\n              waf_cc_deny on rate=1000r/m duration=1h zone=waf:cc;\n              waf_captcha off prov=hCaptcha secret=your_secret sitekey=your_sitekey;\n              waf_action cc_deny=CAPTCHA zone=waf:action;\n          }\n      }\n      \n\n 3. éå¯ nginxã\n\nè­¦å\n\nå¦æä½ éç½®äºä¼ªéæè§åï¼æèéç½®äºè·¯å¾éåï¼ä½ éè¦ä¿è¯è·¯å¾ /captcha ä¸è¢«éåã ä¸é¢æ¯ä¸ä¸ªä¿®æ¹ç¤ºä¾ã\n\n# BEGIN ä¿®æ¹å\nif (! -e $request_filename) {\n    rewrite ^(.*)$ index.php?s=$1 last break;\n}\n# END   ä¿®æ¹å\n\n# BEGIN ä¿®æ¹å\ntry_files $uri $uri/ index.php?s=$1;\n# END   ä¿®æ¹å\n\n\nSEO ä¼å\n\nå¼å¯éªè¯ç ä¼å½±åå°æç´¢å¼æçå·¥ä½ï¼ ææä½ å¯ä»¥ä½¿ç¨ waf_verify_bot æ¥æ¾è¡æäºæç´¢å¼æçç¬è«ã\n\nwaf_verify_bot on;\n",normalizedContent:"# å¼å¯éªè¯ç \n\nå½ä½ çç«ç¹åå° cc æ»å»æ¶å¼å¯éªè¯ç æ¯ä¸éçéæ©ï¼å ä¸ºéªè¯ç å¯ä»¥å¸®å©ä½ è¿è¡äººæºè¯å«ã\n\n 1. æ¬æ¨¡åç®åæ¯æä¸ç§éªè¯ç ï¼åå«æ¯ hcaptchaãrecaptchav2 å recaptchav3ãä½ åºè¯¥éæ©ä¸ä¸ªå¹¶ä»å¶ç½ç«ä¸ç³è¯·å° sitekey å secretã\n 2. ä¿®æ¹ nginx çéç½®æä»¶\n    * ä¸ºæ´ä¸ªç«ç¹å¼å¯éªè¯ç ã\n      \n      server {\n          waf_captcha on prov=hcaptcha secret=your_secret sitekey=your_sitekey;\n      }\n      \n    \n    * ä¸ºæä¸ªè·¯å¾å¼å¯éªè¯ç \n      \n      location {\n          waf_captcha on prov=hcaptcha secret=your_secret sitekey=your_sitekey;\n      }\n      \n    \n    * å½è®¿é®é¢çè¿é«æ¶å¼å¯éªè¯ç \n      \n      http {\n          waf_zone name=waf size=20m;\n          server {\n              waf_cc_deny on rate=1000r/m duration=1h zone=waf:cc;\n              waf_captcha off prov=hcaptcha secret=your_secret sitekey=your_sitekey;\n              waf_action cc_deny=captcha zone=waf:action;\n          }\n      }\n      \n\n 3. éå¯ nginxã\n\nè­¦å\n\nå¦æä½ éç½®äºä¼ªéæè§åï¼æèéç½®äºè·¯å¾éåï¼ä½ éè¦ä¿è¯è·¯å¾ /captcha ä¸è¢«éåã ä¸é¢æ¯ä¸ä¸ªä¿®æ¹ç¤ºä¾ã\n\n# begin ä¿®æ¹å\nif (! -e $request_filename) {\n    rewrite ^(.*)$ index.php?s=$1 last break;\n}\n# end   ä¿®æ¹å\n\n# begin ä¿®æ¹å\ntry_files $uri $uri/ index.php?s=$1;\n# end   ä¿®æ¹å\n\n\nseo ä¼å\n\nå¼å¯éªè¯ç ä¼å½±åå°æç´¢å¼æçå·¥ä½ï¼ ææä½ å¯ä»¥ä½¿ç¨ waf_verify_bot æ¥æ¾è¡æäºæç´¢å¼æçç¬è«ã\n\nwaf_verify_bot on;\n",charsets:{cjk:!0}},{title:"å¼å¯ ModSecurity",frontmatter:{title:"å¼å¯ ModSecurity",lang:"zh-CN"},regularPath:"/zh-cn/practice/enable-modsecurity.html",relativePath:"zh-cn/practice/enable-modsecurity.md",key:"v-5ded71bc",path:"/zh-cn/practice/enable-modsecurity.html",headers:[{level:2,title:"ç¬¬ä¸æ­¥ï¼ä¸è½½è§åé",slug:"ç¬¬ä¸æ­¥-ä¸è½½è§åé",normalizedTitle:"ç¬¬ä¸æ­¥ï¼ä¸è½½è§åé",charIndex:159},{level:2,title:"ç¬¬äºæ­¥ï¼æ·è´è§åæä»¶",slug:"ç¬¬äºæ­¥-æ·è´è§åæä»¶",normalizedTitle:"ç¬¬äºæ­¥ï¼æ·è´è§åæä»¶",charIndex:306},{level:2,title:"ç¬¬ä¸æ­¥ï¼ä¿®æ¹è§åæä»¶",slug:"ç¬¬ä¸æ­¥-ä¿®æ¹è§åæä»¶",normalizedTitle:"ç¬¬ä¸æ­¥ï¼ä¿®æ¹è§åæä»¶",charIndex:668},{level:2,title:"ç¬¬åæ­¥ï¼å è½½è§å",slug:"ç¬¬åæ­¥-å è½½è§å",normalizedTitle:"ç¬¬åæ­¥ï¼å è½½è§å",charIndex:982},{level:2,title:"ç¬¬äºæ­¥ï¼ä¼åæ§è½",slug:"ç¬¬äºæ­¥-ä¼åæ§è½",normalizedTitle:"ç¬¬äºæ­¥ï¼ä¼åæ§è½",charIndex:1085},{level:2,title:"ç¬¬å­æ­¥ï¼éå¯ nginx",slug:"ç¬¬å­æ­¥-éå¯-nginx",normalizedTitle:"ç¬¬å­æ­¥ï¼éå¯ nginx",charIndex:1352},{level:2,title:"ç¬¬ä¸æ­¥ï¼æµè¯",slug:"ç¬¬ä¸æ­¥-æµè¯",normalizedTitle:"ç¬¬ä¸æ­¥ï¼æµè¯",charIndex:1623},{level:2,title:"ç¬¬å«æ­¥ï¼å¤çè¯¯æ¥",slug:"ç¬¬å«æ­¥-å¤çè¯¯æ¥",normalizedTitle:"ç¬¬å«æ­¥ï¼å¤çè¯¯æ¥",charIndex:1667}],lastUpdated:"2022/1/10 ä¸å3:38:27",lastUpdatedTimestamp:1641829107e3,headersStr:"ç¬¬ä¸æ­¥ï¼ä¸è½½è§åé ç¬¬äºæ­¥ï¼æ·è´è§åæä»¶ ç¬¬ä¸æ­¥ï¼ä¿®æ¹è§åæä»¶ ç¬¬åæ­¥ï¼å è½½è§å ç¬¬äºæ­¥ï¼ä¼åæ§è½ ç¬¬å­æ­¥ï¼éå¯ nginx ç¬¬ä¸æ­¥ï¼æµè¯ ç¬¬å«æ­¥ï¼å¤çè¯¯æ¥",content:"# å¼å¯ ModSecurity\n\næ¬é¡¹ç®æä¾çé»è®¤è§åååå®¹æè¢«ç»è¿ï¼èä¸è®¸å¤ç¨æ·å¹¶æ²¡æè¶³å¤çè½ååæ¶é´å»ç»´æ¤ä¸å¥å¯é çè§åã\n\nè¿ç§æåµä¸ä½ å¯ä»¥éæ©å¯ç¨ ModSecurity å¹¶å¯ç¨ OWSAP(Open Web Application Security Project) æ ¸å¿è§åé æ¥å¢å¼ºé²æ¤è½åã\n\n\n# ç¬¬ä¸æ­¥ï¼ä¸è½½è§åé\n\ncd /usr/local/src\ngit clone https://github.com/SpiderLabs/ModSecurity.git\ngit clone https://github.com/coreruleset/coreruleset.git\n\n\n\n# ç¬¬äºæ­¥ï¼æ·è´è§åæä»¶\n\nmkdir -p /etc/nginx/rules/modsecurity\ncp coreruleset/crs-setup.conf.example /etc/nginx/rules/modsecurity/crs-setup.conf\ncp ModSecurity/modsecurity.conf-recommended /etc/nginx/rules/modsecurity/modsecurity.conf\ncp ModSecurity/unicode.mapping /etc/nginx/rules/modsecurity/unicode.mapping\ncp -r coreruleset/rules /etc/nginx/rules/modsecurity/owasp\n\n\n\n# ç¬¬ä¸æ­¥ï¼ä¿®æ¹è§åæä»¶\n\n 1. ç¼è¾ /etc/nginx/rules/modsecurity/modsecurity.confï¼å° SecRuleEngine DetectionOnly ä¿®æ¹ä¸º SecRuleEngine onã\n 2. ç¼è¾ /etc/nginx/rules/modsecurity/modsecurity.confï¼å¨æä»¶æ«å°¾è¿½å ä¸ååå®¹ã\n    \n    Include /usr/local/src/ngx_waf/assets/rules/crs-setup.conf\n    Include /etc/nginx/rules/modsecurity/owasp/*.conf\n    \n\n\n# ç¬¬åæ­¥ï¼å è½½è§å\n\nç¼è¾ nginx çéç½®æä»¶ã\n\nwaf_modsecurity on file=/etc/nginx/rules/modsecurity/modsecurity.conf;\n\n\n\n# ç¬¬äºæ­¥ï¼ä¼åæ§è½\n\nå¯ç¨è§ååä¼å¯¼è´æ§è½å¤§å¹åº¦éä½ï¼è¿æ¯å ä¸º ModSecurity çè§åå¼æååå¤æï¼ä½è¿ä¹ä¸ºå¶å¸¦æ¥äºå¼ºå¤§çåè½ã\n\nä¸è¬æ¥è¯´æä»¬æ éå¯¹ä¸äºéææä»¶è¿è¡æ£æ¥ï¼å æ­¤å¯ä»¥æ ¹æ®è¿ä¸ç¹æ¥ä¼åæ§è½ã\n\nç¼è¾ nginx çéç½®æä»¶ã\n\nlocation ~* \\.(gif|jpg|png|jpeg|webp|bmp|swf)$ {\n    waf_modsecurity off;\n}\n\nlocation ~* \\.(html|htm|js|css)$ {\n    waf_modsecurity off;\n}\n\n\n\n# ç¬¬å­æ­¥ï¼éå¯ nginx\n\nnginx -s stop\nnginx\n\n\nä¸ºä»ä¹ä¸ç¨ nginx -s reload ï¼\n\nå ä¸ºç®å ModSecurity å­å¨åå­æ³é²ç bugï¼ç´æ¥éè½½ nginx ä¼å¯¼è´åå­æ³é²åæ§è½éä½ã\n\n * ngin reload memory leak Â· Issue #2552 Â· SpiderLabs/ModSecurity\n * It often leads memory leak on nginx reload Â· Issue #2502 Â· SpiderLabs/ModSecurity\n\n\n# ç¬¬ä¸æ­¥ï¼æµè¯\n\næ­¤æ¶ä½ åºè¯¥æ£æ¥ç½ç«çè¿è¡æåµï¼ç¡®ä¿ä¸ä¼å ä¸ºè¯¯æ¥èå¯¼è´ç½ç«å¼å¸¸ã\n\n\n# ç¬¬å«æ­¥ï¼å¤çè¯¯æ¥\n\nå¤çè¯¯æ¥éè¦å¯¹ ModSecurity çè§åè¯­æ³ææäºè§£ï¼æ¬æä¸æä¾è¿ç±»ä¿¡æ¯ï¼ä½ å¯ä»¥è®¿é®ä¸é¢çé¾æ¥æ¥è·åç¸å³ä¿¡æ¯ã\n\n * Including OWASP ModSecurity Core Rule Set â Welcome to netnea\n * Reference Manual (v2.x) Â· SpiderLabs/ModSecurity Wiki",normalizedContent:"# å¼å¯ modsecurity\n\næ¬é¡¹ç®æä¾çé»è®¤è§åååå®¹æè¢«ç»è¿ï¼èä¸è®¸å¤ç¨æ·å¹¶æ²¡æè¶³å¤çè½ååæ¶é´å»ç»´æ¤ä¸å¥å¯é çè§åã\n\nè¿ç§æåµä¸ä½ å¯ä»¥éæ©å¯ç¨ modsecurity å¹¶å¯ç¨ owsap(open web application security project) æ ¸å¿è§åé æ¥å¢å¼ºé²æ¤è½åã\n\n\n# ç¬¬ä¸æ­¥ï¼ä¸è½½è§åé\n\ncd /usr/local/src\ngit clone https://github.com/spiderlabs/modsecurity.git\ngit clone https://github.com/coreruleset/coreruleset.git\n\n\n\n# ç¬¬äºæ­¥ï¼æ·è´è§åæä»¶\n\nmkdir -p /etc/nginx/rules/modsecurity\ncp coreruleset/crs-setup.conf.example /etc/nginx/rules/modsecurity/crs-setup.conf\ncp modsecurity/modsecurity.conf-recommended /etc/nginx/rules/modsecurity/modsecurity.conf\ncp modsecurity/unicode.mapping /etc/nginx/rules/modsecurity/unicode.mapping\ncp -r coreruleset/rules /etc/nginx/rules/modsecurity/owasp\n\n\n\n# ç¬¬ä¸æ­¥ï¼ä¿®æ¹è§åæä»¶\n\n 1. ç¼è¾ /etc/nginx/rules/modsecurity/modsecurity.confï¼å° secruleengine detectiononly ä¿®æ¹ä¸º secruleengine onã\n 2. ç¼è¾ /etc/nginx/rules/modsecurity/modsecurity.confï¼å¨æä»¶æ«å°¾è¿½å ä¸ååå®¹ã\n    \n    include /usr/local/src/ngx_waf/assets/rules/crs-setup.conf\n    include /etc/nginx/rules/modsecurity/owasp/*.conf\n    \n\n\n# ç¬¬åæ­¥ï¼å è½½è§å\n\nç¼è¾ nginx çéç½®æä»¶ã\n\nwaf_modsecurity on file=/etc/nginx/rules/modsecurity/modsecurity.conf;\n\n\n\n# ç¬¬äºæ­¥ï¼ä¼åæ§è½\n\nå¯ç¨è§ååä¼å¯¼è´æ§è½å¤§å¹åº¦éä½ï¼è¿æ¯å ä¸º modsecurity çè§åå¼æååå¤æï¼ä½è¿ä¹ä¸ºå¶å¸¦æ¥äºå¼ºå¤§çåè½ã\n\nä¸è¬æ¥è¯´æä»¬æ éå¯¹ä¸äºéææä»¶è¿è¡æ£æ¥ï¼å æ­¤å¯ä»¥æ ¹æ®è¿ä¸ç¹æ¥ä¼åæ§è½ã\n\nç¼è¾ nginx çéç½®æä»¶ã\n\nlocation ~* \\.(gif|jpg|png|jpeg|webp|bmp|swf)$ {\n    waf_modsecurity off;\n}\n\nlocation ~* \\.(html|htm|js|css)$ {\n    waf_modsecurity off;\n}\n\n\n\n# ç¬¬å­æ­¥ï¼éå¯ nginx\n\nnginx -s stop\nnginx\n\n\nä¸ºä»ä¹ä¸ç¨ nginx -s reload ï¼\n\nå ä¸ºç®å modsecurity å­å¨åå­æ³é²ç bugï¼ç´æ¥éè½½ nginx ä¼å¯¼è´åå­æ³é²åæ§è½éä½ã\n\n * ngin reload memory leak Â· issue #2552 Â· spiderlabs/modsecurity\n * it often leads memory leak on nginx reload Â· issue #2502 Â· spiderlabs/modsecurity\n\n\n# ç¬¬ä¸æ­¥ï¼æµè¯\n\næ­¤æ¶ä½ åºè¯¥æ£æ¥ç½ç«çè¿è¡æåµï¼ç¡®ä¿ä¸ä¼å ä¸ºè¯¯æ¥èå¯¼è´ç½ç«å¼å¸¸ã\n\n\n# ç¬¬å«æ­¥ï¼å¤çè¯¯æ¥\n\nå¤çè¯¯æ¥éè¦å¯¹ modsecurity çè§åè¯­æ³ææäºè§£ï¼æ¬æä¸æä¾è¿ç±»ä¿¡æ¯ï¼ä½ å¯ä»¥è®¿é®ä¸é¢çé¾æ¥æ¥è·åç¸å³ä¿¡æ¯ã\n\n * including owasp modsecurity core rule set â welcome to netnea\n * reference manual (v2.x) Â· spiderlabs/modsecurity wiki",charsets:{cjk:!0}},{title:"éå¯¹è·¯å¾ææä»¶éæµ",frontmatter:{title:"éå¯¹è·¯å¾ææä»¶éæµ",lang:"zh-CN"},regularPath:"/zh-cn/practice/limit-the-rate-per-arbitrary-url.html",relativePath:"zh-cn/practice/limit-the-rate-per-arbitrary-url.md",key:"v-1cb3d19c",path:"/zh-cn/practice/limit-the-rate-per-arbitrary-url.html",headers:[{level:2,title:"LTS çæ¬",slug:"lts-çæ¬",normalizedTitle:"lts çæ¬",charIndex:62},{level:2,title:"Current çæ¬",slug:"current-çæ¬",normalizedTitle:"current çæ¬",charIndex:263}],lastUpdated:"2022/1/10 ä¸å3:38:27",lastUpdatedTimestamp:1641829107e3,headersStr:"LTS çæ¬ Current çæ¬",content:"# éå¯¹è·¯å¾ææä»¶éæµ\n\nææ¶ä½ å¯è½æ³è¦éå¶ä¸åçè·¯å¾ææä»¶çè¯·æ±éçï¼æ¯å¦éæèµæºåå¨æèµæºä½¿ç¨ä¸åçéçéå¶ã\n\n\n# LTS çæ¬\n\n# å°éæèµæºçè¯·æ±éçéå¶å° 10,000 æ¬¡/åéã\nlocation /static/ {\n    waf_cc_deny rate=10000r/m duration=1h;\n}\n\n# å°å¨æèµæºçè¯·æ±éçéå¶å° 2,000 æ¬¡/åéã\nlocation /dynamic/ {\n    waf_cc_deny rate=2000r/m duration=1h;\n}\n\n\n\n# Current çæ¬\n\nhttp {\n    waf_zone name=waf size=20m;\n    server {\n        # å°éæèµæºçè¯·æ±éçéå¶å° 10,000 æ¬¡/åéã\n        location /static/ {\n            waf_cc_deny rate=10000r/m duration=1h zone=waf:cc_static;\n        }\n\n        # å°å¨æèµæºçè¯·æ±éçéå¶å° 2,000 æ¬¡/åéã\n        location /dynamic/ {\n            waf_cc_deny rate=2000r/m duration=1h zone=waf:cc_dynamic;\n        }\n    }\n}\n",normalizedContent:"# éå¯¹è·¯å¾ææä»¶éæµ\n\nææ¶ä½ å¯è½æ³è¦éå¶ä¸åçè·¯å¾ææä»¶çè¯·æ±éçï¼æ¯å¦éæèµæºåå¨æèµæºä½¿ç¨ä¸åçéçéå¶ã\n\n\n# lts çæ¬\n\n# å°éæèµæºçè¯·æ±éçéå¶å° 10,000 æ¬¡/åéã\nlocation /static/ {\n    waf_cc_deny rate=10000r/m duration=1h;\n}\n\n# å°å¨æèµæºçè¯·æ±éçéå¶å° 2,000 æ¬¡/åéã\nlocation /dynamic/ {\n    waf_cc_deny rate=2000r/m duration=1h;\n}\n\n\n\n# current çæ¬\n\nhttp {\n    waf_zone name=waf size=20m;\n    server {\n        # å°éæèµæºçè¯·æ±éçéå¶å° 10,000 æ¬¡/åéã\n        location /static/ {\n            waf_cc_deny rate=10000r/m duration=1h zone=waf:cc_static;\n        }\n\n        # å°å¨æèµæºçè¯·æ±éçéå¶å° 2,000 æ¬¡/åéã\n        location /dynamic/ {\n            waf_cc_deny rate=2000r/m duration=1h zone=waf:cc_dynamic;\n        }\n    }\n}\n",charsets:{cjk:!0}},{title:"æµå¾¡åå¸å¼ CC æ»å»ï¼åå¸å¼ HTTP æ´ªæ°´ï¼",frontmatter:{title:"æµå¾¡åå¸å¼ CC æ»å»ï¼åå¸å¼ HTTP æ´ªæ°´ï¼",lang:"zh-CN"},regularPath:"/zh-cn/practice/protect-against-distributed-http-flood.html",relativePath:"zh-cn/practice/protect-against-distributed-http-flood.md",key:"v-0caea6c8",path:"/zh-cn/practice/protect-against-distributed-http-flood.html",headers:[{level:2,title:"å¼å¯éªè¯ç ",slug:"å¼å¯éªè¯ç ",normalizedTitle:"å¼å¯éªè¯ç ",charIndex:216},{level:2,title:"ä½¿ç¨äºç§ç¾",slug:"ä½¿ç¨äºç§ç¾",normalizedTitle:"ä½¿ç¨äºç§ç¾",charIndex:236},{level:3,title:"LTS çæ¬",slug:"lts-çæ¬",normalizedTitle:"lts çæ¬",charIndex:439},{level:3,title:"Current çæ¬",slug:"current-çæ¬",normalizedTitle:"current çæ¬",charIndex:658},{level:2,title:"éä½å¸¦å®½å ç¨",slug:"éä½å¸¦å®½å ç¨",normalizedTitle:"éä½å¸¦å®½å ç¨",charIndex:817}],lastUpdated:"2022/1/10 ä¸å3:38:27",lastUpdatedTimestamp:1641829107e3,headersStr:"å¼å¯éªè¯ç  ä½¿ç¨äºç§ç¾ LTS çæ¬ Current çæ¬ éä½å¸¦å®½å ç¨",content:"# æµå¾¡åå¸å¼ CC æ»å»ï¼åå¸å¼ HTTP æ´ªæ°´ï¼\n\nCC æ»å»ï¼HTTP æ´ªæ°´ï¼æ¯æåéå¤§éç HTTP è¯·æ±æ¥èå°½æå¡å¨çèµæºã\n\nå¦ææ»å»èä½¿ç¨ç IP è¾å°åé²å¾¡è¾ä¸ºç®åï¼å ä¸ºåªéè¦éå¶ IP çè¯·æ±é¢çï¼ ä½æ¯å¦ææ»å»èä½¿ç¨å¤§éç IP è¿è¡æ»å»ï¼ä»ä»éå¶ IP çè¯·æ±é¢çæ¯æ æµäºäºçã è¿ç§ä½¿ç¨å¤§é IP è¿è¡ CC æ»å»çæ¹å¼ç§°ä¸ºåå¸å¼ CC æ»å»æåå¸å¼ HTTP æ´ªæ°´ã\n\næ¬æ¨¡åæä¾äºä¸äºç¼è§£æ¹å¼ã\n\n\n# å¼å¯éªè¯ç \n\nè¯¦è§å¼å¯éªè¯ç ã\n\n\n# ä½¿ç¨äºç§ç¾\n\nä½ å¯è½å¬è¯´è¿ Cloudflare çäºç§ç¾ï¼æ¬æ¨¡åçäºç§ç¾å Cloudflare çå®å¨ä¸åã å®çåè½æ¯æ£æµå®¢æ·ç«¯æ¯å¦è½å¤æ­£ç¡®å°æ¯æ Cookieï¼æ¯å¦åé Cookie åæ­£ç¡®å°å¤ç Set-Cookie ååºå¤´ã\n\nä½ å¯ä»¥ä»æ¬é¡¹ç®ç assets/ ç®å½ä¸æ¾å° under-attack.html å¹¶å°å¶æ·è´å°æä¸ªè·¯å¾ä¸ï¼ç¶åéè¿ä¿®æ¹ nginx çéç½®æä»¶æ¥å¼å¯äºç§ç¾ã\n\n\n# LTS çæ¬\n\n * ä¸ºæ´ä¸ªç½ç«å¼å¯äºç§ç¾\n   \n   server {\n       waf_under_attack on file=/path/to/under_attack.html;\n   }\n   \n\n * ä¸ºæä¸ªè·¯å¾å¼å¯äºç§ç¾\n   \n   location /path {\n       waf_under_attack on file=/path/to/under_attack.html;\n   }\n   \n\n\n# Current çæ¬\n\n * ä¸ºæ´ä¸ªç½ç«å¼å¯äºç§ç¾\n   \n   server {\n       waf_under_attack on;\n   }\n   \n\n * ä¸ºæä¸ªè·¯å¾å¼å¯äºç§ç¾\n   \n   location /path {\n       waf_under_attack on;\n   }\n   \n\n\n# éä½å¸¦å®½å ç¨\n\nè¯¦è§è¢«æ»å»æ¶éä½å¸¦å®½å ç¨ã",normalizedContent:"# æµå¾¡åå¸å¼ cc æ»å»ï¼åå¸å¼ http æ´ªæ°´ï¼\n\ncc æ»å»ï¼http æ´ªæ°´ï¼æ¯æåéå¤§éç http è¯·æ±æ¥èå°½æå¡å¨çèµæºã\n\nå¦ææ»å»èä½¿ç¨ç ip è¾å°åé²å¾¡è¾ä¸ºç®åï¼å ä¸ºåªéè¦éå¶ ip çè¯·æ±é¢çï¼ ä½æ¯å¦ææ»å»èä½¿ç¨å¤§éç ip è¿è¡æ»å»ï¼ä»ä»éå¶ ip çè¯·æ±é¢çæ¯æ æµäºäºçã è¿ç§ä½¿ç¨å¤§é ip è¿è¡ cc æ»å»çæ¹å¼ç§°ä¸ºåå¸å¼ cc æ»å»æåå¸å¼ http æ´ªæ°´ã\n\næ¬æ¨¡åæä¾äºä¸äºç¼è§£æ¹å¼ã\n\n\n# å¼å¯éªè¯ç \n\nè¯¦è§å¼å¯éªè¯ç ã\n\n\n# ä½¿ç¨äºç§ç¾\n\nä½ å¯è½å¬è¯´è¿ cloudflare çäºç§ç¾ï¼æ¬æ¨¡åçäºç§ç¾å cloudflare çå®å¨ä¸åã å®çåè½æ¯æ£æµå®¢æ·ç«¯æ¯å¦è½å¤æ­£ç¡®å°æ¯æ cookieï¼æ¯å¦åé cookie åæ­£ç¡®å°å¤ç set-cookie ååºå¤´ã\n\nä½ å¯ä»¥ä»æ¬é¡¹ç®ç assets/ ç®å½ä¸æ¾å° under-attack.html å¹¶å°å¶æ·è´å°æä¸ªè·¯å¾ä¸ï¼ç¶åéè¿ä¿®æ¹ nginx çéç½®æä»¶æ¥å¼å¯äºç§ç¾ã\n\n\n# lts çæ¬\n\n * ä¸ºæ´ä¸ªç½ç«å¼å¯äºç§ç¾\n   \n   server {\n       waf_under_attack on file=/path/to/under_attack.html;\n   }\n   \n\n * ä¸ºæä¸ªè·¯å¾å¼å¯äºç§ç¾\n   \n   location /path {\n       waf_under_attack on file=/path/to/under_attack.html;\n   }\n   \n\n\n# current çæ¬\n\n * ä¸ºæ´ä¸ªç½ç«å¼å¯äºç§ç¾\n   \n   server {\n       waf_under_attack on;\n   }\n   \n\n * ä¸ºæä¸ªè·¯å¾å¼å¯äºç§ç¾\n   \n   location /path {\n       waf_under_attack on;\n   }\n   \n\n\n# éä½å¸¦å®½å ç¨\n\nè¯¦è§è¢«æ»å»æ¶éä½å¸¦å®½å ç¨ã",charsets:{cjk:!0}},{title:"æ¦è¿°",frontmatter:{title:"æ¦è¿°",lang:"zh-CN"},regularPath:"/zh-cn/practice/overview.html",relativePath:"zh-cn/practice/overview.md",key:"v-7b84ce1c",path:"/zh-cn/practice/overview.html",lastUpdated:"2022/1/10 ä¸å3:38:27",lastUpdatedTimestamp:1641829107e3,headersStr:null,content:"# æ¦è¿°\n\nå ä¸ºæ¨¡åçéç½®æ¯è¾å¤æï¼ä¸ºäºéä½ä½¿ç¨é¾åº¦ï¼æä»¬å¨è¿éååºäºä¸äºå¸¸è§ç¨æ³ã\n\n * éå¯¹è·¯å¾ææä»¶éæµ\n * å¼å¯éªè¯ç \n * æ¦æªè¯·æ±æ¶å¯ç¨éªè¯ç \n * å¨è¢«æ»å»æ¶éä½å¸¦å®½å ç¨\n * æµå¾¡åå¸å¼ CC æ»å»ï¼åå¸å¼ HTTP æ´ªæ°´ï¼\n * å¼å¯ ModSecurity",normalizedContent:"# æ¦è¿°\n\nå ä¸ºæ¨¡åçéç½®æ¯è¾å¤æï¼ä¸ºäºéä½ä½¿ç¨é¾åº¦ï¼æä»¬å¨è¿éååºäºä¸äºå¸¸è§ç¨æ³ã\n\n * éå¯¹è·¯å¾ææä»¶éæµ\n * å¼å¯éªè¯ç \n * æ¦æªè¯·æ±æ¶å¯ç¨éªè¯ç \n * å¨è¢«æ»å»æ¶éä½å¸¦å®½å ç¨\n * æµå¾¡åå¸å¼ cc æ»å»ï¼åå¸å¼ http æ´ªæ°´ï¼\n * å¼å¯ modsecurity",charsets:{cjk:!0}},{title:"è¢«æ»å»æ¶éä½å¸¦å®½å ç¨",frontmatter:{title:"è¢«æ»å»æ¶éä½å¸¦å®½å ç¨",lang:"zh-CN"},regularPath:"/zh-cn/practice/reduce-bandwidth-usage-when-attacked.html",relativePath:"zh-cn/practice/reduce-bandwidth-usage-when-attacked.md",key:"v-1367e85c",path:"/zh-cn/practice/reduce-bandwidth-usage-when-attacked.html",headers:[{level:2,title:"LTS çæ¬",slug:"lts-çæ¬",normalizedTitle:"lts çæ¬",charIndex:120},{level:2,title:"Current çæ¬",slug:"current-çæ¬",normalizedTitle:"current çæ¬",charIndex:162}],lastUpdated:"2022/1/10 ä¸å3:38:27",lastUpdatedTimestamp:1641829107e3,headersStr:"LTS çæ¬ Current çæ¬",content:"# è¢«æ»å»æ¶éä½å¸¦å®½å ç¨\n\nå½ä½ åå° CC æ»å»æ¶ï¼æ»å»èç IP å·²ç»è¢« CC é²æ¤æé»ï¼ä½æ¯ä½ çä¸ä¸è¡å¸¦å®½ä¾ç¶å¾é«ï¼ è¿æ¯å ä¸º CC é²æ¤ä¼è¿åä¸ä¸ª 503 ç¶æç ï¼å æ­¤å ç¨äºä½ çå¸¦å®½ã\n\nä½ å¯ä»¥ä½¿ç¨ä¸é¢çéç½®æ¥éä½å¸¦å®½å ç¨ã\n\n\n# LTS çæ¬\n\nwaf_http_status cc_deny=444;\n\n\n\n# Current çæ¬\n\nwaf_action cc_deny=444;\n\n\n444 ç¶æç æ¯ nginx å®ä¹çä¸ä¸ªéæ åç HTTP ç¶æç ï¼å¶ä½ç¨å°±æ¯ç´æ¥å³é­è¿æ¥ï¼ä¸ååéä»»ä½æ°æ®ã\n\nè­¦å\n\nå¦æä½ ä½¿ç¨äº 444 ç¶æç ï¼é£ä¹å¨ç¨æ·çæ¥ä½ çç½ç«å°±åæ¯ä¸å­å¨ä¸æ ·ãè¿æ¯å ä¸ºç½ç«åºéä¸è¬é½ä¼æ HTTP ç¶æç ç¨æ¥æç¤ºéè¯¯ï¼ å¦æè®¿é®ä¸ä¸ªç½ç«è¿éè¯¯æç¤ºé½æ²¡æï¼é£ä¹å¤§æ¦çæ¯è¿ä¸ªç½ç«ä¸å­å¨ã",normalizedContent:"# è¢«æ»å»æ¶éä½å¸¦å®½å ç¨\n\nå½ä½ åå° cc æ»å»æ¶ï¼æ»å»èç ip å·²ç»è¢« cc é²æ¤æé»ï¼ä½æ¯ä½ çä¸ä¸è¡å¸¦å®½ä¾ç¶å¾é«ï¼ è¿æ¯å ä¸º cc é²æ¤ä¼è¿åä¸ä¸ª 503 ç¶æç ï¼å æ­¤å ç¨äºä½ çå¸¦å®½ã\n\nä½ å¯ä»¥ä½¿ç¨ä¸é¢çéç½®æ¥éä½å¸¦å®½å ç¨ã\n\n\n# lts çæ¬\n\nwaf_http_status cc_deny=444;\n\n\n\n# current çæ¬\n\nwaf_action cc_deny=444;\n\n\n444 ç¶æç æ¯ nginx å®ä¹çä¸ä¸ªéæ åç http ç¶æç ï¼å¶ä½ç¨å°±æ¯ç´æ¥å³é­è¿æ¥ï¼ä¸ååéä»»ä½æ°æ®ã\n\nè­¦å\n\nå¦æä½ ä½¿ç¨äº 444 ç¶æç ï¼é£ä¹å¨ç¨æ·çæ¥ä½ çç½ç«å°±åæ¯ä¸å­å¨ä¸æ ·ãè¿æ¯å ä¸ºç½ç«åºéä¸è¬é½ä¼æ http ç¶æç ç¨æ¥æç¤ºéè¯¯ï¼ å¦æè®¿é®ä¸ä¸ªç½ç«è¿éè¯¯æç¤ºé½æ²¡æï¼é£ä¹å¤§æ¦çæ¯è¿ä¸ªç½ç«ä¸å­å¨ã",charsets:{cjk:!0}},{title:"å¼åè®¡å",frontmatter:{title:"å¼åè®¡å",lang:"zh-CN"},regularPath:"/zh-cn/roadmap/overview.html",relativePath:"zh-cn/roadmap/overview.md",key:"v-2e6d9fa6",path:"/zh-cn/roadmap/overview.html",headers:[{level:2,title:"åè¡¨",slug:"åè¡¨",normalizedTitle:"åè¡¨",charIndex:48}],lastUpdated:"2022/1/10 ä¸å3:38:27",lastUpdatedTimestamp:1641829107e3,headersStr:"åè¡¨",content:"# å¼åè®¡å\n\næ¬é¡µé¢ä¼ååºé¡¹ç®çå¼åè®¡åï¼åæ¬ä½ä¸éäºæ°åè½ã\n\næå¾æ¨å®è´µçå»ºè®®ï¼\n\n\n# åè¡¨",normalizedContent:"# å¼åè®¡å\n\næ¬é¡µé¢ä¼ååºé¡¹ç®çå¼åè®¡åï¼åæ¬ä½ä¸éäºæ°åè½ã\n\næå¾æ¨å®è´µçå»ºè®®ï¼\n\n\n# åè¡¨",charsets:{cjk:!0}},{title:"å¼å®¹æ§è¯´æ",frontmatter:{title:"å¼å®¹æ§è¯´æ",lang:"zh-CN"},regularPath:"/zh-cn/guide/compatibility.html",relativePath:"zh-cn/guide/compatibility.md",key:"v-738f7b1c",path:"/zh-cn/guide/compatibility.html",headers:[{level:2,title:"æä½ç³»ç»å¼å®¹æ§",slug:"æä½ç³»ç»å¼å®¹æ§",normalizedTitle:"æä½ç³»ç»å¼å®¹æ§",charIndex:12},{level:2,title:"nginx å¼å®¹æ§",slug:"nginx-å¼å®¹æ§",normalizedTitle:"nginx å¼å®¹æ§",charIndex:47},{level:2,title:"æ¨¡åå¼å®¹æ§",slug:"æ¨¡åå¼å®¹æ§",normalizedTitle:"æ¨¡åå¼å®¹æ§",charIndex:95},{level:3,title:"ngxhttprewrite_module",slug:"ngx-http-rewrite-module",normalizedTitle:"ngxhttprewrite_module",charIndex:null}],lastUpdated:"2022/1/10 ä¸å3:38:27",lastUpdatedTimestamp:1641829107e3,headersStr:"æä½ç³»ç»å¼å®¹æ§ nginx å¼å®¹æ§ æ¨¡åå¼å®¹æ§ ngxhttprewrite_module",content:"# å¼å®¹æ§è¯´æ\n\n\n# æä½ç³»ç»å¼å®¹æ§\n\nä¸ä¿è¯ä¸Linuxä»¥å¤çæä½ç³»ç»çå¼å®¹æ§ã\n\n\n# nginx å¼å®¹æ§\n\næ¬æ¨¡ååªä¿è¯å¯¹ nginx-1.18.0 ææ´æ°ççæ¬çå¼å®¹æ§ã\n\n\n# æ¨¡åå¼å®¹æ§\n\n\n# ngx_http_rewrite_module\n\næ¬æ¨¡åä¸ ngx_http_rewrite_module å­å¨å¼å®¹æ§é®é¢ã\n\n * å½ return æä»¤çææ¶æ¨¡åä¸ä¼çæã\n * å½ rewrite æä»¤é æäºè¿åï¼å¦ 302 éå®åï¼æ¶æ¨¡åä¸ä¼çæã\n\nä½¿ç¨ try_files ä»£æ¿ rewrite\n\nä½ å¯è½ä¼æä¸åçéç½®ã\n\nif (!-e $request_filename) {\n    rewrite (.*) /index.php\n}\n\n\nä½ å¯ä»¥ç¨ä¸é¢çéç½®æ¥æ¿æ¢ã\n\ntry_files $uri $uri/ /index.php;\n\n\nè¯¦æè§ rewrite å try_filesã",normalizedContent:"# å¼å®¹æ§è¯´æ\n\n\n# æä½ç³»ç»å¼å®¹æ§\n\nä¸ä¿è¯ä¸linuxä»¥å¤çæä½ç³»ç»çå¼å®¹æ§ã\n\n\n# nginx å¼å®¹æ§\n\næ¬æ¨¡ååªä¿è¯å¯¹ nginx-1.18.0 ææ´æ°ççæ¬çå¼å®¹æ§ã\n\n\n# æ¨¡åå¼å®¹æ§\n\n\n# ngx_http_rewrite_module\n\næ¬æ¨¡åä¸ ngx_http_rewrite_module å­å¨å¼å®¹æ§é®é¢ã\n\n * å½ return æä»¤çææ¶æ¨¡åä¸ä¼çæã\n * å½ rewrite æä»¤é æäºè¿åï¼å¦ 302 éå®åï¼æ¶æ¨¡åä¸ä¼çæã\n\nä½¿ç¨ try_files ä»£æ¿ rewrite\n\nä½ å¯è½ä¼æä¸åçéç½®ã\n\nif (!-e $request_filename) {\n    rewrite (.*) /index.php\n}\n\n\nä½ å¯ä»¥ç¨ä¸é¢çéç½®æ¥æ¿æ¢ã\n\ntry_files $uri $uri/ /index.php;\n\n\nè¯¦æè§ rewrite å try_filesã",charsets:{cjk:!0}},{title:"éç½®",frontmatter:{title:"éç½®",lang:"zh-CN",sidebarDepth:3},regularPath:"/zh-cn/guide/configuration.html",relativePath:"zh-cn/guide/configuration.md",key:"v-36b6dd5c",path:"/zh-cn/guide/configuration.html",headers:[{level:2,title:"LTS çæ¬",slug:"lts-çæ¬",normalizedTitle:"lts çæ¬",charIndex:102},{level:2,title:"Current çæ¬",slug:"current-çæ¬",normalizedTitle:"current çæ¬",charIndex:584}],lastUpdated:"2022/1/10 ä¸å3:38:27",lastUpdatedTimestamp:1641829107e3,headersStr:"LTS çæ¬ Current çæ¬",content:"# éç½®\n\næ¨å¯ä»¥å¨ nginx.conf åçä¸ä¸ª server åä¸­æ·»å éç½®æ¥å¼å¯ ngx_wafã ä¸é¢æ¯ä¸ä¸ªä¾å­ã\n\nè­¦å\n\nè¯·ä¸è¦å¯¹ä¸é¢ååºçéç½®è¿è¡ä¿®æ¹ï¼é¤éä½ ç¥éè¿äºéç½®é¡¹çå«ä¹ã\n\n\n# LTS çæ¬\n\nhttp {\n    ...\n    server {\n        ...\n        # on è¡¨ç¤ºå¯ç¨ï¼off è¡¨ç¤ºå³é­ã\n        waf on;\n\n        # è§åæä»¶æå¨ç®å½çç»å¯¹è·¯å¾ï¼å¿é¡»ä»¥ / ç»å°¾ã\n        waf_rule_path /usr/local/src/ngx_waf/assets/rules/;\n        \n        # é²ç«å¢å·¥ä½æ¨¡å¼ï¼STD è¡¨ç¤ºæ åæ¨¡å¼ã\n        waf_mode STD;\n\n        # CC é²å¾¡åæ°ï¼1000 æ¯åéè¯·æ±æ¬¡æ°ä¸éï¼è¶åºä¸éåå°ç¦å¯¹åº ip 60 åéã\n        waf_cc_deny rate=1000r/m duration=60m;\n\n        # æå¤ç¼å­ 50 ä¸ªæ£æµç®æ çæ£æµç»æï¼å¯¹é¤äº IP é»ç½ååæ£æµãCC é²æ¤å POST æ£æµä»¥å¤çæææ£æµçæã\n        waf_cache capacity=50;\n        ...\n    }\n    ...\n}\n\n\n\n# Current çæ¬\n\nhttp {\n    # å£°æä¸åå±äº«åå­\n    waf_zone name=waf size=20m;\n    ...\n    server {\n        ...\n        # on è¡¨ç¤ºå¯ç¨ï¼off è¡¨ç¤ºå³é­ã\n        waf on;\n\n        # è§åæä»¶æå¨ç®å½çç»å¯¹è·¯å¾ï¼å¿é¡»ä»¥ / ç»å°¾ã\n        waf_rule_path /usr/local/src/ngx_waf/assets/rules/;\n        \n        # é²ç«å¢å·¥ä½æ¨¡å¼ï¼STD è¡¨ç¤ºæ åæ¨¡å¼ã\n        waf_mode STD;\n\n        # CC é²å¾¡åæ°ï¼1000 æ¯åéè¯·æ±æ¬¡æ°ä¸éï¼è¶åºä¸éåå°ç¦å¯¹åº ip 60 åéã\n        waf_cc_deny on rate=1000r/m duration=60m zone=waf:cc;\n\n        # æå¤ç¼å­ 50 ä¸ªæ£æµç®æ çæ£æµç»æï¼å¯¹é¤äº IP é»ç½ååæ£æµãCC é²æ¤å POST æ£æµä»¥å¤çæææ£æµçæã\n        waf_cache on capacity=50;\n        ...\n    }\n    ...\n}\n",normalizedContent:"# éç½®\n\næ¨å¯ä»¥å¨ nginx.conf åçä¸ä¸ª server åä¸­æ·»å éç½®æ¥å¼å¯ ngx_wafã ä¸é¢æ¯ä¸ä¸ªä¾å­ã\n\nè­¦å\n\nè¯·ä¸è¦å¯¹ä¸é¢ååºçéç½®è¿è¡ä¿®æ¹ï¼é¤éä½ ç¥éè¿äºéç½®é¡¹çå«ä¹ã\n\n\n# lts çæ¬\n\nhttp {\n    ...\n    server {\n        ...\n        # on è¡¨ç¤ºå¯ç¨ï¼off è¡¨ç¤ºå³é­ã\n        waf on;\n\n        # è§åæä»¶æå¨ç®å½çç»å¯¹è·¯å¾ï¼å¿é¡»ä»¥ / ç»å°¾ã\n        waf_rule_path /usr/local/src/ngx_waf/assets/rules/;\n        \n        # é²ç«å¢å·¥ä½æ¨¡å¼ï¼std è¡¨ç¤ºæ åæ¨¡å¼ã\n        waf_mode std;\n\n        # cc é²å¾¡åæ°ï¼1000 æ¯åéè¯·æ±æ¬¡æ°ä¸éï¼è¶åºä¸éåå°ç¦å¯¹åº ip 60 åéã\n        waf_cc_deny rate=1000r/m duration=60m;\n\n        # æå¤ç¼å­ 50 ä¸ªæ£æµç®æ çæ£æµç»æï¼å¯¹é¤äº ip é»ç½ååæ£æµãcc é²æ¤å post æ£æµä»¥å¤çæææ£æµçæã\n        waf_cache capacity=50;\n        ...\n    }\n    ...\n}\n\n\n\n# current çæ¬\n\nhttp {\n    # å£°æä¸åå±äº«åå­\n    waf_zone name=waf size=20m;\n    ...\n    server {\n        ...\n        # on è¡¨ç¤ºå¯ç¨ï¼off è¡¨ç¤ºå³é­ã\n        waf on;\n\n        # è§åæä»¶æå¨ç®å½çç»å¯¹è·¯å¾ï¼å¿é¡»ä»¥ / ç»å°¾ã\n        waf_rule_path /usr/local/src/ngx_waf/assets/rules/;\n        \n        # é²ç«å¢å·¥ä½æ¨¡å¼ï¼std è¡¨ç¤ºæ åæ¨¡å¼ã\n        waf_mode std;\n\n        # cc é²å¾¡åæ°ï¼1000 æ¯åéè¯·æ±æ¬¡æ°ä¸éï¼è¶åºä¸éåå°ç¦å¯¹åº ip 60 åéã\n        waf_cc_deny on rate=1000r/m duration=60m zone=waf:cc;\n\n        # æå¤ç¼å­ 50 ä¸ªæ£æµç®æ çæ£æµç»æï¼å¯¹é¤äº ip é»ç½ååæ£æµãcc é²æ¤å post æ£æµä»¥å¤çæææ£æµçæã\n        waf_cache on capacity=50;\n        ...\n    }\n    ...\n}\n",charsets:{cjk:!0}}],themeConfig:{repo:"https://github.com/ADD-SP/ngx_waf/",repoLabel:"Github",docsRepo:"https://github.com/ADD-SP/ngx_waf-docs/",docsDir:"docs",editLinks:!0,smoothScroll:!0,locales:{"/":{selectText:"Languages",label:"English",lastUpdated:"Last Updated",editLinkText:"Help us improve this page!",nav:[{text:"Best Practices",link:"/practice/overview.html"},{text:"Cross-version Upgrades",link:"/advance/upgrade.md"},{text:"CHANGES",link:"/changes/overview.html"}],sidebar:[{title:"Quick Start",path:"/guide/overview.html",children:["/guide/overview.md","/guide/version.md","/guide/compatibility.md","/guide/installation.md","/guide/configuration.md","/guide/test.md","/guide/faq.md"]},{title:"Advanced Guide",path:"/advance/directive.html",children:["/advance/directive.md","/advance/rule.md","/advance/priority.md","/advance/variable.md","/advance/log.md","/advance/upgrade.md","/advance/issue.md"]},{title:"Roadmap (Advice Needed)",path:"/roadmap/overview.html",children:[]}]},"/zh-cn/":{selectText:"éæ©è¯­è¨",label:"ç®ä½ä¸­æ",lastUpdated:"æåä¸æ¬¡æ´æ°",editLinkText:"å¸®å©æä»¬æ¹åæ­¤é¡µé¢ï¼",nav:[{text:"æä½³å®è·µ",link:"/zh-cn/practice/overview.html"},{text:"è·¨çæ¬åçº§",link:"/zh-cn/advance/upgrade.md"},{text:"æ´æ°æ¥å¿",link:"/zh-cn/changes/overview.html"}],sidebar:[{title:"å¿«éä¸æ",path:"/zh-cn/guide/overview.html",children:["/zh-cn/guide/overview.md","/zh-cn/guide/version.md","/zh-cn/guide/compatibility.md","/zh-cn/guide/installation.md","/zh-cn/guide/configuration.md","/zh-cn/guide/test.md","/zh-cn/guide/faq.md"]},{title:"è¿é¶æå",path:"/zh-cn/advance/directive.html",children:["/zh-cn/advance/directive.md","/zh-cn/advance/rule.md","/zh-cn/advance/priority.md","/zh-cn/advance/variable.md","/zh-cn/advance/log.md","/zh-cn/advance/upgrade.md","/zh-cn/advance/issue.md"]},{title:"å¼åè®¡åï¼å»ºè®®å¾éï¼",path:"/zh-cn/roadmap/overview.html",children:[]}]}}},locales:{"/":{lang:"en",title:"ngx_waf",description:"A web application firewall module for nginx without complex configuration.'",path:"/"},"/zh-cn/":{lang:"zh-CN",title:"ngx_waf",description:"ä½¿ç¨ç®åç nginx é²ç«å¢æ¨¡å",path:"/zh-cn/"}}};t(333);Ui.component("Badge",(function(){return Promise.all([t.e(0),t.e(3)]).then(t.bind(null,476))})),Ui.component("CodeBlock",(function(){return Promise.all([t.e(0),t.e(4)]).then(t.bind(null,412))})),Ui.component("CodeGroup",(function(){return Promise.all([t.e(0),t.e(5)]).then(t.bind(null,413))}));t(334),t(335);var vs=[{},function(e){e.Vue.mixin({computed:{$dataBlock:function(){return this.$options.__data__block__}}})},{},{},function(e){var n=e.Vue;e.router.options.scrollBehavior=function(e,t,r){if(r)return window.scrollTo({top:r.y,behavior:"smooth"});if(e.hash){if(n.$vuepress.$get("disableScrollBehavior"))return!1;var i=document.querySelector(e.hash);return!!i&&window.scrollTo({top:(a=i,o=document.documentElement,s=o.getBoundingClientRect(),l=a.getBoundingClientRect(),{x:l.left-s.left,y:l.top-s.top}).y,behavior:"smooth"})}return window.scrollTo({top:0,behavior:"smooth"});var a,o,s,l}}],ys=[];function ws(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}t(119);function bs(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _s(e,n,t){return n&&bs(e.prototype,n),t&&bs(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}t(191);t(179);function xs(e,n){return(xs=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(e,n)}t(180),t(181);function Ts(e){return(Ts=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ks(e,n){if(n&&("object"===Io(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Cs(e){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,r=Ts(e);if(n){var i=Ts(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return ks(this,t)}}var Is=function(e){!function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),n&&xs(e,n)}(t,e);var n=Cs(t);function t(){return ws(this,t),n.apply(this,arguments)}return _s(t)}(function(){function e(){ws(this,e),this.store=new Ui({data:{state:{}}})}return _s(e,[{key:"$get",value:function(e){return this.store.state[e]}},{key:"$set",value:function(e,n){Ui.set(this.store.state,e,n)}},{key:"$emit",value:function(){var e;(e=this.store).$emit.apply(e,arguments)}},{key:"$on",value:function(){var e;(e=this.store).$on.apply(e,arguments)}}]),e}());Object.assign(Is.prototype,{getPageAsyncComponent:Ho,getLayoutAsyncComponent:qo,getAsyncComponent:Bo,getVueComponent:Go});var zs={install:function(e){var n=new Is;e.$vuepress=n,e.prototype.$vuepress=n}};t(111);function As(e){e.beforeEach((function(n,t,r){if(Ss(e,n.path))r();else if(/(\/|\.html)$/.test(n.path))if(/\/$/.test(n.path)){var i=n.path.replace(/\/$/,"")+".html";Ss(e,i)?r(i):r()}else r();else{var a=n.path+"/",o=n.path+".html";Ss(e,o)?r(o):Ss(e,a)?r(a):r()}}))}function Ss(e,n){var t=n.toLowerCase();return e.options.routes.some((function(e){return e.path.toLowerCase()===t}))}var Ps={props:{pageKey:String,slotKey:{type:String,default:"default"}},render:function(e){var n=this.pageKey||this.$parent.$page.key;return Wo("pageKey",n),Ui.component(n)||Ui.component(n,Ho(n)),Ui.component(n)?e(n):e("")}},Es={functional:!0,props:{slotKey:String,required:!0},render:function(e,n){var t=n.props,r=n.slots;return e("div",{class:["content__".concat(t.slotKey)]},r()[t.slotKey])}},Os={computed:{openInNewWindowTitle:function(){return this.$themeLocaleConfig.openNewWindowText||"(opens new window)"}}},Us=(t(337),t(338),Object(fs.a)(Os,(function(){var e=this.$createElement,n=this._self._c||e;return n("span",[n("svg",{staticClass:"icon outbound",attrs:{xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",focusable:"false",x:"0px",y:"0px",viewBox:"0 0 100 100",width:"15",height:"15"}},[n("path",{attrs:{fill:"currentColor",d:"M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"}}),this._v(" "),n("polygon",{attrs:{fill:"currentColor",points:"45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"}})]),this._v(" "),n("span",{staticClass:"sr-only"},[this._v(this._s(this.openInNewWindowTitle))])])}),[],!1,null,null,null).exports);function js(){return(js=Object(r.a)(regeneratorRuntime.mark((function e(n){var t,r,i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="undefined"!=typeof window&&window.__VUEPRESS_ROUTER_BASE__?window.__VUEPRESS_ROUTER_BASE__:gs.routerBase||gs.base,As(r=new ko({base:t,mode:"history",fallback:!1,routes:ms,scrollBehavior:function(e,n,t){return t||(e.hash?!Ui.$vuepress.$get("disableScrollBehavior")&&{selector:decodeURIComponent(e.hash)}:{x:0,y:0})}})),i={},e.prev=4,e.next=7,Promise.all(vs.filter((function(e){return"function"==typeof e})).map((function(e){return e({Vue:Ui,options:i,router:r,siteData:gs,isServer:n})})));case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(4),console.error(e.t0);case 12:return a=new Ui(Object.assign(i,{router:r,render:function(e){return e("div",{attrs:{id:"app"}},[e("RouterView",{ref:"layout"}),e("div",{class:"global-ui"},ys.map((function(n){return e(n)})))])}})),e.abrupt("return",{app:a,router:r});case 14:case"end":return e.stop()}}),e,null,[[4,9]])})))).apply(this,arguments)}Ui.config.productionTip=!1,Ui.use(ko),Ui.use(zs),Ui.mixin(function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ui;Co(n),t.$vuepress.$set("siteData",n);var r=e(t.$vuepress.$get("siteData")),i=new r,a=Object.getOwnPropertyDescriptors(Object.getPrototypeOf(i)),o={};return Object.keys(a).reduce((function(e,n){return n.startsWith("$")&&(e[n]=a[n].get),e}),o),{computed:o}}((function(e){return function(){function n(){ws(this,n)}return _s(n,[{key:"setPage",value:function(e){this.__page=e}},{key:"$site",get:function(){return e}},{key:"$themeConfig",get:function(){return this.$site.themeConfig}},{key:"$frontmatter",get:function(){return this.$page.frontmatter}},{key:"$localeConfig",get:function(){var e,n,t=this.$site.locales,r=void 0===t?{}:t;for(var i in r)"/"===i?n=r[i]:0===this.$page.path.indexOf(i)&&(e=r[i]);return e||n||{}}},{key:"$siteTitle",get:function(){return this.$localeConfig.title||this.$site.title||""}},{key:"$canonicalUrl",get:function(){var e=this.$page.frontmatter.canonicalUrl;return"string"==typeof e&&e}},{key:"$title",get:function(){var e=this.$page,n=this.$page.frontmatter.metaTitle;if("string"==typeof n)return n;var t=this.$siteTitle,r=e.frontmatter.home?null:e.frontmatter.title||e.title;return t?r?r+" | "+t:t:r||"VuePress"}},{key:"$description",get:function(){var e=function(e){if(e){var n=e.filter((function(e){return"description"===e.name}))[0];if(n)return n.content}}(this.$page.frontmatter.meta);return e||(this.$page.frontmatter.description||this.$localeConfig.description||this.$site.description||"")}},{key:"$lang",get:function(){return this.$page.frontmatter.lang||this.$localeConfig.lang||"en-US"}},{key:"$localePath",get:function(){return this.$localeConfig.path||"/"}},{key:"$themeLocaleConfig",get:function(){return(this.$site.themeConfig.locales||{})[this.$localePath]||{}}},{key:"$page",get:function(){return this.__page?this.__page:function(e,n){for(var t=0;t<e.length;t++){var r=e[t];if(r.path.toLowerCase()===n.toLowerCase())return r}return{path:"",frontmatter:{}}}(this.$site.pages,this.$route.path)}}]),n}()}),gs)),Ui.component("Content",Ps),Ui.component("ContentSlotsDistributor",Es),Ui.component("OutboundLink",Us),Ui.component("ClientOnly",{functional:!0,render:function(e,n){var t=n.parent,r=n.children;if(t._isMounted)return r;t.$once("hook:mounted",(function(){t.$forceUpdate()}))}}),Ui.component("Layout",qo("Layout")),Ui.component("NotFound",qo("NotFound")),Ui.prototype.$withBase=function(e){var n=this.$site.base;return"/"===e.charAt(0)?n+e.slice(1):e},window.__VUEPRESS__={version:"1.9.5",hash:"322ae79"},function(e){return js.apply(this,arguments)}(!1).then((function(e){var n=e.app;e.router.onReady((function(){n.$mount("#app")}))}))}]);